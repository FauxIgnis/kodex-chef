(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function R0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hm={exports:{}},cc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y1;function wk(){if(y1)return cc;y1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:n,type:r,key:l,ref:s!==void 0?s:null,props:o}}return cc.Fragment=e,cc.jsx=t,cc.jsxs=t,cc}var b1;function Sk(){return b1||(b1=1,Hm.exports=wk()),Hm.exports}var x=Sk(),Um={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v1;function Ek(){if(v1)return Ge;v1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),b=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=b&&D[b]||D["@@iterator"],typeof D=="function"?D:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function N(D,V,W){this.props=D,this.context=V,this.refs=C,this.updater=W||w}N.prototype.isReactComponent={},N.prototype.setState=function(D,V){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,V,"setState")},N.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function L(){}L.prototype=N.prototype;function _(D,V,W){this.props=D,this.context=V,this.refs=C,this.updater=W||w}var k=_.prototype=new L;k.constructor=_,S(k,N.prototype),k.isPureReactComponent=!0;var $=Array.isArray;function z(){}var H={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function re(D,V,W){var oe=W.ref;return{$$typeof:n,type:D,key:V,ref:oe!==void 0?oe:null,props:W}}function ge(D,V){return re(D.type,V,D.props)}function Ce(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function pe(D){var V={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(W){return V[W]})}var ae=/\/+/g;function ie(D,V){return typeof D=="object"&&D!==null&&D.key!=null?pe(""+D.key):V.toString(36)}function he(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(z,z):(D.status="pending",D.then(function(V){D.status==="pending"&&(D.status="fulfilled",D.value=V)},function(V){D.status==="pending"&&(D.status="rejected",D.reason=V)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function O(D,V,W,oe,ue){var ve=typeof D;(ve==="undefined"||ve==="boolean")&&(D=null);var ze=!1;if(D===null)ze=!0;else switch(ve){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(D.$$typeof){case n:case e:ze=!0;break;case p:return ze=D._init,O(ze(D._payload),V,W,oe,ue)}}if(ze)return ue=ue(D),ze=oe===""?"."+ie(D,0):oe,$(ue)?(W="",ze!=null&&(W=ze.replace(ae,"$&/")+"/"),O(ue,V,W,"",function(mt){return mt})):ue!=null&&(Ce(ue)&&(ue=ge(ue,W+(ue.key==null||D&&D.key===ue.key?"":(""+ue.key).replace(ae,"$&/")+"/")+ze)),V.push(ue)),1;ze=0;var se=oe===""?".":oe+":";if($(D))for(var Ie=0;Ie<D.length;Ie++)oe=D[Ie],ve=se+ie(oe,Ie),ze+=O(oe,V,W,ve,ue);else if(Ie=v(D),typeof Ie=="function")for(D=Ie.call(D),Ie=0;!(oe=D.next()).done;)oe=oe.value,ve=se+ie(oe,Ie++),ze+=O(oe,V,W,ve,ue);else if(ve==="object"){if(typeof D.then=="function")return O(he(D),V,W,oe,ue);throw V=String(D),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ze}function R(D,V,W){if(D==null)return D;var oe=[],ue=0;return O(D,oe,"","",function(ve){return V.call(W,ve,ue++)}),oe}function I(D){if(D._status===-1){var V=D._result;V=V(),V.then(function(W){(D._status===0||D._status===-1)&&(D._status=1,D._result=W)},function(W){(D._status===0||D._status===-1)&&(D._status=2,D._result=W)}),D._status===-1&&(D._status=0,D._result=V)}if(D._status===1)return D._result.default;throw D._result}var ee=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},ce={map:R,forEach:function(D,V,W){R(D,function(){V.apply(this,arguments)},W)},count:function(D){var V=0;return R(D,function(){V++}),V},toArray:function(D){return R(D,function(V){return V})||[]},only:function(D){if(!Ce(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Ge.Activity=m,Ge.Children=ce,Ge.Component=N,Ge.Fragment=t,Ge.Profiler=s,Ge.PureComponent=_,Ge.StrictMode=r,Ge.Suspense=d,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(D){return H.H.useMemoCache(D)}},Ge.cache=function(D){return function(){return D.apply(null,arguments)}},Ge.cacheSignal=function(){return null},Ge.cloneElement=function(D,V,W){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var oe=S({},D.props),ue=D.key;if(V!=null)for(ve in V.key!==void 0&&(ue=""+V.key),V)!Y.call(V,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&V.ref===void 0||(oe[ve]=V[ve]);var ve=arguments.length-2;if(ve===1)oe.children=W;else if(1<ve){for(var ze=Array(ve),se=0;se<ve;se++)ze[se]=arguments[se+2];oe.children=ze}return re(D.type,ue,oe)},Ge.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},Ge.createElement=function(D,V,W){var oe,ue={},ve=null;if(V!=null)for(oe in V.key!==void 0&&(ve=""+V.key),V)Y.call(V,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ue[oe]=V[oe]);var ze=arguments.length-2;if(ze===1)ue.children=W;else if(1<ze){for(var se=Array(ze),Ie=0;Ie<ze;Ie++)se[Ie]=arguments[Ie+2];ue.children=se}if(D&&D.defaultProps)for(oe in ze=D.defaultProps,ze)ue[oe]===void 0&&(ue[oe]=ze[oe]);return re(D,ve,ue)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(D){return{$$typeof:u,render:D}},Ge.isValidElement=Ce,Ge.lazy=function(D){return{$$typeof:p,_payload:{_status:-1,_result:D},_init:I}},Ge.memo=function(D,V){return{$$typeof:h,type:D,compare:V===void 0?null:V}},Ge.startTransition=function(D){var V=H.T,W={};H.T=W;try{var oe=D(),ue=H.S;ue!==null&&ue(W,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(z,ee)}catch(ve){ee(ve)}finally{V!==null&&W.types!==null&&(V.types=W.types),H.T=V}},Ge.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Ge.use=function(D){return H.H.use(D)},Ge.useActionState=function(D,V,W){return H.H.useActionState(D,V,W)},Ge.useCallback=function(D,V){return H.H.useCallback(D,V)},Ge.useContext=function(D){return H.H.useContext(D)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(D,V){return H.H.useDeferredValue(D,V)},Ge.useEffect=function(D,V){return H.H.useEffect(D,V)},Ge.useEffectEvent=function(D){return H.H.useEffectEvent(D)},Ge.useId=function(){return H.H.useId()},Ge.useImperativeHandle=function(D,V,W){return H.H.useImperativeHandle(D,V,W)},Ge.useInsertionEffect=function(D,V){return H.H.useInsertionEffect(D,V)},Ge.useLayoutEffect=function(D,V){return H.H.useLayoutEffect(D,V)},Ge.useMemo=function(D,V){return H.H.useMemo(D,V)},Ge.useOptimistic=function(D,V){return H.H.useOptimistic(D,V)},Ge.useReducer=function(D,V,W){return H.H.useReducer(D,V,W)},Ge.useRef=function(D){return H.H.useRef(D)},Ge.useState=function(D){return H.H.useState(D)},Ge.useSyncExternalStore=function(D,V,W){return H.H.useSyncExternalStore(D,V,W)},Ge.useTransition=function(){return H.H.useTransition()},Ge.version="19.2.0",Ge}var x1;function D0(){return x1||(x1=1,Um.exports=Ek()),Um.exports}var T=D0();const te=R0(T);var $m={exports:{}},uc={},qm={exports:{}},Pm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w1;function Ck(){return w1||(w1=1,function(n){function e(O,R){var I=O.length;O.push(R);e:for(;0<I;){var ee=I-1>>>1,ce=O[ee];if(0<s(ce,R))O[ee]=R,O[I]=ce,I=ee;else break e}}function t(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var R=O[0],I=O.pop();if(I!==R){O[0]=I;e:for(var ee=0,ce=O.length,D=ce>>>1;ee<D;){var V=2*(ee+1)-1,W=O[V],oe=V+1,ue=O[oe];if(0>s(W,I))oe<ce&&0>s(ue,W)?(O[ee]=ue,O[oe]=I,ee=oe):(O[ee]=W,O[V]=I,ee=V);else if(oe<ce&&0>s(ue,I))O[ee]=ue,O[oe]=I,ee=oe;else break e}}return R}function s(O,R){var I=O.sortIndex-R.sortIndex;return I!==0?I:O.id-R.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],h=[],p=1,m=null,b=3,v=!1,w=!1,S=!1,C=!1,N=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function k(O){for(var R=t(h);R!==null;){if(R.callback===null)r(h);else if(R.startTime<=O)r(h),R.sortIndex=R.expirationTime,e(d,R);else break;R=t(h)}}function $(O){if(S=!1,k(O),!w)if(t(d)!==null)w=!0,z||(z=!0,pe());else{var R=t(h);R!==null&&he($,R.startTime-O)}}var z=!1,H=-1,Y=5,re=-1;function ge(){return C?!0:!(n.unstable_now()-re<Y)}function Ce(){if(C=!1,z){var O=n.unstable_now();re=O;var R=!0;try{e:{w=!1,S&&(S=!1,L(H),H=-1),v=!0;var I=b;try{t:{for(k(O),m=t(d);m!==null&&!(m.expirationTime>O&&ge());){var ee=m.callback;if(typeof ee=="function"){m.callback=null,b=m.priorityLevel;var ce=ee(m.expirationTime<=O);if(O=n.unstable_now(),typeof ce=="function"){m.callback=ce,k(O),R=!0;break t}m===t(d)&&r(d),k(O)}else r(d);m=t(d)}if(m!==null)R=!0;else{var D=t(h);D!==null&&he($,D.startTime-O),R=!1}}break e}finally{m=null,b=I,v=!1}R=void 0}}finally{R?pe():z=!1}}}var pe;if(typeof _=="function")pe=function(){_(Ce)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ie=ae.port2;ae.port1.onmessage=Ce,pe=function(){ie.postMessage(null)}}else pe=function(){N(Ce,0)};function he(O,R){H=N(function(){O(n.unstable_now())},R)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(O){switch(b){case 1:case 2:case 3:var R=3;break;default:R=b}var I=b;b=R;try{return O()}finally{b=I}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(O,R){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var I=b;b=O;try{return R()}finally{b=I}},n.unstable_scheduleCallback=function(O,R,I){var ee=n.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?ee+I:ee):I=ee,O){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=I+ce,O={id:p++,callback:R,priorityLevel:O,startTime:I,expirationTime:ce,sortIndex:-1},I>ee?(O.sortIndex=I,e(h,O),t(d)===null&&O===t(h)&&(S?(L(H),H=-1):S=!0,he($,I-ee))):(O.sortIndex=ce,e(d,O),w||v||(w=!0,z||(z=!0,pe()))),O},n.unstable_shouldYield=ge,n.unstable_wrapCallback=function(O){var R=b;return function(){var I=b;b=R;try{return O.apply(this,arguments)}finally{b=I}}}}(Pm)),Pm}var S1;function Tk(){return S1||(S1=1,qm.exports=Ck()),qm.exports}var Vm={exports:{}},qn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E1;function Nk(){if(E1)return qn;E1=1;var n=D0();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,qn.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(d,h,null,p)},qn.flushSync=function(d){var h=l.T,p=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=h,r.p=p,r.d.f()}},qn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(d,h))},qn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},qn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:b,fetchPriority:v}):p==="script"&&r.d.X(d,{crossOrigin:m,integrity:b,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},qn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(d)},qn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=u(p,h.crossOrigin);r.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},qn.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(d)},qn.requestFormReset=function(d){r.d.r(d)},qn.unstable_batchedUpdates=function(d,h){return d(h)},qn.useFormState=function(d,h,p){return l.H.useFormState(d,h,p)},qn.useFormStatus=function(){return l.H.useHostTransitionStatus()},qn.version="19.2.0",qn}var C1;function gE(){if(C1)return Vm.exports;C1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Vm.exports=Nk(),Vm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1;function Ak(){if(T1)return uc;T1=1;var n=Tk(),e=D0(),t=gE();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function l(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(r(188))}function h(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var c=i,f=a;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return d(g),i;if(y===f)return d(g),a;y=y.sibling}throw Error(r(188))}if(c.return!==f.return)c=g,f=y;else{for(var E=!1,A=g.child;A;){if(A===c){E=!0,c=g,f=y;break}if(A===f){E=!0,f=g,c=y;break}A=A.sibling}if(!E){for(A=y.child;A;){if(A===c){E=!0,c=y,f=g;break}if(A===f){E=!0,f=y,c=g;break}A=A.sibling}if(!E)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:a}function p(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=p(i),a!==null)return a;i=i.sibling}return null}var m=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),_=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),ge=Symbol.for("react.memo_cache_sentinel"),Ce=Symbol.iterator;function pe(i){return i===null||typeof i!="object"?null:(i=Ce&&i[Ce]||i["@@iterator"],typeof i=="function"?i:null)}var ae=Symbol.for("react.client.reference");function ie(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ae?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case S:return"Fragment";case N:return"Profiler";case C:return"StrictMode";case $:return"Suspense";case z:return"SuspenseList";case re:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case w:return"Portal";case _:return i.displayName||"Context";case L:return(i._context.displayName||"Context")+".Consumer";case k:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case H:return a=i.displayName||null,a!==null?a:ie(i.type)||"Memo";case Y:a=i._payload,i=i._init;try{return ie(i(a))}catch{}}return null}var he=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},ee=[],ce=-1;function D(i){return{current:i}}function V(i){0>ce||(i.current=ee[ce],ee[ce]=null,ce--)}function W(i,a){ce++,ee[ce]=i.current,i.current=a}var oe=D(null),ue=D(null),ve=D(null),ze=D(null);function se(i,a){switch(W(ve,a),W(ue,i),W(oe,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?Ux(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=Ux(a),i=$x(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}V(oe),W(oe,i)}function Ie(){V(oe),V(ue),V(ve)}function mt(i){i.memoizedState!==null&&W(ze,i);var a=oe.current,c=$x(a,i.type);a!==c&&(W(ue,i),W(oe,c))}function Vt(i){ue.current===i&&(V(oe),V(ue)),ze.current===i&&(V(ze),sc._currentValue=I)}var bn,tr;function Ft(i){if(bn===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);bn=a&&a[1]||"",tr=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bn+i+tr}var Kn=!1;function Rt(i,a){if(!i||Kn)return"";Kn=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(Q){var F=Q}Reflect.construct(i,[],Z)}else{try{Z.call()}catch(Q){F=Q}i.call(Z.prototype)}}else{try{throw Error()}catch(Q){F=Q}(Z=i())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(Q){if(Q&&F&&typeof Q.stack=="string")return[Q.stack,F.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=f.DetermineComponentFrameRoot(),E=y[0],A=y[1];if(E&&A){var j=E.split(`
`),P=A.split(`
`);for(g=f=0;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;for(;g<P.length&&!P[g].includes("DetermineComponentFrameRoot");)g++;if(f===j.length||g===P.length)for(f=j.length-1,g=P.length-1;1<=f&&0<=g&&j[f]!==P[g];)g--;for(;1<=f&&0<=g;f--,g--)if(j[f]!==P[g]){if(f!==1||g!==1)do if(f--,g--,0>g||j[f]!==P[g]){var X=`
`+j[f].replace(" at new "," at ");return i.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",i.displayName)),X}while(1<=f&&0<=g);break}}}finally{Kn=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Ft(c):""}function kn(i,a){switch(i.tag){case 26:case 27:case 5:return Ft(i.type);case 16:return Ft("Lazy");case 13:return i.child!==a&&a!==null?Ft("Suspense Fallback"):Ft("Suspense");case 19:return Ft("SuspenseList");case 0:case 15:return Rt(i.type,!1);case 11:return Rt(i.type.render,!1);case 1:return Rt(i.type,!0);case 31:return Ft("Activity");default:return""}}function Hn(i){try{var a="",c=null;do a+=kn(i,c),c=i,i=i.return;while(i);return a}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Ae=Object.prototype.hasOwnProperty,tn=n.unstable_scheduleCallback,ct=n.unstable_cancelCallback,Pe=n.unstable_shouldYield,It=n.unstable_requestPaint,tt=n.unstable_now,Wn=n.unstable_getCurrentPriorityLevel,Gt=n.unstable_ImmediatePriority,me=n.unstable_UserBlockingPriority,Se=n.unstable_NormalPriority,Ve=n.unstable_LowPriority,Ke=n.unstable_IdlePriority,Dt=n.log,Qt=n.unstable_setDisableYieldValue,gr=null,K=null;function we(i){if(typeof Dt=="function"&&Qt(i),K&&typeof K.setStrictMode=="function")try{K.setStrictMode(gr,i)}catch{}}var Te=Math.clz32?Math.clz32:bt,at=Math.log,We=Math.LN2;function bt(i){return i>>>=0,i===0?32:31-(at(i)/We|0)|0}var Yt=256,Qn=262144,yr=4194304;function _t(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function M(i,a,c){var f=i.pendingLanes;if(f===0)return 0;var g=0,y=i.suspendedLanes,E=i.pingedLanes;i=i.warmLanes;var A=f&134217727;return A!==0?(f=A&~y,f!==0?g=_t(f):(E&=A,E!==0?g=_t(E):c||(c=A&~i,c!==0&&(g=_t(c))))):(A=f&~y,A!==0?g=_t(A):E!==0?g=_t(E):c||(c=f&~i,c!==0&&(g=_t(c)))),g===0?0:a!==0&&a!==g&&(a&y)===0&&(y=g&-g,c=a&-a,y>=c||y===32&&(c&4194048)!==0)?a:g}function G(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function le(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Me(){var i=yr;return yr<<=1,(yr&62914560)===0&&(yr=4194304),i}function ut(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function $e(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function xe(i,a,c,f,g,y){var E=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var A=i.entanglements,j=i.expirationTimes,P=i.hiddenUpdates;for(c=E&~c;0<c;){var X=31-Te(c),Z=1<<X;A[X]=0,j[X]=-1;var F=P[X];if(F!==null)for(P[X]=null,X=0;X<F.length;X++){var Q=F[X];Q!==null&&(Q.lane&=-536870913)}c&=~Z}f!==0&&Ee(i,f,0),y!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=y&~(E&~a))}function Ee(i,a,c){i.pendingLanes|=a,i.suspendedLanes&=~a;var f=31-Te(a);i.entangledLanes|=a,i.entanglements[f]=i.entanglements[f]|1073741824|c&261930}function Oe(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var f=31-Te(c),g=1<<f;g&a|i[f]&a&&(i[f]|=a),c&=~g}}function dt(i,a){var c=a&-a;return c=(c&42)!==0?1:Nt(c),(c&(i.suspendedLanes|a))!==0?0:c}function Nt(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Mn(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function lo(){var i=R.p;return i!==0?i:(i=window.event,i===void 0?32:u1(i.type))}function sa(i,a){var c=R.p;try{return R.p=i,a()}finally{R.p=c}}var ai=Math.random().toString(36).slice(2),nn="__reactFiber$"+ai,Un="__reactProps$"+ai,us="__reactContainer$"+ai,gl="__reactEvents$"+ai,mu="__reactListeners$"+ai,oa="__reactHandles$"+ai,gu="__reactResources$"+ai,co="__reactMarker$"+ai;function yl(i){delete i[nn],delete i[Un],delete i[gl],delete i[mu],delete i[oa]}function Yn(i){var a=i[nn];if(a)return a;for(var c=i.parentNode;c;){if(a=c[us]||c[nn]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=Wx(i);i!==null;){if(c=i[nn])return c;i=Wx(i)}return a}i=c,c=i.parentNode}return null}function Oi(i){if(i=i[nn]||i[us]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function ds(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function fs(i){var a=i[gu];return a||(a=i[gu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function un(i){i[co]=!0}var yu=new Set,uo={};function Ri(i,a){de(i,a),de(i+"Capture",a)}function de(i,a){for(uo[i]=a,i=0;i<a.length;i++)yu.add(a[i])}var je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),et={},vt={};function rn(i){return Ae.call(vt,i)?!0:Ae.call(et,i)?!1:je.test(i)?vt[i]=!0:(et[i]=!0,!1)}function $n(i,a,c){if(rn(a))if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+c)}}function br(i,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+c)}}function nr(i,a,c,f){if(f===null)i.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(a,c,""+f)}}function Mt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function vr(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function bu(i,a,c){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var g=f.get,y=f.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(E){c=""+E,y.call(this,E)}}),Object.defineProperty(i,a,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function aa(i){if(!i._valueTracker){var a=vr(i)?"checked":"value";i._valueTracker=bu(i,a,""+i[a])}}function bl(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return i&&(f=vr(i)?i.checked?"true":"false":i.value),i=f,i!==c?(a.setValue(i),!0):!1}function la(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ih=/[\n"\\]/g;function rr(i){return i.replace(Ih,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function vl(i,a,c,f,g,y,E,A){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),a!=null?E==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+Mt(a)):i.value!==""+Mt(a)&&(i.value=""+Mt(a)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),a!=null?ca(i,E,Mt(a)):c!=null?ca(i,E,Mt(c)):f!=null&&i.removeAttribute("value"),g==null&&y!=null&&(i.defaultChecked=!!y),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+Mt(A):i.removeAttribute("name")}function fo(i,a,c,f,g,y,E,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),a!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){aa(i);return}c=c!=null?""+Mt(c):"",a=a!=null?""+Mt(a):c,A||a===i.value||(i.value=a),i.defaultValue=a}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=A?i.checked:!!f,i.defaultChecked=!!f,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E),aa(i)}function ca(i,a,c){a==="number"&&la(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function On(i,a,c,f){if(i=i.options,a){a={};for(var g=0;g<c.length;g++)a["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=a.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&f&&(i[c].defaultSelected=!0)}else{for(c=""+Mt(c),a=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function vu(i,a,c){if(a!=null&&(a=""+Mt(a),a!==i.value&&(i.value=a),c==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=c!=null?""+Mt(c):""}function ua(i,a,c,f){if(a==null){if(f!=null){if(c!=null)throw Error(r(92));if(he(f)){if(1<f.length)throw Error(r(93));f=f[0]}c=f}c==null&&(c=""),a=c}c=Mt(a),i.defaultValue=c,f=i.textContent,f===c&&f!==""&&f!==null&&(i.value=f),aa(i)}function qe(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var xu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dn(i,a,c){var f=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":f?i.setProperty(a,c):typeof c!="number"||c===0||xu.has(a)?a==="float"?i.cssFloat=c:i[a]=(""+c).trim():i[a]=c+"px"}function xt(i,a,c){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var g in a)f=a[g],a.hasOwnProperty(g)&&c[g]!==f&&dn(i,g,f)}else for(var y in a)a.hasOwnProperty(y)&&dn(i,y,a[y])}function hs(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Di=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ps(i){return xl.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ye(){}var Re=null;function Qe(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var it=null,Kt=null;function Dr(i){var a=Oi(i);if(a&&(i=a.stateNode)){var c=i[Un]||null;e:switch(i=a.stateNode,a.type){case"input":if(vl(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+rr(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==i&&f.form===i.form){var g=f[Un]||null;if(!g)throw Error(r(90));vl(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<c.length;a++)f=c[a],f.form===i.form&&bl(f)}break e;case"textarea":vu(i,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&On(i,!!c.multiple,a,!1)}}}var wl=!1;function wu(i,a,c){if(wl)return i(a,c);wl=!0;try{var f=i(a);return f}finally{if(wl=!1,(it!==null||Kt!==null)&&(ld(),it&&(a=it,i=Kt,Kt=it=null,Dr(a),i)))for(a=0;a<i.length;a++)Dr(i[a])}}function Sl(i,a){var c=i.stateNode;if(c===null)return null;var f=c[Un]||null;if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,a,typeof c));return c}var _i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hh=!1;if(_i)try{var El={};Object.defineProperty(El,"passive",{get:function(){Hh=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{Hh=!1}var ms=null,Uh=null,Su=null;function $y(){if(Su)return Su;var i,a=Uh,c=a.length,f,g="value"in ms?ms.value:ms.textContent,y=g.length;for(i=0;i<c&&a[i]===g[i];i++);var E=c-i;for(f=1;f<=E&&a[c-f]===g[y-f];f++);return Su=g.slice(i,1<f?1-f:void 0)}function Eu(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Cu(){return!0}function qy(){return!1}function ir(i){function a(c,f,g,y,E){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(c=i[A],this[A]=c?c(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Cu:qy,this.isPropagationStopped=qy,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Cu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Cu)},persist:function(){},isPersistent:Cu}),a}var ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tu=ir(ho),Cl=m({},ho,{view:0,detail:0}),vN=ir(Cl),$h,qh,Tl,Nu=m({},Cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Tl&&(Tl&&i.type==="mousemove"?($h=i.screenX-Tl.screenX,qh=i.screenY-Tl.screenY):qh=$h=0,Tl=i),$h)},movementY:function(i){return"movementY"in i?i.movementY:qh}}),Py=ir(Nu),xN=m({},Nu,{dataTransfer:0}),wN=ir(xN),SN=m({},Cl,{relatedTarget:0}),Ph=ir(SN),EN=m({},ho,{animationName:0,elapsedTime:0,pseudoElement:0}),CN=ir(EN),TN=m({},ho,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),NN=ir(TN),AN=m({},ho,{data:0}),Vy=ir(AN),kN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ON={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RN(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=ON[i])?!!a[i]:!1}function Vh(){return RN}var DN=m({},Cl,{key:function(i){if(i.key){var a=kN[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Eu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?MN[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vh,charCode:function(i){return i.type==="keypress"?Eu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Eu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),_N=ir(DN),jN=m({},Nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fy=ir(jN),LN=m({},Cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vh}),BN=ir(LN),zN=m({},ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),IN=ir(zN),HN=m({},Nu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),UN=ir(HN),$N=m({},ho,{newState:0,oldState:0}),qN=ir($N),PN=[9,13,27,32],Fh=_i&&"CompositionEvent"in window,Nl=null;_i&&"documentMode"in document&&(Nl=document.documentMode);var VN=_i&&"TextEvent"in window&&!Nl,Gy=_i&&(!Fh||Nl&&8<Nl&&11>=Nl),Ky=" ",Wy=!1;function Qy(i,a){switch(i){case"keyup":return PN.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yy(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var da=!1;function FN(i,a){switch(i){case"compositionend":return Yy(a);case"keypress":return a.which!==32?null:(Wy=!0,Ky);case"textInput":return i=a.data,i===Ky&&Wy?null:i;default:return null}}function GN(i,a){if(da)return i==="compositionend"||!Fh&&Qy(i,a)?(i=$y(),Su=Uh=ms=null,da=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Gy&&a.locale!=="ko"?null:a.data;default:return null}}var KN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xy(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!KN[i.type]:a==="textarea"}function Jy(i,a,c,f){it?Kt?Kt.push(f):Kt=[f]:it=f,a=md(a,"onChange"),0<a.length&&(c=new Tu("onChange","change",null,c,f),i.push({event:c,listeners:a}))}var Al=null,kl=null;function WN(i){jx(i,0)}function Au(i){var a=ds(i);if(bl(a))return i}function Zy(i,a){if(i==="change")return a}var eb=!1;if(_i){var Gh;if(_i){var Kh="oninput"in document;if(!Kh){var tb=document.createElement("div");tb.setAttribute("oninput","return;"),Kh=typeof tb.oninput=="function"}Gh=Kh}else Gh=!1;eb=Gh&&(!document.documentMode||9<document.documentMode)}function nb(){Al&&(Al.detachEvent("onpropertychange",rb),kl=Al=null)}function rb(i){if(i.propertyName==="value"&&Au(kl)){var a=[];Jy(a,kl,i,Qe(i)),wu(WN,a)}}function QN(i,a,c){i==="focusin"?(nb(),Al=a,kl=c,Al.attachEvent("onpropertychange",rb)):i==="focusout"&&nb()}function YN(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Au(kl)}function XN(i,a){if(i==="click")return Au(a)}function JN(i,a){if(i==="input"||i==="change")return Au(a)}function ZN(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var xr=typeof Object.is=="function"?Object.is:ZN;function Ml(i,a){if(xr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!Ae.call(a,g)||!xr(i[g],a[g]))return!1}return!0}function ib(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sb(i,a){var c=ib(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=a&&f>=a)return{node:c,offset:a-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=ib(c)}}function ob(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?ob(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function ab(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=la(i.document);a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=la(i.document)}return a}function Wh(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var eA=_i&&"documentMode"in document&&11>=document.documentMode,fa=null,Qh=null,Ol=null,Yh=!1;function lb(i,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Yh||fa==null||fa!==la(f)||(f=fa,"selectionStart"in f&&Wh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ol&&Ml(Ol,f)||(Ol=f,f=md(Qh,"onSelect"),0<f.length&&(a=new Tu("onSelect","select",null,a,c),i.push({event:a,listeners:f}),a.target=fa)))}function po(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var ha={animationend:po("Animation","AnimationEnd"),animationiteration:po("Animation","AnimationIteration"),animationstart:po("Animation","AnimationStart"),transitionrun:po("Transition","TransitionRun"),transitionstart:po("Transition","TransitionStart"),transitioncancel:po("Transition","TransitionCancel"),transitionend:po("Transition","TransitionEnd")},Xh={},cb={};_i&&(cb=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function mo(i){if(Xh[i])return Xh[i];if(!ha[i])return i;var a=ha[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in cb)return Xh[i]=a[c];return i}var ub=mo("animationend"),db=mo("animationiteration"),fb=mo("animationstart"),tA=mo("transitionrun"),nA=mo("transitionstart"),rA=mo("transitioncancel"),hb=mo("transitionend"),pb=new Map,Jh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jh.push("scrollEnd");function Zr(i,a){pb.set(i,a),Ri(a,[i])}var ku=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},_r=[],pa=0,Zh=0;function Mu(){for(var i=pa,a=Zh=pa=0;a<i;){var c=_r[a];_r[a++]=null;var f=_r[a];_r[a++]=null;var g=_r[a];_r[a++]=null;var y=_r[a];if(_r[a++]=null,f!==null&&g!==null){var E=f.pending;E===null?g.next=g:(g.next=E.next,E.next=g),f.pending=g}y!==0&&mb(c,g,y)}}function Ou(i,a,c,f){_r[pa++]=i,_r[pa++]=a,_r[pa++]=c,_r[pa++]=f,Zh|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function ep(i,a,c,f){return Ou(i,a,c,f),Ru(i)}function go(i,a){return Ou(i,null,null,a),Ru(i)}function mb(i,a,c){i.lanes|=c;var f=i.alternate;f!==null&&(f.lanes|=c);for(var g=!1,y=i.return;y!==null;)y.childLanes|=c,f=y.alternate,f!==null&&(f.childLanes|=c),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(g=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,g&&a!==null&&(g=31-Te(c),i=y.hiddenUpdates,f=i[g],f===null?i[g]=[a]:f.push(a),a.lane=c|536870912),y):null}function Ru(i){if(50<Jl)throw Jl=0,cm=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var ma={};function iA(i,a,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(i,a,c,f){return new iA(i,a,c,f)}function tp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ji(i,a){var c=i.alternate;return c===null?(c=wr(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function gb(i,a){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,a=c.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Du(i,a,c,f,g,y){var E=0;if(f=i,typeof i=="function")tp(i)&&(E=1);else if(typeof i=="string")E=ck(i,c,oe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case re:return i=wr(31,c,a,g),i.elementType=re,i.lanes=y,i;case S:return yo(c.children,g,y,a);case C:E=8,g|=24;break;case N:return i=wr(12,c,a,g|2),i.elementType=N,i.lanes=y,i;case $:return i=wr(13,c,a,g),i.elementType=$,i.lanes=y,i;case z:return i=wr(19,c,a,g),i.elementType=z,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case _:E=10;break e;case L:E=9;break e;case k:E=11;break e;case H:E=14;break e;case Y:E=16,f=null;break e}E=29,c=Error(r(130,i===null?"null":typeof i,"")),f=null}return a=wr(E,c,a,g),a.elementType=i,a.type=f,a.lanes=y,a}function yo(i,a,c,f){return i=wr(7,i,f,a),i.lanes=c,i}function np(i,a,c){return i=wr(6,i,null,a),i.lanes=c,i}function yb(i){var a=wr(18,null,null,0);return a.stateNode=i,a}function rp(i,a,c){return a=wr(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var bb=new WeakMap;function jr(i,a){if(typeof i=="object"&&i!==null){var c=bb.get(i);return c!==void 0?c:(a={value:i,source:a,stack:Hn(a)},bb.set(i,a),a)}return{value:i,source:a,stack:Hn(a)}}var ga=[],ya=0,_u=null,Rl=0,Lr=[],Br=0,gs=null,li=1,ci="";function Li(i,a){ga[ya++]=Rl,ga[ya++]=_u,_u=i,Rl=a}function vb(i,a,c){Lr[Br++]=li,Lr[Br++]=ci,Lr[Br++]=gs,gs=i;var f=li;i=ci;var g=32-Te(f)-1;f&=~(1<<g),c+=1;var y=32-Te(a)+g;if(30<y){var E=g-g%5;y=(f&(1<<E)-1).toString(32),f>>=E,g-=E,li=1<<32-Te(a)+g|c<<g|f,ci=y+i}else li=1<<y|c<<g|f,ci=i}function ip(i){i.return!==null&&(Li(i,1),vb(i,1,0))}function sp(i){for(;i===_u;)_u=ga[--ya],ga[ya]=null,Rl=ga[--ya],ga[ya]=null;for(;i===gs;)gs=Lr[--Br],Lr[Br]=null,ci=Lr[--Br],Lr[Br]=null,li=Lr[--Br],Lr[Br]=null}function xb(i,a){Lr[Br++]=li,Lr[Br++]=ci,Lr[Br++]=gs,li=a.id,ci=a.overflow,gs=i}var Rn=null,jt=null,lt=!1,ys=null,zr=!1,op=Error(r(519));function bs(i){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Dl(jr(a,i)),op}function wb(i){var a=i.stateNode,c=i.type,f=i.memoizedProps;switch(a[nn]=i,a[Un]=f,c){case"dialog":rt("cancel",a),rt("close",a);break;case"iframe":case"object":case"embed":rt("load",a);break;case"video":case"audio":for(c=0;c<ec.length;c++)rt(ec[c],a);break;case"source":rt("error",a);break;case"img":case"image":case"link":rt("error",a),rt("load",a);break;case"details":rt("toggle",a);break;case"input":rt("invalid",a),fo(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":rt("invalid",a);break;case"textarea":rt("invalid",a),ua(a,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||f.suppressHydrationWarning===!0||Ix(a.textContent,c)?(f.popover!=null&&(rt("beforetoggle",a),rt("toggle",a)),f.onScroll!=null&&rt("scroll",a),f.onScrollEnd!=null&&rt("scrollend",a),f.onClick!=null&&(a.onclick=ye),a=!0):a=!1,a||bs(i,!0)}function Sb(i){for(Rn=i.return;Rn;)switch(Rn.tag){case 5:case 31:case 13:zr=!1;return;case 27:case 3:zr=!0;return;default:Rn=Rn.return}}function ba(i){if(i!==Rn)return!1;if(!lt)return Sb(i),lt=!0,!1;var a=i.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Cm(i.type,i.memoizedProps)),c=!c),c&&jt&&bs(i),Sb(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));jt=Kx(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));jt=Kx(i)}else a===27?(a=jt,Ds(i.type)?(i=Mm,Mm=null,jt=i):jt=a):jt=Rn?Hr(i.stateNode.nextSibling):null;return!0}function bo(){jt=Rn=null,lt=!1}function ap(){var i=ys;return i!==null&&(lr===null?lr=i:lr.push.apply(lr,i),ys=null),i}function Dl(i){ys===null?ys=[i]:ys.push(i)}var lp=D(null),vo=null,Bi=null;function vs(i,a,c){W(lp,a._currentValue),a._currentValue=c}function zi(i){i._currentValue=lp.current,V(lp)}function cp(i,a,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===c)break;i=i.return}}function up(i,a,c,f){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var y=g.dependencies;if(y!==null){var E=g.child;y=y.firstContext;e:for(;y!==null;){var A=y;y=g;for(var j=0;j<a.length;j++)if(A.context===a[j]){y.lanes|=c,A=y.alternate,A!==null&&(A.lanes|=c),cp(y.return,c,i),f||(E=null);break e}y=A.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(r(341));E.lanes|=c,y=E.alternate,y!==null&&(y.lanes|=c),cp(E,c,i),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===i){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function va(i,a,c,f){i=null;for(var g=a,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var A=g.type;xr(g.pendingProps.value,E.value)||(i!==null?i.push(A):i=[A])}}else if(g===ze.current){if(E=g.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(sc):i=[sc])}g=g.return}i!==null&&up(a,i,c,f),a.flags|=262144}function ju(i){for(i=i.firstContext;i!==null;){if(!xr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function xo(i){vo=i,Bi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Dn(i){return Eb(vo,i)}function Lu(i,a){return vo===null&&xo(i),Eb(i,a)}function Eb(i,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Bi===null){if(i===null)throw Error(r(308));Bi=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Bi=Bi.next=a;return c}var sA=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(c,f){i.push(f)}};this.abort=function(){a.aborted=!0,i.forEach(function(c){return c()})}},oA=n.unstable_scheduleCallback,aA=n.unstable_NormalPriority,fn={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dp(){return{controller:new sA,data:new Map,refCount:0}}function _l(i){i.refCount--,i.refCount===0&&oA(aA,function(){i.controller.abort()})}var jl=null,fp=0,xa=0,wa=null;function lA(i,a){if(jl===null){var c=jl=[];fp=0,xa=mm(),wa={status:"pending",value:void 0,then:function(f){c.push(f)}}}return fp++,a.then(Cb,Cb),a}function Cb(){if(--fp===0&&jl!==null){wa!==null&&(wa.status="fulfilled");var i=jl;jl=null,xa=0,wa=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function cA(i,a){var c=[],f={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return i.then(function(){f.status="fulfilled",f.value=a;for(var g=0;g<c.length;g++)(0,c[g])(a)},function(g){for(f.status="rejected",f.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),f}var Tb=O.S;O.S=function(i,a){lx=tt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&lA(i,a),Tb!==null&&Tb(i,a)};var wo=D(null);function hp(){var i=wo.current;return i!==null?i:At.pooledCache}function Bu(i,a){a===null?W(wo,wo.current):W(wo,a.pool)}function Nb(){var i=hp();return i===null?null:{parent:fn._currentValue,pool:i}}var Sa=Error(r(460)),pp=Error(r(474)),zu=Error(r(542)),Iu={then:function(){}};function Ab(i){return i=i.status,i==="fulfilled"||i==="rejected"}function kb(i,a,c){switch(c=i[c],c===void 0?i.push(a):c!==a&&(a.then(ye,ye),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Ob(i),i;default:if(typeof a.status=="string")a.then(ye,ye);else{if(i=At,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(f){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=f}},function(f){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,Ob(i),i}throw Eo=a,Sa}}function So(i){try{var a=i._init;return a(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Eo=c,Sa):c}}var Eo=null;function Mb(){if(Eo===null)throw Error(r(459));var i=Eo;return Eo=null,i}function Ob(i){if(i===Sa||i===zu)throw Error(r(483))}var Ea=null,Ll=0;function Hu(i){var a=Ll;return Ll+=1,Ea===null&&(Ea=[]),kb(Ea,i,a)}function Bl(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Uu(i,a){throw a.$$typeof===b?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function Rb(i){function a(U,B){if(i){var q=U.deletions;q===null?(U.deletions=[B],U.flags|=16):q.push(B)}}function c(U,B){if(!i)return null;for(;B!==null;)a(U,B),B=B.sibling;return null}function f(U){for(var B=new Map;U!==null;)U.key!==null?B.set(U.key,U):B.set(U.index,U),U=U.sibling;return B}function g(U,B){return U=ji(U,B),U.index=0,U.sibling=null,U}function y(U,B,q){return U.index=q,i?(q=U.alternate,q!==null?(q=q.index,q<B?(U.flags|=67108866,B):q):(U.flags|=67108866,B)):(U.flags|=1048576,B)}function E(U){return i&&U.alternate===null&&(U.flags|=67108866),U}function A(U,B,q,J){return B===null||B.tag!==6?(B=np(q,U.mode,J),B.return=U,B):(B=g(B,q),B.return=U,B)}function j(U,B,q,J){var Le=q.type;return Le===S?X(U,B,q.props.children,J,q.key):B!==null&&(B.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===Y&&So(Le)===B.type)?(B=g(B,q.props),Bl(B,q),B.return=U,B):(B=Du(q.type,q.key,q.props,null,U.mode,J),Bl(B,q),B.return=U,B)}function P(U,B,q,J){return B===null||B.tag!==4||B.stateNode.containerInfo!==q.containerInfo||B.stateNode.implementation!==q.implementation?(B=rp(q,U.mode,J),B.return=U,B):(B=g(B,q.children||[]),B.return=U,B)}function X(U,B,q,J,Le){return B===null||B.tag!==7?(B=yo(q,U.mode,J,Le),B.return=U,B):(B=g(B,q),B.return=U,B)}function Z(U,B,q){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=np(""+B,U.mode,q),B.return=U,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case v:return q=Du(B.type,B.key,B.props,null,U.mode,q),Bl(q,B),q.return=U,q;case w:return B=rp(B,U.mode,q),B.return=U,B;case Y:return B=So(B),Z(U,B,q)}if(he(B)||pe(B))return B=yo(B,U.mode,q,null),B.return=U,B;if(typeof B.then=="function")return Z(U,Hu(B),q);if(B.$$typeof===_)return Z(U,Lu(U,B),q);Uu(U,B)}return null}function F(U,B,q,J){var Le=B!==null?B.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Le!==null?null:A(U,B,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case v:return q.key===Le?j(U,B,q,J):null;case w:return q.key===Le?P(U,B,q,J):null;case Y:return q=So(q),F(U,B,q,J)}if(he(q)||pe(q))return Le!==null?null:X(U,B,q,J,null);if(typeof q.then=="function")return F(U,B,Hu(q),J);if(q.$$typeof===_)return F(U,B,Lu(U,q),J);Uu(U,q)}return null}function Q(U,B,q,J,Le){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return U=U.get(q)||null,A(B,U,""+J,Le);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case v:return U=U.get(J.key===null?q:J.key)||null,j(B,U,J,Le);case w:return U=U.get(J.key===null?q:J.key)||null,P(B,U,J,Le);case Y:return J=So(J),Q(U,B,q,J,Le)}if(he(J)||pe(J))return U=U.get(q)||null,X(B,U,J,Le,null);if(typeof J.then=="function")return Q(U,B,q,Hu(J),Le);if(J.$$typeof===_)return Q(U,B,q,Lu(B,J),Le);Uu(B,J)}return null}function Ne(U,B,q,J){for(var Le=null,ft=null,De=B,Xe=B=0,ot=null;De!==null&&Xe<q.length;Xe++){De.index>Xe?(ot=De,De=null):ot=De.sibling;var ht=F(U,De,q[Xe],J);if(ht===null){De===null&&(De=ot);break}i&&De&&ht.alternate===null&&a(U,De),B=y(ht,B,Xe),ft===null?Le=ht:ft.sibling=ht,ft=ht,De=ot}if(Xe===q.length)return c(U,De),lt&&Li(U,Xe),Le;if(De===null){for(;Xe<q.length;Xe++)De=Z(U,q[Xe],J),De!==null&&(B=y(De,B,Xe),ft===null?Le=De:ft.sibling=De,ft=De);return lt&&Li(U,Xe),Le}for(De=f(De);Xe<q.length;Xe++)ot=Q(De,U,Xe,q[Xe],J),ot!==null&&(i&&ot.alternate!==null&&De.delete(ot.key===null?Xe:ot.key),B=y(ot,B,Xe),ft===null?Le=ot:ft.sibling=ot,ft=ot);return i&&De.forEach(function(zs){return a(U,zs)}),lt&&Li(U,Xe),Le}function He(U,B,q,J){if(q==null)throw Error(r(151));for(var Le=null,ft=null,De=B,Xe=B=0,ot=null,ht=q.next();De!==null&&!ht.done;Xe++,ht=q.next()){De.index>Xe?(ot=De,De=null):ot=De.sibling;var zs=F(U,De,ht.value,J);if(zs===null){De===null&&(De=ot);break}i&&De&&zs.alternate===null&&a(U,De),B=y(zs,B,Xe),ft===null?Le=zs:ft.sibling=zs,ft=zs,De=ot}if(ht.done)return c(U,De),lt&&Li(U,Xe),Le;if(De===null){for(;!ht.done;Xe++,ht=q.next())ht=Z(U,ht.value,J),ht!==null&&(B=y(ht,B,Xe),ft===null?Le=ht:ft.sibling=ht,ft=ht);return lt&&Li(U,Xe),Le}for(De=f(De);!ht.done;Xe++,ht=q.next())ht=Q(De,U,Xe,ht.value,J),ht!==null&&(i&&ht.alternate!==null&&De.delete(ht.key===null?Xe:ht.key),B=y(ht,B,Xe),ft===null?Le=ht:ft.sibling=ht,ft=ht);return i&&De.forEach(function(xk){return a(U,xk)}),lt&&Li(U,Xe),Le}function Tt(U,B,q,J){if(typeof q=="object"&&q!==null&&q.type===S&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case v:e:{for(var Le=q.key;B!==null;){if(B.key===Le){if(Le=q.type,Le===S){if(B.tag===7){c(U,B.sibling),J=g(B,q.props.children),J.return=U,U=J;break e}}else if(B.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===Y&&So(Le)===B.type){c(U,B.sibling),J=g(B,q.props),Bl(J,q),J.return=U,U=J;break e}c(U,B);break}else a(U,B);B=B.sibling}q.type===S?(J=yo(q.props.children,U.mode,J,q.key),J.return=U,U=J):(J=Du(q.type,q.key,q.props,null,U.mode,J),Bl(J,q),J.return=U,U=J)}return E(U);case w:e:{for(Le=q.key;B!==null;){if(B.key===Le)if(B.tag===4&&B.stateNode.containerInfo===q.containerInfo&&B.stateNode.implementation===q.implementation){c(U,B.sibling),J=g(B,q.children||[]),J.return=U,U=J;break e}else{c(U,B);break}else a(U,B);B=B.sibling}J=rp(q,U.mode,J),J.return=U,U=J}return E(U);case Y:return q=So(q),Tt(U,B,q,J)}if(he(q))return Ne(U,B,q,J);if(pe(q)){if(Le=pe(q),typeof Le!="function")throw Error(r(150));return q=Le.call(q),He(U,B,q,J)}if(typeof q.then=="function")return Tt(U,B,Hu(q),J);if(q.$$typeof===_)return Tt(U,B,Lu(U,q),J);Uu(U,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,B!==null&&B.tag===6?(c(U,B.sibling),J=g(B,q),J.return=U,U=J):(c(U,B),J=np(q,U.mode,J),J.return=U,U=J),E(U)):c(U,B)}return function(U,B,q,J){try{Ll=0;var Le=Tt(U,B,q,J);return Ea=null,Le}catch(De){if(De===Sa||De===zu)throw De;var ft=wr(29,De,null,U.mode);return ft.lanes=J,ft.return=U,ft}finally{}}}var Co=Rb(!0),Db=Rb(!1),xs=!1;function mp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gp(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ws(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ss(i,a,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(gt&2)!==0){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,a=Ru(i),mb(i,null,c),a}return Ou(i,f,a,c),Ru(i)}function zl(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Oe(i,c)}}function yp(i,a){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var E={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?g=y=E:y=y.next=E,c=c.next}while(c!==null);y===null?g=y=a:y=y.next=a}else g=y=a;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:f.shared,callbacks:f.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}var bp=!1;function Il(){if(bp){var i=wa;if(i!==null)throw i}}function Hl(i,a,c,f){bp=!1;var g=i.updateQueue;xs=!1;var y=g.firstBaseUpdate,E=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var j=A,P=j.next;j.next=null,E===null?y=P:E.next=P,E=j;var X=i.alternate;X!==null&&(X=X.updateQueue,A=X.lastBaseUpdate,A!==E&&(A===null?X.firstBaseUpdate=P:A.next=P,X.lastBaseUpdate=j))}if(y!==null){var Z=g.baseState;E=0,X=P=j=null,A=y;do{var F=A.lane&-536870913,Q=F!==A.lane;if(Q?(st&F)===F:(f&F)===F){F!==0&&F===xa&&(bp=!0),X!==null&&(X=X.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Ne=i,He=A;F=a;var Tt=c;switch(He.tag){case 1:if(Ne=He.payload,typeof Ne=="function"){Z=Ne.call(Tt,Z,F);break e}Z=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=He.payload,F=typeof Ne=="function"?Ne.call(Tt,Z,F):Ne,F==null)break e;Z=m({},Z,F);break e;case 2:xs=!0}}F=A.callback,F!==null&&(i.flags|=64,Q&&(i.flags|=8192),Q=g.callbacks,Q===null?g.callbacks=[F]:Q.push(F))}else Q={lane:F,tag:A.tag,payload:A.payload,callback:A.callback,next:null},X===null?(P=X=Q,j=Z):X=X.next=Q,E|=F;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;Q=A,A=Q.next,Q.next=null,g.lastBaseUpdate=Q,g.shared.pending=null}}while(!0);X===null&&(j=Z),g.baseState=j,g.firstBaseUpdate=P,g.lastBaseUpdate=X,y===null&&(g.shared.lanes=0),As|=E,i.lanes=E,i.memoizedState=Z}}function _b(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function jb(i,a){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)_b(c[i],a)}var Ca=D(null),$u=D(0);function Lb(i,a){i=Gi,W($u,i),W(Ca,a),Gi=i|a.baseLanes}function vp(){W($u,Gi),W(Ca,Ca.current)}function xp(){Gi=$u.current,V(Ca),V($u)}var Sr=D(null),Ir=null;function Es(i){var a=i.alternate;W(sn,sn.current&1),W(Sr,i),Ir===null&&(a===null||Ca.current!==null||a.memoizedState!==null)&&(Ir=i)}function wp(i){W(sn,sn.current),W(Sr,i),Ir===null&&(Ir=i)}function Bb(i){i.tag===22?(W(sn,sn.current),W(Sr,i),Ir===null&&(Ir=i)):Cs()}function Cs(){W(sn,sn.current),W(Sr,Sr.current)}function Er(i){V(Sr),Ir===i&&(Ir=null),V(sn)}var sn=D(0);function qu(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Am(c)||km(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ii=0,Ye=null,Et=null,hn=null,Pu=!1,Ta=!1,To=!1,Vu=0,Ul=0,Na=null,uA=0;function Xt(){throw Error(r(321))}function Sp(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!xr(i[c],a[c]))return!1;return!0}function Ep(i,a,c,f,g,y){return Ii=y,Ye=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,O.H=i===null||i.memoizedState===null?vv:Ip,To=!1,y=c(f,g),To=!1,Ta&&(y=Ib(a,c,f,g)),zb(i),y}function zb(i){O.H=Pl;var a=Et!==null&&Et.next!==null;if(Ii=0,hn=Et=Ye=null,Pu=!1,Ul=0,Na=null,a)throw Error(r(300));i===null||pn||(i=i.dependencies,i!==null&&ju(i)&&(pn=!0))}function Ib(i,a,c,f){Ye=i;var g=0;do{if(Ta&&(Na=null),Ul=0,Ta=!1,25<=g)throw Error(r(301));if(g+=1,hn=Et=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}O.H=xv,y=a(c,f)}while(Ta);return y}function dA(){var i=O.H,a=i.useState()[0];return a=typeof a.then=="function"?$l(a):a,i=i.useState()[0],(Et!==null?Et.memoizedState:null)!==i&&(Ye.flags|=1024),a}function Cp(){var i=Vu!==0;return Vu=0,i}function Tp(i,a,c){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~c}function Np(i){if(Pu){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Pu=!1}Ii=0,hn=Et=Ye=null,Ta=!1,Ul=Vu=0,Na=null}function Xn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Ye.memoizedState=hn=i:hn=hn.next=i,hn}function on(){if(Et===null){var i=Ye.alternate;i=i!==null?i.memoizedState:null}else i=Et.next;var a=hn===null?Ye.memoizedState:hn.next;if(a!==null)hn=a,Et=i;else{if(i===null)throw Ye.alternate===null?Error(r(467)):Error(r(310));Et=i,i={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},hn===null?Ye.memoizedState=hn=i:hn=hn.next=i}return hn}function Fu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $l(i){var a=Ul;return Ul+=1,Na===null&&(Na=[]),i=kb(Na,i,a),a=Ye,(hn===null?a.memoizedState:hn.next)===null&&(a=a.alternate,O.H=a===null||a.memoizedState===null?vv:Ip),i}function Gu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return $l(i);if(i.$$typeof===_)return Dn(i)}throw Error(r(438,String(i)))}function Ap(i){var a=null,c=Ye.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var f=Ye.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Fu(),Ye.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(i),f=0;f<i;f++)c[f]=ge;return a.index++,c}function Hi(i,a){return typeof a=="function"?a(i):a}function Ku(i){var a=on();return kp(a,Et,i)}function kp(i,a,c){var f=i.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var g=i.baseQueue,y=f.pending;if(y!==null){if(g!==null){var E=g.next;g.next=y.next,y.next=E}a.baseQueue=g=y,f.pending=null}if(y=i.baseState,g===null)i.memoizedState=y;else{a=g.next;var A=E=null,j=null,P=a,X=!1;do{var Z=P.lane&-536870913;if(Z!==P.lane?(st&Z)===Z:(Ii&Z)===Z){var F=P.revertLane;if(F===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),Z===xa&&(X=!0);else if((Ii&F)===F){P=P.next,F===xa&&(X=!0);continue}else Z={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},j===null?(A=j=Z,E=y):j=j.next=Z,Ye.lanes|=F,As|=F;Z=P.action,To&&c(y,Z),y=P.hasEagerState?P.eagerState:c(y,Z)}else F={lane:Z,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},j===null?(A=j=F,E=y):j=j.next=F,Ye.lanes|=Z,As|=Z;P=P.next}while(P!==null&&P!==a);if(j===null?E=y:j.next=A,!xr(y,i.memoizedState)&&(pn=!0,X&&(c=wa,c!==null)))throw c;i.memoizedState=y,i.baseState=E,i.baseQueue=j,f.lastRenderedState=y}return g===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function Mp(i){var a=on(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var f=c.dispatch,g=c.pending,y=a.memoizedState;if(g!==null){c.pending=null;var E=g=g.next;do y=i(y,E.action),E=E.next;while(E!==g);xr(y,a.memoizedState)||(pn=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),c.lastRenderedState=y}return[y,f]}function Hb(i,a,c){var f=Ye,g=on(),y=lt;if(y){if(c===void 0)throw Error(r(407));c=c()}else c=a();var E=!xr((Et||g).memoizedState,c);if(E&&(g.memoizedState=c,pn=!0),g=g.queue,Dp(qb.bind(null,f,g,i),[i]),g.getSnapshot!==a||E||hn!==null&&hn.memoizedState.tag&1){if(f.flags|=2048,Aa(9,{destroy:void 0},$b.bind(null,f,g,c,a),null),At===null)throw Error(r(349));y||(Ii&127)!==0||Ub(f,a,c)}return c}function Ub(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=Ye.updateQueue,a===null?(a=Fu(),Ye.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function $b(i,a,c,f){a.value=c,a.getSnapshot=f,Pb(a)&&Vb(i)}function qb(i,a,c){return c(function(){Pb(a)&&Vb(i)})}function Pb(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!xr(i,c)}catch{return!0}}function Vb(i){var a=go(i,2);a!==null&&cr(a,i,2)}function Op(i){var a=Xn();if(typeof i=="function"){var c=i;if(i=c(),To){we(!0);try{c()}finally{we(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:i},a}function Fb(i,a,c,f){return i.baseState=c,kp(i,Et,typeof f=="function"?f:Hi)}function fA(i,a,c,f,g){if(Yu(i))throw Error(r(485));if(i=a.action,i!==null){var y={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};O.T!==null?c(!0):y.isTransition=!1,f(y),c=a.pending,c===null?(y.next=a.pending=y,Gb(a,y)):(y.next=c.next,a.pending=c.next=y)}}function Gb(i,a){var c=a.action,f=a.payload,g=i.state;if(a.isTransition){var y=O.T,E={};O.T=E;try{var A=c(g,f),j=O.S;j!==null&&j(E,A),Kb(i,a,A)}catch(P){Rp(i,a,P)}finally{y!==null&&E.types!==null&&(y.types=E.types),O.T=y}}else try{y=c(g,f),Kb(i,a,y)}catch(P){Rp(i,a,P)}}function Kb(i,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){Wb(i,a,f)},function(f){return Rp(i,a,f)}):Wb(i,a,c)}function Wb(i,a,c){a.status="fulfilled",a.value=c,Qb(a),i.state=c,a=i.pending,a!==null&&(c=a.next,c===a?i.pending=null:(c=c.next,a.next=c,Gb(i,c)))}function Rp(i,a,c){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=c,Qb(a),a=a.next;while(a!==f)}i.action=null}function Qb(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Yb(i,a){return a}function Xb(i,a){if(lt){var c=At.formState;if(c!==null){e:{var f=Ye;if(lt){if(jt){t:{for(var g=jt,y=zr;g.nodeType!==8;){if(!y){g=null;break t}if(g=Hr(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){jt=Hr(g.nextSibling),f=g.data==="F!";break e}}bs(f)}f=!1}f&&(a=c[0])}}return c=Xn(),c.memoizedState=c.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yb,lastRenderedState:a},c.queue=f,c=gv.bind(null,Ye,f),f.dispatch=c,f=Op(!1),y=zp.bind(null,Ye,!1,f.queue),f=Xn(),g={state:a,dispatch:null,action:i,pending:null},f.queue=g,c=fA.bind(null,Ye,g,y,c),g.dispatch=c,f.memoizedState=i,[a,c,!1]}function Jb(i){var a=on();return Zb(a,Et,i)}function Zb(i,a,c){if(a=kp(i,a,Yb)[0],i=Ku(Hi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=$l(a)}catch(E){throw E===Sa?zu:E}else f=a;a=on();var g=a.queue,y=g.dispatch;return c!==a.memoizedState&&(Ye.flags|=2048,Aa(9,{destroy:void 0},hA.bind(null,g,c),null)),[f,y,i]}function hA(i,a){i.action=a}function ev(i){var a=on(),c=Et;if(c!==null)return Zb(a,c,i);on(),a=a.memoizedState,c=on();var f=c.queue.dispatch;return c.memoizedState=i,[a,f,!1]}function Aa(i,a,c,f){return i={tag:i,create:c,deps:f,inst:a,next:null},a=Ye.updateQueue,a===null&&(a=Fu(),Ye.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,a.lastEffect=i),i}function tv(){return on().memoizedState}function Wu(i,a,c,f){var g=Xn();Ye.flags|=i,g.memoizedState=Aa(1|a,{destroy:void 0},c,f===void 0?null:f)}function Qu(i,a,c,f){var g=on();f=f===void 0?null:f;var y=g.memoizedState.inst;Et!==null&&f!==null&&Sp(f,Et.memoizedState.deps)?g.memoizedState=Aa(a,y,c,f):(Ye.flags|=i,g.memoizedState=Aa(1|a,y,c,f))}function nv(i,a){Wu(8390656,8,i,a)}function Dp(i,a){Qu(2048,8,i,a)}function pA(i){Ye.flags|=4;var a=Ye.updateQueue;if(a===null)a=Fu(),Ye.updateQueue=a,a.events=[i];else{var c=a.events;c===null?a.events=[i]:c.push(i)}}function rv(i){var a=on().memoizedState;return pA({ref:a,nextImpl:i}),function(){if((gt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function iv(i,a){return Qu(4,2,i,a)}function sv(i,a){return Qu(4,4,i,a)}function ov(i,a){if(typeof a=="function"){i=i();var c=a(i);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function av(i,a,c){c=c!=null?c.concat([i]):null,Qu(4,4,ov.bind(null,a,i),c)}function _p(){}function lv(i,a){var c=on();a=a===void 0?null:a;var f=c.memoizedState;return a!==null&&Sp(a,f[1])?f[0]:(c.memoizedState=[i,a],i)}function cv(i,a){var c=on();a=a===void 0?null:a;var f=c.memoizedState;if(a!==null&&Sp(a,f[1]))return f[0];if(f=i(),To){we(!0);try{i()}finally{we(!1)}}return c.memoizedState=[f,a],f}function jp(i,a,c){return c===void 0||(Ii&1073741824)!==0&&(st&261930)===0?i.memoizedState=a:(i.memoizedState=c,i=ux(),Ye.lanes|=i,As|=i,c)}function uv(i,a,c,f){return xr(c,a)?c:Ca.current!==null?(i=jp(i,c,f),xr(i,a)||(pn=!0),i):(Ii&42)===0||(Ii&1073741824)!==0&&(st&261930)===0?(pn=!0,i.memoizedState=c):(i=ux(),Ye.lanes|=i,As|=i,a)}function dv(i,a,c,f,g){var y=R.p;R.p=y!==0&&8>y?y:8;var E=O.T,A={};O.T=A,zp(i,!1,a,c);try{var j=g(),P=O.S;if(P!==null&&P(A,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var X=cA(j,f);ql(i,a,X,Nr(i))}else ql(i,a,f,Nr(i))}catch(Z){ql(i,a,{then:function(){},status:"rejected",reason:Z},Nr())}finally{R.p=y,E!==null&&A.types!==null&&(E.types=A.types),O.T=E}}function mA(){}function Lp(i,a,c,f){if(i.tag!==5)throw Error(r(476));var g=fv(i).queue;dv(i,g,a,I,c===null?mA:function(){return hv(i),c(f)})}function fv(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:I},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:c},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function hv(i){var a=fv(i);a.next===null&&(a=i.alternate.memoizedState),ql(i,a.next.queue,{},Nr())}function Bp(){return Dn(sc)}function pv(){return on().memoizedState}function mv(){return on().memoizedState}function gA(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var c=Nr();i=ws(c);var f=Ss(a,i,c);f!==null&&(cr(f,a,c),zl(f,a,c)),a={cache:dp()},i.payload=a;return}a=a.return}}function yA(i,a,c){var f=Nr();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Yu(i)?yv(a,c):(c=ep(i,a,c,f),c!==null&&(cr(c,i,f),bv(c,a,f)))}function gv(i,a,c){var f=Nr();ql(i,a,c,f)}function ql(i,a,c,f){var g={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Yu(i))yv(a,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var E=a.lastRenderedState,A=y(E,c);if(g.hasEagerState=!0,g.eagerState=A,xr(A,E))return Ou(i,a,g,0),At===null&&Mu(),!1}catch{}finally{}if(c=ep(i,a,g,f),c!==null)return cr(c,i,f),bv(c,a,f),!0}return!1}function zp(i,a,c,f){if(f={lane:2,revertLane:mm(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Yu(i)){if(a)throw Error(r(479))}else a=ep(i,c,f,2),a!==null&&cr(a,i,2)}function Yu(i){var a=i.alternate;return i===Ye||a!==null&&a===Ye}function yv(i,a){Ta=Pu=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function bv(i,a,c){if((c&4194048)!==0){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Oe(i,c)}}var Pl={readContext:Dn,use:Gu,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useLayoutEffect:Xt,useInsertionEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useSyncExternalStore:Xt,useId:Xt,useHostTransitionStatus:Xt,useFormState:Xt,useActionState:Xt,useOptimistic:Xt,useMemoCache:Xt,useCacheRefresh:Xt};Pl.useEffectEvent=Xt;var vv={readContext:Dn,use:Gu,useCallback:function(i,a){return Xn().memoizedState=[i,a===void 0?null:a],i},useContext:Dn,useEffect:nv,useImperativeHandle:function(i,a,c){c=c!=null?c.concat([i]):null,Wu(4194308,4,ov.bind(null,a,i),c)},useLayoutEffect:function(i,a){return Wu(4194308,4,i,a)},useInsertionEffect:function(i,a){Wu(4,2,i,a)},useMemo:function(i,a){var c=Xn();a=a===void 0?null:a;var f=i();if(To){we(!0);try{i()}finally{we(!1)}}return c.memoizedState=[f,a],f},useReducer:function(i,a,c){var f=Xn();if(c!==void 0){var g=c(a);if(To){we(!0);try{c(a)}finally{we(!1)}}}else g=a;return f.memoizedState=f.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},f.queue=i,i=i.dispatch=yA.bind(null,Ye,i),[f.memoizedState,i]},useRef:function(i){var a=Xn();return i={current:i},a.memoizedState=i},useState:function(i){i=Op(i);var a=i.queue,c=gv.bind(null,Ye,a);return a.dispatch=c,[i.memoizedState,c]},useDebugValue:_p,useDeferredValue:function(i,a){var c=Xn();return jp(c,i,a)},useTransition:function(){var i=Op(!1);return i=dv.bind(null,Ye,i.queue,!0,!1),Xn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,c){var f=Ye,g=Xn();if(lt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=a(),At===null)throw Error(r(349));(st&127)!==0||Ub(f,a,c)}g.memoizedState=c;var y={value:c,getSnapshot:a};return g.queue=y,nv(qb.bind(null,f,y,i),[i]),f.flags|=2048,Aa(9,{destroy:void 0},$b.bind(null,f,y,c,a),null),c},useId:function(){var i=Xn(),a=At.identifierPrefix;if(lt){var c=ci,f=li;c=(f&~(1<<32-Te(f)-1)).toString(32)+c,a="_"+a+"R_"+c,c=Vu++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=uA++,a="_"+a+"r_"+c.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:Bp,useFormState:Xb,useActionState:Xb,useOptimistic:function(i){var a=Xn();a.memoizedState=a.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=zp.bind(null,Ye,!0,c),c.dispatch=a,[i,a]},useMemoCache:Ap,useCacheRefresh:function(){return Xn().memoizedState=gA.bind(null,Ye)},useEffectEvent:function(i){var a=Xn(),c={impl:i};return a.memoizedState=c,function(){if((gt&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Ip={readContext:Dn,use:Gu,useCallback:lv,useContext:Dn,useEffect:Dp,useImperativeHandle:av,useInsertionEffect:iv,useLayoutEffect:sv,useMemo:cv,useReducer:Ku,useRef:tv,useState:function(){return Ku(Hi)},useDebugValue:_p,useDeferredValue:function(i,a){var c=on();return uv(c,Et.memoizedState,i,a)},useTransition:function(){var i=Ku(Hi)[0],a=on().memoizedState;return[typeof i=="boolean"?i:$l(i),a]},useSyncExternalStore:Hb,useId:pv,useHostTransitionStatus:Bp,useFormState:Jb,useActionState:Jb,useOptimistic:function(i,a){var c=on();return Fb(c,Et,i,a)},useMemoCache:Ap,useCacheRefresh:mv};Ip.useEffectEvent=rv;var xv={readContext:Dn,use:Gu,useCallback:lv,useContext:Dn,useEffect:Dp,useImperativeHandle:av,useInsertionEffect:iv,useLayoutEffect:sv,useMemo:cv,useReducer:Mp,useRef:tv,useState:function(){return Mp(Hi)},useDebugValue:_p,useDeferredValue:function(i,a){var c=on();return Et===null?jp(c,i,a):uv(c,Et.memoizedState,i,a)},useTransition:function(){var i=Mp(Hi)[0],a=on().memoizedState;return[typeof i=="boolean"?i:$l(i),a]},useSyncExternalStore:Hb,useId:pv,useHostTransitionStatus:Bp,useFormState:ev,useActionState:ev,useOptimistic:function(i,a){var c=on();return Et!==null?Fb(c,Et,i,a):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Ap,useCacheRefresh:mv};xv.useEffectEvent=rv;function Hp(i,a,c,f){a=i.memoizedState,c=c(f,a),c=c==null?a:m({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Up={enqueueSetState:function(i,a,c){i=i._reactInternals;var f=Nr(),g=ws(f);g.payload=a,c!=null&&(g.callback=c),a=Ss(i,g,f),a!==null&&(cr(a,i,f),zl(a,i,f))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var f=Nr(),g=ws(f);g.tag=1,g.payload=a,c!=null&&(g.callback=c),a=Ss(i,g,f),a!==null&&(cr(a,i,f),zl(a,i,f))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=Nr(),f=ws(c);f.tag=2,a!=null&&(f.callback=a),a=Ss(i,f,c),a!==null&&(cr(a,i,c),zl(a,i,c))}};function wv(i,a,c,f,g,y,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,y,E):a.prototype&&a.prototype.isPureReactComponent?!Ml(c,f)||!Ml(g,y):!0}function Sv(i,a,c,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==i&&Up.enqueueReplaceState(a,a.state,null)}function No(i,a){var c=a;if("ref"in a){c={};for(var f in a)f!=="ref"&&(c[f]=a[f])}if(i=i.defaultProps){c===a&&(c=m({},c));for(var g in i)c[g]===void 0&&(c[g]=i[g])}return c}function Ev(i){ku(i)}function Cv(i){console.error(i)}function Tv(i){ku(i)}function Xu(i,a){try{var c=i.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function Nv(i,a,c){try{var f=i.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function $p(i,a,c){return c=ws(c),c.tag=3,c.payload={element:null},c.callback=function(){Xu(i,a)},c}function Av(i){return i=ws(i),i.tag=3,i}function kv(i,a,c,f){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var y=f.value;i.payload=function(){return g(y)},i.callback=function(){Nv(a,c,f)}}var E=c.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){Nv(a,c,f),typeof g!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var A=f.stack;this.componentDidCatch(f.value,{componentStack:A!==null?A:""})})}function bA(i,a,c,f,g){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=c.alternate,a!==null&&va(a,c,g,!0),c=Sr.current,c!==null){switch(c.tag){case 31:case 13:return Ir===null?cd():c.alternate===null&&Jt===0&&(Jt=3),c.flags&=-257,c.flags|=65536,c.lanes=g,f===Iu?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([f]):a.add(f),fm(i,f,g)),!1;case 22:return c.flags|=65536,f===Iu?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([f]):c.add(f)),fm(i,f,g)),!1}throw Error(r(435,c.tag))}return fm(i,f,g),cd(),!1}if(lt)return a=Sr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,f!==op&&(i=Error(r(422),{cause:f}),Dl(jr(i,c)))):(f!==op&&(a=Error(r(423),{cause:f}),Dl(jr(a,c))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,f=jr(f,c),g=$p(i.stateNode,f,g),yp(i,g),Jt!==4&&(Jt=2)),!1;var y=Error(r(520),{cause:f});if(y=jr(y,c),Xl===null?Xl=[y]:Xl.push(y),Jt!==4&&(Jt=2),a===null)return!0;f=jr(f,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,i=g&-g,c.lanes|=i,i=$p(c.stateNode,f,i),yp(c,i),!1;case 1:if(a=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ks===null||!ks.has(y))))return c.flags|=65536,g&=-g,c.lanes|=g,g=Av(g),kv(g,i,c,f),yp(c,g),!1}c=c.return}while(c!==null);return!1}var qp=Error(r(461)),pn=!1;function _n(i,a,c,f){a.child=i===null?Db(a,null,c,f):Co(a,i.child,c,f)}function Mv(i,a,c,f,g){c=c.render;var y=a.ref;if("ref"in f){var E={};for(var A in f)A!=="ref"&&(E[A]=f[A])}else E=f;return xo(a),f=Ep(i,a,c,E,y,g),A=Cp(),i!==null&&!pn?(Tp(i,a,g),Ui(i,a,g)):(lt&&A&&ip(a),a.flags|=1,_n(i,a,f,g),a.child)}function Ov(i,a,c,f,g){if(i===null){var y=c.type;return typeof y=="function"&&!tp(y)&&y.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=y,Rv(i,a,y,f,g)):(i=Du(c.type,null,f,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(y=i.child,!Yp(i,g)){var E=y.memoizedProps;if(c=c.compare,c=c!==null?c:Ml,c(E,f)&&i.ref===a.ref)return Ui(i,a,g)}return a.flags|=1,i=ji(y,f),i.ref=a.ref,i.return=a,a.child=i}function Rv(i,a,c,f,g){if(i!==null){var y=i.memoizedProps;if(Ml(y,f)&&i.ref===a.ref)if(pn=!1,a.pendingProps=f=y,Yp(i,g))(i.flags&131072)!==0&&(pn=!0);else return a.lanes=i.lanes,Ui(i,a,g)}return Pp(i,a,c,f,g)}function Dv(i,a,c,f){var g=f.children,y=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,i!==null){for(f=a.child=i.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;f=g&~y}else f=0,a.child=null;return _v(i,a,y,c,f)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Bu(a,y!==null?y.cachePool:null),y!==null?Lb(a,y):vp(),Bb(a);else return f=a.lanes=536870912,_v(i,a,y!==null?y.baseLanes|c:c,c,f)}else y!==null?(Bu(a,y.cachePool),Lb(a,y),Cs(),a.memoizedState=null):(i!==null&&Bu(a,null),vp(),Cs());return _n(i,a,g,c),a.child}function Vl(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function _v(i,a,c,f,g){var y=hp();return y=y===null?null:{parent:fn._currentValue,pool:y},a.memoizedState={baseLanes:c,cachePool:y},i!==null&&Bu(a,null),vp(),Bb(a),i!==null&&va(i,a,f,!0),a.childLanes=g,null}function Ju(i,a){return a=ed({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function jv(i,a,c){return Co(a,i.child,null,c),i=Ju(a,a.pendingProps),i.flags|=2,Er(a),a.memoizedState=null,i}function vA(i,a,c){var f=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(lt){if(f.mode==="hidden")return i=Ju(a,f),a.lanes=536870912,Vl(null,i);if(wp(a),(i=jt)?(i=Gx(i,zr),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:gs!==null?{id:li,overflow:ci}:null,retryLane:536870912,hydrationErrors:null},c=yb(i),c.return=a,a.child=c,Rn=a,jt=null)):i=null,i===null)throw bs(a);return a.lanes=536870912,null}return Ju(a,f)}var y=i.memoizedState;if(y!==null){var E=y.dehydrated;if(wp(a),g)if(a.flags&256)a.flags&=-257,a=jv(i,a,c);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(r(558));else if(pn||va(i,a,c,!1),g=(c&i.childLanes)!==0,pn||g){if(f=At,f!==null&&(E=dt(f,c),E!==0&&E!==y.retryLane))throw y.retryLane=E,go(i,E),cr(f,i,E),qp;cd(),a=jv(i,a,c)}else i=y.treeContext,jt=Hr(E.nextSibling),Rn=a,lt=!0,ys=null,zr=!1,i!==null&&xb(a,i),a=Ju(a,f),a.flags|=4096;return a}return i=ji(i.child,{mode:f.mode,children:f.children}),i.ref=a.ref,a.child=i,i.return=a,i}function Zu(i,a){var c=a.ref;if(c===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(a.flags|=4194816)}}function Pp(i,a,c,f,g){return xo(a),c=Ep(i,a,c,f,void 0,g),f=Cp(),i!==null&&!pn?(Tp(i,a,g),Ui(i,a,g)):(lt&&f&&ip(a),a.flags|=1,_n(i,a,c,g),a.child)}function Lv(i,a,c,f,g,y){return xo(a),a.updateQueue=null,c=Ib(a,f,c,g),zb(i),f=Cp(),i!==null&&!pn?(Tp(i,a,y),Ui(i,a,y)):(lt&&f&&ip(a),a.flags|=1,_n(i,a,c,y),a.child)}function Bv(i,a,c,f,g){if(xo(a),a.stateNode===null){var y=ma,E=c.contextType;typeof E=="object"&&E!==null&&(y=Dn(E)),y=new c(f,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Up,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=f,y.state=a.memoizedState,y.refs={},mp(a),E=c.contextType,y.context=typeof E=="object"&&E!==null?Dn(E):ma,y.state=a.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(Hp(a,c,E,f),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&Up.enqueueReplaceState(y,y.state,null),Hl(a,f,y,g),Il(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(i===null){y=a.stateNode;var A=a.memoizedProps,j=No(c,A);y.props=j;var P=y.context,X=c.contextType;E=ma,typeof X=="object"&&X!==null&&(E=Dn(X));var Z=c.getDerivedStateFromProps;X=typeof Z=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,X||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||P!==E)&&Sv(a,y,f,E),xs=!1;var F=a.memoizedState;y.state=F,Hl(a,f,y,g),Il(),P=a.memoizedState,A||F!==P||xs?(typeof Z=="function"&&(Hp(a,c,Z,f),P=a.memoizedState),(j=xs||wv(a,c,j,f,F,P,E))?(X||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=P),y.props=f,y.state=P,y.context=E,f=j):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{y=a.stateNode,gp(i,a),E=a.memoizedProps,X=No(c,E),y.props=X,Z=a.pendingProps,F=y.context,P=c.contextType,j=ma,typeof P=="object"&&P!==null&&(j=Dn(P)),A=c.getDerivedStateFromProps,(P=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==Z||F!==j)&&Sv(a,y,f,j),xs=!1,F=a.memoizedState,y.state=F,Hl(a,f,y,g),Il();var Q=a.memoizedState;E!==Z||F!==Q||xs||i!==null&&i.dependencies!==null&&ju(i.dependencies)?(typeof A=="function"&&(Hp(a,c,A,f),Q=a.memoizedState),(X=xs||wv(a,c,X,f,F,Q,j)||i!==null&&i.dependencies!==null&&ju(i.dependencies))?(P||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(f,Q,j),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(f,Q,j)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===i.memoizedProps&&F===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&F===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=Q),y.props=f,y.state=Q,y.context=j,f=X):(typeof y.componentDidUpdate!="function"||E===i.memoizedProps&&F===i.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&F===i.memoizedState||(a.flags|=1024),f=!1)}return y=f,Zu(i,a),f=(a.flags&128)!==0,y||f?(y=a.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,i!==null&&f?(a.child=Co(a,i.child,null,g),a.child=Co(a,null,c,g)):_n(i,a,c,g),a.memoizedState=y.state,i=a.child):i=Ui(i,a,g),i}function zv(i,a,c,f){return bo(),a.flags|=256,_n(i,a,c,f),a.child}var Vp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fp(i){return{baseLanes:i,cachePool:Nb()}}function Gp(i,a,c){return i=i!==null?i.childLanes&~c:0,a&&(i|=Tr),i}function Iv(i,a,c){var f=a.pendingProps,g=!1,y=(a.flags&128)!==0,E;if((E=y)||(E=i!==null&&i.memoizedState===null?!1:(sn.current&2)!==0),E&&(g=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,i===null){if(lt){if(g?Es(a):Cs(),(i=jt)?(i=Gx(i,zr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:gs!==null?{id:li,overflow:ci}:null,retryLane:536870912,hydrationErrors:null},c=yb(i),c.return=a,a.child=c,Rn=a,jt=null)):i=null,i===null)throw bs(a);return km(i)?a.lanes=32:a.lanes=536870912,null}var A=f.children;return f=f.fallback,g?(Cs(),g=a.mode,A=ed({mode:"hidden",children:A},g),f=yo(f,g,c,null),A.return=a,f.return=a,A.sibling=f,a.child=A,f=a.child,f.memoizedState=Fp(c),f.childLanes=Gp(i,E,c),a.memoizedState=Vp,Vl(null,f)):(Es(a),Kp(a,A))}var j=i.memoizedState;if(j!==null&&(A=j.dehydrated,A!==null)){if(y)a.flags&256?(Es(a),a.flags&=-257,a=Wp(i,a,c)):a.memoizedState!==null?(Cs(),a.child=i.child,a.flags|=128,a=null):(Cs(),A=f.fallback,g=a.mode,f=ed({mode:"visible",children:f.children},g),A=yo(A,g,c,null),A.flags|=2,f.return=a,A.return=a,f.sibling=A,a.child=f,Co(a,i.child,null,c),f=a.child,f.memoizedState=Fp(c),f.childLanes=Gp(i,E,c),a.memoizedState=Vp,a=Vl(null,f));else if(Es(a),km(A)){if(E=A.nextSibling&&A.nextSibling.dataset,E)var P=E.dgst;E=P,f=Error(r(419)),f.stack="",f.digest=E,Dl({value:f,source:null,stack:null}),a=Wp(i,a,c)}else if(pn||va(i,a,c,!1),E=(c&i.childLanes)!==0,pn||E){if(E=At,E!==null&&(f=dt(E,c),f!==0&&f!==j.retryLane))throw j.retryLane=f,go(i,f),cr(E,i,f),qp;Am(A)||cd(),a=Wp(i,a,c)}else Am(A)?(a.flags|=192,a.child=i.child,a=null):(i=j.treeContext,jt=Hr(A.nextSibling),Rn=a,lt=!0,ys=null,zr=!1,i!==null&&xb(a,i),a=Kp(a,f.children),a.flags|=4096);return a}return g?(Cs(),A=f.fallback,g=a.mode,j=i.child,P=j.sibling,f=ji(j,{mode:"hidden",children:f.children}),f.subtreeFlags=j.subtreeFlags&65011712,P!==null?A=ji(P,A):(A=yo(A,g,c,null),A.flags|=2),A.return=a,f.return=a,f.sibling=A,a.child=f,Vl(null,f),f=a.child,A=i.child.memoizedState,A===null?A=Fp(c):(g=A.cachePool,g!==null?(j=fn._currentValue,g=g.parent!==j?{parent:j,pool:j}:g):g=Nb(),A={baseLanes:A.baseLanes|c,cachePool:g}),f.memoizedState=A,f.childLanes=Gp(i,E,c),a.memoizedState=Vp,Vl(i.child,f)):(Es(a),c=i.child,i=c.sibling,c=ji(c,{mode:"visible",children:f.children}),c.return=a,c.sibling=null,i!==null&&(E=a.deletions,E===null?(a.deletions=[i],a.flags|=16):E.push(i)),a.child=c,a.memoizedState=null,c)}function Kp(i,a){return a=ed({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function ed(i,a){return i=wr(22,i,null,a),i.lanes=0,i}function Wp(i,a,c){return Co(a,i.child,null,c),i=Kp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Hv(i,a,c){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),cp(i.return,a,c)}function Qp(i,a,c,f,g,y){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g,treeForkCount:y}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=f,E.tail=c,E.tailMode=g,E.treeForkCount=y)}function Uv(i,a,c){var f=a.pendingProps,g=f.revealOrder,y=f.tail;f=f.children;var E=sn.current,A=(E&2)!==0;if(A?(E=E&1|2,a.flags|=128):E&=1,W(sn,E),_n(i,a,f,c),f=lt?Rl:0,!A&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Hv(i,c,a);else if(i.tag===19)Hv(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(c=a.child,g=null;c!==null;)i=c.alternate,i!==null&&qu(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=a.child,a.child=null):(g=c.sibling,c.sibling=null),Qp(a,!1,g,c,y,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&qu(i)===null){a.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}Qp(a,!0,c,null,y,f);break;case"together":Qp(a,!1,null,null,void 0,f);break;default:a.memoizedState=null}return a.child}function Ui(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),As|=a.lanes,(c&a.childLanes)===0)if(i!==null){if(va(i,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,c=ji(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=ji(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function Yp(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&ju(i)))}function xA(i,a,c){switch(a.tag){case 3:se(a,a.stateNode.containerInfo),vs(a,fn,i.memoizedState.cache),bo();break;case 27:case 5:mt(a);break;case 4:se(a,a.stateNode.containerInfo);break;case 10:vs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,wp(a),null;break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(Es(a),a.flags|=128,null):(c&a.child.childLanes)!==0?Iv(i,a,c):(Es(a),i=Ui(i,a,c),i!==null?i.sibling:null);Es(a);break;case 19:var g=(i.flags&128)!==0;if(f=(c&a.childLanes)!==0,f||(va(i,a,c,!1),f=(c&a.childLanes)!==0),g){if(f)return Uv(i,a,c);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),W(sn,sn.current),f)break;return null;case 22:return a.lanes=0,Dv(i,a,c,a.pendingProps);case 24:vs(a,fn,i.memoizedState.cache)}return Ui(i,a,c)}function $v(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps)pn=!0;else{if(!Yp(i,c)&&(a.flags&128)===0)return pn=!1,xA(i,a,c);pn=(i.flags&131072)!==0}else pn=!1,lt&&(a.flags&1048576)!==0&&vb(a,Rl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var f=a.pendingProps;if(i=So(a.elementType),a.type=i,typeof i=="function")tp(i)?(f=No(i,f),a.tag=1,a=Bv(null,a,i,f,c)):(a.tag=0,a=Pp(null,a,i,f,c));else{if(i!=null){var g=i.$$typeof;if(g===k){a.tag=11,a=Mv(null,a,i,f,c);break e}else if(g===H){a.tag=14,a=Ov(null,a,i,f,c);break e}}throw a=ie(i)||i,Error(r(306,a,""))}}return a;case 0:return Pp(i,a,a.type,a.pendingProps,c);case 1:return f=a.type,g=No(f,a.pendingProps),Bv(i,a,f,g,c);case 3:e:{if(se(a,a.stateNode.containerInfo),i===null)throw Error(r(387));f=a.pendingProps;var y=a.memoizedState;g=y.element,gp(i,a),Hl(a,f,null,c);var E=a.memoizedState;if(f=E.cache,vs(a,fn,f),f!==y.cache&&up(a,[fn],c,!0),Il(),f=E.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=zv(i,a,f,c);break e}else if(f!==g){g=jr(Error(r(424)),a),Dl(g),a=zv(i,a,f,c);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(jt=Hr(i.firstChild),Rn=a,lt=!0,ys=null,zr=!0,c=Db(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(bo(),f===g){a=Ui(i,a,c);break e}_n(i,a,f,c)}a=a.child}return a;case 26:return Zu(i,a),i===null?(c=Jx(a.type,null,a.pendingProps,null))?a.memoizedState=c:lt||(c=a.type,i=a.pendingProps,f=gd(ve.current).createElement(c),f[nn]=a,f[Un]=i,jn(f,c,i),un(f),a.stateNode=f):a.memoizedState=Jx(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return mt(a),i===null&&lt&&(f=a.stateNode=Qx(a.type,a.pendingProps,ve.current),Rn=a,zr=!0,g=jt,Ds(a.type)?(Mm=g,jt=Hr(f.firstChild)):jt=g),_n(i,a,a.pendingProps.children,c),Zu(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&lt&&((g=f=jt)&&(f=YA(f,a.type,a.pendingProps,zr),f!==null?(a.stateNode=f,Rn=a,jt=Hr(f.firstChild),zr=!1,g=!0):g=!1),g||bs(a)),mt(a),g=a.type,y=a.pendingProps,E=i!==null?i.memoizedProps:null,f=y.children,Cm(g,y)?f=null:E!==null&&Cm(g,E)&&(a.flags|=32),a.memoizedState!==null&&(g=Ep(i,a,dA,null,null,c),sc._currentValue=g),Zu(i,a),_n(i,a,f,c),a.child;case 6:return i===null&&lt&&((i=c=jt)&&(c=XA(c,a.pendingProps,zr),c!==null?(a.stateNode=c,Rn=a,jt=null,i=!0):i=!1),i||bs(a)),null;case 13:return Iv(i,a,c);case 4:return se(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=Co(a,null,f,c):_n(i,a,f,c),a.child;case 11:return Mv(i,a,a.type,a.pendingProps,c);case 7:return _n(i,a,a.pendingProps,c),a.child;case 8:return _n(i,a,a.pendingProps.children,c),a.child;case 12:return _n(i,a,a.pendingProps.children,c),a.child;case 10:return f=a.pendingProps,vs(a,a.type,f.value),_n(i,a,f.children,c),a.child;case 9:return g=a.type._context,f=a.pendingProps.children,xo(a),g=Dn(g),f=f(g),a.flags|=1,_n(i,a,f,c),a.child;case 14:return Ov(i,a,a.type,a.pendingProps,c);case 15:return Rv(i,a,a.type,a.pendingProps,c);case 19:return Uv(i,a,c);case 31:return vA(i,a,c);case 22:return Dv(i,a,c,a.pendingProps);case 24:return xo(a),f=Dn(fn),i===null?(g=hp(),g===null&&(g=At,y=dp(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=c),g=y),a.memoizedState={parent:f,cache:g},mp(a),vs(a,fn,g)):((i.lanes&c)!==0&&(gp(i,a),Hl(a,null,null,c),Il()),g=i.memoizedState,y=a.memoizedState,g.parent!==f?(g={parent:f,cache:f},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),vs(a,fn,f)):(f=y.cache,vs(a,fn,f),f!==g.cache&&up(a,[fn],c,!0))),_n(i,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function $i(i){i.flags|=4}function Xp(i,a,c,f,g){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(px())i.flags|=8192;else throw Eo=Iu,pp}else i.flags&=-16777217}function qv(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!r1(a))if(px())i.flags|=8192;else throw Eo=Iu,pp}function td(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Me():536870912,i.lanes|=a,Ra|=a)}function Fl(i,a){if(!lt)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Lt(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(a)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=c,a}function wA(i,a,c){var f=a.pendingProps;switch(sp(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(a),null;case 1:return Lt(a),null;case 3:return c=a.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),zi(fn),Ie(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(ba(a)?$i(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ap())),Lt(a),null;case 26:var g=a.type,y=a.memoizedState;return i===null?($i(a),y!==null?(Lt(a),qv(a,y)):(Lt(a),Xp(a,g,null,f,c))):y?y!==i.memoizedState?($i(a),Lt(a),qv(a,y)):(Lt(a),a.flags&=-16777217):(i=i.memoizedProps,i!==f&&$i(a),Lt(a),Xp(a,g,i,f,c)),null;case 27:if(Vt(a),c=ve.current,g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==f&&$i(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return Lt(a),null}i=oe.current,ba(a)?wb(a):(i=Qx(g,f,c),a.stateNode=i,$i(a))}return Lt(a),null;case 5:if(Vt(a),g=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==f&&$i(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return Lt(a),null}if(y=oe.current,ba(a))wb(a);else{var E=gd(ve.current);switch(y){case 1:y=E.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=E.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=E.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof f.is=="string"?E.createElement("select",{is:f.is}):E.createElement("select"),f.multiple?y.multiple=!0:f.size&&(y.size=f.size);break;default:y=typeof f.is=="string"?E.createElement(g,{is:f.is}):E.createElement(g)}}y[nn]=a,y[Un]=f;e:for(E=a.child;E!==null;){if(E.tag===5||E.tag===6)y.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===a)break e;for(;E.sibling===null;){if(E.return===null||E.return===a)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}a.stateNode=y;e:switch(jn(y,g,f),g){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&$i(a)}}return Lt(a),Xp(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,c),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==f&&$i(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(r(166));if(i=ve.current,ba(a)){if(i=a.stateNode,c=a.memoizedProps,f=null,g=Rn,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}i[nn]=a,i=!!(i.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||Ix(i.nodeValue,c)),i||bs(a,!0)}else i=gd(i).createTextNode(f),i[nn]=a,a.stateNode=i}return Lt(a),null;case 31:if(c=a.memoizedState,i===null||i.memoizedState!==null){if(f=ba(a),c!==null){if(i===null){if(!f)throw Error(r(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[nn]=a}else bo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Lt(a),i=!1}else c=ap(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return a.flags&256?(Er(a),a):(Er(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Lt(a),null;case 13:if(f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=ba(a),f!==null&&f.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[nn]=a}else bo(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Lt(a),g=!1}else g=ap(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Er(a),a):(Er(a),null)}return Er(a),(a.flags&128)!==0?(a.lanes=c,a):(c=f!==null,i=i!==null&&i.memoizedState!==null,c&&(f=a.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool),y=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==g&&(f.flags|=2048)),c!==i&&c&&(a.child.flags|=8192),td(a,a.updateQueue),Lt(a),null);case 4:return Ie(),i===null&&vm(a.stateNode.containerInfo),Lt(a),null;case 10:return zi(a.type),Lt(a),null;case 19:if(V(sn),f=a.memoizedState,f===null)return Lt(a),null;if(g=(a.flags&128)!==0,y=f.rendering,y===null)if(g)Fl(f,!1);else{if(Jt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(y=qu(i),y!==null){for(a.flags|=128,Fl(f,!1),i=y.updateQueue,a.updateQueue=i,td(a,i),a.subtreeFlags=0,i=c,c=a.child;c!==null;)gb(c,i),c=c.sibling;return W(sn,sn.current&1|2),lt&&Li(a,f.treeForkCount),a.child}i=i.sibling}f.tail!==null&&tt()>od&&(a.flags|=128,g=!0,Fl(f,!1),a.lanes=4194304)}else{if(!g)if(i=qu(y),i!==null){if(a.flags|=128,g=!0,i=i.updateQueue,a.updateQueue=i,td(a,i),Fl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!lt)return Lt(a),null}else 2*tt()-f.renderingStartTime>od&&c!==536870912&&(a.flags|=128,g=!0,Fl(f,!1),a.lanes=4194304);f.isBackwards?(y.sibling=a.child,a.child=y):(i=f.last,i!==null?i.sibling=y:a.child=y,f.last=y)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=tt(),i.sibling=null,c=sn.current,W(sn,g?c&1|2:c&1),lt&&Li(a,f.treeForkCount),i):(Lt(a),null);case 22:case 23:return Er(a),xp(),f=a.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(c&536870912)!==0&&(a.flags&128)===0&&(Lt(a),a.subtreeFlags&6&&(a.flags|=8192)):Lt(a),c=a.updateQueue,c!==null&&td(a,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048),i!==null&&V(wo),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),zi(fn),Lt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function SA(i,a){switch(sp(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return zi(fn),Ie(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Vt(a),null;case 31:if(a.memoizedState!==null){if(Er(a),a.alternate===null)throw Error(r(340));bo()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(Er(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));bo()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return V(sn),null;case 4:return Ie(),null;case 10:return zi(a.type),null;case 22:case 23:return Er(a),xp(),i!==null&&V(wo),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return zi(fn),null;case 25:return null;default:return null}}function Pv(i,a){switch(sp(a),a.tag){case 3:zi(fn),Ie();break;case 26:case 27:case 5:Vt(a);break;case 4:Ie();break;case 31:a.memoizedState!==null&&Er(a);break;case 13:Er(a);break;case 19:V(sn);break;case 10:zi(a.type);break;case 22:case 23:Er(a),xp(),i!==null&&V(wo);break;case 24:zi(fn)}}function Gl(i,a){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&i)===i){f=void 0;var y=c.create,E=c.inst;f=y(),E.destroy=f}c=c.next}while(c!==g)}}catch(A){St(a,a.return,A)}}function Ts(i,a,c){try{var f=a.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var y=g.next;f=y;do{if((f.tag&i)===i){var E=f.inst,A=E.destroy;if(A!==void 0){E.destroy=void 0,g=a;var j=c,P=A;try{P()}catch(X){St(g,j,X)}}}f=f.next}while(f!==y)}}catch(X){St(a,a.return,X)}}function Vv(i){var a=i.updateQueue;if(a!==null){var c=i.stateNode;try{jb(a,c)}catch(f){St(i,i.return,f)}}}function Fv(i,a,c){c.props=No(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(f){St(i,a,f)}}function Kl(i,a){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof c=="function"?i.refCleanup=c(f):c.current=f}}catch(g){St(i,a,g)}}function ui(i,a){var c=i.ref,f=i.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(g){St(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){St(i,a,g)}else c.current=null}function Gv(i){var a=i.type,c=i.memoizedProps,f=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(g){St(i,i.return,g)}}function Jp(i,a,c){try{var f=i.stateNode;VA(f,i.type,c,a),f[Un]=a}catch(g){St(i,i.return,g)}}function Kv(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ds(i.type)||i.tag===4}function Zp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Kv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ds(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function em(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(i),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=ye));else if(f!==4&&(f===27&&Ds(i.type)&&(c=i.stateNode,a=null),i=i.child,i!==null))for(em(i,a,c),i=i.sibling;i!==null;)em(i,a,c),i=i.sibling}function nd(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(f!==4&&(f===27&&Ds(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(nd(i,a,c),i=i.sibling;i!==null;)nd(i,a,c),i=i.sibling}function Wv(i){var a=i.stateNode,c=i.memoizedProps;try{for(var f=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);jn(a,f,c),a[nn]=i,a[Un]=c}catch(y){St(i,i.return,y)}}var qi=!1,mn=!1,tm=!1,Qv=typeof WeakSet=="function"?WeakSet:Set,xn=null;function EA(i,a){if(i=i.containerInfo,Sm=Ed,i=ab(i),Wh(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var E=0,A=-1,j=-1,P=0,X=0,Z=i,F=null;t:for(;;){for(var Q;Z!==c||g!==0&&Z.nodeType!==3||(A=E+g),Z!==y||f!==0&&Z.nodeType!==3||(j=E+f),Z.nodeType===3&&(E+=Z.nodeValue.length),(Q=Z.firstChild)!==null;)F=Z,Z=Q;for(;;){if(Z===i)break t;if(F===c&&++P===g&&(A=E),F===y&&++X===f&&(j=E),(Q=Z.nextSibling)!==null)break;Z=F,F=Z.parentNode}Z=Q}c=A===-1||j===-1?null:{start:A,end:j}}else c=null}c=c||{start:0,end:0}}else c=null;for(Em={focusedElem:i,selectionRange:c},Ed=!1,xn=a;xn!==null;)if(a=xn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,xn=i;else for(;xn!==null;){switch(a=xn,y=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)g=i[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,c=a,g=y.memoizedProps,y=y.memoizedState,f=c.stateNode;try{var Ne=No(c.type,g);i=f.getSnapshotBeforeUpdate(Ne,y),f.__reactInternalSnapshotBeforeUpdate=i}catch(He){St(c,c.return,He)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,c=i.nodeType,c===9)Nm(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Nm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,xn=i;break}xn=a.return}}function Yv(i,a,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:Vi(i,c),f&4&&Gl(5,c);break;case 1:if(Vi(i,c),f&4)if(i=c.stateNode,a===null)try{i.componentDidMount()}catch(E){St(c,c.return,E)}else{var g=No(c.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(E){St(c,c.return,E)}}f&64&&Vv(c),f&512&&Kl(c,c.return);break;case 3:if(Vi(i,c),f&64&&(i=c.updateQueue,i!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{jb(i,a)}catch(E){St(c,c.return,E)}}break;case 27:a===null&&f&4&&Wv(c);case 26:case 5:Vi(i,c),a===null&&f&4&&Gv(c),f&512&&Kl(c,c.return);break;case 12:Vi(i,c);break;case 31:Vi(i,c),f&4&&Zv(i,c);break;case 13:Vi(i,c),f&4&&ex(i,c),f&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=DA.bind(null,c),JA(i,c))));break;case 22:if(f=c.memoizedState!==null||qi,!f){a=a!==null&&a.memoizedState!==null||mn,g=qi;var y=mn;qi=f,(mn=a)&&!y?Fi(i,c,(c.subtreeFlags&8772)!==0):Vi(i,c),qi=g,mn=y}break;case 30:break;default:Vi(i,c)}}function Xv(i){var a=i.alternate;a!==null&&(i.alternate=null,Xv(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&yl(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ht=null,sr=!1;function Pi(i,a,c){for(c=c.child;c!==null;)Jv(i,a,c),c=c.sibling}function Jv(i,a,c){if(K&&typeof K.onCommitFiberUnmount=="function")try{K.onCommitFiberUnmount(gr,c)}catch{}switch(c.tag){case 26:mn||ui(c,a),Pi(i,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:mn||ui(c,a);var f=Ht,g=sr;Ds(c.type)&&(Ht=c.stateNode,sr=!1),Pi(i,a,c),nc(c.stateNode),Ht=f,sr=g;break;case 5:mn||ui(c,a);case 6:if(f=Ht,g=sr,Ht=null,Pi(i,a,c),Ht=f,sr=g,Ht!==null)if(sr)try{(Ht.nodeType===9?Ht.body:Ht.nodeName==="HTML"?Ht.ownerDocument.body:Ht).removeChild(c.stateNode)}catch(y){St(c,a,y)}else try{Ht.removeChild(c.stateNode)}catch(y){St(c,a,y)}break;case 18:Ht!==null&&(sr?(i=Ht,Vx(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Ha(i)):Vx(Ht,c.stateNode));break;case 4:f=Ht,g=sr,Ht=c.stateNode.containerInfo,sr=!0,Pi(i,a,c),Ht=f,sr=g;break;case 0:case 11:case 14:case 15:Ts(2,c,a),mn||Ts(4,c,a),Pi(i,a,c);break;case 1:mn||(ui(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"&&Fv(c,a,f)),Pi(i,a,c);break;case 21:Pi(i,a,c);break;case 22:mn=(f=mn)||c.memoizedState!==null,Pi(i,a,c),mn=f;break;default:Pi(i,a,c)}}function Zv(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Ha(i)}catch(c){St(a,a.return,c)}}}function ex(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ha(i)}catch(c){St(a,a.return,c)}}function CA(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Qv),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Qv),a;default:throw Error(r(435,i.tag))}}function rd(i,a){var c=CA(i);a.forEach(function(f){if(!c.has(f)){c.add(f);var g=_A.bind(null,i,f);f.then(g,g)}})}function or(i,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f],y=i,E=a,A=E;e:for(;A!==null;){switch(A.tag){case 27:if(Ds(A.type)){Ht=A.stateNode,sr=!1;break e}break;case 5:Ht=A.stateNode,sr=!1;break e;case 3:case 4:Ht=A.stateNode.containerInfo,sr=!0;break e}A=A.return}if(Ht===null)throw Error(r(160));Jv(y,E,g),Ht=null,sr=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)tx(a,i),a=a.sibling}var ei=null;function tx(i,a){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:or(a,i),ar(i),f&4&&(Ts(3,i,i.return),Gl(3,i),Ts(5,i,i.return));break;case 1:or(a,i),ar(i),f&512&&(mn||c===null||ui(c,c.return)),f&64&&qi&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var g=ei;if(or(a,i),ar(i),f&512&&(mn||c===null||ui(c,c.return)),f&4){var y=c!==null?c.memoizedState:null;if(f=i.memoizedState,c===null)if(f===null)if(i.stateNode===null){e:{f=i.type,c=i.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":y=g.getElementsByTagName("title")[0],(!y||y[co]||y[nn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(f),g.head.insertBefore(y,g.querySelector("head > title"))),jn(y,f,c),y[nn]=i,un(y),f=y;break e;case"link":var E=t1("link","href",g).get(f+(c.href||""));if(E){for(var A=0;A<E.length;A++)if(y=E[A],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){E.splice(A,1);break t}}y=g.createElement(f),jn(y,f,c),g.head.appendChild(y);break;case"meta":if(E=t1("meta","content",g).get(f+(c.content||""))){for(A=0;A<E.length;A++)if(y=E[A],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){E.splice(A,1);break t}}y=g.createElement(f),jn(y,f,c),g.head.appendChild(y);break;default:throw Error(r(468,f))}y[nn]=i,un(y),f=y}i.stateNode=f}else n1(g,i.type,i.stateNode);else i.stateNode=e1(g,f,i.memoizedProps);else y!==f?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,f===null?n1(g,i.type,i.stateNode):e1(g,f,i.memoizedProps)):f===null&&i.stateNode!==null&&Jp(i,i.memoizedProps,c.memoizedProps)}break;case 27:or(a,i),ar(i),f&512&&(mn||c===null||ui(c,c.return)),c!==null&&f&4&&Jp(i,i.memoizedProps,c.memoizedProps);break;case 5:if(or(a,i),ar(i),f&512&&(mn||c===null||ui(c,c.return)),i.flags&32){g=i.stateNode;try{qe(g,"")}catch(Ne){St(i,i.return,Ne)}}f&4&&i.stateNode!=null&&(g=i.memoizedProps,Jp(i,g,c!==null?c.memoizedProps:g)),f&1024&&(tm=!0);break;case 6:if(or(a,i),ar(i),f&4){if(i.stateNode===null)throw Error(r(162));f=i.memoizedProps,c=i.stateNode;try{c.nodeValue=f}catch(Ne){St(i,i.return,Ne)}}break;case 3:if(vd=null,g=ei,ei=yd(a.containerInfo),or(a,i),ei=g,ar(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{Ha(a.containerInfo)}catch(Ne){St(i,i.return,Ne)}tm&&(tm=!1,nx(i));break;case 4:f=ei,ei=yd(i.stateNode.containerInfo),or(a,i),ar(i),ei=f;break;case 12:or(a,i),ar(i);break;case 31:or(a,i),ar(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,rd(i,f)));break;case 13:or(a,i),ar(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(sd=tt()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,rd(i,f)));break;case 22:g=i.memoizedState!==null;var j=c!==null&&c.memoizedState!==null,P=qi,X=mn;if(qi=P||g,mn=X||j,or(a,i),mn=X,qi=P,ar(i),f&8192)e:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(c===null||j||qi||mn||Ao(i)),c=null,a=i;;){if(a.tag===5||a.tag===26){if(c===null){j=c=a;try{if(y=j.stateNode,g)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{A=j.stateNode;var Z=j.memoizedProps.style,F=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;A.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(Ne){St(j,j.return,Ne)}}}else if(a.tag===6){if(c===null){j=a;try{j.stateNode.nodeValue=g?"":j.memoizedProps}catch(Ne){St(j,j.return,Ne)}}}else if(a.tag===18){if(c===null){j=a;try{var Q=j.stateNode;g?Fx(Q,!0):Fx(j.stateNode,!1)}catch(Ne){St(j,j.return,Ne)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=i.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,rd(i,c))));break;case 19:or(a,i),ar(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,rd(i,f)));break;case 30:break;case 21:break;default:or(a,i),ar(i)}}function ar(i){var a=i.flags;if(a&2){try{for(var c,f=i.return;f!==null;){if(Kv(f)){c=f;break}f=f.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var g=c.stateNode,y=Zp(i);nd(i,y,g);break;case 5:var E=c.stateNode;c.flags&32&&(qe(E,""),c.flags&=-33);var A=Zp(i);nd(i,A,E);break;case 3:case 4:var j=c.stateNode.containerInfo,P=Zp(i);em(i,P,j);break;default:throw Error(r(161))}}catch(X){St(i,i.return,X)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function nx(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;nx(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Vi(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Yv(i,a.alternate,a),a=a.sibling}function Ao(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Ts(4,a,a.return),Ao(a);break;case 1:ui(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&Fv(a,a.return,c),Ao(a);break;case 27:nc(a.stateNode);case 26:case 5:ui(a,a.return),Ao(a);break;case 22:a.memoizedState===null&&Ao(a);break;case 30:Ao(a);break;default:Ao(a)}i=i.sibling}}function Fi(i,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,g=i,y=a,E=y.flags;switch(y.tag){case 0:case 11:case 15:Fi(g,y,c),Gl(4,y);break;case 1:if(Fi(g,y,c),f=y,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(P){St(f,f.return,P)}if(f=y,g=f.updateQueue,g!==null){var A=f.stateNode;try{var j=g.shared.hiddenCallbacks;if(j!==null)for(g.shared.hiddenCallbacks=null,g=0;g<j.length;g++)_b(j[g],A)}catch(P){St(f,f.return,P)}}c&&E&64&&Vv(y),Kl(y,y.return);break;case 27:Wv(y);case 26:case 5:Fi(g,y,c),c&&f===null&&E&4&&Gv(y),Kl(y,y.return);break;case 12:Fi(g,y,c);break;case 31:Fi(g,y,c),c&&E&4&&Zv(g,y);break;case 13:Fi(g,y,c),c&&E&4&&ex(g,y);break;case 22:y.memoizedState===null&&Fi(g,y,c),Kl(y,y.return);break;case 30:break;default:Fi(g,y,c)}a=a.sibling}}function nm(i,a){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&_l(c))}function rm(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&_l(i))}function ti(i,a,c,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)rx(i,a,c,f),a=a.sibling}function rx(i,a,c,f){var g=a.flags;switch(a.tag){case 0:case 11:case 15:ti(i,a,c,f),g&2048&&Gl(9,a);break;case 1:ti(i,a,c,f);break;case 3:ti(i,a,c,f),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&_l(i)));break;case 12:if(g&2048){ti(i,a,c,f),i=a.stateNode;try{var y=a.memoizedProps,E=y.id,A=y.onPostCommit;typeof A=="function"&&A(E,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(j){St(a,a.return,j)}}else ti(i,a,c,f);break;case 31:ti(i,a,c,f);break;case 13:ti(i,a,c,f);break;case 23:break;case 22:y=a.stateNode,E=a.alternate,a.memoizedState!==null?y._visibility&2?ti(i,a,c,f):Wl(i,a):y._visibility&2?ti(i,a,c,f):(y._visibility|=2,ka(i,a,c,f,(a.subtreeFlags&10256)!==0||!1)),g&2048&&nm(E,a);break;case 24:ti(i,a,c,f),g&2048&&rm(a.alternate,a);break;default:ti(i,a,c,f)}}function ka(i,a,c,f,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=i,E=a,A=c,j=f,P=E.flags;switch(E.tag){case 0:case 11:case 15:ka(y,E,A,j,g),Gl(8,E);break;case 23:break;case 22:var X=E.stateNode;E.memoizedState!==null?X._visibility&2?ka(y,E,A,j,g):Wl(y,E):(X._visibility|=2,ka(y,E,A,j,g)),g&&P&2048&&nm(E.alternate,E);break;case 24:ka(y,E,A,j,g),g&&P&2048&&rm(E.alternate,E);break;default:ka(y,E,A,j,g)}a=a.sibling}}function Wl(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=i,f=a,g=f.flags;switch(f.tag){case 22:Wl(c,f),g&2048&&nm(f.alternate,f);break;case 24:Wl(c,f),g&2048&&rm(f.alternate,f);break;default:Wl(c,f)}a=a.sibling}}var Ql=8192;function Ma(i,a,c){if(i.subtreeFlags&Ql)for(i=i.child;i!==null;)ix(i,a,c),i=i.sibling}function ix(i,a,c){switch(i.tag){case 26:Ma(i,a,c),i.flags&Ql&&i.memoizedState!==null&&uk(c,ei,i.memoizedState,i.memoizedProps);break;case 5:Ma(i,a,c);break;case 3:case 4:var f=ei;ei=yd(i.stateNode.containerInfo),Ma(i,a,c),ei=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=Ql,Ql=16777216,Ma(i,a,c),Ql=f):Ma(i,a,c));break;default:Ma(i,a,c)}}function sx(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Yl(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];xn=f,ax(f,i)}sx(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ox(i),i=i.sibling}function ox(i){switch(i.tag){case 0:case 11:case 15:Yl(i),i.flags&2048&&Ts(9,i,i.return);break;case 3:Yl(i);break;case 12:Yl(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,id(i)):Yl(i);break;default:Yl(i)}}function id(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];xn=f,ax(f,i)}sx(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Ts(8,a,a.return),id(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,id(a));break;default:id(a)}i=i.sibling}}function ax(i,a){for(;xn!==null;){var c=xn;switch(c.tag){case 0:case 11:case 15:Ts(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:_l(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,xn=f;else e:for(c=i;xn!==null;){f=xn;var g=f.sibling,y=f.return;if(Xv(f),f===c){xn=null;break e}if(g!==null){g.return=y,xn=g;break e}xn=y}}}var TA={getCacheForType:function(i){var a=Dn(fn),c=a.data.get(i);return c===void 0&&(c=i(),a.data.set(i,c)),c},cacheSignal:function(){return Dn(fn).controller.signal}},NA=typeof WeakMap=="function"?WeakMap:Map,gt=0,At=null,nt=null,st=0,wt=0,Cr=null,Ns=!1,Oa=!1,im=!1,Gi=0,Jt=0,As=0,ko=0,sm=0,Tr=0,Ra=0,Xl=null,lr=null,om=!1,sd=0,lx=0,od=1/0,ad=null,ks=null,vn=0,Ms=null,Da=null,Ki=0,am=0,lm=null,cx=null,Jl=0,cm=null;function Nr(){return(gt&2)!==0&&st!==0?st&-st:O.T!==null?mm():lo()}function ux(){if(Tr===0)if((st&536870912)===0||lt){var i=Qn;Qn<<=1,(Qn&3932160)===0&&(Qn=262144),Tr=i}else Tr=536870912;return i=Sr.current,i!==null&&(i.flags|=32),Tr}function cr(i,a,c){(i===At&&(wt===2||wt===9)||i.cancelPendingCommit!==null)&&(_a(i,0),Os(i,st,Tr,!1)),$e(i,c),((gt&2)===0||i!==At)&&(i===At&&((gt&2)===0&&(ko|=c),Jt===4&&Os(i,st,Tr,!1)),di(i))}function dx(i,a,c){if((gt&6)!==0)throw Error(r(327));var f=!c&&(a&127)===0&&(a&i.expiredLanes)===0||G(i,a),g=f?MA(i,a):dm(i,a,!0),y=f;do{if(g===0){Oa&&!f&&Os(i,a,0,!1);break}else{if(c=i.current.alternate,y&&!AA(c)){g=dm(i,a,!1),y=!1;continue}if(g===2){if(y=a,i.errorRecoveryDisabledLanes&y)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;e:{var A=i;g=Xl;var j=A.current.memoizedState.isDehydrated;if(j&&(_a(A,E).flags|=256),E=dm(A,E,!1),E!==2){if(im&&!j){A.errorRecoveryDisabledLanes|=y,ko|=y,g=4;break e}y=lr,lr=g,y!==null&&(lr===null?lr=y:lr.push.apply(lr,y))}g=E}if(y=!1,g!==2)continue}}if(g===1){_a(i,0),Os(i,a,0,!0);break}e:{switch(f=i,y=g,y){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Os(f,a,Tr,!Ns);break e;case 2:lr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=sd+300-tt(),10<g)){if(Os(f,a,Tr,!Ns),M(f,0,!0)!==0)break e;Ki=a,f.timeoutHandle=qx(fx.bind(null,f,c,lr,ad,om,a,Tr,ko,Ra,Ns,y,"Throttled",-0,0),g);break e}fx(f,c,lr,ad,om,a,Tr,ko,Ra,Ns,y,null,-0,0)}}break}while(!0);di(i)}function fx(i,a,c,f,g,y,E,A,j,P,X,Z,F,Q){if(i.timeoutHandle=-1,Z=a.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ye},ix(a,y,Z);var Ne=(y&62914560)===y?sd-tt():(y&4194048)===y?lx-tt():0;if(Ne=dk(Z,Ne),Ne!==null){Ki=y,i.cancelPendingCommit=Ne(xx.bind(null,i,a,y,c,f,g,E,A,j,X,Z,null,F,Q)),Os(i,y,E,!P);return}}xx(i,a,y,c,f,g,E,A,j)}function AA(i){for(var a=i;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var g=c[f],y=g.getSnapshot;g=g.value;try{if(!xr(y(),g))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Os(i,a,c,f){a&=~sm,a&=~ko,i.suspendedLanes|=a,i.pingedLanes&=~a,f&&(i.warmLanes|=a),f=i.expirationTimes;for(var g=a;0<g;){var y=31-Te(g),E=1<<y;f[y]=-1,g&=~E}c!==0&&Ee(i,c,a)}function ld(){return(gt&6)===0?(Zl(0),!1):!0}function um(){if(nt!==null){if(wt===0)var i=nt.return;else i=nt,Bi=vo=null,Np(i),Ea=null,Ll=0,i=nt;for(;i!==null;)Pv(i.alternate,i),i=i.return;nt=null}}function _a(i,a){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,KA(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Ki=0,um(),At=i,nt=c=ji(i.current,null),st=a,wt=0,Cr=null,Ns=!1,Oa=G(i,a),im=!1,Ra=Tr=sm=ko=As=Jt=0,lr=Xl=null,om=!1,(a&8)!==0&&(a|=a&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=a;0<f;){var g=31-Te(f),y=1<<g;a|=i[g],f&=~y}return Gi=a,Mu(),c}function hx(i,a){Ye=null,O.H=Pl,a===Sa||a===zu?(a=Mb(),wt=3):a===pp?(a=Mb(),wt=4):wt=a===qp?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Cr=a,nt===null&&(Jt=1,Xu(i,jr(a,i.current)))}function px(){var i=Sr.current;return i===null?!0:(st&4194048)===st?Ir===null:(st&62914560)===st||(st&536870912)!==0?i===Ir:!1}function mx(){var i=O.H;return O.H=Pl,i===null?Pl:i}function gx(){var i=O.A;return O.A=TA,i}function cd(){Jt=4,Ns||(st&4194048)!==st&&Sr.current!==null||(Oa=!0),(As&134217727)===0&&(ko&134217727)===0||At===null||Os(At,st,Tr,!1)}function dm(i,a,c){var f=gt;gt|=2;var g=mx(),y=gx();(At!==i||st!==a)&&(ad=null,_a(i,a)),a=!1;var E=Jt;e:do try{if(wt!==0&&nt!==null){var A=nt,j=Cr;switch(wt){case 8:um(),E=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(a=!0);var P=wt;if(wt=0,Cr=null,ja(i,A,j,P),c&&Oa){E=0;break e}break;default:P=wt,wt=0,Cr=null,ja(i,A,j,P)}}kA(),E=Jt;break}catch(X){hx(i,X)}while(!0);return a&&i.shellSuspendCounter++,Bi=vo=null,gt=f,O.H=g,O.A=y,nt===null&&(At=null,st=0,Mu()),E}function kA(){for(;nt!==null;)yx(nt)}function MA(i,a){var c=gt;gt|=2;var f=mx(),g=gx();At!==i||st!==a?(ad=null,od=tt()+500,_a(i,a)):Oa=G(i,a);e:do try{if(wt!==0&&nt!==null){a=nt;var y=Cr;t:switch(wt){case 1:wt=0,Cr=null,ja(i,a,y,1);break;case 2:case 9:if(Ab(y)){wt=0,Cr=null,bx(a);break}a=function(){wt!==2&&wt!==9||At!==i||(wt=7),di(i)},y.then(a,a);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:Ab(y)?(wt=0,Cr=null,bx(a)):(wt=0,Cr=null,ja(i,a,y,7));break;case 5:var E=null;switch(nt.tag){case 26:E=nt.memoizedState;case 5:case 27:var A=nt;if(E?r1(E):A.stateNode.complete){wt=0,Cr=null;var j=A.sibling;if(j!==null)nt=j;else{var P=A.return;P!==null?(nt=P,ud(P)):nt=null}break t}}wt=0,Cr=null,ja(i,a,y,5);break;case 6:wt=0,Cr=null,ja(i,a,y,6);break;case 8:um(),Jt=6;break e;default:throw Error(r(462))}}OA();break}catch(X){hx(i,X)}while(!0);return Bi=vo=null,O.H=f,O.A=g,gt=c,nt!==null?0:(At=null,st=0,Mu(),Jt)}function OA(){for(;nt!==null&&!Pe();)yx(nt)}function yx(i){var a=$v(i.alternate,i,Gi);i.memoizedProps=i.pendingProps,a===null?ud(i):nt=a}function bx(i){var a=i,c=a.alternate;switch(a.tag){case 15:case 0:a=Lv(c,a,a.pendingProps,a.type,void 0,st);break;case 11:a=Lv(c,a,a.pendingProps,a.type.render,a.ref,st);break;case 5:Np(a);default:Pv(c,a),a=nt=gb(a,Gi),a=$v(c,a,Gi)}i.memoizedProps=i.pendingProps,a===null?ud(i):nt=a}function ja(i,a,c,f){Bi=vo=null,Np(a),Ea=null,Ll=0;var g=a.return;try{if(bA(i,g,a,c,st)){Jt=1,Xu(i,jr(c,i.current)),nt=null;return}}catch(y){if(g!==null)throw nt=g,y;Jt=1,Xu(i,jr(c,i.current)),nt=null;return}a.flags&32768?(lt||f===1?i=!0:Oa||(st&536870912)!==0?i=!1:(Ns=i=!0,(f===2||f===9||f===3||f===6)&&(f=Sr.current,f!==null&&f.tag===13&&(f.flags|=16384))),vx(a,i)):ud(a)}function ud(i){var a=i;do{if((a.flags&32768)!==0){vx(a,Ns);return}i=a.return;var c=wA(a.alternate,a,Gi);if(c!==null){nt=c;return}if(a=a.sibling,a!==null){nt=a;return}nt=a=i}while(a!==null);Jt===0&&(Jt=5)}function vx(i,a){do{var c=SA(i.alternate,i);if(c!==null){c.flags&=32767,nt=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(i=i.sibling,i!==null)){nt=i;return}nt=i=c}while(i!==null);Jt=6,nt=null}function xx(i,a,c,f,g,y,E,A,j){i.cancelPendingCommit=null;do dd();while(vn!==0);if((gt&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(y=a.lanes|a.childLanes,y|=Zh,xe(i,c,y,E,A,j),i===At&&(nt=At=null,st=0),Da=a,Ms=i,Ki=c,am=y,lm=g,cx=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,jA(Se,function(){return Tx(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=O.T,O.T=null,g=R.p,R.p=2,E=gt,gt|=4;try{EA(i,a,c)}finally{gt=E,R.p=g,O.T=f}}vn=1,wx(),Sx(),Ex()}}function wx(){if(vn===1){vn=0;var i=Ms,a=Da,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=O.T,O.T=null;var f=R.p;R.p=2;var g=gt;gt|=4;try{tx(a,i);var y=Em,E=ab(i.containerInfo),A=y.focusedElem,j=y.selectionRange;if(E!==A&&A&&A.ownerDocument&&ob(A.ownerDocument.documentElement,A)){if(j!==null&&Wh(A)){var P=j.start,X=j.end;if(X===void 0&&(X=P),"selectionStart"in A)A.selectionStart=P,A.selectionEnd=Math.min(X,A.value.length);else{var Z=A.ownerDocument||document,F=Z&&Z.defaultView||window;if(F.getSelection){var Q=F.getSelection(),Ne=A.textContent.length,He=Math.min(j.start,Ne),Tt=j.end===void 0?He:Math.min(j.end,Ne);!Q.extend&&He>Tt&&(E=Tt,Tt=He,He=E);var U=sb(A,He),B=sb(A,Tt);if(U&&B&&(Q.rangeCount!==1||Q.anchorNode!==U.node||Q.anchorOffset!==U.offset||Q.focusNode!==B.node||Q.focusOffset!==B.offset)){var q=Z.createRange();q.setStart(U.node,U.offset),Q.removeAllRanges(),He>Tt?(Q.addRange(q),Q.extend(B.node,B.offset)):(q.setEnd(B.node,B.offset),Q.addRange(q))}}}}for(Z=[],Q=A;Q=Q.parentNode;)Q.nodeType===1&&Z.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<Z.length;A++){var J=Z[A];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Ed=!!Sm,Em=Sm=null}finally{gt=g,R.p=f,O.T=c}}i.current=a,vn=2}}function Sx(){if(vn===2){vn=0;var i=Ms,a=Da,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=O.T,O.T=null;var f=R.p;R.p=2;var g=gt;gt|=4;try{Yv(i,a.alternate,a)}finally{gt=g,R.p=f,O.T=c}}vn=3}}function Ex(){if(vn===4||vn===3){vn=0,It();var i=Ms,a=Da,c=Ki,f=cx;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?vn=5:(vn=0,Da=Ms=null,Cx(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(ks=null),Mn(c),a=a.stateNode,K&&typeof K.onCommitFiberRoot=="function")try{K.onCommitFiberRoot(gr,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=O.T,g=R.p,R.p=2,O.T=null;try{for(var y=i.onRecoverableError,E=0;E<f.length;E++){var A=f[E];y(A.value,{componentStack:A.stack})}}finally{O.T=a,R.p=g}}(Ki&3)!==0&&dd(),di(i),g=i.pendingLanes,(c&261930)!==0&&(g&42)!==0?i===cm?Jl++:(Jl=0,cm=i):Jl=0,Zl(0)}}function Cx(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,_l(a)))}function dd(){return wx(),Sx(),Ex(),Tx()}function Tx(){if(vn!==5)return!1;var i=Ms,a=am;am=0;var c=Mn(Ki),f=O.T,g=R.p;try{R.p=32>c?32:c,O.T=null,c=lm,lm=null;var y=Ms,E=Ki;if(vn=0,Da=Ms=null,Ki=0,(gt&6)!==0)throw Error(r(331));var A=gt;if(gt|=4,ox(y.current),rx(y,y.current,E,c),gt=A,Zl(0,!1),K&&typeof K.onPostCommitFiberRoot=="function")try{K.onPostCommitFiberRoot(gr,y)}catch{}return!0}finally{R.p=g,O.T=f,Cx(i,a)}}function Nx(i,a,c){a=jr(c,a),a=$p(i.stateNode,a,2),i=Ss(i,a,2),i!==null&&($e(i,2),di(i))}function St(i,a,c){if(i.tag===3)Nx(i,i,c);else for(;a!==null;){if(a.tag===3){Nx(a,i,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ks===null||!ks.has(f))){i=jr(c,i),c=Av(2),f=Ss(a,c,2),f!==null&&(kv(c,f,a,i),$e(f,2),di(f));break}}a=a.return}}function fm(i,a,c){var f=i.pingCache;if(f===null){f=i.pingCache=new NA;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(c)||(im=!0,g.add(c),i=RA.bind(null,i,a,c),a.then(i,i))}function RA(i,a,c){var f=i.pingCache;f!==null&&f.delete(a),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,At===i&&(st&c)===c&&(Jt===4||Jt===3&&(st&62914560)===st&&300>tt()-sd?(gt&2)===0&&_a(i,0):sm|=c,Ra===st&&(Ra=0)),di(i)}function Ax(i,a){a===0&&(a=Me()),i=go(i,a),i!==null&&($e(i,a),di(i))}function DA(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),Ax(i,c)}function _A(i,a){var c=0;switch(i.tag){case 31:case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(a),Ax(i,c)}function jA(i,a){return tn(i,a)}var fd=null,La=null,hm=!1,hd=!1,pm=!1,Rs=0;function di(i){i!==La&&i.next===null&&(La===null?fd=La=i:La=La.next=i),hd=!0,hm||(hm=!0,BA())}function Zl(i,a){if(!pm&&hd){pm=!0;do for(var c=!1,f=fd;f!==null;){if(i!==0){var g=f.pendingLanes;if(g===0)var y=0;else{var E=f.suspendedLanes,A=f.pingedLanes;y=(1<<31-Te(42|i)+1)-1,y&=g&~(E&~A),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,Rx(f,y))}else y=st,y=M(f,f===At?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(y&3)===0||G(f,y)||(c=!0,Rx(f,y));f=f.next}while(c);pm=!1}}function LA(){kx()}function kx(){hd=hm=!1;var i=0;Rs!==0&&GA()&&(i=Rs);for(var a=tt(),c=null,f=fd;f!==null;){var g=f.next,y=Mx(f,a);y===0?(f.next=null,c===null?fd=g:c.next=g,g===null&&(La=c)):(c=f,(i!==0||(y&3)!==0)&&(hd=!0)),f=g}vn!==0&&vn!==5||Zl(i),Rs!==0&&(Rs=0)}function Mx(i,a){for(var c=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var E=31-Te(y),A=1<<E,j=g[E];j===-1?((A&c)===0||(A&f)!==0)&&(g[E]=le(A,a)):j<=a&&(i.expiredLanes|=A),y&=~A}if(a=At,c=st,c=M(i,i===a?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,c===0||i===a&&(wt===2||wt===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&ct(f),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||G(i,c)){if(a=c&-c,a===i.callbackPriority)return a;switch(f!==null&&ct(f),Mn(c)){case 2:case 8:c=me;break;case 32:c=Se;break;case 268435456:c=Ke;break;default:c=Se}return f=Ox.bind(null,i),c=tn(c,f),i.callbackPriority=a,i.callbackNode=c,a}return f!==null&&f!==null&&ct(f),i.callbackPriority=2,i.callbackNode=null,2}function Ox(i,a){if(vn!==0&&vn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(dd()&&i.callbackNode!==c)return null;var f=st;return f=M(i,i===At?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(dx(i,f,a),Mx(i,tt()),i.callbackNode!=null&&i.callbackNode===c?Ox.bind(null,i):null)}function Rx(i,a){if(dd())return null;dx(i,a,!0)}function BA(){WA(function(){(gt&6)!==0?tn(Gt,LA):kx()})}function mm(){if(Rs===0){var i=xa;i===0&&(i=Yt,Yt<<=1,(Yt&261888)===0&&(Yt=256)),Rs=i}return Rs}function Dx(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ps(""+i)}function _x(i,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,i.id&&c.setAttribute("form",i.id),a.parentNode.insertBefore(c,a),i=new FormData(i),c.parentNode.removeChild(c),i}function zA(i,a,c,f,g){if(a==="submit"&&c&&c.stateNode===g){var y=Dx((g[Un]||null).action),E=f.submitter;E&&(a=(a=E[Un]||null)?Dx(a.formAction):E.getAttribute("formAction"),a!==null&&(y=a,E=null));var A=new Tu("action","action",null,f,g);i.push({event:A,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Rs!==0){var j=E?_x(g,E):new FormData(g);Lp(c,{pending:!0,data:j,method:g.method,action:y},null,j)}}else typeof y=="function"&&(A.preventDefault(),j=E?_x(g,E):new FormData(g),Lp(c,{pending:!0,data:j,method:g.method,action:y},y,j))},currentTarget:g}]})}}for(var gm=0;gm<Jh.length;gm++){var ym=Jh[gm],IA=ym.toLowerCase(),HA=ym[0].toUpperCase()+ym.slice(1);Zr(IA,"on"+HA)}Zr(ub,"onAnimationEnd"),Zr(db,"onAnimationIteration"),Zr(fb,"onAnimationStart"),Zr("dblclick","onDoubleClick"),Zr("focusin","onFocus"),Zr("focusout","onBlur"),Zr(tA,"onTransitionRun"),Zr(nA,"onTransitionStart"),Zr(rA,"onTransitionCancel"),Zr(hb,"onTransitionEnd"),de("onMouseEnter",["mouseout","mouseover"]),de("onMouseLeave",["mouseout","mouseover"]),de("onPointerEnter",["pointerout","pointerover"]),de("onPointerLeave",["pointerout","pointerover"]),Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ec));function jx(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],g=f.event;f=f.listeners;e:{var y=void 0;if(a)for(var E=f.length-1;0<=E;E--){var A=f[E],j=A.instance,P=A.currentTarget;if(A=A.listener,j!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=P;try{y(g)}catch(X){ku(X)}g.currentTarget=null,y=j}else for(E=0;E<f.length;E++){if(A=f[E],j=A.instance,P=A.currentTarget,A=A.listener,j!==y&&g.isPropagationStopped())break e;y=A,g.currentTarget=P;try{y(g)}catch(X){ku(X)}g.currentTarget=null,y=j}}}}function rt(i,a){var c=a[gl];c===void 0&&(c=a[gl]=new Set);var f=i+"__bubble";c.has(f)||(Lx(a,i,2,!1),c.add(f))}function bm(i,a,c){var f=0;a&&(f|=4),Lx(c,i,f,a)}var pd="_reactListening"+Math.random().toString(36).slice(2);function vm(i){if(!i[pd]){i[pd]=!0,yu.forEach(function(c){c!=="selectionchange"&&(UA.has(c)||bm(c,!1,i),bm(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[pd]||(a[pd]=!0,bm("selectionchange",!1,a))}}function Lx(i,a,c,f){switch(u1(a)){case 2:var g=pk;break;case 8:g=mk;break;default:g=jm}c=g.bind(null,a,c,i),g=void 0,!Hh||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(a,c,{capture:!0,passive:g}):i.addEventListener(a,c,!0):g!==void 0?i.addEventListener(a,c,{passive:g}):i.addEventListener(a,c,!1)}function xm(i,a,c,f,g){var y=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var E=f.tag;if(E===3||E===4){var A=f.stateNode.containerInfo;if(A===g)break;if(E===4)for(E=f.return;E!==null;){var j=E.tag;if((j===3||j===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;A!==null;){if(E=Yn(A),E===null)return;if(j=E.tag,j===5||j===6||j===26||j===27){f=y=E;continue e}A=A.parentNode}}f=f.return}wu(function(){var P=y,X=Qe(c),Z=[];e:{var F=pb.get(i);if(F!==void 0){var Q=Tu,Ne=i;switch(i){case"keypress":if(Eu(c)===0)break e;case"keydown":case"keyup":Q=_N;break;case"focusin":Ne="focus",Q=Ph;break;case"focusout":Ne="blur",Q=Ph;break;case"beforeblur":case"afterblur":Q=Ph;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Py;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=wN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=BN;break;case ub:case db:case fb:Q=CN;break;case hb:Q=IN;break;case"scroll":case"scrollend":Q=vN;break;case"wheel":Q=UN;break;case"copy":case"cut":case"paste":Q=NN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Fy;break;case"toggle":case"beforetoggle":Q=qN}var He=(a&4)!==0,Tt=!He&&(i==="scroll"||i==="scrollend"),U=He?F!==null?F+"Capture":null:F;He=[];for(var B=P,q;B!==null;){var J=B;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||U===null||(J=Sl(B,U),J!=null&&He.push(tc(B,J,q))),Tt)break;B=B.return}0<He.length&&(F=new Q(F,Ne,null,c,X),Z.push({event:F,listeners:He}))}}if((a&7)===0){e:{if(F=i==="mouseover"||i==="pointerover",Q=i==="mouseout"||i==="pointerout",F&&c!==Re&&(Ne=c.relatedTarget||c.fromElement)&&(Yn(Ne)||Ne[us]))break e;if((Q||F)&&(F=X.window===X?X:(F=X.ownerDocument)?F.defaultView||F.parentWindow:window,Q?(Ne=c.relatedTarget||c.toElement,Q=P,Ne=Ne?Yn(Ne):null,Ne!==null&&(Tt=o(Ne),He=Ne.tag,Ne!==Tt||He!==5&&He!==27&&He!==6)&&(Ne=null)):(Q=null,Ne=P),Q!==Ne)){if(He=Py,J="onMouseLeave",U="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(He=Fy,J="onPointerLeave",U="onPointerEnter",B="pointer"),Tt=Q==null?F:ds(Q),q=Ne==null?F:ds(Ne),F=new He(J,B+"leave",Q,c,X),F.target=Tt,F.relatedTarget=q,J=null,Yn(X)===P&&(He=new He(U,B+"enter",Ne,c,X),He.target=q,He.relatedTarget=Tt,J=He),Tt=J,Q&&Ne)t:{for(He=$A,U=Q,B=Ne,q=0,J=U;J;J=He(J))q++;J=0;for(var Le=B;Le;Le=He(Le))J++;for(;0<q-J;)U=He(U),q--;for(;0<J-q;)B=He(B),J--;for(;q--;){if(U===B||B!==null&&U===B.alternate){He=U;break t}U=He(U),B=He(B)}He=null}else He=null;Q!==null&&Bx(Z,F,Q,He,!1),Ne!==null&&Tt!==null&&Bx(Z,Tt,Ne,He,!0)}}e:{if(F=P?ds(P):window,Q=F.nodeName&&F.nodeName.toLowerCase(),Q==="select"||Q==="input"&&F.type==="file")var ft=Zy;else if(Xy(F))if(eb)ft=JN;else{ft=YN;var De=QN}else Q=F.nodeName,!Q||Q.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?P&&hs(P.elementType)&&(ft=Zy):ft=XN;if(ft&&(ft=ft(i,P))){Jy(Z,ft,c,X);break e}De&&De(i,F,P),i==="focusout"&&P&&F.type==="number"&&P.memoizedProps.value!=null&&ca(F,"number",F.value)}switch(De=P?ds(P):window,i){case"focusin":(Xy(De)||De.contentEditable==="true")&&(fa=De,Qh=P,Ol=null);break;case"focusout":Ol=Qh=fa=null;break;case"mousedown":Yh=!0;break;case"contextmenu":case"mouseup":case"dragend":Yh=!1,lb(Z,c,X);break;case"selectionchange":if(eA)break;case"keydown":case"keyup":lb(Z,c,X)}var Xe;if(Fh)e:{switch(i){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else da?Qy(i,c)&&(ot="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(ot="onCompositionStart");ot&&(Gy&&c.locale!=="ko"&&(da||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&da&&(Xe=$y()):(ms=X,Uh="value"in ms?ms.value:ms.textContent,da=!0)),De=md(P,ot),0<De.length&&(ot=new Vy(ot,i,null,c,X),Z.push({event:ot,listeners:De}),Xe?ot.data=Xe:(Xe=Yy(c),Xe!==null&&(ot.data=Xe)))),(Xe=VN?FN(i,c):GN(i,c))&&(ot=md(P,"onBeforeInput"),0<ot.length&&(De=new Vy("onBeforeInput","beforeinput",null,c,X),Z.push({event:De,listeners:ot}),De.data=Xe)),zA(Z,i,P,c,X)}jx(Z,a)})}function tc(i,a,c){return{instance:i,listener:a,currentTarget:c}}function md(i,a){for(var c=a+"Capture",f=[];i!==null;){var g=i,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Sl(i,c),g!=null&&f.unshift(tc(i,g,y)),g=Sl(i,a),g!=null&&f.push(tc(i,g,y))),i.tag===3)return f;i=i.return}return[]}function $A(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Bx(i,a,c,f,g){for(var y=a._reactName,E=[];c!==null&&c!==f;){var A=c,j=A.alternate,P=A.stateNode;if(A=A.tag,j!==null&&j===f)break;A!==5&&A!==26&&A!==27||P===null||(j=P,g?(P=Sl(c,y),P!=null&&E.unshift(tc(c,P,j))):g||(P=Sl(c,y),P!=null&&E.push(tc(c,P,j)))),c=c.return}E.length!==0&&i.push({event:a,listeners:E})}var qA=/\r\n?/g,PA=/\u0000|\uFFFD/g;function zx(i){return(typeof i=="string"?i:""+i).replace(qA,`
`).replace(PA,"")}function Ix(i,a){return a=zx(a),zx(i)===a}function Ct(i,a,c,f,g,y){switch(c){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||qe(i,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&qe(i,""+f);break;case"className":br(i,"class",f);break;case"tabIndex":br(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":br(i,c,f);break;case"style":xt(i,f,y);break;case"data":if(a!=="object"){br(i,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||c!=="href")){i.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=ps(""+f),i.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(a!=="input"&&Ct(i,a,"name",g.name,g,null),Ct(i,a,"formEncType",g.formEncType,g,null),Ct(i,a,"formMethod",g.formMethod,g,null),Ct(i,a,"formTarget",g.formTarget,g,null)):(Ct(i,a,"encType",g.encType,g,null),Ct(i,a,"method",g.method,g,null),Ct(i,a,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=ps(""+f),i.setAttribute(c,f);break;case"onClick":f!=null&&(i.onclick=ye);break;case"onScroll":f!=null&&rt("scroll",i);break;case"onScrollEnd":f!=null&&rt("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}c=ps(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""+f):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":f===!0?i.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,f):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(c,f):i.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(c):i.setAttribute(c,f);break;case"popover":rt("beforetoggle",i),rt("toggle",i),$n(i,"popover",f);break;case"xlinkActuate":nr(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":nr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":nr(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":nr(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":nr(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":nr(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":nr(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":nr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":nr(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":$n(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Di.get(c)||c,$n(i,c,f))}}function wm(i,a,c,f,g,y){switch(c){case"style":xt(i,f,y);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof f=="string"?qe(i,f):(typeof f=="number"||typeof f=="bigint")&&qe(i,""+f);break;case"onScroll":f!=null&&rt("scroll",i);break;case"onScrollEnd":f!=null&&rt("scrollend",i);break;case"onClick":f!=null&&(i.onclick=ye);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uo.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),a=c.slice(2,g?c.length-7:void 0),y=i[Un]||null,y=y!=null?y[c]:null,typeof y=="function"&&i.removeEventListener(a,y,g),typeof f=="function")){typeof y!="function"&&y!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(a,f,g);break e}c in i?i[c]=f:f===!0?i.setAttribute(c,""):$n(i,c,f)}}}function jn(i,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",i),rt("load",i);var f=!1,g=!1,y;for(y in c)if(c.hasOwnProperty(y)){var E=c[y];if(E!=null)switch(y){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Ct(i,a,y,E,c,null)}}g&&Ct(i,a,"srcSet",c.srcSet,c,null),f&&Ct(i,a,"src",c.src,c,null);return;case"input":rt("invalid",i);var A=y=E=g=null,j=null,P=null;for(f in c)if(c.hasOwnProperty(f)){var X=c[f];if(X!=null)switch(f){case"name":g=X;break;case"type":E=X;break;case"checked":j=X;break;case"defaultChecked":P=X;break;case"value":y=X;break;case"defaultValue":A=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,a));break;default:Ct(i,a,f,X,c,null)}}fo(i,y,A,j,P,E,g,!1);return;case"select":rt("invalid",i),f=E=y=null;for(g in c)if(c.hasOwnProperty(g)&&(A=c[g],A!=null))switch(g){case"value":y=A;break;case"defaultValue":E=A;break;case"multiple":f=A;default:Ct(i,a,g,A,c,null)}a=y,c=E,i.multiple=!!f,a!=null?On(i,!!f,a,!1):c!=null&&On(i,!!f,c,!0);return;case"textarea":rt("invalid",i),y=g=f=null;for(E in c)if(c.hasOwnProperty(E)&&(A=c[E],A!=null))switch(E){case"value":f=A;break;case"defaultValue":g=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:Ct(i,a,E,A,c,null)}ua(i,f,g,y);return;case"option":for(j in c)if(c.hasOwnProperty(j)&&(f=c[j],f!=null))switch(j){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ct(i,a,j,f,c,null)}return;case"dialog":rt("beforetoggle",i),rt("toggle",i),rt("cancel",i),rt("close",i);break;case"iframe":case"object":rt("load",i);break;case"video":case"audio":for(f=0;f<ec.length;f++)rt(ec[f],i);break;case"image":rt("error",i),rt("load",i);break;case"details":rt("toggle",i);break;case"embed":case"source":case"link":rt("error",i),rt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in c)if(c.hasOwnProperty(P)&&(f=c[P],f!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Ct(i,a,P,f,c,null)}return;default:if(hs(a)){for(X in c)c.hasOwnProperty(X)&&(f=c[X],f!==void 0&&wm(i,a,X,f,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(f=c[A],f!=null&&Ct(i,a,A,f,c,null))}function VA(i,a,c,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,E=null,A=null,j=null,P=null,X=null;for(Q in c){var Z=c[Q];if(c.hasOwnProperty(Q)&&Z!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":j=Z;default:f.hasOwnProperty(Q)||Ct(i,a,Q,null,f,Z)}}for(var F in f){var Q=f[F];if(Z=c[F],f.hasOwnProperty(F)&&(Q!=null||Z!=null))switch(F){case"type":y=Q;break;case"name":g=Q;break;case"checked":P=Q;break;case"defaultChecked":X=Q;break;case"value":E=Q;break;case"defaultValue":A=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,a));break;default:Q!==Z&&Ct(i,a,F,Q,f,Z)}}vl(i,E,A,j,P,X,y,g);return;case"select":Q=E=A=F=null;for(y in c)if(j=c[y],c.hasOwnProperty(y)&&j!=null)switch(y){case"value":break;case"multiple":Q=j;default:f.hasOwnProperty(y)||Ct(i,a,y,null,f,j)}for(g in f)if(y=f[g],j=c[g],f.hasOwnProperty(g)&&(y!=null||j!=null))switch(g){case"value":F=y;break;case"defaultValue":A=y;break;case"multiple":E=y;default:y!==j&&Ct(i,a,g,y,f,j)}a=A,c=E,f=Q,F!=null?On(i,!!c,F,!1):!!f!=!!c&&(a!=null?On(i,!!c,a,!0):On(i,!!c,c?[]:"",!1));return;case"textarea":Q=F=null;for(A in c)if(g=c[A],c.hasOwnProperty(A)&&g!=null&&!f.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Ct(i,a,A,null,f,g)}for(E in f)if(g=f[E],y=c[E],f.hasOwnProperty(E)&&(g!=null||y!=null))switch(E){case"value":F=g;break;case"defaultValue":Q=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==y&&Ct(i,a,E,g,f,y)}vu(i,F,Q);return;case"option":for(var Ne in c)if(F=c[Ne],c.hasOwnProperty(Ne)&&F!=null&&!f.hasOwnProperty(Ne))switch(Ne){case"selected":i.selected=!1;break;default:Ct(i,a,Ne,null,f,F)}for(j in f)if(F=f[j],Q=c[j],f.hasOwnProperty(j)&&F!==Q&&(F!=null||Q!=null))switch(j){case"selected":i.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Ct(i,a,j,F,f,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in c)F=c[He],c.hasOwnProperty(He)&&F!=null&&!f.hasOwnProperty(He)&&Ct(i,a,He,null,f,F);for(P in f)if(F=f[P],Q=c[P],f.hasOwnProperty(P)&&F!==Q&&(F!=null||Q!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,a));break;default:Ct(i,a,P,F,f,Q)}return;default:if(hs(a)){for(var Tt in c)F=c[Tt],c.hasOwnProperty(Tt)&&F!==void 0&&!f.hasOwnProperty(Tt)&&wm(i,a,Tt,void 0,f,F);for(X in f)F=f[X],Q=c[X],!f.hasOwnProperty(X)||F===Q||F===void 0&&Q===void 0||wm(i,a,X,F,f,Q);return}}for(var U in c)F=c[U],c.hasOwnProperty(U)&&F!=null&&!f.hasOwnProperty(U)&&Ct(i,a,U,null,f,F);for(Z in f)F=f[Z],Q=c[Z],!f.hasOwnProperty(Z)||F===Q||F==null&&Q==null||Ct(i,a,Z,F,f,Q)}function Hx(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function FA(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var g=c[f],y=g.transferSize,E=g.initiatorType,A=g.duration;if(y&&A&&Hx(E)){for(E=0,A=g.responseEnd,f+=1;f<c.length;f++){var j=c[f],P=j.startTime;if(P>A)break;var X=j.transferSize,Z=j.initiatorType;X&&Hx(Z)&&(j=j.responseEnd,E+=X*(j<A?1:(A-P)/(j-P)))}if(--f,a+=8*(y+E)/(g.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Sm=null,Em=null;function gd(i){return i.nodeType===9?i:i.ownerDocument}function Ux(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $x(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Cm(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Tm=null;function GA(){var i=window.event;return i&&i.type==="popstate"?i===Tm?!1:(Tm=i,!0):(Tm=null,!1)}var qx=typeof setTimeout=="function"?setTimeout:void 0,KA=typeof clearTimeout=="function"?clearTimeout:void 0,Px=typeof Promise=="function"?Promise:void 0,WA=typeof queueMicrotask=="function"?queueMicrotask:typeof Px<"u"?function(i){return Px.resolve(null).then(i).catch(QA)}:qx;function QA(i){setTimeout(function(){throw i})}function Ds(i){return i==="head"}function Vx(i,a){var c=a,f=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(f===0){i.removeChild(g),Ha(a);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")nc(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,nc(c);for(var y=c.firstChild;y;){var E=y.nextSibling,A=y.nodeName;y[co]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=E}}else c==="body"&&nc(i.ownerDocument.body);c=g}while(c);Ha(a)}function Fx(i,a){var c=i;i=0;do{var f=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=f}while(c)}function Nm(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Nm(c),yl(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function YA(i,a,c,f){for(;i.nodeType===1;){var g=c;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[co])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Hr(i.nextSibling),i===null)break}return null}function XA(i,a,c){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Hr(i.nextSibling),i===null))return null;return i}function Gx(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Hr(i.nextSibling),i===null))return null;return i}function Am(i){return i.data==="$?"||i.data==="$~"}function km(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function JA(i,a){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||c.readyState!=="loading")a();else{var f=function(){a(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function Hr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var Mm=null;function Kx(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(a===0)return Hr(i.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}i=i.nextSibling}return null}function Wx(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return i;a--}else c!=="/$"&&c!=="/&"||a++}i=i.previousSibling}return null}function Qx(i,a,c){switch(a=gd(c),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function nc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);yl(i)}var Ur=new Map,Yx=new Set;function yd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Wi=R.d;R.d={f:ZA,r:ek,D:tk,C:nk,L:rk,m:ik,X:ok,S:sk,M:ak};function ZA(){var i=Wi.f(),a=ld();return i||a}function ek(i){var a=Oi(i);a!==null&&a.tag===5&&a.type==="form"?hv(a):Wi.r(i)}var Ba=typeof document>"u"?null:document;function Xx(i,a,c){var f=Ba;if(f&&typeof a=="string"&&a){var g=rr(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),Yx.has(g)||(Yx.add(g),i={rel:i,crossOrigin:c,href:a},f.querySelector(g)===null&&(a=f.createElement("link"),jn(a,"link",i),un(a),f.head.appendChild(a)))}}function tk(i){Wi.D(i),Xx("dns-prefetch",i,null)}function nk(i,a){Wi.C(i,a),Xx("preconnect",i,a)}function rk(i,a,c){Wi.L(i,a,c);var f=Ba;if(f&&i&&a){var g='link[rel="preload"][as="'+rr(a)+'"]';a==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+rr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+rr(c.imageSizes)+'"]')):g+='[href="'+rr(i)+'"]';var y=g;switch(a){case"style":y=za(i);break;case"script":y=Ia(i)}Ur.has(y)||(i=m({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:i,as:a},c),Ur.set(y,i),f.querySelector(g)!==null||a==="style"&&f.querySelector(rc(y))||a==="script"&&f.querySelector(ic(y))||(a=f.createElement("link"),jn(a,"link",i),un(a),f.head.appendChild(a)))}}function ik(i,a){Wi.m(i,a);var c=Ba;if(c&&i){var f=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+rr(f)+'"][href="'+rr(i)+'"]',y=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ia(i)}if(!Ur.has(y)&&(i=m({rel:"modulepreload",href:i},a),Ur.set(y,i),c.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(ic(y)))return}f=c.createElement("link"),jn(f,"link",i),un(f),c.head.appendChild(f)}}}function sk(i,a,c){Wi.S(i,a,c);var f=Ba;if(f&&i){var g=fs(f).hoistableStyles,y=za(i);a=a||"default";var E=g.get(y);if(!E){var A={loading:0,preload:null};if(E=f.querySelector(rc(y)))A.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":a},c),(c=Ur.get(y))&&Om(i,c);var j=E=f.createElement("link");un(j),jn(j,"link",i),j._p=new Promise(function(P,X){j.onload=P,j.onerror=X}),j.addEventListener("load",function(){A.loading|=1}),j.addEventListener("error",function(){A.loading|=2}),A.loading|=4,bd(E,a,f)}E={type:"stylesheet",instance:E,count:1,state:A},g.set(y,E)}}}function ok(i,a){Wi.X(i,a);var c=Ba;if(c&&i){var f=fs(c).hoistableScripts,g=Ia(i),y=f.get(g);y||(y=c.querySelector(ic(g)),y||(i=m({src:i,async:!0},a),(a=Ur.get(g))&&Rm(i,a),y=c.createElement("script"),un(y),jn(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(g,y))}}function ak(i,a){Wi.M(i,a);var c=Ba;if(c&&i){var f=fs(c).hoistableScripts,g=Ia(i),y=f.get(g);y||(y=c.querySelector(ic(g)),y||(i=m({src:i,async:!0,type:"module"},a),(a=Ur.get(g))&&Rm(i,a),y=c.createElement("script"),un(y),jn(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(g,y))}}function Jx(i,a,c,f){var g=(g=ve.current)?yd(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=za(c.href),c=fs(g).hoistableStyles,f=c.get(a),f||(f={type:"style",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=za(c.href);var y=fs(g).hoistableStyles,E=y.get(i);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,E),(y=g.querySelector(rc(i)))&&!y._p&&(E.instance=y,E.state.loading=5),Ur.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ur.set(i,c),y||lk(g,i,c,E.state))),a&&f===null)throw Error(r(528,""));return E}if(a&&f!==null)throw Error(r(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ia(c),c=fs(g).hoistableScripts,f=c.get(a),f||(f={type:"script",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function za(i){return'href="'+rr(i)+'"'}function rc(i){return'link[rel="stylesheet"]['+i+"]"}function Zx(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function lk(i,a,c,f){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=i.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),jn(a,"link",c),un(a),i.head.appendChild(a))}function Ia(i){return'[src="'+rr(i)+'"]'}function ic(i){return"script[async]"+i}function e1(i,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var f=i.querySelector('style[data-href~="'+rr(c.href)+'"]');if(f)return a.instance=f,un(f),f;var g=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),un(f),jn(f,"style",g),bd(f,c.precedence,i),a.instance=f;case"stylesheet":g=za(c.href);var y=i.querySelector(rc(g));if(y)return a.state.loading|=4,a.instance=y,un(y),y;f=Zx(c),(g=Ur.get(g))&&Om(f,g),y=(i.ownerDocument||i).createElement("link"),un(y);var E=y;return E._p=new Promise(function(A,j){E.onload=A,E.onerror=j}),jn(y,"link",f),a.state.loading|=4,bd(y,c.precedence,i),a.instance=y;case"script":return y=Ia(c.src),(g=i.querySelector(ic(y)))?(a.instance=g,un(g),g):(f=c,(g=Ur.get(y))&&(f=m({},c),Rm(f,g)),i=i.ownerDocument||i,g=i.createElement("script"),un(g),jn(g,"link",f),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,bd(f,c.precedence,i));return a.instance}function bd(i,a,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,y=g,E=0;E<f.length;E++){var A=f[E];if(A.dataset.precedence===a)y=A;else if(y!==g)break}y?y.parentNode.insertBefore(i,y.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(i,a.firstChild))}function Om(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Rm(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var vd=null;function t1(i,a,c){if(vd===null){var f=new Map,g=vd=new Map;g.set(c,f)}else g=vd,f=g.get(c),f||(f=new Map,g.set(c,f));if(f.has(i))return f;for(f.set(i,null),c=c.getElementsByTagName(i),g=0;g<c.length;g++){var y=c[g];if(!(y[co]||y[nn]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(a)||"";E=i+E;var A=f.get(E);A?A.push(y):f.set(E,[y])}}return f}function n1(i,a,c){i=i.ownerDocument||i,i.head.insertBefore(c,a==="title"?i.querySelector("head > title"):null)}function ck(i,a,c){if(c===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function r1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function uk(i,a,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=za(f.href),y=a.querySelector(rc(g));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=xd.bind(i),a.then(i,i)),c.state.loading|=4,c.instance=y,un(y);return}y=a.ownerDocument||a,f=Zx(f),(g=Ur.get(g))&&Om(f,g),y=y.createElement("link"),un(y);var E=y;E._p=new Promise(function(A,j){E.onload=A,E.onerror=j}),jn(y,"link",f),c.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=xd.bind(i),a.addEventListener("load",c),a.addEventListener("error",c))}}var Dm=0;function dk(i,a){return i.stylesheets&&i.count===0&&Sd(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var f=setTimeout(function(){if(i.stylesheets&&Sd(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+a);0<i.imgBytes&&Dm===0&&(Dm=62500*FA());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Sd(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>Dm?50:800)+a);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(g)}}:null}function xd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var wd=null;function Sd(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,wd=new Map,a.forEach(fk,i),wd=null,xd.call(i))}function fk(i,a){if(!(a.state.loading&4)){var c=wd.get(i);if(c)var f=c.get(null);else{c=new Map,wd.set(i,c);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var E=g[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(c.set(E.dataset.precedence,E),f=E)}f&&c.set(null,f)}g=a.instance,E=g.getAttribute("data-precedence"),y=c.get(E)||f,y===f&&c.set(null,g),c.set(E,g),this.count++,f=xd.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),y?y.parentNode.insertBefore(g,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var sc={$$typeof:_,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function hk(i,a,c,f,g,y,E,A,j){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ut(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ut(0),this.hiddenUpdates=ut(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function i1(i,a,c,f,g,y,E,A,j,P,X,Z){return i=new hk(i,a,c,E,j,P,X,Z,A),a=1,y===!0&&(a|=24),y=wr(3,null,null,a),i.current=y,y.stateNode=i,a=dp(),a.refCount++,i.pooledCache=a,a.refCount++,y.memoizedState={element:f,isDehydrated:c,cache:a},mp(y),i}function s1(i){return i?(i=ma,i):ma}function o1(i,a,c,f,g,y){g=s1(g),f.context===null?f.context=g:f.pendingContext=g,f=ws(a),f.payload={element:c},y=y===void 0?null:y,y!==null&&(f.callback=y),c=Ss(i,f,a),c!==null&&(cr(c,i,a),zl(c,i,a))}function a1(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function _m(i,a){a1(i,a),(i=i.alternate)&&a1(i,a)}function l1(i){if(i.tag===13||i.tag===31){var a=go(i,67108864);a!==null&&cr(a,i,67108864),_m(i,67108864)}}function c1(i){if(i.tag===13||i.tag===31){var a=Nr();a=Nt(a);var c=go(i,a);c!==null&&cr(c,i,a),_m(i,a)}}var Ed=!0;function pk(i,a,c,f){var g=O.T;O.T=null;var y=R.p;try{R.p=2,jm(i,a,c,f)}finally{R.p=y,O.T=g}}function mk(i,a,c,f){var g=O.T;O.T=null;var y=R.p;try{R.p=8,jm(i,a,c,f)}finally{R.p=y,O.T=g}}function jm(i,a,c,f){if(Ed){var g=Lm(f);if(g===null)xm(i,a,f,Cd,c),d1(i,f);else if(yk(g,i,a,c,f))f.stopPropagation();else if(d1(i,f),a&4&&-1<gk.indexOf(i)){for(;g!==null;){var y=Oi(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=_t(y.pendingLanes);if(E!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;E;){var j=1<<31-Te(E);A.entanglements[1]|=j,E&=~j}di(y),(gt&6)===0&&(od=tt()+500,Zl(0))}}break;case 31:case 13:A=go(y,2),A!==null&&cr(A,y,2),ld(),_m(y,2)}if(y=Lm(f),y===null&&xm(i,a,f,Cd,c),y===g)break;g=y}g!==null&&f.stopPropagation()}else xm(i,a,f,null,c)}}function Lm(i){return i=Qe(i),Bm(i)}var Cd=null;function Bm(i){if(Cd=null,i=Yn(i),i!==null){var a=o(i);if(a===null)i=null;else{var c=a.tag;if(c===13){if(i=l(a),i!==null)return i;i=null}else if(c===31){if(i=u(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Cd=i,null}function u1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wn()){case Gt:return 2;case me:return 8;case Se:case Ve:return 32;case Ke:return 268435456;default:return 32}default:return 32}}var zm=!1,_s=null,js=null,Ls=null,oc=new Map,ac=new Map,Bs=[],gk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function d1(i,a){switch(i){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":oc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ac.delete(a.pointerId)}}function lc(i,a,c,f,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:y,targetContainers:[g]},a!==null&&(a=Oi(a),a!==null&&l1(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function yk(i,a,c,f,g){switch(a){case"focusin":return _s=lc(_s,i,a,c,f,g),!0;case"dragenter":return js=lc(js,i,a,c,f,g),!0;case"mouseover":return Ls=lc(Ls,i,a,c,f,g),!0;case"pointerover":var y=g.pointerId;return oc.set(y,lc(oc.get(y)||null,i,a,c,f,g)),!0;case"gotpointercapture":return y=g.pointerId,ac.set(y,lc(ac.get(y)||null,i,a,c,f,g)),!0}return!1}function f1(i){var a=Yn(i.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){i.blockedOn=a,sa(i.priority,function(){c1(c)});return}}else if(a===31){if(a=u(c),a!==null){i.blockedOn=a,sa(i.priority,function(){c1(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Td(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=Lm(i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);Re=f,c.target.dispatchEvent(f),Re=null}else return a=Oi(c),a!==null&&l1(a),i.blockedOn=c,!1;a.shift()}return!0}function h1(i,a,c){Td(i)&&c.delete(a)}function bk(){zm=!1,_s!==null&&Td(_s)&&(_s=null),js!==null&&Td(js)&&(js=null),Ls!==null&&Td(Ls)&&(Ls=null),oc.forEach(h1),ac.forEach(h1)}function Nd(i,a){i.blockedOn===a&&(i.blockedOn=null,zm||(zm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,bk)))}var Ad=null;function p1(i){Ad!==i&&(Ad=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ad===i&&(Ad=null);for(var a=0;a<i.length;a+=3){var c=i[a],f=i[a+1],g=i[a+2];if(typeof f!="function"){if(Bm(f||c)===null)continue;break}var y=Oi(c);y!==null&&(i.splice(a,3),a-=3,Lp(y,{pending:!0,data:g,method:c.method,action:f},f,g))}}))}function Ha(i){function a(j){return Nd(j,i)}_s!==null&&Nd(_s,i),js!==null&&Nd(js,i),Ls!==null&&Nd(Ls,i),oc.forEach(a),ac.forEach(a);for(var c=0;c<Bs.length;c++){var f=Bs[c];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Bs.length&&(c=Bs[0],c.blockedOn===null);)f1(c),c.blockedOn===null&&Bs.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var g=c[f],y=c[f+1],E=g[Un]||null;if(typeof y=="function")E||p1(c);else if(E){var A=null;if(y&&y.hasAttribute("formAction")){if(g=y,E=y[Un]||null)A=E.formAction;else if(Bm(g)!==null)continue}else A=E.action;typeof A=="function"?c[f+1]=A:(c.splice(f,3),f-=3),p1(c)}}}function m1(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(E){return g=E})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function Im(i){this._internalRoot=i}kd.prototype.render=Im.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var c=a.current,f=Nr();o1(c,f,i,a,null,null)},kd.prototype.unmount=Im.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;o1(i.current,2,null,i,null,null),ld(),a[us]=null}};function kd(i){this._internalRoot=i}kd.prototype.unstable_scheduleHydration=function(i){if(i){var a=lo();i={blockedOn:null,target:i,priority:a};for(var c=0;c<Bs.length&&a!==0&&a<Bs[c].priority;c++);Bs.splice(c,0,i),c===0&&f1(i)}};var g1=e.version;if(g1!=="19.2.0")throw Error(r(527,g1,"19.2.0"));R.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(a),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var vk={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Md.isDisabled&&Md.supportsFiber)try{gr=Md.inject(vk),K=Md}catch{}}return uc.createRoot=function(i,a){if(!s(i))throw Error(r(299));var c=!1,f="",g=Ev,y=Cv,E=Tv;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),a=i1(i,1,!1,null,null,c,f,null,g,y,E,m1),i[us]=a.current,vm(i),new Im(a)},uc.hydrateRoot=function(i,a,c){if(!s(i))throw Error(r(299));var f=!1,g="",y=Ev,E=Cv,A=Tv,j=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.formState!==void 0&&(j=c.formState)),a=i1(i,1,!0,a,c??null,f,g,j,y,E,A,m1),a.context=s1(null),c=a.current,f=Nr(),f=Nt(f),g=ws(f),g.callback=null,Ss(c,g,f),c=f,a.current.lanes=c,$e(a,c),di(a),i[us]=a.current,vm(i),new kd(a)},uc.version="19.2.0",uc}var N1;function kk(){if(N1)return $m.exports;N1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$m.exports=Ak(),$m.exports}var Mk=kk();const Ro="1.29.1";var bi=[],Vr=[],Ok=Uint8Array,Fm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ua=0,Rk=Fm.length;Ua<Rk;++Ua)bi[Ua]=Fm[Ua],Vr[Fm.charCodeAt(Ua)]=Ua;Vr[45]=62;Vr[95]=63;function Dk(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function _k(n,e,t){return(e+t)*3/4-t}function zc(n){var e,t=Dk(n),r=t[0],s=t[1],o=new Ok(_k(n,r,s)),l=0,u=s>0?r-4:r,d;for(d=0;d<u;d+=4)e=Vr[n.charCodeAt(d)]<<18|Vr[n.charCodeAt(d+1)]<<12|Vr[n.charCodeAt(d+2)]<<6|Vr[n.charCodeAt(d+3)],o[l++]=e>>16&255,o[l++]=e>>8&255,o[l++]=e&255;return s===2&&(e=Vr[n.charCodeAt(d)]<<2|Vr[n.charCodeAt(d+1)]>>4,o[l++]=e&255),s===1&&(e=Vr[n.charCodeAt(d)]<<10|Vr[n.charCodeAt(d+1)]<<4|Vr[n.charCodeAt(d+2)]>>2,o[l++]=e>>8&255,o[l++]=e&255),o}function jk(n){return bi[n>>18&63]+bi[n>>12&63]+bi[n>>6&63]+bi[n&63]}function Lk(n,e,t){for(var r,s=[],o=e;o<t;o+=3)r=(n[o]<<16&16711680)+(n[o+1]<<8&65280)+(n[o+2]&255),s.push(jk(r));return s.join("")}function Ic(n){for(var e,t=n.length,r=t%3,s=[],o=16383,l=0,u=t-r;l<u;l+=o)s.push(Lk(n,l,l+o>u?u:l+o));return r===1?(e=n[t-1],s.push(bi[e>>2]+bi[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],s.push(bi[e>>10]+bi[e>>4&63]+bi[e<<2&63]+"=")),s.join("")}function dr(n){if(n===void 0)return{};if(!bE(n))throw new Error(`The arguments to a Convex function must be an object. Received: ${n}`);return n}function yE(n){if(typeof n>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof n!="string")throw new Error(`Invalid deployment address: found ${n}".`);if(!(n.startsWith("http:")||n.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${n}".`);try{new URL(n)}catch{throw new Error(`Invalid deployment address: "${n}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(n.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${n}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function bE(n){var s;const e=typeof n=="object",t=Object.getPrototypeOf(n),r=t===null||t===Object.prototype||((s=t==null?void 0:t.constructor)==null?void 0:s.name)==="Object";return e&&r}const vE=!0,Za=BigInt("-9223372036854775808"),_0=BigInt("9223372036854775807"),Ig=BigInt("0"),Bk=BigInt("8"),zk=BigInt("256");function xE(n){return Number.isNaN(n)||!Number.isFinite(n)||Object.is(n,-0)}function Ik(n){n<Ig&&(n-=Za+Za);let e=n.toString(16);e.length%2===1&&(e="0"+e);const t=new Uint8Array(new ArrayBuffer(8));let r=0;for(const s of e.match(/.{2}/g).reverse())t.set([parseInt(s,16)],r++),n>>=Bk;return Ic(t)}function Hk(n){const e=zc(n);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);let t=Ig,r=Ig;for(const s of e)t+=BigInt(s)*zk**r,r++;return t>_0&&(t+=Za+Za),t}function Uk(n){if(n<Za||_0<n)throw new Error(`BigInt ${n} does not fit into a 64-bit signed integer.`);const e=new ArrayBuffer(8);return new DataView(e).setBigInt64(0,n,!0),Ic(new Uint8Array(e))}function $k(n){const e=zc(n);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return new DataView(e.buffer).getBigInt64(0,!0)}const qk=DataView.prototype.setBigInt64?Uk:Ik,Pk=DataView.prototype.getBigInt64?$k:Hk,A1=1024;function wE(n){if(n.length>A1)throw new Error(`Field name ${n} exceeds maximum field name length ${A1}.`);if(n.startsWith("$"))throw new Error(`Field name ${n} starts with a '$', which is reserved.`);for(let e=0;e<n.length;e+=1){const t=n.charCodeAt(e);if(t<32||t>=127)throw new Error(`Field name ${n} has invalid character '${n[e]}': Field names can only contain non-control ASCII characters`)}}function ri(n){if(n===null||typeof n=="boolean"||typeof n=="number"||typeof n=="string")return n;if(Array.isArray(n))return n.map(r=>ri(r));if(typeof n!="object")throw new Error(`Unexpected type of ${n}`);const e=Object.entries(n);if(e.length===1){const r=e[0][0];if(r==="$bytes"){if(typeof n.$bytes!="string")throw new Error(`Malformed $bytes field on ${n}`);return zc(n.$bytes).buffer}if(r==="$integer"){if(typeof n.$integer!="string")throw new Error(`Malformed $integer field on ${n}`);return Pk(n.$integer)}if(r==="$float"){if(typeof n.$float!="string")throw new Error(`Malformed $float field on ${n}`);const s=zc(n.$float);if(s.byteLength!==8)throw new Error(`Received ${s.byteLength} bytes, expected 8 for $float`);const l=new DataView(s.buffer).getFloat64(0,vE);if(!xE(l))throw new Error(`Float ${l} should be encoded as a number`);return l}if(r==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(r==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const t={};for(const[r,s]of Object.entries(n))wE(r),t[r]=ri(s);return t}const k1=16384;function xc(n){const e=JSON.stringify(n,(t,r)=>r===void 0?"undefined":typeof r=="bigint"?`${r.toString()}n`:r);if(e.length>k1){const t="[...truncated]";let r=k1-t.length;const s=e.codePointAt(r-1);return s!==void 0&&s>65535&&(r-=1),e.substring(0,r)+t}return e}function Hg(n,e,t,r){var l;if(n===void 0){const u=t&&` (present at path ${t} in original object ${xc(e)})`;throw new Error(`undefined is not a valid Convex value${u}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(n===null)return n;if(typeof n=="bigint"){if(n<Za||_0<n)throw new Error(`BigInt ${n} does not fit into a 64-bit signed integer.`);return{$integer:qk(n)}}if(typeof n=="number")if(xE(n)){const u=new ArrayBuffer(8);return new DataView(u).setFloat64(0,n,vE),{$float:Ic(new Uint8Array(u))}}else return n;if(typeof n=="boolean"||typeof n=="string")return n;if(n instanceof ArrayBuffer)return{$bytes:Ic(new Uint8Array(n))};if(Array.isArray(n))return n.map((u,d)=>Hg(u,e,t+`[${d}]`));if(n instanceof Set)throw new Error(Gm(t,"Set",[...n],e));if(n instanceof Map)throw new Error(Gm(t,"Map",[...n],e));if(!bE(n)){const u=(l=n==null?void 0:n.constructor)==null?void 0:l.name,d=u?`${u} `:"";throw new Error(Gm(t,d,n,e))}const s={},o=Object.entries(n);o.sort(([u,d],[h,p])=>u===h?0:u<h?-1:1);for(const[u,d]of o)d!==void 0&&(wE(u),s[u]=Hg(d,e,t+`.${u}`));return s}function Gm(n,e,t,r){return n?`${e}${xc(t)} is not a supported Convex type (present at path ${n} in original object ${xc(r)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${e}${xc(t)} is not a supported Convex type.`}function Kr(n){return Hg(n,n,"")}var Vk=Object.defineProperty,Fk=(n,e,t)=>e in n?Vk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Km=(n,e,t)=>Fk(n,typeof e!="symbol"?e+"":e,t),M1,O1;const Gk=Symbol.for("ConvexError");class jo extends(O1=Error,M1=Gk,O1){constructor(e){super(typeof e=="string"?e:xc(e)),Km(this,"name","ConvexError"),Km(this,"data"),Km(this,M1,!0),this.data=e}}const SE=()=>Array.from({length:4},()=>0);SE();SE();var Kk=Object.defineProperty,Wk=(n,e,t)=>e in n?Kk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,R1=(n,e,t)=>Wk(n,typeof e!="symbol"?e+"":e,t);const Qk="color:rgb(0, 145, 255)";function EE(n){switch(n){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class CE{constructor(e){R1(this,"_onLogLineFuncs"),R1(this,"_verbose"),this._onLogLineFuncs={},this._verbose=e.verbose}addLogLineListener(e){let t=Math.random().toString(36).substring(2,15);for(let r=0;r<10&&this._onLogLineFuncs[t]!==void 0;r++)t=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[t]=e,()=>{delete this._onLogLineFuncs[t]}}logVerbose(...e){if(this._verbose)for(const t of Object.values(this._onLogLineFuncs))t("debug",`${new Date().toISOString()}`,...e)}log(...e){for(const t of Object.values(this._onLogLineFuncs))t("info",...e)}warn(...e){for(const t of Object.values(this._onLogLineFuncs))t("warn",...e)}error(...e){for(const t of Object.values(this._onLogLineFuncs))t("error",...e)}}function j0(n){const e=new CE(n);return e.addLogLineListener((t,...r)=>{switch(t){case"debug":console.debug(...r);break;case"info":console.log(...r);break;case"warn":console.warn(...r);break;case"error":console.error(...r);break;default:console.log(...r)}}),e}function L0(n){return new CE(n)}function Ks(n,e,t,r,s){const o=EE(t);if(typeof s=="object"&&(s=`ConvexError ${JSON.stringify(s.errorData,null,2)}`),e==="info"){const l=s.match(/^\[.*?\] /);if(l===null){n.error(`[CONVEX ${o}(${r})] Could not parse console.log`);return}const u=s.slice(1,l[0].length-2),d=s.slice(l[0].length);n.log(`%c[CONVEX ${o}(${r})] [${u}]`,Qk,d)}else n.error(`[CONVEX ${o}(${r})] ${s}`)}function Yk(n,e){const t=`[CONVEX FATAL ERROR] ${e}`;return n.error(t),new Error(t)}function Wa(n,e,t){return`[CONVEX ${EE(n)}(${e})] ${t.errorMessage}
  Called by client`}function Ug(n,e){return e.data=n.errorData,e}function gf(n){const e=n.split(":");let t,r;return e.length===1?(t=e[0],r="default"):(t=e.slice(0,e.length-1).join(":"),r=e[e.length-1]),t.endsWith(".js")&&(t=t.slice(0,-3)),`${t}:${r}`}function Ho(n,e){return JSON.stringify({udfPath:gf(n),args:Kr(e)})}var Xk=Object.defineProperty,Jk=(n,e,t)=>e in n?Xk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fi=(n,e,t)=>Jk(n,typeof e!="symbol"?e+"":e,t);class Zk{constructor(){fi(this,"nextQueryId"),fi(this,"querySetVersion"),fi(this,"querySet"),fi(this,"queryIdToToken"),fi(this,"identityVersion"),fi(this,"auth"),fi(this,"outstandingQueriesOlderThanRestart"),fi(this,"outstandingAuthOlderThanRestart"),fi(this,"paused"),fi(this,"pendingQuerySetModifications"),this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map,this.outstandingQueriesOlderThanRestart=new Set,this.outstandingAuthOlderThanRestart=!1,this.paused=!1,this.pendingQuerySetModifications=new Map}hasSyncedPastLastReconnect(){return this.outstandingQueriesOlderThanRestart.size===0&&!this.outstandingAuthOlderThanRestart}markAuthCompletion(){this.outstandingAuthOlderThanRestart=!1}subscribe(e,t,r,s){const o=gf(e),l=Ho(o,t),u=this.querySet.get(l);if(u!==void 0)return u.numSubscribers+=1,{queryToken:l,modification:null,unsubscribe:()=>this.removeSubscriber(l)};{const d=this.nextQueryId++,h={id:d,canonicalizedUdfPath:o,args:t,numSubscribers:1,journal:r,componentPath:s};this.querySet.set(l,h),this.queryIdToToken.set(d,l);const p=this.querySetVersion,m=this.querySetVersion+1,b={type:"Add",queryId:d,udfPath:o,args:[Kr(t)],journal:r,componentPath:s};return this.paused?this.pendingQuerySetModifications.set(d,b):this.querySetVersion=m,{queryToken:l,modification:{type:"ModifyQuerySet",baseVersion:p,newVersion:m,modifications:[b]},unsubscribe:()=>this.removeSubscriber(l)}}}transition(e){for(const t of e.modifications)switch(t.type){case"QueryUpdated":case"QueryFailed":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);const r=t.journal;if(r!==void 0){const s=this.queryIdToToken.get(t.queryId);s!==void 0&&(this.querySet.get(s).journal=r)}break}case"QueryRemoved":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);break}default:throw new Error(`Invalid modification ${t.type}`)}}queryId(e,t){const r=gf(e),s=Ho(r,t),o=this.querySet.get(s);return o!==void 0?o.id:null}isCurrentOrNewerAuthVersion(e){return e>=this.identityVersion}getAuth(){return this.auth}setAuth(e){this.auth={tokenType:"User",value:e};const t=this.identityVersion;return this.paused||(this.identityVersion=t+1),{type:"Authenticate",baseVersion:t,...this.auth}}setAdminAuth(e,t){const r={tokenType:"Admin",value:e,impersonating:t};this.auth=r;const s=this.identityVersion;return this.paused||(this.identityVersion=s+1),{type:"Authenticate",baseVersion:s,...r}}clearAuth(){this.auth=void 0,this.markAuthCompletion();const e=this.identityVersion;return this.paused||(this.identityVersion=e+1),{type:"Authenticate",tokenType:"None",baseVersion:e}}hasAuth(){return!!this.auth}isNewAuth(e){var t;return((t=this.auth)==null?void 0:t.value)!==e}queryPath(e){const t=this.queryIdToToken.get(e);return t?this.querySet.get(t).canonicalizedUdfPath:null}queryArgs(e){const t=this.queryIdToToken.get(e);return t?this.querySet.get(t).args:null}queryToken(e){return this.queryIdToToken.get(e)??null}queryJournal(e){var t;return(t=this.querySet.get(e))==null?void 0:t.journal}restart(e){this.unpause(),this.outstandingQueriesOlderThanRestart.clear();const t=[];for(const o of this.querySet.values()){const l={type:"Add",queryId:o.id,udfPath:o.canonicalizedUdfPath,args:[Kr(o.args)],journal:o.journal,componentPath:o.componentPath};t.push(l),e.has(o.id)||this.outstandingQueriesOlderThanRestart.add(o.id)}this.querySetVersion=1;const r={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:t};if(!this.auth)return this.identityVersion=0,[r,void 0];this.outstandingAuthOlderThanRestart=!0;const s={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[r,s]}pause(){this.paused=!0}resume(){const e=this.pendingQuerySetModifications.size>0?{type:"ModifyQuerySet",baseVersion:this.querySetVersion,newVersion:++this.querySetVersion,modifications:Array.from(this.pendingQuerySetModifications.values())}:void 0,t=this.auth!==void 0?{type:"Authenticate",baseVersion:this.identityVersion++,...this.auth}:void 0;return this.unpause(),[e,t]}unpause(){this.paused=!1,this.pendingQuerySetModifications.clear()}removeSubscriber(e){const t=this.querySet.get(e);if(t.numSubscribers>1)return t.numSubscribers-=1,null;{this.querySet.delete(e),this.queryIdToToken.delete(t.id),this.outstandingQueriesOlderThanRestart.delete(t.id);const r=this.querySetVersion,s=this.querySetVersion+1,o={type:"Remove",queryId:t.id};return this.paused?this.pendingQuerySetModifications.has(t.id)?this.pendingQuerySetModifications.delete(t.id):this.pendingQuerySetModifications.set(t.id,o):this.querySetVersion=s,{type:"ModifyQuerySet",baseVersion:r,newVersion:s,modifications:[o]}}}}var eM=Object.defineProperty,tM=(n,e,t)=>e in n?eM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Od=(n,e,t)=>tM(n,typeof e!="symbol"?e+"":e,t);class nM{constructor(e,t){this.logger=e,this.markConnectionStateDirty=t,Od(this,"inflightRequests"),Od(this,"requestsOlderThanRestart"),Od(this,"inflightMutationsCount",0),Od(this,"inflightActionsCount",0),this.inflightRequests=new Map,this.requestsOlderThanRestart=new Set}request(e,t){const r=new Promise(s=>{const o=t?"Requested":"NotSent";this.inflightRequests.set(e.requestId,{message:e,status:{status:o,requestedAt:new Date,onResult:s}}),e.type==="Mutation"?this.inflightMutationsCount++:e.type==="Action"&&this.inflightActionsCount++});return this.markConnectionStateDirty(),r}onResponse(e){const t=this.inflightRequests.get(e.requestId);if(t===void 0||t.status.status==="Completed")return null;const r=t.message.type==="Mutation"?"mutation":"action",s=t.message.udfPath;for(const d of e.logLines)Ks(this.logger,"info",r,s,d);const o=t.status;let l,u;if(e.success)l={success:!0,logLines:e.logLines,value:ri(e.result)},u=()=>o.onResult(l);else{const d=e.result,{errorData:h}=e;Ks(this.logger,"error",r,s,d),l={success:!1,errorMessage:d,errorData:h!==void 0?ri(h):void 0,logLines:e.logLines},u=()=>o.onResult(l)}return e.type==="ActionResponse"||!e.success?(u(),this.inflightRequests.delete(e.requestId),this.requestsOlderThanRestart.delete(e.requestId),t.message.type==="Action"?this.inflightActionsCount--:t.message.type==="Mutation"&&this.inflightMutationsCount--,this.markConnectionStateDirty(),{requestId:e.requestId,result:l}):(t.status={status:"Completed",result:l,ts:e.ts,onResolve:u},null)}removeCompleted(e){const t=new Map;for(const[r,s]of this.inflightRequests.entries()){const o=s.status;o.status==="Completed"&&o.ts.lessThanOrEqual(e)&&(o.onResolve(),t.set(r,o.result),s.message.type==="Mutation"?this.inflightMutationsCount--:s.message.type==="Action"&&this.inflightActionsCount--,this.inflightRequests.delete(r),this.requestsOlderThanRestart.delete(r))}return t.size>0&&this.markConnectionStateDirty(),t}restart(){this.requestsOlderThanRestart=new Set(this.inflightRequests.keys());const e=[];for(const[t,r]of this.inflightRequests){if(r.status.status==="NotSent"){r.status.status="Requested",e.push(r.message);continue}if(r.message.type==="Mutation")e.push(r.message);else if(r.message.type==="Action"){if(this.inflightRequests.delete(t),this.requestsOlderThanRestart.delete(t),this.inflightActionsCount--,r.status.status==="Completed")throw new Error("Action should never be in 'Completed' state");r.status.onResult({success:!1,errorMessage:"Connection lost while action was in flight",logLines:[]})}}return this.markConnectionStateDirty(),e}resume(){const e=[];for(const[,t]of this.inflightRequests)if(t.status.status==="NotSent"){t.status.status="Requested",e.push(t.message);continue}return e}hasIncompleteRequests(){for(const e of this.inflightRequests.values())if(e.status.status==="Requested")return!0;return!1}hasInflightRequests(){return this.inflightRequests.size>0}hasSyncedPastLastReconnect(){return this.requestsOlderThanRestart.size===0}timeOfOldestInflightRequest(){if(this.inflightRequests.size===0)return null;let e=Date.now();for(const t of this.inflightRequests.values())t.status.status!=="Completed"&&t.status.requestedAt.getTime()<e&&(e=t.status.requestedAt.getTime());return new Date(e)}inflightMutations(){return this.inflightMutationsCount}inflightActions(){return this.inflightActionsCount}}const Hc=Symbol.for("functionName"),TE=Symbol.for("toReferencePath");function rM(n){return n[TE]??null}function iM(n){return n.startsWith("function://")}function sM(n){let e;if(typeof n=="string")iM(n)?e={functionHandle:n}:e={name:n};else if(n[Hc])e={name:n[Hc]};else{const t=rM(n);if(!t)throw new Error(`${n} is not a functionReference`);e={reference:t}}return e}function Sn(n){const e=sM(n);if(e.name===void 0)throw e.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${e.functionHandle}`):e.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${e.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(e)}`);if(typeof n=="string")return n;const t=n[Hc];if(!t)throw new Error(`${n} is not a functionReference`);return t}function B0(n){return{[Hc]:n}}function NE(n=[]){const e={get(t,r){if(typeof r=="string"){const s=[...n,r];return NE(s)}else if(r===Hc){if(n.length<2){const l=["api",...n].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${l}\``)}const s=n.slice(0,-1).join("/"),o=n[n.length-1];return o==="default"?s:s+":"+o}else return r===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},e)}const oM=NE();var aM=Object.defineProperty,lM=(n,e,t)=>e in n?aM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yf=(n,e,t)=>lM(n,typeof e!="symbol"?e+"":e,t);class Uc{constructor(e){yf(this,"queryResults"),yf(this,"modifiedQueries"),this.queryResults=e,this.modifiedQueries=[]}getQuery(e,...t){const r=dr(t[0]),s=Sn(e),o=this.queryResults.get(Ho(s,r));if(o!==void 0)return Uc.queryValue(o.result)}getAllQueries(e){const t=[],r=Sn(e);for(const s of this.queryResults.values())s.udfPath===gf(r)&&t.push({args:s.args,value:Uc.queryValue(s.result)});return t}setQuery(e,t,r){const s=dr(t),o=Sn(e),l=Ho(o,s);let u;r===void 0?u=void 0:u={success:!0,value:r,logLines:[]};const d={udfPath:o,args:s,result:u};this.queryResults.set(l,d),this.modifiedQueries.push(l)}static queryValue(e){if(e!==void 0)return e.success?e.value:void 0}}class cM{constructor(){yf(this,"queryResults"),yf(this,"optimisticUpdates"),this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(e,t){this.optimisticUpdates=this.optimisticUpdates.filter(l=>!t.has(l.mutationId));const r=this.queryResults;this.queryResults=new Map(e);const s=new Uc(this.queryResults);for(const l of this.optimisticUpdates)l.update(s);const o=[];for(const[l,u]of this.queryResults){const d=r.get(l);(d===void 0||d.result!==u.result)&&o.push(l)}return o}applyOptimisticUpdate(e,t){this.optimisticUpdates.push({update:e,mutationId:t});const r=new Uc(this.queryResults);return e(r),r.modifiedQueries}rawQueryResult(e){return this.queryResults.get(e)}queryResult(e){const t=this.queryResults.get(e);if(t===void 0)return;const r=t.result;if(r!==void 0){if(r.success)return r.value;throw r.errorData!==void 0?Ug(r,new jo(Wa("query",t.udfPath,r))):new Error(Wa("query",t.udfPath,r))}}hasQueryResult(e){return this.queryResults.get(e)!==void 0}queryLogs(e){var r;const t=this.queryResults.get(e);return(r=t==null?void 0:t.result)==null?void 0:r.logLines}}var uM=Object.defineProperty,dM=(n,e,t)=>e in n?uM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Wm=(n,e,t)=>dM(n,typeof e!="symbol"?e+"":e,t);class Ar{constructor(e,t){Wm(this,"low"),Wm(this,"high"),Wm(this,"__isUnsignedLong__"),this.low=e|0,this.high=t|0,this.__isUnsignedLong__=!0}static isLong(e){return(e&&e.__isUnsignedLong__)===!0}static fromBytesLE(e){return new Ar(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24)}toBytesLE(){const e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}static fromNumber(e){return isNaN(e)||e<0?D1:e>=fM?hM:new Ar(e%wc|0,e/wc|0)}toString(){return(BigInt(this.high)*BigInt(wc)+BigInt(this.low)).toString()}equals(e){return Ar.isLong(e)||(e=Ar.fromValue(e)),this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}notEquals(e){return!this.equals(e)}comp(e){return Ar.isLong(e)||(e=Ar.fromValue(e)),this.equals(e)?0:e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(e){return this.comp(e)<=0}static fromValue(e){return typeof e=="number"?Ar.fromNumber(e):new Ar(e.low,e.high)}}const D1=new Ar(0,0),_1=65536,wc=_1*_1,fM=wc*wc,hM=new Ar(-1,-1);var pM=Object.defineProperty,mM=(n,e,t)=>e in n?pM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Rd=(n,e,t)=>mM(n,typeof e!="symbol"?e+"":e,t);class j1{constructor(e,t){Rd(this,"version"),Rd(this,"remoteQuerySet"),Rd(this,"queryPath"),Rd(this,"logger"),this.version={querySet:0,ts:Ar.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=e,this.logger=t}transition(e){const t=e.startVersion;if(this.version.querySet!==t.querySet||this.version.ts.notEquals(t.ts)||this.version.identity!==t.identity)throw new Error(`Invalid start version: ${t.ts.toString()}:${t.querySet}:${t.identity}, transitioning from ${this.version.ts.toString()}:${this.version.querySet}:${this.version.identity}`);for(const r of e.modifications)switch(r.type){case"QueryUpdated":{const s=this.queryPath(r.queryId);if(s)for(const l of r.logLines)Ks(this.logger,"info","query",s,l);const o=ri(r.value??null);this.remoteQuerySet.set(r.queryId,{success:!0,value:o,logLines:r.logLines});break}case"QueryFailed":{const s=this.queryPath(r.queryId);if(s)for(const l of r.logLines)Ks(this.logger,"info","query",s,l);const{errorData:o}=r;this.remoteQuerySet.set(r.queryId,{success:!1,errorMessage:r.errorMessage,errorData:o!==void 0?ri(o):void 0,logLines:r.logLines});break}case"QueryRemoved":{this.remoteQuerySet.delete(r.queryId);break}default:throw new Error(`Invalid modification ${r.type}`)}this.version=e.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}}function Qm(n){const e=zc(n);return Ar.fromBytesLE(Array.from(e))}function gM(n){const e=new Uint8Array(n.toBytesLE());return Ic(e)}function L1(n){switch(n.type){case"FatalError":case"AuthError":case"ActionResponse":case"TransitionChunk":case"Ping":return{...n};case"MutationResponse":return n.success?{...n,ts:Qm(n.ts)}:{...n};case"Transition":return{...n,startVersion:{...n.startVersion,ts:Qm(n.startVersion.ts)},endVersion:{...n.endVersion,ts:Qm(n.endVersion.ts)}}}}function yM(n){switch(n.type){case"Authenticate":case"ModifyQuerySet":case"Mutation":case"Action":case"Event":return{...n};case"Connect":return n.maxObservedTimestamp!==void 0?{...n,maxObservedTimestamp:gM(n.maxObservedTimestamp)}:{...n,maxObservedTimestamp:void 0}}}var bM=Object.defineProperty,vM=(n,e,t)=>e in n?bM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ln=(n,e,t)=>vM(n,typeof e!="symbol"?e+"":e,t);const xM=1e3,wM=1001,SM=1005,EM=4040;let rf;function sf(){return rf===void 0&&(rf=Date.now()),typeof performance>"u"||!performance.now?Date.now():Math.round(rf+performance.now())}function B1(){return`t=${Math.round((sf()-rf)/100)/10}s`}const AE={InternalServerError:{timeout:1e3},SubscriptionsWorkerFullError:{timeout:3e3},TooManyConcurrentRequests:{timeout:3e3},CommitterFullError:{timeout:3e3},AwsTooManyRequestsException:{timeout:3e3},ExecuteFullError:{timeout:3e3},SystemTimeoutError:{timeout:3e3},ExpiredInQueue:{timeout:3e3},VectorIndexesUnavailable:{timeout:1e3},SearchIndexesUnavailable:{timeout:1e3},TableSummariesUnavailable:{timeout:1e3},VectorIndexTooLarge:{timeout:3e3},SearchIndexTooLarge:{timeout:3e3},TooManyWritesInTimePeriod:{timeout:3e3}};function CM(n){if(n===void 0)return"Unknown";for(const e of Object.keys(AE))if(n.startsWith(e))return e;return"Unknown"}class TM{constructor(e,t,r,s,o,l){this.markConnectionStateDirty=o,this.debug=l,Ln(this,"socket"),Ln(this,"connectionCount"),Ln(this,"_hasEverConnected",!1),Ln(this,"lastCloseReason"),Ln(this,"transitionChunkBuffer",null),Ln(this,"defaultInitialBackoff"),Ln(this,"maxBackoff"),Ln(this,"retries"),Ln(this,"serverInactivityThreshold"),Ln(this,"reconnectDueToServerInactivityTimeout"),Ln(this,"uri"),Ln(this,"onOpen"),Ln(this,"onResume"),Ln(this,"onMessage"),Ln(this,"webSocketConstructor"),Ln(this,"logger"),Ln(this,"onServerDisconnectError"),this.webSocketConstructor=r,this.socket={state:"disconnected"},this.connectionCount=0,this.lastCloseReason="InitialConnect",this.defaultInitialBackoff=1e3,this.maxBackoff=16e3,this.retries=0,this.serverInactivityThreshold=6e4,this.reconnectDueToServerInactivityTimeout=null,this.uri=e,this.onOpen=t.onOpen,this.onResume=t.onResume,this.onMessage=t.onMessage,this.onServerDisconnectError=t.onServerDisconnectError,this.logger=s,this.connect()}setSocketState(e){this.socket=e,this._logVerbose(`socket state changed: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}`),this.markConnectionStateDirty()}assembleTransition(e){if(e.partNumber<0||e.partNumber>=e.totalParts||e.totalParts===0||this.transitionChunkBuffer&&(this.transitionChunkBuffer.totalParts!==e.totalParts||this.transitionChunkBuffer.transitionId!==e.transitionId))throw this.transitionChunkBuffer=null,new Error("Invalid TransitionChunk");if(this.transitionChunkBuffer===null&&(this.transitionChunkBuffer={chunks:[],totalParts:e.totalParts,transitionId:e.transitionId}),e.partNumber!==this.transitionChunkBuffer.chunks.length){const t=this.transitionChunkBuffer.chunks.length;throw this.transitionChunkBuffer=null,new Error(`TransitionChunk received out of order: expected part ${t}, got ${e.partNumber}`)}if(this.transitionChunkBuffer.chunks.push(e.chunk),this.transitionChunkBuffer.chunks.length===e.totalParts){const t=this.transitionChunkBuffer.chunks.join("");this.transitionChunkBuffer=null;const r=L1(JSON.parse(t));if(r.type!=="Transition")throw new Error(`Expected Transition, got ${r.type} after assembling chunks`);return r}return null}connect(){if(this.socket.state==="terminated")return;if(this.socket.state!=="disconnected"&&this.socket.state!=="stopped")throw new Error("Didn't start connection from disconnected state: "+this.socket.state);const e=new this.webSocketConstructor(this.uri);this._logVerbose("constructed WebSocket"),this.setSocketState({state:"connecting",ws:e,paused:"no"}),this.resetServerInactivityTimeout(),e.onopen=()=>{if(this.logger.logVerbose("begin ws.onopen"),this.socket.state!=="connecting")throw new Error("onopen called with socket not in connecting state");this.setSocketState({state:"ready",ws:e,paused:this.socket.paused==="yes"?"uninitialized":"no"}),this.resetServerInactivityTimeout(),this.socket.paused==="no"&&(this._hasEverConnected=!0,this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason,clientTs:sf()})),this.lastCloseReason!=="InitialConnect"&&(this.lastCloseReason?this.logger.log("WebSocket reconnected at",B1(),"after disconnect due to",this.lastCloseReason):this.logger.log("WebSocket reconnected at",B1())),this.connectionCount+=1,this.lastCloseReason=null},e.onerror=t=>{this.transitionChunkBuffer=null;const r=t.message;r&&this.logger.log(`WebSocket error message: ${r}`)},e.onmessage=t=>{this.resetServerInactivityTimeout();const r=t.data.length;let s=L1(JSON.parse(t.data));if(this._logVerbose(`received ws message with type ${s.type}`),s.type==="Ping")return;if(s.type==="TransitionChunk"){const l=this.assembleTransition(s);if(!l)return;s=l,this._logVerbose(`assembled full ws message of type ${s.type}`)}this.transitionChunkBuffer!==null&&(this.transitionChunkBuffer=null,this.logger.log(`Received unexpected ${s.type} while buffering TransitionChunks`)),s.type==="Transition"&&this.reportLargeTransition({messageLength:r,transition:s}),this.onMessage(s).hasSyncedPastLastReconnect&&(this.retries=0,this.markConnectionStateDirty())},e.onclose=t=>{if(this._logVerbose("begin ws.onclose"),this.transitionChunkBuffer=null,this.lastCloseReason===null&&(this.lastCloseReason=t.reason||`closed with code ${t.code}`),t.code!==xM&&t.code!==wM&&t.code!==SM&&t.code!==EM){let s=`WebSocket closed with code ${t.code}`;t.reason&&(s+=`: ${t.reason}`),this.logger.log(s),this.onServerDisconnectError&&t.reason&&this.onServerDisconnectError(s)}const r=CM(t.reason);this.scheduleReconnect(r)}}socketState(){return this.socket.state}sendMessage(e){const t={type:e.type,...e.type==="Authenticate"&&e.tokenType==="User"?{value:`...${e.value.slice(-7)}`}:{}};if(this.socket.state==="ready"&&this.socket.paused==="no"){const r=yM(e),s=JSON.stringify(r);let o=!1;try{this.socket.ws.send(s),o=!0}catch(l){this.logger.log(`Failed to send message on WebSocket, reconnecting: ${l}`),this.closeAndReconnect("FailedToSendMessage")}return this._logVerbose(`${o?"sent":"failed to send"} message with type ${e.type}: ${JSON.stringify(t)}`),!0}return this._logVerbose(`message not sent (socket state: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}): ${JSON.stringify(t)}`),!1}resetServerInactivityTimeout(){this.socket.state!=="terminated"&&(this.reconnectDueToServerInactivityTimeout!==null&&(clearTimeout(this.reconnectDueToServerInactivityTimeout),this.reconnectDueToServerInactivityTimeout=null),this.reconnectDueToServerInactivityTimeout=setTimeout(()=>{this.closeAndReconnect("InactiveServer")},this.serverInactivityThreshold))}scheduleReconnect(e){this.socket={state:"disconnected"};const t=this.nextBackoff(e);this.markConnectionStateDirty(),this.logger.log(`Attempting reconnect in ${Math.round(t)}ms`),setTimeout(()=>this.connect(),t)}closeAndReconnect(e){switch(this._logVerbose(`begin closeAndReconnect with reason ${e}`),this.socket.state){case"disconnected":case"terminated":case"stopped":return;case"connecting":case"ready":{this.lastCloseReason=e,this.close(),this.scheduleReconnect("client");return}default:this.socket}}close(){switch(this.transitionChunkBuffer=null,this.socket.state){case"disconnected":case"terminated":case"stopped":return Promise.resolve();case"connecting":{const e=this.socket.ws;return e.onmessage=t=>{this._logVerbose("Ignoring message received after close")},new Promise(t=>{e.onclose=()=>{this._logVerbose("Closed after connecting"),t()},e.onopen=()=>{this._logVerbose("Opened after connecting"),e.close()}})}case"ready":{this._logVerbose("ws.close called");const e=this.socket.ws;e.onmessage=r=>{this._logVerbose("Ignoring message received after close")};const t=new Promise(r=>{e.onclose=()=>{r()}});return e.close(),t}default:return this.socket,Promise.resolve()}}terminate(){switch(this.reconnectDueToServerInactivityTimeout&&clearTimeout(this.reconnectDueToServerInactivityTimeout),this.socket.state){case"terminated":case"stopped":case"disconnected":case"connecting":case"ready":{const e=this.close();return this.setSocketState({state:"terminated"}),e}default:throw this.socket,new Error(`Invalid websocket state: ${this.socket.state}`)}}stop(){switch(this.socket.state){case"terminated":return Promise.resolve();case"connecting":case"stopped":case"disconnected":case"ready":{const e=this.close();return this.socket={state:"stopped"},e}default:return this.socket,Promise.resolve()}}tryRestart(){switch(this.socket.state){case"stopped":break;case"terminated":case"connecting":case"ready":case"disconnected":this.logger.logVerbose("Restart called without stopping first");return;default:this.socket}this.connect()}pause(){switch(this.socket.state){case"disconnected":case"stopped":case"terminated":return;case"connecting":case"ready":{this.socket={...this.socket,paused:"yes"};return}default:{this.socket;return}}}resume(){switch(this.socket.state){case"connecting":this.socket={...this.socket,paused:"no"};return;case"ready":this.socket.paused==="uninitialized"?(this.socket={...this.socket,paused:"no"},this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason,clientTs:sf()})):this.socket.paused==="yes"&&(this.socket={...this.socket,paused:"no"},this.onResume());return;case"terminated":case"stopped":case"disconnected":return;default:this.socket}this.connect()}connectionState(){return{isConnected:this.socket.state==="ready",hasEverConnected:this._hasEverConnected,connectionCount:this.connectionCount,connectionRetries:this.retries}}_logVerbose(e){this.logger.logVerbose(e)}nextBackoff(e){const r=(e==="client"?100:e==="Unknown"?this.defaultInitialBackoff:AE[e].timeout)*Math.pow(2,this.retries);this.retries+=1;const s=Math.min(r,this.maxBackoff),o=s*(Math.random()-.5);return s+o}reportLargeTransition({transition:e,messageLength:t}){if(e.clientClockSkew===void 0||e.serverTs===void 0)return;const r=sf()-e.clientClockSkew-e.serverTs/1e6,s=`${Math.round(r)}ms`,o=`${Math.round(t/1e4)/100}MB`,l=t/(r/1e3),u=`${Math.round(l/1e4)/100}MB per second`;this._logVerbose(`received ${o} transition in ${s} at ${u}`),t>2e7?this.logger.log(`received query results totaling more that 20MB (${o}) which will take a long time to download on slower connections`):r>2e4&&this.logger.log(`received query results totaling ${o} which took more than 20s to arrive (${s})`),this.debug&&this.sendMessage({type:"Event",eventType:"ClientReceivedTransition",event:{transitionTransitTime:r,messageLength:t}})}}function NM(){return AM()}function AM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}class mc extends Error{}mc.prototype.name="InvalidTokenError";function kM(n){return decodeURIComponent(atob(n).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function MM(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return kM(e)}catch{return atob(e)}}function kE(n,e){if(typeof n!="string")throw new mc("Invalid token specified: must be a string");e||(e={});const t=e.header===!0?0:1,r=n.split(".")[t];if(typeof r!="string")throw new mc(`Invalid token specified: missing part #${t+1}`);let s;try{s=MM(r)}catch(o){throw new mc(`Invalid token specified: invalid base64 for part #${t+1} (${o.message})`)}try{return JSON.parse(s)}catch(o){throw new mc(`Invalid token specified: invalid json for part #${t+1} (${o.message})`)}}var OM=Object.defineProperty,RM=(n,e,t)=>e in n?OM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$r=(n,e,t)=>RM(n,typeof e!="symbol"?e+"":e,t);const DM=20*24*60*60*1e3,z1=2;class _M{constructor(e,t,r){$r(this,"authState",{state:"noAuth"}),$r(this,"configVersion",0),$r(this,"syncState"),$r(this,"authenticate"),$r(this,"stopSocket"),$r(this,"tryRestartSocket"),$r(this,"pauseSocket"),$r(this,"resumeSocket"),$r(this,"clearAuth"),$r(this,"logger"),$r(this,"refreshTokenLeewaySeconds"),$r(this,"tokenConfirmationAttempts",0),this.syncState=e,this.authenticate=t.authenticate,this.stopSocket=t.stopSocket,this.tryRestartSocket=t.tryRestartSocket,this.pauseSocket=t.pauseSocket,this.resumeSocket=t.resumeSocket,this.clearAuth=t.clearAuth,this.logger=r.logger,this.refreshTokenLeewaySeconds=r.refreshTokenLeewaySeconds}async setConfig(e,t){this.resetAuthState(),this._logVerbose("pausing WS for auth token fetch"),this.pauseSocket();const r=await this.fetchTokenAndGuardAgainstRace(e,{forceRefreshToken:!1});r.isFromOutdatedConfig||(r.value?(this.setAuthState({state:"waitingForServerConfirmationOfCachedToken",config:{fetchToken:e,onAuthChange:t},hasRetried:!1}),this.authenticate(r.value)):(this.setAuthState({state:"initialRefetch",config:{fetchToken:e,onAuthChange:t}}),await this.refetchToken()),this._logVerbose("resuming WS after auth token fetch"),this.resumeSocket())}onTransition(e){if(this.syncState.isCurrentOrNewerAuthVersion(e.endVersion.identity)&&!(e.endVersion.identity<=e.startVersion.identity)){if(this.authState.state==="waitingForServerConfirmationOfCachedToken"){this._logVerbose("server confirmed auth token is valid"),this.refetchToken(),this.authState.config.onAuthChange(!0);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this._logVerbose("server confirmed new auth token is valid"),this.scheduleTokenRefetch(this.authState.token),this.tokenConfirmationAttempts=0,this.authState.hadAuth||this.authState.config.onAuthChange(!0))}}onAuthError(e){if(e.authUpdateAttempted===!1&&(this.authState.state==="waitingForServerConfirmationOfFreshToken"||this.authState.state==="waitingForServerConfirmationOfCachedToken")){this._logVerbose("ignoring non-auth token expired error");return}const{baseVersion:t}=e;if(!this.syncState.isCurrentOrNewerAuthVersion(t+1)){this._logVerbose("ignoring auth error for previous auth attempt");return}this.tryToReauthenticate(e)}async tryToReauthenticate(e){if(this._logVerbose(`attempting to reauthenticate: ${e.error}`),this.authState.state==="noAuth"||this.authState.state==="waitingForServerConfirmationOfFreshToken"&&this.tokenConfirmationAttempts>=z1){this.logger.error(`Failed to authenticate: "${e.error}", check your server auth config`),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.authState.state!=="noAuth"&&this.setAndReportAuthFailed(this.authState.config.onAuthChange);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this.tokenConfirmationAttempts++,this._logVerbose(`retrying reauthentication, ${z1-this.tokenConfirmationAttempts} attempts remaining`)),await this.stopSocket();const t=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});t.isFromOutdatedConfig||(t.value&&this.syncState.isNewAuth(t.value)?(this.authenticate(t.value),this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",config:this.authState.config,token:t.value,hadAuth:this.authState.state==="notRefetching"||this.authState.state==="waitingForScheduledRefetch"})):(this._logVerbose("reauthentication failed, could not fetch a new token"),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this.tryRestartSocket())}async refetchToken(){if(this.authState.state==="noAuth")return;this._logVerbose("refetching auth token");const e=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});e.isFromOutdatedConfig||(e.value?this.syncState.isNewAuth(e.value)?(this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",hadAuth:this.syncState.hasAuth(),token:e.value,config:this.authState.config}),this.authenticate(e.value)):this.setAuthState({state:"notRefetching",config:this.authState.config}):(this._logVerbose("refetching token failed"),this.syncState.hasAuth()&&this.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this._logVerbose("restarting WS after auth token fetch (if currently stopped)"),this.tryRestartSocket())}scheduleTokenRefetch(e){if(this.authState.state==="noAuth")return;const t=this.decodeToken(e);if(!t){this.logger.error("Auth token is not a valid JWT, cannot refetch the token");return}const{iat:r,exp:s}=t;if(!r||!s){this.logger.error("Auth token does not have required fields, cannot refetch the token");return}const o=s-r;if(o<=2){this.logger.error("Auth token does not live long enough, cannot refetch the token");return}let l=Math.min(DM,(o-this.refreshTokenLeewaySeconds)*1e3);l<=0&&(this.logger.warn(`Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${o}s`),l=0);const u=setTimeout(()=>{this._logVerbose("running scheduled token refetch"),this.refetchToken()},l);this.setAuthState({state:"waitingForScheduledRefetch",refetchTokenTimeoutId:u,config:this.authState.config}),this._logVerbose(`scheduled preemptive auth token refetching in ${l}ms`)}async fetchTokenAndGuardAgainstRace(e,t){const r=++this.configVersion;this._logVerbose(`fetching token with config version ${r}`);const s=await e(t);return this.configVersion!==r?(this._logVerbose(`stale config version, expected ${r}, got ${this.configVersion}`),{isFromOutdatedConfig:!0}):{isFromOutdatedConfig:!1,value:s}}stop(){this.resetAuthState(),this.configVersion++,this._logVerbose(`config version bumped to ${this.configVersion}`)}setAndReportAuthFailed(e){e(!1),this.resetAuthState()}resetAuthState(){this.setAuthState({state:"noAuth"})}setAuthState(e){const t=e.state==="waitingForServerConfirmationOfFreshToken"?{hadAuth:e.hadAuth,state:e.state,token:`...${e.token.slice(-7)}`}:{state:e.state};switch(this._logVerbose(`setting auth state to ${JSON.stringify(t)}`),e.state){case"waitingForScheduledRefetch":case"notRefetching":case"noAuth":this.tokenConfirmationAttempts=0;break}this.authState.state==="waitingForScheduledRefetch"&&(clearTimeout(this.authState.refetchTokenTimeoutId),this.syncState.markAuthCompletion()),this.authState=e}decodeToken(e){try{return kE(e)}catch(t){return this._logVerbose(`Error decoding token: ${t instanceof Error?t.message:"Unknown error"}`),null}}_logVerbose(e){this.logger.logVerbose(`${e} [v${this.configVersion}]`)}}const jM=["convexClientConstructed","convexWebSocketOpen","convexFirstMessageReceived"];function LM(n,e){const t={sessionId:e};typeof performance>"u"||!performance.mark||performance.mark(n,{detail:t})}function BM(n){let e=n.name.slice(6);return e=e.charAt(0).toLowerCase()+e.slice(1),{name:e,startTime:n.startTime}}function zM(n){if(typeof performance>"u"||!performance.getEntriesByName)return[];const e=[];for(const t of jM){const r=performance.getEntriesByName(t).filter(s=>s.entryType==="mark").filter(s=>s.detail.sessionId===n);e.push(...r)}return e.map(BM)}var IM=Object.defineProperty,HM=(n,e,t)=>e in n?IM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gn=(n,e,t)=>HM(n,typeof e!="symbol"?e+"":e,t);class UM{constructor(e,t,r){if(gn(this,"address"),gn(this,"state"),gn(this,"requestManager"),gn(this,"webSocketManager"),gn(this,"authenticationManager"),gn(this,"remoteQuerySet"),gn(this,"optimisticQueryResults"),gn(this,"_transitionHandlerCounter",0),gn(this,"_nextRequestId"),gn(this,"_onTransitionFns",new Map),gn(this,"_sessionId"),gn(this,"firstMessageReceived",!1),gn(this,"debug"),gn(this,"logger"),gn(this,"maxObservedTimestamp"),gn(this,"connectionStateSubscribers",new Map),gn(this,"nextConnectionStateSubscriberId",0),gn(this,"_lastPublishedConnectionState"),gn(this,"markConnectionStateDirty",()=>{Promise.resolve().then(()=>{const v=this.connectionState();if(JSON.stringify(v)!==JSON.stringify(this._lastPublishedConnectionState)){this._lastPublishedConnectionState=v;for(const w of this.connectionStateSubscribers.values())w(v)}})}),gn(this,"mark",v=>{this.debug&&LM(v,this.sessionId)}),typeof e=="object")throw new Error("Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.");(r==null?void 0:r.skipConvexDeploymentUrlCheck)!==!0&&yE(e),r={...r};const s=r.authRefreshTokenLeewaySeconds??2;let o=r.webSocketConstructor;if(!o&&typeof WebSocket>"u")throw new Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");o=o||WebSocket,this.debug=r.reportDebugInfoToConvex??!1,this.address=e,this.logger=r.logger===!1?L0({verbose:r.verbose??!1}):r.logger!==!0&&r.logger?r.logger:j0({verbose:r.verbose??!1});const l=e.search("://");if(l===-1)throw new Error("Provided address was not an absolute URL.");const u=e.substring(l+3),d=e.substring(0,l);let h;if(d==="http")h="ws";else if(d==="https")h="wss";else throw new Error(`Unknown parent protocol ${d}`);const p=`${h}://${u}/api/${Ro}/sync`;this.state=new Zk,this.remoteQuerySet=new j1(v=>this.state.queryPath(v),this.logger),this.requestManager=new nM(this.logger,this.markConnectionStateDirty);const m=()=>{this.webSocketManager.pause(),this.state.pause()};this.authenticationManager=new _M(this.state,{authenticate:v=>{const w=this.state.setAuth(v);return this.webSocketManager.sendMessage(w),w.baseVersion},stopSocket:()=>this.webSocketManager.stop(),tryRestartSocket:()=>this.webSocketManager.tryRestart(),pauseSocket:m,resumeSocket:()=>this.webSocketManager.resume(),clearAuth:()=>{this.clearAuth()}},{logger:this.logger,refreshTokenLeewaySeconds:s}),this.optimisticQueryResults=new cM,this.addOnTransitionHandler(v=>{t(v.queries.map(w=>w.token))}),this._nextRequestId=0,this._sessionId=NM();const{unsavedChangesWarning:b}=r;if(typeof window>"u"||typeof window.addEventListener>"u"){if(b===!0)throw new Error("unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.")}else b!==!1&&window.addEventListener("beforeunload",v=>{if(this.requestManager.hasIncompleteRequests()){v.preventDefault();const w="Are you sure you want to leave? Your changes may not be saved.";return(v||window.event).returnValue=w,w}});this.webSocketManager=new TM(p,{onOpen:v=>{this.mark("convexWebSocketOpen"),this.webSocketManager.sendMessage({...v,type:"Connect",sessionId:this._sessionId,maxObservedTimestamp:this.maxObservedTimestamp});const w=new Set(this.remoteQuerySet.remoteQueryResults().keys());this.remoteQuerySet=new j1(N=>this.state.queryPath(N),this.logger);const[S,C]=this.state.restart(w);C&&this.webSocketManager.sendMessage(C),this.webSocketManager.sendMessage(S);for(const N of this.requestManager.restart())this.webSocketManager.sendMessage(N)},onResume:()=>{const[v,w]=this.state.resume();w&&this.webSocketManager.sendMessage(w),v&&this.webSocketManager.sendMessage(v);for(const S of this.requestManager.resume())this.webSocketManager.sendMessage(S)},onMessage:v=>{switch(this.firstMessageReceived||(this.firstMessageReceived=!0,this.mark("convexFirstMessageReceived"),this.reportMarks()),v.type){case"Transition":{this.observedTimestamp(v.endVersion.ts),this.authenticationManager.onTransition(v),this.remoteQuerySet.transition(v),this.state.transition(v);const w=this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(w);break}case"MutationResponse":{v.success&&this.observedTimestamp(v.ts);const w=this.requestManager.onResponse(v);w!==null&&this.notifyOnQueryResultChanges(new Map([[w.requestId,w.result]]));break}case"ActionResponse":{this.requestManager.onResponse(v);break}case"AuthError":{this.authenticationManager.onAuthError(v);break}case"FatalError":{const w=Yk(this.logger,v.error);throw this.webSocketManager.terminate(),w}}return{hasSyncedPastLastReconnect:this.hasSyncedPastLastReconnect()}},onServerDisconnectError:r.onServerDisconnectError},o,this.logger,this.markConnectionStateDirty,this.debug),this.mark("convexClientConstructed"),r.expectAuth&&m()}hasSyncedPastLastReconnect(){return this.requestManager.hasSyncedPastLastReconnect()||this.state.hasSyncedPastLastReconnect()}observedTimestamp(e){(this.maxObservedTimestamp===void 0||this.maxObservedTimestamp.lessThanOrEqual(e))&&(this.maxObservedTimestamp=e)}getMaxObservedTimestamp(){return this.maxObservedTimestamp}notifyOnQueryResultChanges(e){const t=this.remoteQuerySet.remoteQueryResults(),r=new Map;for(const[o,l]of t){const u=this.state.queryToken(o);if(u!==null){const d={result:l,udfPath:this.state.queryPath(o),args:this.state.queryArgs(o)};r.set(u,d)}}const s=this.optimisticQueryResults.ingestQueryResultsFromServer(r,new Set(e.keys()));this.handleTransition({queries:s.map(o=>{const l=this.optimisticQueryResults.rawQueryResult(o);return{token:o,modification:{kind:"Updated",result:l.result}}}),reflectedMutations:Array.from(e).map(([o,l])=>({requestId:o,result:l})),timestamp:this.remoteQuerySet.timestamp()})}handleTransition(e){for(const t of this._onTransitionFns.values())t(e)}addOnTransitionHandler(e){const t=this._transitionHandlerCounter++;return this._onTransitionFns.set(t,e),()=>this._onTransitionFns.delete(t)}getCurrentAuthClaims(){const e=this.state.getAuth();let t={};if(e&&e.tokenType==="User")try{t=e?kE(e.value):{}}catch{t={}}else return;return{token:e.value,decoded:t}}setAuth(e,t){this.authenticationManager.setConfig(e,t)}hasAuth(){return this.state.hasAuth()}setAdminAuth(e,t){const r=this.state.setAdminAuth(e,t);this.webSocketManager.sendMessage(r)}clearAuth(){const e=this.state.clearAuth();this.webSocketManager.sendMessage(e)}subscribe(e,t,r){const s=dr(t),{modification:o,queryToken:l,unsubscribe:u}=this.state.subscribe(e,s,r==null?void 0:r.journal,r==null?void 0:r.componentPath);return o!==null&&this.webSocketManager.sendMessage(o),{queryToken:l,unsubscribe:()=>{const d=u();d&&this.webSocketManager.sendMessage(d)}}}localQueryResult(e,t){const r=dr(t),s=Ho(e,r);return this.optimisticQueryResults.queryResult(s)}localQueryResultByToken(e){return this.optimisticQueryResults.queryResult(e)}hasLocalQueryResultByToken(e){return this.optimisticQueryResults.hasQueryResult(e)}localQueryLogs(e,t){const r=dr(t),s=Ho(e,r);return this.optimisticQueryResults.queryLogs(s)}queryJournal(e,t){const r=dr(t),s=Ho(e,r);return this.state.queryJournal(s)}connectionState(){const e=this.webSocketManager.connectionState();return{hasInflightRequests:this.requestManager.hasInflightRequests(),isWebSocketConnected:e.isConnected,hasEverConnected:e.hasEverConnected,connectionCount:e.connectionCount,connectionRetries:e.connectionRetries,timeOfOldestInflightRequest:this.requestManager.timeOfOldestInflightRequest(),inflightMutations:this.requestManager.inflightMutations(),inflightActions:this.requestManager.inflightActions()}}subscribeToConnectionState(e){const t=this.nextConnectionStateSubscriberId++;return this.connectionStateSubscribers.set(t,e),()=>{this.connectionStateSubscribers.delete(t)}}async mutation(e,t,r){const s=await this.mutationInternal(e,t,r);if(!s.success)throw s.errorData!==void 0?Ug(s,new jo(Wa("mutation",e,s))):new Error(Wa("mutation",e,s));return s.value}async mutationInternal(e,t,r,s){const{mutationPromise:o}=this.enqueueMutation(e,t,r,s);return o}enqueueMutation(e,t,r,s){const o=dr(t);this.tryReportLongDisconnect();const l=this.nextRequestId;if(this._nextRequestId++,r!==void 0){const p=r.optimisticUpdate;if(p!==void 0){const m=w=>{p(w,o)instanceof Promise&&this.logger.warn("Optimistic update handler returned a Promise. Optimistic updates should be synchronous.")},v=this.optimisticQueryResults.applyOptimisticUpdate(m,l).map(w=>{const S=this.localQueryResultByToken(w);return{token:w,modification:{kind:"Updated",result:S===void 0?void 0:{success:!0,value:S,logLines:[]}}}});this.handleTransition({queries:v,reflectedMutations:[],timestamp:this.remoteQuerySet.timestamp()})}}const u={type:"Mutation",requestId:l,udfPath:e,componentPath:s,args:[Kr(o)]},d=this.webSocketManager.sendMessage(u),h=this.requestManager.request(u,d);return{requestId:l,mutationPromise:h}}async action(e,t){const r=await this.actionInternal(e,t);if(!r.success)throw r.errorData!==void 0?Ug(r,new jo(Wa("action",e,r))):new Error(Wa("action",e,r));return r.value}async actionInternal(e,t,r){const s=dr(t),o=this.nextRequestId;this._nextRequestId++,this.tryReportLongDisconnect();const l={type:"Action",requestId:o,udfPath:e,componentPath:r,args:[Kr(s)]},u=this.webSocketManager.sendMessage(l);return this.requestManager.request(l,u)}async close(){return this.authenticationManager.stop(),this.webSocketManager.terminate()}get url(){return this.address}get nextRequestId(){return this._nextRequestId}get sessionId(){return this._sessionId}reportMarks(){if(this.debug){const e=zM(this.sessionId);this.webSocketManager.sendMessage({type:"Event",eventType:"ClientConnect",event:e})}}tryReportLongDisconnect(){if(!this.debug)return;const e=this.connectionState().timeOfOldestInflightRequest;if(e===null||Date.now()-e.getTime()<=60*1e3)return;const t=`${this.address}/api/debug_event`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json","Convex-Client":`npm-${Ro}`},body:JSON.stringify({event:"LongWebsocketDisconnect"})}).then(r=>{r.ok||this.logger.warn("Analytics request failed with response:",r.body)}).catch(r=>{this.logger.warn("Analytics response failed with error:",r)})}}var $M=Object.defineProperty,qM=(n,e,t)=>e in n?$M(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Qi=(n,e,t)=>qM(n,typeof e!="symbol"?e+"":e,t);const Dd=560;class PM{constructor(e,t){if(Qi(this,"address"),Qi(this,"auth"),Qi(this,"adminAuth"),Qi(this,"encodedTsPromise"),Qi(this,"debug"),Qi(this,"fetchOptions"),Qi(this,"logger"),Qi(this,"mutationQueue",[]),Qi(this,"isProcessingQueue",!1),typeof t=="boolean")throw new Error("skipConvexDeploymentUrlCheck as the second argument is no longer supported. Please pass an options object, `{ skipConvexDeploymentUrlCheck: true }`.");(t??{}).skipConvexDeploymentUrlCheck!==!0&&yE(e),this.logger=(t==null?void 0:t.logger)===!1?L0({verbose:!1}):(t==null?void 0:t.logger)!==!0&&(t!=null&&t.logger)?t.logger:j0({verbose:!1}),this.address=e,this.debug=!0,this.auth=void 0,this.adminAuth=void 0,t!=null&&t.auth&&this.setAuth(t.auth)}backendUrl(){return`${this.address}/api`}get url(){return this.address}setAuth(e){this.clearAuth(),this.auth=e}setAdminAuth(e,t){if(this.clearAuth(),t!==void 0){const r=new TextEncoder().encode(JSON.stringify(t)),s=btoa(String.fromCodePoint(...r));this.adminAuth=`${e}:${s}`}else this.adminAuth=e}clearAuth(){this.auth=void 0,this.adminAuth=void 0}setDebug(e){this.debug=e}setFetchOptions(e){this.fetchOptions=e}async consistentQuery(e,...t){const r=dr(t[0]),s=this.getTimestamp();return await this.queryInner(e,r,{timestampPromise:s})}async getTimestamp(){return this.encodedTsPromise?this.encodedTsPromise:this.encodedTsPromise=this.getTimestampInner()}async getTimestampInner(){const e=fetch,t={"Content-Type":"application/json","Convex-Client":`npm-${Ro}`},r=await e(`${this.address}/api/query_ts`,{...this.fetchOptions,method:"POST",headers:t});if(!r.ok)throw new Error(await r.text());const{ts:s}=await r.json();return s}async query(e,...t){const r=dr(t[0]);return await this.queryInner(e,r,{})}async queryInner(e,t,r){const s=Sn(e),o=[Kr(t)],l={"Content-Type":"application/json","Convex-Client":`npm-${Ro}`};this.adminAuth?l.Authorization=`Convex ${this.adminAuth}`:this.auth&&(l.Authorization=`Bearer ${this.auth}`);const u=fetch,d=r.timestampPromise?await r.timestampPromise:void 0,h=JSON.stringify({path:s,format:"convex_encoded_json",args:o,...d?{ts:d}:{}}),p=d?`${this.address}/api/query_at_ts`:`${this.address}/api/query`,m=await u(p,{...this.fetchOptions,body:h,method:"POST",headers:l});if(!m.ok&&m.status!==Dd)throw new Error(await m.text());const b=await m.json();if(this.debug)for(const v of b.logLines??[])Ks(this.logger,"info","query",s,v);switch(b.status){case"success":return ri(b.value);case"error":throw b.errorData!==void 0?_d(b.errorData,new jo(b.errorMessage)):new Error(b.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(b)}`)}}async mutationInner(e,t){const r=Sn(e),s=JSON.stringify({path:r,format:"convex_encoded_json",args:[Kr(t)]}),o={"Content-Type":"application/json","Convex-Client":`npm-${Ro}`};this.adminAuth?o.Authorization=`Convex ${this.adminAuth}`:this.auth&&(o.Authorization=`Bearer ${this.auth}`);const u=await fetch(`${this.address}/api/mutation`,{...this.fetchOptions,body:s,method:"POST",headers:o});if(!u.ok&&u.status!==Dd)throw new Error(await u.text());const d=await u.json();if(this.debug)for(const h of d.logLines??[])Ks(this.logger,"info","mutation",r,h);switch(d.status){case"success":return ri(d.value);case"error":throw d.errorData!==void 0?_d(d.errorData,new jo(d.errorMessage)):new Error(d.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(d)}`)}}async processMutationQueue(){if(!this.isProcessingQueue){for(this.isProcessingQueue=!0;this.mutationQueue.length>0;){const{mutation:e,args:t,resolve:r,reject:s}=this.mutationQueue.shift();try{const o=await this.mutationInner(e,t);r(o)}catch(o){s(o)}}this.isProcessingQueue=!1}}enqueueMutation(e,t){return new Promise((r,s)=>{this.mutationQueue.push({mutation:e,args:t,resolve:r,reject:s}),this.processMutationQueue()})}async mutation(e,...t){const[r,s]=t,o=dr(r);return s!=null&&s.skipQueue?await this.mutationInner(e,o):await this.enqueueMutation(e,o)}async action(e,...t){const r=dr(t[0]),s=Sn(e),o=JSON.stringify({path:s,format:"convex_encoded_json",args:[Kr(r)]}),l={"Content-Type":"application/json","Convex-Client":`npm-${Ro}`};this.adminAuth?l.Authorization=`Convex ${this.adminAuth}`:this.auth&&(l.Authorization=`Bearer ${this.auth}`);const d=await fetch(`${this.address}/api/action`,{...this.fetchOptions,body:o,method:"POST",headers:l});if(!d.ok&&d.status!==Dd)throw new Error(await d.text());const h=await d.json();if(this.debug)for(const p of h.logLines??[])Ks(this.logger,"info","action",s,p);switch(h.status){case"success":return ri(h.value);case"error":throw h.errorData!==void 0?_d(h.errorData,new jo(h.errorMessage)):new Error(h.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(h)}`)}}async function(e,t,...r){const s=dr(r[0]),o=typeof e=="string"?e:Sn(e),l=JSON.stringify({componentPath:t,path:o,format:"convex_encoded_json",args:Kr(s)}),u={"Content-Type":"application/json","Convex-Client":`npm-${Ro}`};this.adminAuth?u.Authorization=`Convex ${this.adminAuth}`:this.auth&&(u.Authorization=`Bearer ${this.auth}`);const h=await fetch(`${this.address}/api/function`,{...this.fetchOptions,body:l,method:"POST",headers:u});if(!h.ok&&h.status!==Dd)throw new Error(await h.text());const p=await h.json();if(this.debug)for(const m of p.logLines??[])Ks(this.logger,"info","any",o,m);switch(p.status){case"success":return ri(p.value);case"error":throw p.errorData!==void 0?_d(p.errorData,new jo(p.errorMessage)):new Error(p.errorMessage);default:throw new Error(`Invalid response: ${JSON.stringify(p)}`)}}}function _d(n,e){return e.data=ri(n),e}function VM({getCurrentValue:n,subscribe:e}){const[t,r]=T.useState(()=>({getCurrentValue:n,subscribe:e,value:n()}));let s=t.value;return(t.getCurrentValue!==n||t.subscribe!==e)&&(s=n(),r({getCurrentValue:n,subscribe:e,value:s})),T.useEffect(()=>{let o=!1;const l=()=>{o||r(d=>{if(d.getCurrentValue!==n||d.subscribe!==e)return d;const h=n();return d.value===h?d:{...d,value:h}})},u=e(l);return l(),()=>{o=!0,u()}},[n,e]),s}var FM=Object.defineProperty,GM=(n,e,t)=>e in n?FM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Is=(n,e,t)=>GM(n,typeof e!="symbol"?e+"":e,t);const KM=5e3;if(typeof te>"u")throw new Error("Required dependency 'react' not found");function ME(n,e,t){function r(s){return ZM(s),e.mutation(n,s,{optimisticUpdate:t})}return r.withOptimisticUpdate=function(o){if(t!==void 0)throw new Error(`Already specified optimistic update for mutation ${Sn(n)}`);return ME(n,e,o)},r}function WM(n,e){return function(t){return e.action(n,t)}}class QM{constructor(e,t){if(Is(this,"address"),Is(this,"cachedSync"),Is(this,"listeners"),Is(this,"options"),Is(this,"closed",!1),Is(this,"_logger"),Is(this,"adminAuth"),Is(this,"fakeUserIdentity"),e===void 0)throw new Error("No address provided to ConvexReactClient.\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.");if(typeof e!="string")throw new Error(`ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof e} instead.`);if(!e.includes("://"))throw new Error("Provided address was not an absolute URL.");this.address=e,this.listeners=new Map,this._logger=(t==null?void 0:t.logger)===!1?L0({verbose:(t==null?void 0:t.verbose)??!1}):(t==null?void 0:t.logger)!==!0&&(t!=null&&t.logger)?t.logger:j0({verbose:(t==null?void 0:t.verbose)??!1}),this.options={...t,logger:this._logger}}get url(){return this.address}get sync(){if(this.closed)throw new Error("ConvexReactClient has already been closed.");return this.cachedSync?this.cachedSync:(this.cachedSync=new UM(this.address,e=>this.transition(e),this.options),this.adminAuth&&this.cachedSync.setAdminAuth(this.adminAuth,this.fakeUserIdentity),this.cachedSync)}setAuth(e,t){if(typeof e=="string")throw new Error("Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.");this.sync.setAuth(e,t??(()=>{}))}clearAuth(){this.sync.clearAuth()}setAdminAuth(e,t){if(this.adminAuth=e,this.fakeUserIdentity=t,this.closed)throw new Error("ConvexReactClient has already been closed.");this.cachedSync&&this.sync.setAdminAuth(e,t)}watchQuery(e,...t){const[r,s]=t,o=Sn(e);return{onUpdate:l=>{const{queryToken:u,unsubscribe:d}=this.sync.subscribe(o,r,s),h=this.listeners.get(u);return h!==void 0?h.add(l):this.listeners.set(u,new Set([l])),()=>{if(this.closed)return;const p=this.listeners.get(u);p.delete(l),p.size===0&&this.listeners.delete(u),d()}},localQueryResult:()=>{if(this.cachedSync)return this.cachedSync.localQueryResult(o,r)},localQueryLogs:()=>{if(this.cachedSync)return this.cachedSync.localQueryLogs(o,r)},journal:()=>{if(this.cachedSync)return this.cachedSync.queryJournal(o,r)}}}prewarmQuery(e){const t=e.extendSubscriptionFor??KM,s=this.watchQuery(e.query,e.args||{}).onUpdate(()=>{});setTimeout(s,t)}mutation(e,...t){const[r,s]=t,o=Sn(e);return this.sync.mutation(o,r,s)}action(e,...t){const r=Sn(e);return this.sync.action(r,...t)}query(e,...t){const r=this.watchQuery(e,...t),s=r.localQueryResult();return s!==void 0?Promise.resolve(s):new Promise((o,l)=>{const u=r.onUpdate(()=>{u();try{o(r.localQueryResult())}catch(d){l(d)}})})}connectionState(){return this.sync.connectionState()}subscribeToConnectionState(e){return this.sync.subscribeToConnectionState(e)}get logger(){return this._logger}async close(){if(this.closed=!0,this.listeners=new Map,this.cachedSync){const e=this.cachedSync;this.cachedSync=void 0,await e.close()}}transition(e){for(const t of e){const r=this.listeners.get(t);if(r)for(const s of r)s()}}}const ph=te.createContext(void 0);function YM(){return T.useContext(ph)}const XM=({client:n,children:e})=>te.createElement(ph.Provider,{value:n},e);function $t(n,...e){const t=e[0]==="skip",r=e[0]==="skip"?{}:dr(e[0]),s=typeof n=="string"?B0(n):n,o=Sn(s),l=T.useMemo(()=>t?{}:{query:{query:s,args:r}},[JSON.stringify(Kr(r)),o,t]),d=rO(l).query;if(d instanceof Error)throw d;return d}function ln(n){const e=typeof n=="string"?B0(n):n,t=T.useContext(ph);if(t===void 0)throw new Error("Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return T.useMemo(()=>ME(e,t),[t,Sn(e)])}function JM(n){const e=T.useContext(ph),t=typeof n=="string"?B0(n):n;if(e===void 0)throw new Error("Could not find Convex client! `useAction` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return T.useMemo(()=>WM(t,e),[e,Sn(t)])}function ZM(n){if(typeof n=="object"&&n!==null&&"bubbles"in n&&"persist"in n&&"isDefaultPrevented"in n)throw new Error("Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like `const handler = () => myMutation();` and using `handler` in the event handler.")}var eO=Object.defineProperty,tO=(n,e,t)=>e in n?eO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ym=(n,e,t)=>tO(n,typeof e!="symbol"?e+"":e,t);class nO{constructor(e){Ym(this,"createWatch"),Ym(this,"queries"),Ym(this,"listeners"),this.createWatch=e,this.queries={},this.listeners=new Set}setQueries(e){for(const t of Object.keys(e)){const{query:r,args:s}=e[t];if(Sn(r),this.queries[t]===void 0)this.addQuery(t,r,s);else{const o=this.queries[t];(Sn(r)!==Sn(o.query)||JSON.stringify(Kr(s))!==JSON.stringify(Kr(o.args)))&&(this.removeQuery(t),this.addQuery(t,r,s))}}for(const t of Object.keys(this.queries))e[t]===void 0&&this.removeQuery(t)}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}getLocalResults(e){const t={};for(const r of Object.keys(e)){const{query:s,args:o}=e[r];Sn(s);const l=this.createWatch(s,o);let u;try{u=l.localQueryResult()}catch(d){if(d instanceof Error)u=d;else throw d}t[r]=u}return t}setCreateWatch(e){this.createWatch=e;for(const t of Object.keys(this.queries)){const{query:r,args:s,watch:o}=this.queries[t],l=o.journal();this.removeQuery(t),this.addQuery(t,r,s,l)}}destroy(){for(const e of Object.keys(this.queries))this.removeQuery(e);this.listeners=new Set}addQuery(e,t,r,s){if(this.queries[e]!==void 0)throw new Error(`Tried to add a new query with identifier ${e} when it already exists.`);const o=this.createWatch(t,r,s),l=o.onUpdate(()=>this.notifyListeners());this.queries[e]={query:t,args:r,watch:o,unsubscribe:l}}removeQuery(e){const t=this.queries[e];if(t===void 0)throw new Error(`No query found with identifier ${e}.`);t.unsubscribe(),delete this.queries[e]}notifyListeners(){for(const e of this.listeners)e()}}function rO(n){const e=YM();if(e===void 0)throw new Error("Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");const t=T.useMemo(()=>(r,s,o)=>e.watchQuery(r,s,o?{journal:o}:{}),[e]);return iO(n,t)}function iO(n,e){const[t]=T.useState(()=>new nO(e));t.createWatch!==e&&t.setCreateWatch(e),T.useEffect(()=>()=>t.destroy(),[t]);const r=T.useMemo(()=>({getCurrentValue:()=>t.getLocalResults(n),subscribe:s=>(t.setQueries(n),t.subscribe(s))}),[t,n]);return VM(r)}const OE=T.createContext(void 0);function z0(){const n=T.useContext(OE);if(n===void 0)throw new Error("Could not find `ConvexProviderWithAuth` (or `ConvexProviderWithClerk` or `ConvexProviderWithAuth0`) as an ancestor component. This component may be missing, or you might have two instances of the `convex/react` module loaded in your project.");return n}function sO({children:n,client:e,useAuth:t}){const{isLoading:r,isAuthenticated:s,fetchAccessToken:o}=t(),[l,u]=T.useState(null);return r&&l!==null&&u(null),!r&&!s&&l!==!1&&u(!1),te.createElement(OE.Provider,{value:{isLoading:l===null,isAuthenticated:s&&(l??!1)}},te.createElement(oO,{authProviderAuthenticated:s,fetchAccessToken:o,authProviderLoading:r,client:e,setIsConvexAuthenticated:u}),te.createElement(XM,{client:e},n),te.createElement(aO,{authProviderAuthenticated:s,fetchAccessToken:o,authProviderLoading:r,client:e,setIsConvexAuthenticated:u}))}function oO({authProviderAuthenticated:n,fetchAccessToken:e,authProviderLoading:t,client:r,setIsConvexAuthenticated:s}){return T.useEffect(()=>{let o=!0;if(n)return r.setAuth(e,l=>{o&&s(()=>l)}),()=>{o=!1,s(l=>l?!1:null)}},[n,e,t,r,s]),null}function aO({authProviderAuthenticated:n,fetchAccessToken:e,authProviderLoading:t,client:r,setIsConvexAuthenticated:s}){return T.useEffect(()=>{if(n)return()=>{r.clearAuth(),s(()=>null)}},[n,e,t,r,s]),null}function lO({children:n}){const{isLoading:e,isAuthenticated:t}=z0();return e||!t?null:te.createElement(te.Fragment,null,n)}function cO({children:n}){const{isLoading:e,isAuthenticated:t}=z0();return e||t?null:te.createElement(te.Fragment,null,n)}const RE=T.createContext(void 0),DE=T.createContext(void 0);function uO(){return T.useContext(DE)}const dO=T.createContext(null),Xm="__convexAuthOAuthVerifier",jd="__convexAuthJWT",Ld="__convexAuthRefreshToken",I1="__convexAuthServerStateFetchTime";function fO({client:n,serverState:e,onChange:t,storage:r,storageNamespace:s,replaceURL:o,children:l}){const u=T.useRef((e==null?void 0:e._state.token)??null),[d,h]=T.useState(u.current===null),[p,m]=T.useState(u.current),b=n.verbose??!1,v=T.useCallback(ae=>{b&&console.debug(`${new Date().toISOString()} ${ae}`)},[b]),{storageSet:w,storageGet:S,storageRemove:C,storageKey:N}=hO(r,s),[L,_]=T.useState(!1),k=T.useCallback(async ae=>{const ie=u.current!==null;let he;if(ae.tokens===null)u.current=null,ae.shouldStore&&(await C(jd),await C(Ld)),he=null;else{const{token:O}=ae.tokens;if(u.current=O,ae.shouldStore){const{refreshToken:R}=ae.tokens;await w(jd,O),await w(Ld,R)}he=O}ie!==(he!==null)&&await(t==null?void 0:t()),m(he),h(!1)},[w,C]);T.useEffect(()=>{const ae=async ie=>{if(L){ie.preventDefault();const he="Are you sure you want to leave? Your changes may not be saved.";return ie.returnValue=!0,he}};return H1("beforeunload",ae),()=>{U1("beforeunload",ae)}}),T.useEffect(()=>{const ae=ie=>{(async()=>{if(ie.storageArea===r&&ie.key===N(jd)){const he=ie.newValue;v(`synced access token, is null: ${he===null}`),await k({shouldStore:!1,tokens:he===null?null:{token:he}})}})()};return H1("storage",ae),()=>U1("storage",ae)},[k]);const $=T.useCallback(async ae=>{const{tokens:ie}=await n.unauthenticatedCall("auth:signIn","code"in ae?{params:{code:ae.code},verifier:ae.verifier}:ae);return v(`retrieved tokens, is null: ${ie===null}`),await k({shouldStore:!0,tokens:ie??null}),ie!==null},[n,k]),z=T.useCallback(async(ae,ie)=>{const he=ie instanceof FormData?Array.from(ie.entries()).reduce((I,[ee,ce])=>(I[ee]=ce,I),{}):ie??{},O=await S(Xm)??void 0;await C(Xm);const R=await n.authenticatedCall("auth:signIn",{provider:ae,params:he,verifier:O});if(R.redirect!==void 0){const I=new URL(R.redirect);return await w(Xm,R.verifier),window.location!==void 0&&(window.location.href=I.toString()),{signingIn:!1,redirect:I}}else if(R.tokens!==void 0){const{tokens:I}=R;return v(`signed in and got tokens, is null: ${I===null}`),await k({shouldStore:!0,tokens:I}),{signingIn:R.tokens!==null}}return{signingIn:!1}},[n,k,S]),H=T.useCallback(async()=>{try{await n.authenticatedCall("auth:signOut")}catch{}v("signed out, erasing tokens"),await k({shouldStore:!0,tokens:null})},[k,n]),Y=T.useCallback(async({forceRefreshToken:ae})=>{if(ae){const ie=u.current;return await mO(Ld,async()=>{const he=u.current;if(he!==ie)return v(`returning synced token, is null: ${he===null}`),he;const O=await S(Ld)??null;return O!==null?(_(!0),await $({refreshToken:O}).finally(()=>{_(!1)}),v(`returning retrieved token, is null: ${he===null}`),u.current):(_(!1),v("returning null, there is no refresh token"),null)})}return u.current},[$,H,S]),re=T.useRef(!1);T.useEffect(()=>{if(r===void 0)throw new Error("`localStorage` is not available in this environment, set the `storage` prop on `ConvexAuthProvider`!");const ae=async()=>{const he=await S(jd)??null;v(`retrieved token from storage, is null: ${he===null}`),await k({shouldStore:!1,tokens:he===null?null:{token:he}})};if(e!==void 0){const he=S(I1),O=R=>{if(!R||e._timeFetched>+R){const{token:I,refreshToken:ee}=e._state,ce=I===null||ee===null?null:{token:I,refreshToken:ee};w(I1,e._timeFetched.toString()),k({tokens:ce,shouldStore:!0})}else ae()};he instanceof Promise?he.then(O):O(he);return}const ie=typeof(window==null?void 0:window.location)<"u"?new URLSearchParams(window.location.search).get("code"):null;if(re.current||ie){if(ie&&!re.current){re.current=!0;const he=new URL(window.location.href);he.searchParams.delete("code"),(async()=>(await o(he.pathname+he.search+he.hash),await z(void 0,{code:ie}),re.current=!1))()}}else ae()},[n,S]);const ge=T.useMemo(()=>({signIn:z,signOut:H}),[z,H]),Ce=p!==null,pe=T.useMemo(()=>({isLoading:d,isAuthenticated:Ce,fetchAccessToken:Y}),[Y,d,Ce]);return x.jsx(DE.Provider,{value:pe,children:x.jsx(RE.Provider,{value:ge,children:x.jsx(dO.Provider,{value:p,children:l})})})}function hO(n,e){const t=pO(),r=T.useMemo(()=>n??t(),[n]),s=e.replace(/[^a-zA-Z0-9]/g,""),o=T.useCallback(h=>`${h}_${s}`,[e]),l=T.useCallback((h,p)=>r.setItem(o(h),p),[r,o]),u=T.useCallback(h=>r.getItem(o(h)),[r,o]),d=T.useCallback(h=>r.removeItem(o(h)),[r,o]);return{storageSet:l,storageGet:u,storageRemove:d,storageKey:o}}function pO(){const[n,e]=T.useState({});return()=>({getItem:t=>n[t],setItem:(t,r)=>{e(s=>({...s,[t]:r}))},removeItem:t=>{e(r=>{const{[t]:s,...o}=r;return o})}})}async function mO(n,e){var r;const t=(r=window==null?void 0:window.navigator)==null?void 0:r.locks;return t!==void 0?await t.request(n,e):await gO(n,e)}function Bd(n){globalThis.__convexAuthMutexes===void 0&&(globalThis.__convexAuthMutexes={});let e=globalThis.__convexAuthMutexes[n];return e===void 0&&(globalThis.__convexAuthMutexes[n]={currentlyRunning:null,waiting:[]}),e=globalThis.__convexAuthMutexes[n],e}function Jm(n,e){globalThis.__convexAuthMutexes[n]=e}async function _E(n,e){const t=Bd(n);t.currentlyRunning===null?Jm(n,{currentlyRunning:e().finally(()=>{const r=Bd(n).waiting.shift();Bd(n).currentlyRunning=null,Jm(n,{...Bd(n),currentlyRunning:r===void 0?null:_E(n,r)})}),waiting:[]}):Jm(n,{...t,waiting:[...t.waiting,e]})}async function gO(n,e){return new Promise((r,s)=>{_E(n,()=>e().then(l=>r(l)).catch(l=>s(l)))})}function H1(n,e,t){var r;(r=window.addEventListener)==null||r.call(window,n,e,t)}function U1(n,e,t){var r;(r=window.removeEventListener)==null||r.call(window,n,e,t)}function jE(){return T.useContext(RE)}function yO(n){const{client:e,storage:t,storageNamespace:r,replaceURL:s,children:o}=n,l=T.useMemo(()=>{var u;return{authenticatedCall(d,h){return e.action(d,h)},unauthenticatedCall(d,h){return new PM(e.address).action(d,h)},verbose:(u=e.options)==null?void 0:u.verbose}},[e]);return x.jsx(fO,{client:l,storage:t??(typeof window>"u"||window==null?void 0:window.localStorage),storageNamespace:r??e.address,replaceURL:s??(u=>{window.history.replaceState({},"",u)}),children:x.jsx(sO,{client:e,useAuth:uO,children:o})})}/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $1="popstate";function bO(n={}){function e(r,s){let{pathname:o,search:l,hash:u}=r.location;return $g("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:$c(s)}return xO(e,t,null,n)}function Wt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function si(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vO(){return Math.random().toString(36).substring(2,10)}function q1(n,e){return{usr:n.state,key:n.key,idx:e}}function $g(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ul(e):e,state:t,key:e&&e.key||r||vO()}}function $c({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ul(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function xO(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,u="POP",d=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function m(){u="POP";let C=p(),N=C==null?null:C-h;h=C,d&&d({action:u,location:S.location,delta:N})}function b(C,N){u="PUSH";let L=$g(S.location,C,N);h=p()+1;let _=q1(L,h),k=S.createHref(L);try{l.pushState(_,"",k)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;s.location.assign(k)}o&&d&&d({action:u,location:S.location,delta:1})}function v(C,N){u="REPLACE";let L=$g(S.location,C,N);h=p();let _=q1(L,h),k=S.createHref(L);l.replaceState(_,"",k),o&&d&&d({action:u,location:S.location,delta:0})}function w(C){return wO(C)}let S={get action(){return u},get location(){return n(s,l)},listen(C){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener($1,m),d=C,()=>{s.removeEventListener($1,m),d=null}},createHref(C){return e(s,C)},createURL:w,encodeLocation(C){let N=w(C);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:b,replace:v,go(C){return l.go(C)}};return S}function wO(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:$c(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function LE(n,e,t="/"){return SO(n,e,t,!1)}function SO(n,e,t,r){let s=typeof e=="string"?ul(e):e,o=ls(s.pathname||"/",t);if(o==null)return null;let l=BE(n);EO(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let h=jO(o);u=DO(l[d],h,r)}return u}function BE(n,e=[],t=[],r="",s=!1){let o=(l,u,d=s,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&d)return;Wt(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let m=is([r,p.relativePath]),b=t.concat(p);l.children&&l.children.length>0&&(Wt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),BE(l.children,e,b,m,d)),!(l.path==null&&!l.index)&&e.push({path:m,score:OO(m,l.index),routesMeta:b})};return n.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,u);else for(let h of zE(l.path))o(l,u,!0,h)}),e}function zE(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=zE(r.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function EO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:RO(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var CO=/^:[\w-]+$/,TO=3,NO=2,AO=1,kO=10,MO=-2,P1=n=>n==="*";function OO(n,e){let t=n.split("/"),r=t.length;return t.some(P1)&&(r+=MO),e&&(r+=NO),t.filter(s=>!P1(s)).reduce((s,o)=>s+(CO.test(o)?TO:o===""?AO:kO),r)}function RO(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function DO(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],h=u===r.length-1,p=o==="/"?e:e.slice(o.length)||"/",m=bf({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),b=d.route;if(!m&&h&&t&&!r[r.length-1].route.index&&(m=bf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!m)return null;Object.assign(s,m.params),l.push({params:s,pathname:is([o,m.pathname]),pathnameBase:HO(is([o,m.pathnameBase])),route:b}),m.pathnameBase!=="/"&&(o=is([o,m.pathnameBase]))}return l}function bf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=_O(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:m},b)=>{if(p==="*"){let w=u[b]||"";l=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const v=u[b];return m&&!v?h[p]=void 0:h[p]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:n}}function _O(n,e=!1,t=!0){si(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function jO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return si(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ls(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var LO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,BO=n=>LO.test(n);function zO(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?ul(n):n,o;if(t)if(BO(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),si(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?o=V1(t.substring(1),"/"):o=V1(t,e)}else o=e;return{pathname:o,search:UO(r),hash:$O(s)}}function V1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Zm(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function IE(n){let e=IO(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function HE(n,e,t,r=!1){let s;typeof n=="string"?s=ul(n):(s={...n},Wt(!s.pathname||!s.pathname.includes("?"),Zm("?","pathname","search",s)),Wt(!s.pathname||!s.pathname.includes("#"),Zm("#","pathname","hash",s)),Wt(!s.search||!s.search.includes("#"),Zm("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=t;else{let m=e.length-1;if(!r&&l.startsWith("..")){let b=l.split("/");for(;b[0]==="..";)b.shift(),m-=1;s.pathname=b.join("/")}u=m>=0?e[m]:"/"}let d=zO(s,u),h=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}var is=n=>n.join("/").replace(/\/\/+/g,"/"),HO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),UO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,$O=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function qO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var UE=["POST","PUT","PATCH","DELETE"];new Set(UE);var PO=["GET",...UE];new Set(PO);var dl=T.createContext(null);dl.displayName="DataRouter";var mh=T.createContext(null);mh.displayName="DataRouterState";T.createContext(!1);var $E=T.createContext({isTransitioning:!1});$E.displayName="ViewTransition";var VO=T.createContext(new Map);VO.displayName="Fetchers";var FO=T.createContext(null);FO.displayName="Await";var Ai=T.createContext(null);Ai.displayName="Navigation";var au=T.createContext(null);au.displayName="Location";var ki=T.createContext({outlet:null,matches:[],isDataRoute:!1});ki.displayName="Route";var I0=T.createContext(null);I0.displayName="RouteError";function GO(n,{relative:e}={}){Wt(lu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=T.useContext(Ai),{hash:s,pathname:o,search:l}=cu(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:is([t,o])),r.createHref({pathname:u,search:l,hash:s})}function lu(){return T.useContext(au)!=null}function ta(){return Wt(lu(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(au).location}var qE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function PE(n){T.useContext(Ai).static||T.useLayoutEffect(n)}function KO(){let{isDataRoute:n}=T.useContext(ki);return n?aR():WO()}function WO(){Wt(lu(),"useNavigate() may be used only in the context of a <Router> component.");let n=T.useContext(dl),{basename:e,navigator:t}=T.useContext(Ai),{matches:r}=T.useContext(ki),{pathname:s}=ta(),o=JSON.stringify(IE(r)),l=T.useRef(!1);return PE(()=>{l.current=!0}),T.useCallback((d,h={})=>{if(si(l.current,qE),!l.current)return;if(typeof d=="number"){t.go(d);return}let p=HE(d,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:is([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,o,s,n])}T.createContext(null);function QO(){let{matches:n}=T.useContext(ki),e=n[n.length-1];return e?e.params:{}}function cu(n,{relative:e}={}){let{matches:t}=T.useContext(ki),{pathname:r}=ta(),s=JSON.stringify(IE(t));return T.useMemo(()=>HE(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function YO(n,e){return VE(n,e)}function VE(n,e,t,r,s){var L;Wt(lu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=T.useContext(Ai),{matches:l}=T.useContext(ki),u=l[l.length-1],d=u?u.params:{},h=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let _=m&&m.path||"";FE(h,!m||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let b=ta(),v;if(e){let _=typeof e=="string"?ul(e):e;Wt(p==="/"||((L=_.pathname)==null?void 0:L.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${_.pathname}" was given in the \`location\` prop.`),v=_}else v=b;let w=v.pathname||"/",S=w;if(p!=="/"){let _=p.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(_.length).join("/")}let C=LE(n,{pathname:S});si(m||C!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),si(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=tR(C&&C.map(_=>Object.assign({},_,{params:Object.assign({},d,_.params),pathname:is([p,o.encodeLocation?o.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?p:is([p,o.encodeLocation?o.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),l,t,r,s);return e&&N?T.createElement(au.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},N):N}function XO(){let n=oR(),e=qO(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:o},"ErrorBoundary")," or"," ",T.createElement("code",{style:o},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),t?T.createElement("pre",{style:s},t):null,l)}var JO=T.createElement(XO,null),ZO=class extends T.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?T.createElement(ki.Provider,{value:this.props.routeContext},T.createElement(I0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function eR({routeContext:n,match:e,children:t}){let r=T.useContext(dl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(ki.Provider,{value:n},t)}function tR(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t==null?void 0:t.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);Wt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,d=-1;if(t)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:b,errors:v}=t,w=m.route.loader&&!b.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||w){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let h=t&&r?(p,m)=>{var b,v;r(p,{location:t.location,params:((v=(b=t.matches)==null?void 0:b[0])==null?void 0:v.params)??{},errorInfo:m})}:void 0;return o.reduceRight((p,m,b)=>{let v,w=!1,S=null,C=null;t&&(v=l&&m.route.id?l[m.route.id]:void 0,S=m.route.errorElement||JO,u&&(d<0&&b===0?(FE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,C=null):d===b&&(w=!0,C=m.route.hydrateFallbackElement||null)));let N=e.concat(o.slice(0,b+1)),L=()=>{let _;return v?_=S:w?_=C:m.route.Component?_=T.createElement(m.route.Component,null):m.route.element?_=m.route.element:_=p,T.createElement(eR,{match:m,routeContext:{outlet:p,matches:N,isDataRoute:t!=null},children:_})};return t&&(m.route.ErrorBoundary||m.route.errorElement||b===0)?T.createElement(ZO,{location:t.location,revalidation:t.revalidation,component:S,error:v,children:L(),routeContext:{outlet:null,matches:N,isDataRoute:!0},onError:h}):L()},null)}function H0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nR(n){let e=T.useContext(dl);return Wt(e,H0(n)),e}function rR(n){let e=T.useContext(mh);return Wt(e,H0(n)),e}function iR(n){let e=T.useContext(ki);return Wt(e,H0(n)),e}function U0(n){let e=iR(n),t=e.matches[e.matches.length-1];return Wt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function sR(){return U0("useRouteId")}function oR(){var r;let n=T.useContext(I0),e=rR("useRouteError"),t=U0("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function aR(){let{router:n}=nR("useNavigate"),e=U0("useNavigate"),t=T.useRef(!1);return PE(()=>{t.current=!0}),T.useCallback(async(s,o={})=>{si(t.current,qE),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var F1={};function FE(n,e,t){!e&&!F1[n]&&(F1[n]=!0,si(!1,t))}T.memo(lR);function lR({routes:n,future:e,state:t,unstable_onError:r}){return VE(n,void 0,t,r,e)}function qg(n){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cR({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){Wt(!lu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=T.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=ul(t));let{pathname:d="/",search:h="",hash:p="",state:m=null,key:b="default"}=t,v=T.useMemo(()=>{let w=ls(d,l);return w==null?null:{location:{pathname:w,search:h,hash:p,state:m,key:b},navigationType:r}},[l,d,h,p,m,b,r]);return si(v!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:T.createElement(Ai.Provider,{value:u},T.createElement(au.Provider,{children:e,value:v}))}function uR({children:n,location:e}){return YO(Pg(n),e)}function Pg(n,e=[]){let t=[];return T.Children.forEach(n,(r,s)=>{if(!T.isValidElement(r))return;let o=[...e,s];if(r.type===T.Fragment){t.push.apply(t,Pg(r.props.children,o));return}Wt(r.type===qg,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Pg(r.props.children,o)),t.push(l)}),t}var of="get",af="application/x-www-form-urlencoded";function gh(n){return n!=null&&typeof n.tagName=="string"}function dR(n){return gh(n)&&n.tagName.toLowerCase()==="button"}function fR(n){return gh(n)&&n.tagName.toLowerCase()==="form"}function hR(n){return gh(n)&&n.tagName.toLowerCase()==="input"}function pR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function mR(n,e){return n.button===0&&(!e||e==="_self")&&!pR(n)}var zd=null;function gR(){if(zd===null)try{new FormData(document.createElement("form"),0),zd=!1}catch{zd=!0}return zd}var yR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function eg(n){return n!=null&&!yR.has(n)?(si(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${af}"`),null):n}function bR(n,e){let t,r,s,o,l;if(fR(n)){let u=n.getAttribute("action");r=u?ls(u,e):null,t=n.getAttribute("method")||of,s=eg(n.getAttribute("enctype"))||af,o=new FormData(n)}else if(dR(n)||hR(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(r=d?ls(d,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||of,s=eg(n.getAttribute("formenctype"))||eg(u.getAttribute("enctype"))||af,o=new FormData(u,n),!gR()){let{name:h,type:p,value:m}=n;if(p==="image"){let b=h?`${h}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else h&&o.append(h,m)}}else{if(gh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=of,r=null,s=af,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function vR(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&ls(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function xR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function SR(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await xR(o,t);return l.links?l.links():[]}return[]}));return NR(r.flat(1).filter(wR).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function G1(n,e,t,r,s,o){let l=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,u=(d,h)=>{var p;return t[h].pathname!==d.pathname||((p=t[h].route.path)==null?void 0:p.endsWith("*"))&&t[h].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,h)=>l(d,h)||u(d,h)):o==="data"?e.filter((d,h)=>{var m;let p=r.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function ER(n,e,{includeHydrateFallback:t}={}){return CR(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function CR(n){return[...new Set(n)]}function TR(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function NR(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(TR(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function GE(){let n=T.useContext(dl);return $0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function AR(){let n=T.useContext(mh);return $0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var q0=T.createContext(void 0);q0.displayName="FrameworkContext";function KE(){let n=T.useContext(q0);return $0(n,"You must render this element inside a <HydratedRouter> element"),n}function kR(n,e){let t=T.useContext(q0),[r,s]=T.useState(!1),[o,l]=T.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=e,b=T.useRef(null);T.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let S=N=>{N.forEach(L=>{l(L.isIntersecting)})},C=new IntersectionObserver(S,{threshold:.5});return b.current&&C.observe(b.current),()=>{C.disconnect()}}},[n]),T.useEffect(()=>{if(r){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[r]);let v=()=>{s(!0)},w=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,b,{}]:[o,b,{onFocus:dc(u,v),onBlur:dc(d,w),onMouseEnter:dc(h,v),onMouseLeave:dc(p,w),onTouchStart:dc(m,v)}]:[!1,b,{}]}function dc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function MR({page:n,...e}){let{router:t}=GE(),r=T.useMemo(()=>LE(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?T.createElement(RR,{page:n,matches:r,...e}):null}function OR(n){let{manifest:e,routeModules:t}=KE(),[r,s]=T.useState([]);return T.useEffect(()=>{let o=!1;return SR(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function RR({page:n,matches:e,...t}){let r=ta(),{manifest:s,routeModules:o}=KE(),{basename:l}=GE(),{loaderData:u,matches:d}=AR(),h=T.useMemo(()=>G1(n,e,d,s,r,"data"),[n,e,d,s,r]),p=T.useMemo(()=>G1(n,e,d,s,r,"assets"),[n,e,d,s,r]),m=T.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let w=new Set,S=!1;if(e.forEach(N=>{var _;let L=s.routes[N.route.id];!L||!L.hasLoader||(!h.some(k=>k.route.id===N.route.id)&&N.route.id in u&&((_=o[N.route.id])!=null&&_.shouldRevalidate)||L.hasClientLoader?S=!0:w.add(N.route.id))}),w.size===0)return[];let C=vR(n,l,"data");return S&&w.size>0&&C.searchParams.set("_routes",e.filter(N=>w.has(N.route.id)).map(N=>N.route.id).join(",")),[C.pathname+C.search]},[l,u,r,s,h,e,n,o]),b=T.useMemo(()=>ER(p,s),[p,s]),v=OR(p);return T.createElement(T.Fragment,null,m.map(w=>T.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),b.map(w=>T.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),v.map(({key:w,link:S})=>T.createElement("link",{key:w,nonce:t.nonce,...S})))}function DR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var WE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{WE&&(window.__reactRouterVersion="7.9.6")}catch{}function _R({basename:n,children:e,window:t}){let r=T.useRef();r.current==null&&(r.current=bO({window:t,v5Compat:!0}));let s=r.current,[o,l]=T.useState({action:s.action,location:s.location}),u=T.useCallback(d=>{T.startTransition(()=>l(d))},[l]);return T.useLayoutEffect(()=>s.listen(u),[s,u]),T.createElement(cR,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var QE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YE=T.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:u,target:d,to:h,preventScrollReset:p,viewTransition:m,...b},v){let{basename:w}=T.useContext(Ai),S=typeof h=="string"&&QE.test(h),C,N=!1;if(typeof h=="string"&&S&&(C=h,WE))try{let re=new URL(window.location.href),ge=h.startsWith("//")?new URL(re.protocol+h):new URL(h),Ce=ls(ge.pathname,w);ge.origin===re.origin&&Ce!=null?h=Ce+ge.search+ge.hash:N=!0}catch{si(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=GO(h,{relative:s}),[_,k,$]=kR(r,b),z=zR(h,{replace:l,state:u,target:d,preventScrollReset:p,relative:s,viewTransition:m});function H(re){e&&e(re),re.defaultPrevented||z(re)}let Y=T.createElement("a",{...b,...$,href:C||L,onClick:N||o?e:H,ref:DR(v,k),target:d,"data-discover":!S&&t==="render"?"true":void 0});return _&&!S?T.createElement(T.Fragment,null,Y,T.createElement(MR,{page:L})):Y});YE.displayName="Link";var jR=T.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:u,children:d,...h},p){let m=cu(l,{relative:h.relative}),b=ta(),v=T.useContext(mh),{navigator:w,basename:S}=T.useContext(Ai),C=v!=null&&qR(m)&&u===!0,N=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,L=b.pathname,_=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(L=L.toLowerCase(),_=_?_.toLowerCase():null,N=N.toLowerCase()),_&&S&&(_=ls(_,S)||_);const k=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let $=L===N||!s&&L.startsWith(N)&&L.charAt(k)==="/",z=_!=null&&(_===N||!s&&_.startsWith(N)&&_.charAt(N.length)==="/"),H={isActive:$,isPending:z,isTransitioning:C},Y=$?e:void 0,re;typeof r=="function"?re=r(H):re=[r,$?"active":null,z?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let ge=typeof o=="function"?o(H):o;return T.createElement(YE,{...h,"aria-current":Y,className:re,ref:p,style:ge,to:l,viewTransition:u},typeof d=="function"?d(H):d)});jR.displayName="NavLink";var LR=T.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=of,action:u,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:m,...b},v)=>{let w=UR(),S=$R(u,{relative:h}),C=l.toLowerCase()==="get"?"get":"post",N=typeof u=="string"&&QE.test(u),L=_=>{if(d&&d(_),_.defaultPrevented)return;_.preventDefault();let k=_.nativeEvent.submitter,$=(k==null?void 0:k.getAttribute("formmethod"))||l;w(k||_.currentTarget,{fetcherKey:e,method:$,navigate:t,replace:s,state:o,relative:h,preventScrollReset:p,viewTransition:m})};return T.createElement("form",{ref:v,method:C,action:S,onSubmit:r?d:L,...b,"data-discover":!N&&n==="render"?"true":void 0})});LR.displayName="Form";function BR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XE(n){let e=T.useContext(dl);return Wt(e,BR(n)),e}function zR(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=KO(),d=ta(),h=cu(n,{relative:o});return T.useCallback(p=>{if(mR(p,e)){p.preventDefault();let m=t!==void 0?t:$c(d)===$c(h);u(n,{replace:m,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[d,u,h,t,r,e,n,s,o,l])}var IR=0,HR=()=>`__${String(++IR)}__`;function UR(){let{router:n}=XE("useSubmit"),{basename:e}=T.useContext(Ai),t=sR();return T.useCallback(async(r,s={})=>{let{action:o,method:l,encType:u,formData:d,body:h}=bR(r,e);if(s.navigate===!1){let p=s.fetcherKey||HR();await n.fetch(p,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function $R(n,{relative:e}={}){let{basename:t}=T.useContext(Ai),r=T.useContext(ki);Wt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...cu(n||".",{relative:e})},l=ta();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();o.search=p?`?${p}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:is([t,o.pathname])),$c(o)}function qR(n,{relative:e}={}){let t=T.useContext($E);Wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=XE("useViewTransitionState"),s=cu(n,{relative:e});if(!t.isTransitioning)return!1;let o=ls(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=ls(t.nextLocation.pathname,r)||t.nextLocation.pathname;return bf(s.pathname,l)!=null||bf(s.pathname,o)!=null}var JE=gE();const ZE=R0(JE);function eC(n,e){const t={get(r,s){if(typeof s=="string"){const o=[...e,s];return eC(n,o)}else if(s===TE){if(e.length<1){const o=[n,...e].join(".");throw new Error(`API path is expected to be of the form \`${n}.childComponent.functionName\`. Found: \`${o}\``)}return"_reference/childComponent/"+e.join("/")}else return}};return new Proxy({},t)}const PR=()=>eC("components",[]),Fe=oM;PR();function VR(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const FR=n=>{switch(n){case"success":return WR;case"info":return YR;case"warning":return QR;case"error":return XR;default:return null}},GR=Array(12).fill(0),KR=({visible:n,className:e})=>te.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},te.createElement("div",{className:"sonner-spinner"},GR.map((t,r)=>te.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),WR=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),QR=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),YR=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),XR=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),JR=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},te.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),te.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ZR=()=>{const[n,e]=te.useState(document.hidden);return te.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let Vg=1;class e5{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...s}=e,o=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Vg++,l=this.toasts.find(d=>d.id===o),u=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),l?this.toasts=this.toasts.map(d=>d.id===o?(this.publish({...d,...e,id:o,title:r}),{...d,...e,id:o,dismissible:u,title:r}):d):this.addToast({title:r,...s,dismissible:u,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,l;const u=s.then(async h=>{if(l=["resolve",h],te.isValidElement(h))o=!1,this.create({id:r,type:"default",message:h});else if(n5(h)&&!h.ok){o=!1;const m=typeof t.error=="function"?await t.error(`HTTP error! status: ${h.status}`):t.error,b=typeof t.description=="function"?await t.description(`HTTP error! status: ${h.status}`):t.description,w=typeof m=="object"&&!te.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:b,...w})}else if(h instanceof Error){o=!1;const m=typeof t.error=="function"?await t.error(h):t.error,b=typeof t.description=="function"?await t.description(h):t.description,w=typeof m=="object"&&!te.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:b,...w})}else if(t.success!==void 0){o=!1;const m=typeof t.success=="function"?await t.success(h):t.success,b=typeof t.description=="function"?await t.description(h):t.description,w=typeof m=="object"&&!te.isValidElement(m)?m:{message:m};this.create({id:r,type:"success",description:b,...w})}}).catch(async h=>{if(l=["reject",h],t.error!==void 0){o=!1;const p=typeof t.error=="function"?await t.error(h):t.error,m=typeof t.description=="function"?await t.description(h):t.description,v=typeof p=="object"&&!te.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:m,...v})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),d=()=>new Promise((h,p)=>u.then(()=>l[0]==="reject"?p(l[1]):h(l[1])).catch(p));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(e,t)=>{const r=(t==null?void 0:t.id)||Vg++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ur=new e5,t5=(n,e)=>{const t=(e==null?void 0:e.id)||Vg++;return ur.addToast({title:n,...e,id:t}),t},n5=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",r5=t5,i5=()=>ur.toasts,s5=()=>ur.getActiveToasts(),pt=Object.assign(r5,{success:ur.success,info:ur.info,warning:ur.warning,error:ur.error,custom:ur.custom,message:ur.message,promise:ur.promise,dismiss:ur.dismiss,loading:ur.loading},{getHistory:i5,getToasts:s5});VR("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Id(n){return n.label!==void 0}const o5=3,a5="24px",l5="16px",K1=4e3,c5=356,u5=14,d5=45,f5=200;function hi(...n){return n.filter(Boolean).join(" ")}function h5(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const p5=n=>{var e,t,r,s,o,l,u,d,h;const{invert:p,toast:m,unstyled:b,interacting:v,setHeights:w,visibleToasts:S,heights:C,index:N,toasts:L,expanded:_,removeToast:k,defaultRichColors:$,closeButton:z,style:H,cancelButtonStyle:Y,actionButtonStyle:re,className:ge="",descriptionClassName:Ce="",duration:pe,position:ae,gap:ie,expandByDefault:he,classNames:O,icons:R,closeButtonAriaLabel:I="Close toast"}=n,[ee,ce]=te.useState(null),[D,V]=te.useState(null),[W,oe]=te.useState(!1),[ue,ve]=te.useState(!1),[ze,se]=te.useState(!1),[Ie,mt]=te.useState(!1),[Vt,bn]=te.useState(!1),[tr,Ft]=te.useState(0),[Kn,Rt]=te.useState(0),kn=te.useRef(m.duration||pe||K1),Hn=te.useRef(null),Ae=te.useRef(null),tn=N===0,ct=N+1<=S,Pe=m.type,It=m.dismissible!==!1,tt=m.className||"",Wn=m.descriptionClassName||"",Gt=te.useMemo(()=>C.findIndex(M=>M.toastId===m.id)||0,[C,m.id]),me=te.useMemo(()=>{var M;return(M=m.closeButton)!=null?M:z},[m.closeButton,z]),Se=te.useMemo(()=>m.duration||pe||K1,[m.duration,pe]),Ve=te.useRef(0),Ke=te.useRef(0),Dt=te.useRef(0),Qt=te.useRef(null),[gr,K]=ae.split("-"),we=te.useMemo(()=>C.reduce((M,G,le)=>le>=Gt?M:M+G.height,0),[C,Gt]),Te=ZR(),at=m.invert||p,We=Pe==="loading";Ke.current=te.useMemo(()=>Gt*ie+we,[Gt,we]),te.useEffect(()=>{kn.current=Se},[Se]),te.useEffect(()=>{oe(!0)},[]),te.useEffect(()=>{const M=Ae.current;if(M){const G=M.getBoundingClientRect().height;return Rt(G),w(le=>[{toastId:m.id,height:G,position:m.position},...le]),()=>w(le=>le.filter(Me=>Me.toastId!==m.id))}},[w,m.id]),te.useLayoutEffect(()=>{if(!W)return;const M=Ae.current,G=M.style.height;M.style.height="auto";const le=M.getBoundingClientRect().height;M.style.height=G,Rt(le),w(Me=>Me.find($e=>$e.toastId===m.id)?Me.map($e=>$e.toastId===m.id?{...$e,height:le}:$e):[{toastId:m.id,height:le,position:m.position},...Me])},[W,m.title,m.description,w,m.id,m.jsx,m.action,m.cancel]);const bt=te.useCallback(()=>{ve(!0),Ft(Ke.current),w(M=>M.filter(G=>G.toastId!==m.id)),setTimeout(()=>{k(m)},f5)},[m,k,w,Ke]);te.useEffect(()=>{if(m.promise&&Pe==="loading"||m.duration===1/0||m.type==="loading")return;let M;return _||v||Te?(()=>{if(Dt.current<Ve.current){const Me=new Date().getTime()-Ve.current;kn.current=kn.current-Me}Dt.current=new Date().getTime()})():(()=>{kn.current!==1/0&&(Ve.current=new Date().getTime(),M=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),bt()},kn.current))})(),()=>clearTimeout(M)},[_,v,m,Pe,Te,bt]),te.useEffect(()=>{m.delete&&(bt(),m.onDismiss==null||m.onDismiss.call(m,m))},[bt,m.delete]);function Yt(){var M;if(R!=null&&R.loading){var G;return te.createElement("div",{className:hi(O==null?void 0:O.loader,m==null||(G=m.classNames)==null?void 0:G.loader,"sonner-loader"),"data-visible":Pe==="loading"},R.loading)}return te.createElement(KR,{className:hi(O==null?void 0:O.loader,m==null||(M=m.classNames)==null?void 0:M.loader),visible:Pe==="loading"})}const Qn=m.icon||(R==null?void 0:R[Pe])||FR(Pe);var yr,_t;return te.createElement("li",{tabIndex:0,ref:Ae,className:hi(ge,tt,O==null?void 0:O.toast,m==null||(e=m.classNames)==null?void 0:e.toast,O==null?void 0:O.default,O==null?void 0:O[Pe],m==null||(t=m.classNames)==null?void 0:t[Pe]),"data-sonner-toast":"","data-rich-colors":(yr=m.richColors)!=null?yr:$,"data-styled":!(m.jsx||m.unstyled||b),"data-mounted":W,"data-promise":!!m.promise,"data-swiped":Vt,"data-removed":ue,"data-visible":ct,"data-y-position":gr,"data-x-position":K,"data-index":N,"data-front":tn,"data-swiping":ze,"data-dismissible":It,"data-type":Pe,"data-invert":at,"data-swipe-out":Ie,"data-swipe-direction":D,"data-expanded":!!(_||he&&W),"data-testid":m.testId,style:{"--index":N,"--toasts-before":N,"--z-index":L.length-N,"--offset":`${ue?tr:Ke.current}px`,"--initial-height":he?"auto":`${Kn}px`,...H,...m.style},onDragEnd:()=>{se(!1),ce(null),Qt.current=null},onPointerDown:M=>{M.button!==2&&(We||!It||(Hn.current=new Date,Ft(Ke.current),M.target.setPointerCapture(M.pointerId),M.target.tagName!=="BUTTON"&&(se(!0),Qt.current={x:M.clientX,y:M.clientY})))},onPointerUp:()=>{var M,G,le;if(Ie||!It)return;Qt.current=null;const Me=Number(((M=Ae.current)==null?void 0:M.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ut=Number(((G=Ae.current)==null?void 0:G.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),$e=new Date().getTime()-((le=Hn.current)==null?void 0:le.getTime()),xe=ee==="x"?Me:ut,Ee=Math.abs(xe)/$e;if(Math.abs(xe)>=d5||Ee>.11){Ft(Ke.current),m.onDismiss==null||m.onDismiss.call(m,m),V(ee==="x"?Me>0?"right":"left":ut>0?"down":"up"),bt(),mt(!0);return}else{var Oe,dt;(Oe=Ae.current)==null||Oe.style.setProperty("--swipe-amount-x","0px"),(dt=Ae.current)==null||dt.style.setProperty("--swipe-amount-y","0px")}bn(!1),se(!1),ce(null)},onPointerMove:M=>{var G,le,Me;if(!Qt.current||!It||((G=window.getSelection())==null?void 0:G.toString().length)>0)return;const $e=M.clientY-Qt.current.y,xe=M.clientX-Qt.current.x;var Ee;const Oe=(Ee=n.swipeDirections)!=null?Ee:h5(ae);!ee&&(Math.abs(xe)>1||Math.abs($e)>1)&&ce(Math.abs(xe)>Math.abs($e)?"x":"y");let dt={x:0,y:0};const Nt=Mn=>1/(1.5+Math.abs(Mn)/20);if(ee==="y"){if(Oe.includes("top")||Oe.includes("bottom"))if(Oe.includes("top")&&$e<0||Oe.includes("bottom")&&$e>0)dt.y=$e;else{const Mn=$e*Nt($e);dt.y=Math.abs(Mn)<Math.abs($e)?Mn:$e}}else if(ee==="x"&&(Oe.includes("left")||Oe.includes("right")))if(Oe.includes("left")&&xe<0||Oe.includes("right")&&xe>0)dt.x=xe;else{const Mn=xe*Nt(xe);dt.x=Math.abs(Mn)<Math.abs(xe)?Mn:xe}(Math.abs(dt.x)>0||Math.abs(dt.y)>0)&&bn(!0),(le=Ae.current)==null||le.style.setProperty("--swipe-amount-x",`${dt.x}px`),(Me=Ae.current)==null||Me.style.setProperty("--swipe-amount-y",`${dt.y}px`)}},me&&!m.jsx&&Pe!=="loading"?te.createElement("button",{"aria-label":I,"data-disabled":We,"data-close-button":!0,onClick:We||!It?()=>{}:()=>{bt(),m.onDismiss==null||m.onDismiss.call(m,m)},className:hi(O==null?void 0:O.closeButton,m==null||(r=m.classNames)==null?void 0:r.closeButton)},(_t=R==null?void 0:R.close)!=null?_t:JR):null,(Pe||m.icon||m.promise)&&m.icon!==null&&((R==null?void 0:R[Pe])!==null||m.icon)?te.createElement("div",{"data-icon":"",className:hi(O==null?void 0:O.icon,m==null||(s=m.classNames)==null?void 0:s.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Yt():null,m.type!=="loading"?Qn:null):null,te.createElement("div",{"data-content":"",className:hi(O==null?void 0:O.content,m==null||(o=m.classNames)==null?void 0:o.content)},te.createElement("div",{"data-title":"",className:hi(O==null?void 0:O.title,m==null||(l=m.classNames)==null?void 0:l.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?te.createElement("div",{"data-description":"",className:hi(Ce,Wn,O==null?void 0:O.description,m==null||(u=m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),te.isValidElement(m.cancel)?m.cancel:m.cancel&&Id(m.cancel)?te.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||Y,onClick:M=>{Id(m.cancel)&&It&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,M),bt())},className:hi(O==null?void 0:O.cancelButton,m==null||(d=m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,te.isValidElement(m.action)?m.action:m.action&&Id(m.action)?te.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||re,onClick:M=>{Id(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,M),!M.defaultPrevented&&bt())},className:hi(O==null?void 0:O.actionButton,m==null||(h=m.classNames)==null?void 0:h.actionButton)},m.action.label):null)};function W1(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function m5(n,e){const t={};return[n,e].forEach((r,s)=>{const o=s===1,l=o?"--mobile-offset":"--offset",u=o?l5:a5;function d(h){["top","right","bottom","left"].forEach(p=>{t[`${l}-${p}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?t[`${l}-${h}`]=u:t[`${l}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):d(u)}),t}const g5=te.forwardRef(function(e,t){const{id:r,invert:s,position:o="bottom-right",hotkey:l=["altKey","KeyT"],expand:u,closeButton:d,className:h,offset:p,mobileOffset:m,theme:b="light",richColors:v,duration:w,style:S,visibleToasts:C=o5,toastOptions:N,dir:L=W1(),gap:_=u5,icons:k,containerAriaLabel:$="Notifications"}=e,[z,H]=te.useState([]),Y=te.useMemo(()=>r?z.filter(W=>W.toasterId===r):z.filter(W=>!W.toasterId),[z,r]),re=te.useMemo(()=>Array.from(new Set([o].concat(Y.filter(W=>W.position).map(W=>W.position)))),[Y,o]),[ge,Ce]=te.useState([]),[pe,ae]=te.useState(!1),[ie,he]=te.useState(!1),[O,R]=te.useState(b!=="system"?b:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),I=te.useRef(null),ee=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),ce=te.useRef(null),D=te.useRef(!1),V=te.useCallback(W=>{H(oe=>{var ue;return(ue=oe.find(ve=>ve.id===W.id))!=null&&ue.delete||ur.dismiss(W.id),oe.filter(({id:ve})=>ve!==W.id)})},[]);return te.useEffect(()=>ur.subscribe(W=>{if(W.dismiss){requestAnimationFrame(()=>{H(oe=>oe.map(ue=>ue.id===W.id?{...ue,delete:!0}:ue))});return}setTimeout(()=>{ZE.flushSync(()=>{H(oe=>{const ue=oe.findIndex(ve=>ve.id===W.id);return ue!==-1?[...oe.slice(0,ue),{...oe[ue],...W},...oe.slice(ue+1)]:[W,...oe]})})})}),[z]),te.useEffect(()=>{if(b!=="system"){R(b);return}if(b==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?R("dark"):R("light")),typeof window>"u")return;const W=window.matchMedia("(prefers-color-scheme: dark)");try{W.addEventListener("change",({matches:oe})=>{R(oe?"dark":"light")})}catch{W.addListener(({matches:ue})=>{try{R(ue?"dark":"light")}catch(ve){console.error(ve)}})}},[b]),te.useEffect(()=>{z.length<=1&&ae(!1)},[z]),te.useEffect(()=>{const W=oe=>{var ue;if(l.every(se=>oe[se]||oe.code===se)){var ze;ae(!0),(ze=I.current)==null||ze.focus()}oe.code==="Escape"&&(document.activeElement===I.current||(ue=I.current)!=null&&ue.contains(document.activeElement))&&ae(!1)};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[l]),te.useEffect(()=>{if(I.current)return()=>{ce.current&&(ce.current.focus({preventScroll:!0}),ce.current=null,D.current=!1)}},[I.current]),te.createElement("section",{ref:t,"aria-label":`${$} ${ee}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},re.map((W,oe)=>{var ue;const[ve,ze]=W.split("-");return Y.length?te.createElement("ol",{key:W,dir:L==="auto"?W1():L,tabIndex:-1,ref:I,className:h,"data-sonner-toaster":!0,"data-sonner-theme":O,"data-y-position":ve,"data-x-position":ze,style:{"--front-toast-height":`${((ue=ge[0])==null?void 0:ue.height)||0}px`,"--width":`${c5}px`,"--gap":`${_}px`,...S,...m5(p,m)},onBlur:se=>{D.current&&!se.currentTarget.contains(se.relatedTarget)&&(D.current=!1,ce.current&&(ce.current.focus({preventScroll:!0}),ce.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||D.current||(D.current=!0,ce.current=se.relatedTarget)},onMouseEnter:()=>ae(!0),onMouseMove:()=>ae(!0),onMouseLeave:()=>{ie||ae(!1)},onDragEnd:()=>ae(!1),onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||he(!0)},onPointerUp:()=>he(!1)},Y.filter(se=>!se.position&&oe===0||se.position===W).map((se,Ie)=>{var mt,Vt;return te.createElement(p5,{key:se.id,icons:k,index:Ie,toast:se,defaultRichColors:v,duration:(mt=N==null?void 0:N.duration)!=null?mt:w,className:N==null?void 0:N.className,descriptionClassName:N==null?void 0:N.descriptionClassName,invert:s,visibleToasts:C,closeButton:(Vt=N==null?void 0:N.closeButton)!=null?Vt:d,interacting:ie,position:W,style:N==null?void 0:N.style,unstyled:N==null?void 0:N.unstyled,classNames:N==null?void 0:N.classNames,cancelButtonStyle:N==null?void 0:N.cancelButtonStyle,actionButtonStyle:N==null?void 0:N.actionButtonStyle,closeButtonAriaLabel:N==null?void 0:N.closeButtonAriaLabel,removeToast:V,toasts:Y.filter(bn=>bn.position==se.position),heights:ge.filter(bn=>bn.position==se.position),setHeights:Ce,expandByDefault:u,gap:_,expanded:pe,swipeDirections:e.swipeDirections})})):null}))});function y5(){const{signIn:n}=jE(),[e,t]=T.useState("signIn"),[r,s]=T.useState(!1);return x.jsxs("div",{className:"w-full",children:[x.jsxs("form",{className:"flex flex-col gap-form-field",onSubmit:o=>{o.preventDefault(),s(!0);const l=new FormData(o.target);l.set("flow",e),n("password",l).catch(u=>{let d="";u.message.includes("Invalid password")?d="Invalid password. Please try again.":d=e==="signIn"?"Could not sign in, did you mean to sign up?":"Could not sign up, did you mean to sign in?",pt.error(d),s(!1)})},children:[x.jsx("input",{className:"auth-input-field",type:"email",name:"email",placeholder:"Email",required:!0}),x.jsx("input",{className:"auth-input-field",type:"password",name:"password",placeholder:"Password",required:!0}),x.jsx("button",{className:"auth-button",type:"submit",disabled:r,children:e==="signIn"?"Sign in":"Sign up"}),x.jsxs("div",{className:"text-center text-sm text-secondary",children:[x.jsx("span",{children:e==="signIn"?"Don't have an account? ":"Already have an account? "}),x.jsx("button",{type:"button",className:"text-primary hover:text-primary-hover hover:underline font-medium cursor-pointer",onClick:()=>t(e==="signIn"?"signUp":"signIn"),children:e==="signIn"?"Sign up instead":"Sign in instead"})]})]}),x.jsxs("div",{className:"flex items-center justify-center my-3",children:[x.jsx("hr",{className:"my-4 grow border-gray-200"}),x.jsx("span",{className:"mx-4 text-secondary",children:"or"}),x.jsx("hr",{className:"my-4 grow border-gray-200"})]}),x.jsx("button",{className:"auth-button",onClick:()=>void n("anonymous"),children:"Sign in anonymously"})]})}function b5(){const{isAuthenticated:n}=z0(),{signOut:e}=jE();return n?x.jsx("button",{className:"rounded-md border border-neutral-200 px-3 py-1.5 text-sm font-medium text-neutral-600 transition hover:bg-neutral-100 hover:text-neutral-800",onClick:()=>void e(),children:"Sign out"}):null}function v5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const x5=T.forwardRef(v5);function w5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0-3.75-3.75M17.25 21 21 17.25"}))}const S5=T.forwardRef(w5);function E5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const Sc=T.forwardRef(E5);function C5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const tC=T.forwardRef(C5);function T5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const N5=T.forwardRef(T5);function A5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const vf=T.forwardRef(A5);function k5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const nC=T.forwardRef(k5);function M5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const qc=T.forwardRef(M5);function O5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const R5=T.forwardRef(O5);function D5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const _5=T.forwardRef(D5);function j5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const Fg=T.forwardRef(j5);function L5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const xf=T.forwardRef(L5);function B5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"}))}const z5=T.forwardRef(B5);function I5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const H5=T.forwardRef(I5);function U5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const wf=T.forwardRef(U5);function $5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Pc=T.forwardRef($5);function q5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const rC=T.forwardRef(q5);function P5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const iC=T.forwardRef(P5);function V5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const Ec=T.forwardRef(V5);function F5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const G5=T.forwardRef(F5);function K5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5-3.9 19.5m-2.1-19.5-3.9 19.5"}))}const W5=T.forwardRef(K5);function Q5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const Q1=T.forwardRef(Q5);function Y5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const X5=T.forwardRef(Y5);function J5({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Z5=T.forwardRef(J5);function eD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const tD=T.forwardRef(eD);function nD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}const rD=T.forwardRef(nD);function iD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const yh=T.forwardRef(iD);function sD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"}))}const Y1=T.forwardRef(sD);function oD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const sC=T.forwardRef(oD);function aD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const lD=T.forwardRef(aD);function cD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const vi=T.forwardRef(cD);function uD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z"}))}const dD=T.forwardRef(uD);function fD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 7.125C2.25 6.504 2.754 6 3.375 6h6c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125h-6a1.125 1.125 0 0 1-1.125-1.125v-3.75ZM14.25 8.625c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v8.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-8.25ZM3.75 16.125c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-2.25Z"}))}const hD=T.forwardRef(fD);function pD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const oC=T.forwardRef(pD);function mD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const wi=T.forwardRef(mD);function gD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const P0=T.forwardRef(gD);function yD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const X1=T.forwardRef(yD);function bD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const J1=T.forwardRef(bD);function vD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const Gg=T.forwardRef(vD);function xD({title:n,titleId:e,...t},r){return T.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},t),n?T.createElement("title",{id:e},n):null,T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Lo=T.forwardRef(xD);function wD({isOpen:n,onClose:e}){const[t,r]=T.useState(!1),s=$t(Fe.notifications.getUserNotifications,{limit:50,unreadOnly:t})||[],o=$t(Fe.notifications.getUnreadCount)||0,l=ln(Fe.notifications.markNotificationAsRead),u=ln(Fe.notifications.markAllNotificationsAsRead),d=async m=>{try{await l({notificationId:m})}catch(b){console.error("Failed to mark notification as read:",b)}},h=async()=>{try{await u()}catch(m){console.error("Failed to mark all notifications as read:",m)}},p=m=>{switch(m){case"mention":return x.jsx(vf,{className:"w-5 h-5 text-blue-600"});case"assignment":return x.jsx(X1,{className:"w-5 h-5 text-green-600"});case"comment":return x.jsx(vf,{className:"w-5 h-5 text-purple-600"});case"suggestion":return x.jsx(Pc,{className:"w-5 h-5 text-orange-600"});case"deadline":return x.jsx(rC,{className:"w-5 h-5 text-red-600"});case"invitation":return x.jsx(X1,{className:"w-5 h-5 text-indigo-600"});default:return x.jsx(Sc,{className:"w-5 h-5 text-gray-600"})}};return n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-end z-50 pt-16 pr-4",children:x.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-96 max-h-[80vh] flex flex-col",children:[x.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(Sc,{className:"w-5 h-5 text-gray-600 mr-2"}),x.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),o>0&&x.jsx("span",{className:"ml-2 px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:o})]}),x.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-full",children:x.jsx(Lo,{className:"w-4 h-4 text-gray-500"})})]}),x.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("label",{className:"flex items-center text-sm",children:[x.jsx("input",{type:"checkbox",checked:t,onChange:m=>r(m.target.checked),className:"mr-2"}),"Show unread only"]}),o>0&&x.jsx("button",{onClick:h,className:"text-sm text-blue-600 hover:text-blue-800",children:"Mark all as read"})]})}),x.jsx("div",{className:"flex-1 overflow-y-auto",children:s.length===0?x.jsxs("div",{className:"text-center py-12 text-gray-500",children:[x.jsx(Sc,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),x.jsx("p",{className:"text-sm",children:t?"No unread notifications":"No notifications yet"})]}):x.jsx("div",{className:"divide-y divide-gray-200",children:s.map(m=>x.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer ${m.isRead?"":"bg-blue-50"}`,onClick:()=>{m.isRead||d(m._id),m.actionUrl&&(window.location.href=m.actionUrl)},children:x.jsxs("div",{className:"flex items-start",children:[x.jsx("div",{className:"flex-shrink-0 mr-3",children:p(m.type)}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:m.title}),!m.isRead&&x.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full ml-2"})]}),x.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:m.message}),x.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(m.createdAt).toLocaleString()})]})]})},m._id))})})]})}):null}function SD({isOpen:n,onClose:e,feature:t,currentUsage:r,limit:s}){const[o,l]=T.useState(!1),u=$t(Fe.subscriptions.getUserSubscription),d=$t(Fe.subscriptions.getUserUsage,{});if(!n)return null;const h=async()=>{l(!0),alert("Stripe integration would be implemented here. For demo purposes, this would redirect to payment."),l(!1)},p=["10 AI chatbot questions per month","3 tasks","5 document creations","1 PDF export","3 calendar events","5 file uploads","Basic document editing","Public document sharing"],m=["Unlimited AI chatbot questions","Unlimited tasks","Unlimited document creations","Unlimited PDF exports","Unlimited calendar events","Unlimited file uploads","Advanced collaboration features","Real-time editing with presence","Advanced commenting & suggestions","Audit log access","Priority support","Case management (30 docs, 50MB)","Workspace invitations & roles"],b=(u==null?void 0:u.plan)==="pro"?"Pro":"Free";return x.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-neutral-950/60 px-4 py-6 backdrop-blur-sm",children:x.jsxs("div",{className:"w-full max-w-4xl overflow-hidden rounded-3xl border border-neutral-200/70 bg-[#fdfcf8] shadow-2xl",children:[x.jsxs("div",{className:"flex items-start justify-between border-b border-neutral-200/70 bg-white/70 px-8 py-6",children:[x.jsxs("div",{children:[x.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-4 py-1 text-[11px] font-semibold uppercase tracking-[0.4em] text-neutral-400",children:[x.jsx(wi,{className:"h-4 w-4 text-indigo-500"}),"Upgrade"]}),x.jsx("h2",{className:"mt-4 text-3xl font-semibold text-neutral-900",children:"Upgrade to Pro"}),t?x.jsxs("p",{className:"mt-2 text-sm text-neutral-500",children:["You've reached your free tier limit for ",t," (",r,"/",s,"). Unlock more usage by upgrading."]}):x.jsx("p",{className:"mt-2 text-sm text-neutral-500",children:"Move beyond the basics with unlimited AI research, collaboration tools, and premium case management features."}),x.jsxs("p",{className:"mt-4 text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:["Current Plan  ",b]})]}),x.jsx("button",{onClick:e,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700","aria-label":"Close subscription modal",children:x.jsx(Lo,{className:"h-5 w-5"})})]}),d&&x.jsxs("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/60 px-8 py-6",children:[x.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-neutral-400",children:"Your Usage Snapshot"}),x.jsx("div",{className:"mt-4 grid gap-4 md:grid-cols-3",children:[{label:"AI Questions",value:`${d.aiQuestions}/10`},{label:"Tasks",value:`${d.tasksCreated}/3`},{label:"Documents",value:`${d.documentsCreated}/5`},{label:"PDF Exports",value:`${d.pdfExports}/1`},{label:"Calendar Events",value:`${d.calendarEvents}/3`},{label:"File Uploads",value:`${d.fileUploads}/5`}].map(v=>x.jsxs("div",{className:"rounded-2xl border border-neutral-200 bg-white px-4 py-4 shadow-sm",children:[x.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:v.label}),x.jsx("p",{className:"mt-2 text-lg font-semibold text-neutral-900",children:v.value})]},v.label))})]}),x.jsx("div",{className:"px-8 py-8",children:x.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[x.jsxs("div",{className:"rounded-3xl border border-neutral-200 bg-white/80 p-6 shadow-sm",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:"Free"}),x.jsx("h3",{className:"mt-2 text-3xl font-semibold text-neutral-900",children:"$0"}),x.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"per month"})]}),x.jsx("ul",{className:"mt-6 space-y-3",children:p.map(v=>x.jsxs("li",{className:"flex items-start gap-3 text-sm text-neutral-600",children:[x.jsx(qc,{className:"mt-0.5 h-5 w-5 text-emerald-500"}),x.jsx("span",{children:v})]},v))}),x.jsx("button",{disabled:!0,className:"mt-6 w-full rounded-full border border-neutral-200 bg-white px-4 py-2 text-sm font-medium text-neutral-400",children:"Current Plan"})]}),x.jsxs("div",{className:"relative rounded-3xl border-2 border-neutral-900 bg-white p-6 shadow-lg",children:[x.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 rounded-full border border-neutral-900 bg-neutral-900 px-4 py-1 text-xs font-semibold uppercase tracking-[0.4em] text-white",children:"Pro"}),x.jsxs("div",{className:"text-center",children:[x.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:"Professional"}),x.jsx("h3",{className:"mt-2 text-3xl font-semibold text-neutral-900",children:"$30"}),x.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"per month"})]}),x.jsx("ul",{className:"mt-6 space-y-3",children:m.map(v=>x.jsxs("li",{className:"flex items-start gap-3 text-sm text-neutral-600",children:[x.jsx(qc,{className:"mt-0.5 h-5 w-5 text-emerald-500"}),x.jsx("span",{children:v})]},v))}),x.jsx("button",{onClick:h,disabled:o,className:"mt-6 inline-flex w-full items-center justify-center gap-2 rounded-full bg-neutral-900 px-4 py-3 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700 disabled:cursor-not-allowed disabled:opacity-40",children:o?x.jsx("span",{className:"inline-flex h-5 w-5 animate-spin rounded-full border-2 border-neutral-100 border-t-transparent"}):x.jsxs(x.Fragment,{children:[x.jsx(H5,{className:"h-5 w-5"}),"Upgrade to Pro"]})})]})]})})]})})}function ED({collapsed:n,onToggleCollapse:e,activeView:t,onViewChange:r,selectedDocumentId:s,onDocumentSelect:o,selectedCaseId:l,onCaseSelect:u}){const[d,h]=T.useState(""),[p,m]=T.useState(!1),[b,v]=T.useState(""),[w,S]=T.useState(!1),[C,N]=T.useState(!1),[L,_]=T.useState(!1),k=$t(Fe.documents.listUserDocuments)||[],$=$t(Fe.documents.searchDocuments,d.length>2?{query:d}:"skip")||[],z=$t(Fe.notifications.getUnreadCount)||0,H=$t(Fe.subscriptions.getUserSubscription),Y=$t(Fe.subscriptions.checkUsageLimit,{feature:"documentsCreated"}),re=ln(Fe.documents.createDocument),ge=ln(Fe.subscriptions.incrementUsage),Ce=async ie=>{if(ie.preventDefault(),!!b.trim()){if(Y&&!Y.allowed){_(!0);return}try{const he=await re({title:b,content:"",isPublic:w});(H==null?void 0:H.plan)==="free"&&await ge({feature:"documentsCreated"}),o(he),v(""),S(!1),m(!1),r("editor")}catch(he){console.error("Failed to create document:",he)}}},pe=d.length>2?$:k,ae=[{id:"editor",label:"Editor",icon:Pc},{id:"cases",label:"Cases",icon:Ec},{id:"chat",label:"Chat",icon:N5},{id:"tasks",label:"Tasks",icon:nC},{id:"calendar",label:"Calendar",icon:tC},{id:"audit",label:"Audit Log",icon:Fg}];return n?x.jsxs("div",{className:"flex w-16 flex-col border-r border-neutral-200 bg-[#f7f6f3]",children:[x.jsx("button",{onClick:e,className:"flex h-12 items-center justify-center border-b border-neutral-200 text-neutral-500 transition hover:bg-neutral-100",children:x.jsx(_5,{className:"h-5 w-5"})}),x.jsx("nav",{className:"flex-1 py-4",children:ae.map(ie=>x.jsxs("button",{onClick:()=>r(ie.id),className:`relative flex h-12 w-full items-center justify-center transition ${t===ie.id?"bg-neutral-100 text-neutral-900":"text-neutral-500 hover:bg-neutral-100"}`,title:ie.label,children:[x.jsx(ie.icon,{className:"h-5 w-5"}),t===ie.id&&x.jsx("span",{className:"absolute inset-y-0 left-0 w-1 rounded-tr rounded-br bg-neutral-900"})]},ie.id))}),x.jsx("div",{className:"border-t border-neutral-200 p-2",children:x.jsxs("button",{onClick:()=>N(!0),className:"relative flex h-10 w-full items-center justify-center rounded-md text-neutral-500 transition hover:bg-neutral-100",title:"Notifications",children:[x.jsx(Sc,{className:"h-5 w-5"}),z>0&&x.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] font-medium text-white",children:z>9?"9+":z})]})})]}):x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex w-80 flex-col border-r border-neutral-200 bg-[#f7f6f3]",children:[x.jsxs("div",{className:"border-b border-neutral-200 px-5 py-4",children:[x.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:"Workspace"}),x.jsx("p",{className:"mt-1 text-sm font-medium text-neutral-700",children:"Kodex Dashboard"})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("button",{onClick:()=>N(!0),className:"relative rounded-md border border-neutral-200 p-1.5 text-neutral-500 transition hover:bg-white",title:"Notifications",children:[x.jsx(Sc,{className:"h-4 w-4"}),z>0&&x.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] font-medium text-white",children:z>9?"9+":z})]}),H&&x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:`rounded-full px-2 py-1 text-[11px] font-medium uppercase tracking-wide ${H.plan==="pro"?"bg-purple-100 text-purple-700":"bg-neutral-100 text-neutral-600"}`,children:H.plan==="pro"?"Pro":"Free"}),H.plan==="free"&&x.jsx("button",{onClick:()=>_(!0),className:"text-xs font-medium text-neutral-500 transition hover:text-neutral-900",children:"Upgrade"})]}),x.jsx("button",{onClick:e,className:"rounded-md border border-neutral-200 p-1.5 text-neutral-500 transition hover:bg-white",children:x.jsx(R5,{className:"h-4 w-4"})})]})]}),x.jsx("nav",{className:"space-y-1",children:ae.map(ie=>x.jsxs("button",{onClick:()=>r(ie.id),className:`flex w-full items-center gap-3 rounded-md px-3 py-2 text-sm transition ${t===ie.id?"bg-white text-neutral-900 shadow-sm":"text-neutral-600 hover:bg-neutral-100"}`,children:[x.jsx(ie.icon,{className:"h-4 w-4"}),ie.label]},ie.id))})]}),x.jsxs("div",{className:"flex flex-1 flex-col",children:[x.jsxs("div",{className:"border-b border-neutral-200 px-5 py-4",children:[x.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[x.jsx("h3",{className:"text-sm font-semibold text-neutral-700",children:"Documents"}),x.jsx("button",{onClick:()=>m(!p),className:"rounded-md border border-neutral-200 p-1.5 text-neutral-500 transition hover:bg-white",title:"Create new document",children:x.jsx(vi,{className:"h-4 w-4"})})]}),p&&x.jsxs("form",{onSubmit:Ce,className:"mb-4 rounded-lg border border-neutral-200 bg-white p-3",children:[x.jsx("input",{type:"text",placeholder:"Document title",value:b,onChange:ie=>v(ie.target.value),className:"mb-2 w-full rounded-md border border-neutral-200 px-3 py-2 text-sm text-neutral-700 outline-none transition focus:border-neutral-400 focus:ring-0",autoFocus:!0}),x.jsxs("label",{className:"mb-3 flex items-center gap-2 text-xs text-neutral-500",children:[x.jsx("input",{type:"checkbox",checked:w,onChange:ie=>S(ie.target.checked),className:"rounded border-neutral-300 text-neutral-900 focus:ring-neutral-400"}),"Make public"]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{type:"submit",className:"inline-flex flex-1 items-center justify-center rounded-md bg-neutral-900 px-3 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:"Create"}),x.jsx("button",{type:"button",onClick:()=>m(!1),className:"inline-flex flex-1 items-center justify-center rounded-md border border-neutral-200 px-3 py-2 text-sm font-medium text-neutral-600 transition hover:bg-neutral-100",children:"Cancel"})]}),Y&&!Y.allowed&&x.jsxs("p",{className:"mt-3 text-xs text-red-500",children:[Y.reason,". Upgrade to Pro for unlimited documents."]})]}),x.jsxs("div",{className:"relative",children:[x.jsx(Z5,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-neutral-300"}),x.jsx("input",{type:"text",placeholder:"Search documents...",value:d,onChange:ie=>h(ie.target.value),className:"w-full rounded-md border border-neutral-200 bg-white pl-9 pr-3 py-2 text-sm text-neutral-600 outline-none transition focus:border-neutral-400 focus:ring-0"})]})]}),x.jsx("div",{className:"flex-1 overflow-y-auto",children:x.jsx("div",{className:"space-y-1 px-3 py-4",children:pe.length===0?x.jsxs("div",{className:"rounded-lg border border-dashed border-neutral-200 bg-white/60 px-4 py-10 text-center text-neutral-400",children:[x.jsx(Ec,{className:"mx-auto mb-3 h-6 w-6"}),x.jsx("p",{className:"text-sm",children:d.length>2?"No documents found":"Create your first document to get started"})]}):pe.filter(Boolean).map(ie=>{if(!ie)return null;const he=s===ie._id;return x.jsxs("button",{onClick:()=>{o(ie._id),r("editor")},className:`flex w-full items-start justify-between rounded-lg border px-3 py-3 text-left transition ${he?"border-neutral-400 bg-white shadow-sm":"border-transparent bg-transparent hover:border-neutral-200 hover:bg-white"}`,children:[x.jsxs("div",{className:"min-w-0 flex-1",children:[x.jsx("h4",{className:"truncate text-sm font-medium text-neutral-800",children:ie.title}),x.jsx("p",{className:"mt-1 text-xs text-neutral-400",children:new Date(ie.lastModifiedAt).toLocaleDateString()})]}),x.jsx("div",{className:"ml-3 flex items-center",children:ie.isPublic?x.jsx(G5,{className:"h-4 w-4 text-neutral-500",title:"Public"}):x.jsx(X5,{className:"h-4 w-4 text-neutral-300",title:"Private"})})]},ie._id)})})})]})]}),x.jsx(wD,{isOpen:C,onClose:()=>N(!1)}),x.jsx(SD,{isOpen:L,onClose:()=>_(!1),feature:Y&&!Y.allowed?"document creation":void 0,currentUsage:Y==null?void 0:Y.currentUsage,limit:Y==null?void 0:Y.limit})]})}function CD({isOpen:n,onClose:e,documentId:t,documentContent:r}){const[s,o]=T.useState(""),[l,u]=T.useState([]),[d,h]=T.useState(!1),p=T.useRef(null),m=JM(Fe.chat.generateAIResponse);T.useEffect(()=>{var w;(w=p.current)==null||w.scrollIntoView({behavior:"smooth"})},[l]);const b=async w=>{if(w.preventDefault(),!s.trim()||d)return;const S={id:Date.now().toString(),type:"user",content:s,timestamp:Date.now()};u(N=>[...N,S]);const C=s;o(""),h(!0);try{let N=C;r&&r.trim()&&(N=`Document context: "${r.substring(0,500)}${r.length>500?"...":""}"

User question: ${C}`);const L=await m({userMessage:N,documentId:t});if(L){const _={id:(Date.now()+1).toString(),type:"ai",content:L,timestamp:Date.now()};u(k=>[...k,_])}}catch(N){console.error("AI response error:",N),pt.error("Failed to get AI response");const L={id:(Date.now()+1).toString(),type:"ai",content:"I apologize, but I'm currently unable to provide a response. Please try again later.",timestamp:Date.now()};u(_=>[..._,L])}finally{h(!1)}},v=w=>{o(w)};return n?x.jsxs("div",{className:"w-96 border-l border-gray-200 bg-[#f7f6f3] flex flex-col transition-all duration-300 ease-in-out",children:[x.jsx("div",{className:"px-6 py-5 border-b border-gray-200 bg-[#f7f6f3]",children:x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"w-10 h-10 rounded-xl border border-gray-200 bg-white flex items-center justify-center shadow-sm",children:x.jsx(wi,{className:"w-5 h-5 text-slate-500"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-sm font-semibold text-slate-900 font-sans",children:"Legal AI Assistant"}),x.jsx("p",{className:"text-xs text-slate-500 mt-1 font-sans",children:"Get instant legal insights and document analysis"})]})]}),x.jsx("button",{onClick:e,className:"p-1.5 hover:bg-white border border-transparent hover:border-gray-200 rounded-lg transition-colors","aria-label":"Close AI Assistant",children:x.jsx(Lo,{className:"w-4 h-4 text-slate-400"})})]})}),x.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-4 min-h-0",children:[l.length===0?x.jsxs("div",{className:"text-center py-16",children:[x.jsx("div",{className:"w-14 h-14 rounded-xl border border-gray-200 bg-white flex items-center justify-center mx-auto mb-5 shadow-sm",children:x.jsx(wi,{className:"w-6 h-6 text-slate-500"})}),x.jsx("h4",{className:"text-sm font-semibold text-slate-900 mb-2 font-sans",children:"Welcome to Legal AI Assistant"}),x.jsx("p",{className:"text-xs text-slate-500 max-w-xs mx-auto leading-relaxed font-sans",children:"Ask questions about legal concepts, document analysis, compliance requirements, or get help with your legal research."}),x.jsxs("div",{className:"mt-8 space-y-2 text-left",children:[x.jsx("p",{className:"text-xs font-medium text-slate-600 font-sans",children:"Try asking:"}),x.jsxs("div",{className:"space-y-2",children:[x.jsx("button",{onClick:()=>v("What are the key elements of a valid contract?"),className:"block w-full text-left text-xs text-slate-600 hover:text-slate-900 px-3 py-2 bg-white border border-gray-200 rounded-lg transition-colors font-sans",children:'"What are the key elements of a valid contract?"'}),x.jsx("button",{onClick:()=>v("Help me review this document for compliance issues"),className:"block w-full text-left text-xs text-slate-600 hover:text-slate-900 px-3 py-2 bg-white border border-gray-200 rounded-lg transition-colors font-sans",children:'"Help me review this document for compliance issues"'}),x.jsx("button",{onClick:()=>v("What are common legal risks in business agreements?"),className:"block w-full text-left text-xs text-slate-600 hover:text-slate-900 px-3 py-2 bg-white border border-gray-200 rounded-lg transition-colors font-sans",children:'"What are common legal risks in business agreements?"'}),r&&x.jsx("button",{onClick:()=>v("Analyze this document for potential legal issues"),className:"block w-full text-left text-xs text-slate-600 hover:text-slate-900 px-3 py-2 bg-white border border-gray-200 rounded-lg transition-colors font-sans",children:'"Analyze this document for potential legal issues"'})]})]})]}):x.jsxs(x.Fragment,{children:[l.map(w=>x.jsx("div",{className:`flex ${w.type==="user"?"justify-end":"justify-start"}`,children:x.jsxs("div",{className:`max-w-sm px-4 py-3 rounded-2xl shadow-sm ${w.type==="user"?"bg-slate-900 text-white":"bg-white border border-gray-200 text-slate-800"}`,children:[x.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap font-sans",children:w.content}),x.jsx("p",{className:`text-[11px] mt-2 font-sans ${w.type==="user"?"text-slate-300":"text-slate-400"}`,children:new Date(w.timestamp).toLocaleTimeString()})]})},w.id)),d&&x.jsx("div",{className:"flex justify-start",children:x.jsx("div",{className:"bg-white border border-gray-200 text-slate-700 shadow-sm px-4 py-3 rounded-2xl max-w-sm",children:x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsxs("div",{className:"flex space-x-1",children:[x.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),x.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),x.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),x.jsx("span",{className:"text-sm text-slate-600 font-sans",children:"AI is thinking..."})]})})})]}),x.jsx("div",{ref:p})]}),x.jsxs("div",{className:"px-6 py-5 border-t border-gray-200 bg-[#f7f6f3]",children:[x.jsxs("form",{onSubmit:b,className:"flex items-end space-x-3",children:[x.jsx("div",{className:"flex-1",children:x.jsx("textarea",{value:s,onChange:w=>o(w.target.value),placeholder:"Ask about legal concepts, document analysis, compliance...",className:"w-full px-4 py-3 text-sm border border-gray-200 rounded-xl bg-white resize-none focus:outline-none focus:ring-2 focus:ring-slate-900/10 font-sans leading-relaxed shadow-sm",rows:2,disabled:d,onKeyDown:w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),b(w))}})}),x.jsx("button",{type:"submit",disabled:!s.trim()||d,className:"p-3 rounded-xl bg-slate-900 text-white hover:bg-slate-800 disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-200 shadow-sm","aria-label":"Send message",children:x.jsx(yh,{className:"w-4 h-4"})})]}),x.jsx("p",{className:"text-xs text-slate-500 mt-3 font-sans leading-relaxed",children:"Press Enter to send, Shift+Enter for new line. AI responses are for informational purposes only."})]})]}):null}function Bn(n){this.content=n}Bn.prototype={constructor:Bn,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,s=r.find(n),o=r.content.slice();return s==-1?o.push(t||n,e):(o[s+1]=e,t&&(o[s]=t)),new Bn(o)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Bn(t)},addToStart:function(n,e){return new Bn([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Bn(t)},addBefore:function(n,e,t){var r=this.remove(e),s=r.content.slice(),o=r.find(n);return s.splice(o==-1?s.length:o,0,e,t),new Bn(s)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Bn.from(n),n.size?new Bn(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Bn.from(n),n.size?new Bn(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Bn.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Bn.from=function(n){if(n instanceof Bn)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Bn(e)};function aC(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let s=n.child(r),o=e.child(r);if(s==o){t+=s.nodeSize;continue}if(!s.sameMarkup(o))return t;if(s.isText&&s.text!=o.text){for(let l=0;s.text[l]==o.text[l];l++)t++;return t}if(s.content.size||o.content.size){let l=aC(s.content,o.content,t+1);if(l!=null)return l}t+=s.nodeSize}}function lC(n,e,t,r){for(let s=n.childCount,o=e.childCount;;){if(s==0||o==0)return s==o?null:{a:t,b:r};let l=n.child(--s),u=e.child(--o),d=l.nodeSize;if(l==u){t-=d,r-=d;continue}if(!l.sameMarkup(u))return{a:t,b:r};if(l.isText&&l.text!=u.text){let h=0,p=Math.min(l.text.length,u.text.length);for(;h<p&&l.text[l.text.length-h-1]==u.text[u.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(l.content.size||u.content.size){let h=lC(l.content,u.content,t-1,r-1);if(h)return h}t-=d,r-=d}}class ne{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,s=0,o){for(let l=0,u=0;u<t;l++){let d=this.content[l],h=u+d.nodeSize;if(h>e&&r(d,s+u,o||null,l)!==!1&&d.content.size){let p=u+1;d.nodesBetween(Math.max(0,e-p),Math.min(d.content.size,t-p),r,s+p)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,s){let o="",l=!0;return this.nodesBetween(e,t,(u,d)=>{let h=u.isText?u.text.slice(Math.max(e,d)-d,t-d):u.isLeaf?s?typeof s=="function"?s(u):s:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&h||u.isTextblock)&&r&&(l?l=!1:o+=r),o+=h},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,s=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(r)&&(s[s.length-1]=t.withText(t.text+r.text),o=1);o<e.content.length;o++)s.push(e.content[o]);return new ne(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],s=0;if(t>e)for(let o=0,l=0;l<t;o++){let u=this.content[o],d=l+u.nodeSize;d>e&&((l<e||d>t)&&(u.isText?u=u.cut(Math.max(0,e-l),Math.min(u.text.length,t-l)):u=u.cut(Math.max(0,e-l-1),Math.min(u.content.size,t-l-1))),r.push(u),s+=u.nodeSize),l=d}return new ne(r,s)}cutByIndex(e,t){return e==t?ne.empty:e==0&&t==this.content.length?this:new ne(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let s=this.content.slice(),o=this.size+t.nodeSize-r.nodeSize;return s[e]=t,new ne(s,o)}addToStart(e){return new ne([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ne(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let s=this.content[t];e(s,r,t),r+=s.nodeSize}}findDiffStart(e,t=0){return aC(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return lC(this,e,t,r)}findIndex(e){if(e==0)return Hd(0,e);if(e==this.size)return Hd(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let s=this.child(t),o=r+s.nodeSize;if(o>=e)return o==e?Hd(t+1,o):Hd(t,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ne.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ne(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ne.empty;let t,r=0;for(let s=0;s<e.length;s++){let o=e[s];r+=o.nodeSize,s&&o.isText&&e[s-1].sameMarkup(o)?(t||(t=e.slice(0,s)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new ne(t||e,r)}static from(e){if(!e)return ne.empty;if(e instanceof ne)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ne([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ne.empty=new ne([],0);const tg={index:0,offset:0};function Hd(n,e){return tg.index=n,tg.offset=e,tg}function Sf(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Sf(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Sf(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let kt=class Kg{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let s=0;s<e.length;s++){let o=e[s];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,s));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Sf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let s=r.create(t.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Kg.none;if(e instanceof Kg)return[e];let t=e.slice();return t.sort((r,s)=>r.type.rank-s.type.rank),t}};kt.none=[];class Ef extends Error{}class be{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=uC(this.content,e+this.openStart,t);return r&&new be(r,this.openStart,this.openEnd)}removeBetween(e,t){return new be(cC(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return be.empty;let r=t.openStart||0,s=t.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new be(ne.fromJSON(e,t.content),r,s)}static maxOpen(e,t=!0){let r=0,s=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)s++;return new be(e,r,s)}}be.empty=new be(ne.empty,0,0);function cC(n,e,t){let{index:r,offset:s}=n.findIndex(e),o=n.maybeChild(r),{index:l,offset:u}=n.findIndex(t);if(s==e||o.isText){if(u!=t&&!n.child(l).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=l)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(cC(o.content,e-s-1,t-s-1)))}function uC(n,e,t,r){let{index:s,offset:o}=n.findIndex(e),l=n.maybeChild(s);if(o==e||l.isText)return r&&!r.canReplace(s,s,t)?null:n.cut(0,e).append(t).append(n.cut(e));let u=uC(l.content,e-o-1,t,l);return u&&n.replaceChild(s,l.copy(u))}function TD(n,e,t){if(t.openStart>n.depth)throw new Ef("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Ef("Inconsistent open depths");return dC(n,e,t,0)}function dC(n,e,t,r){let s=n.index(r),o=n.node(r);if(s==e.index(r)&&r<n.depth-t.openStart){let l=dC(n,e,t,r+1);return o.copy(o.content.replaceChild(s,l))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let l=n.parent,u=l.content;return $o(l,u.cut(0,n.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:l,end:u}=ND(t,n);return $o(o,hC(n,l,u,e,r))}else return $o(o,Cf(n,e,r))}function fC(n,e){if(!e.type.compatibleContent(n.type))throw new Ef("Cannot join "+e.type.name+" onto "+n.type.name)}function Wg(n,e,t){let r=n.node(t);return fC(r,e.node(t)),r}function Uo(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Cc(n,e,t,r){let s=(e||n).node(t),o=0,l=e?e.index(t):s.childCount;n&&(o=n.index(t),n.depth>t?o++:n.textOffset&&(Uo(n.nodeAfter,r),o++));for(let u=o;u<l;u++)Uo(s.child(u),r);e&&e.depth==t&&e.textOffset&&Uo(e.nodeBefore,r)}function $o(n,e){return n.type.checkContent(e),n.copy(e)}function hC(n,e,t,r,s){let o=n.depth>s&&Wg(n,e,s+1),l=r.depth>s&&Wg(t,r,s+1),u=[];return Cc(null,n,s,u),o&&l&&e.index(s)==t.index(s)?(fC(o,l),Uo($o(o,hC(n,e,t,r,s+1)),u)):(o&&Uo($o(o,Cf(n,e,s+1)),u),Cc(e,t,s,u),l&&Uo($o(l,Cf(t,r,s+1)),u)),Cc(r,null,s,u),new ne(u)}function Cf(n,e,t){let r=[];if(Cc(null,n,t,r),n.depth>t){let s=Wg(n,e,t+1);Uo($o(s,Cf(n,e,t+1)),r)}return Cc(e,null,t,r),new ne(r)}function ND(n,e){let t=e.depth-n.openStart,s=e.node(t).copy(n.content);for(let o=t-1;o>=0;o--)s=e.node(o).copy(ne.from(s));return{start:s.resolveNoCache(n.openStart+t),end:s.resolveNoCache(s.content.size-n.openEnd-t)}}class Vc{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(t);return r?e.child(t).cut(r):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let o=0;o<e;o++)s+=r.child(o).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return kt.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),s=e.maybeChild(t);if(!r){let u=r;r=s,s=u}let o=r.marks;for(var l=0;l<o.length;l++)o[l].type.spec.inclusive===!1&&(!s||!o[l].isInSet(s.marks))&&(o=o[l--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,s=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Tf(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],s=0,o=t;for(let l=e;;){let{index:u,offset:d}=l.content.findIndex(o),h=o-d;if(r.push(l,u,s+d),!h||(l=l.child(u),l.isText))break;o=h-1,s+=d+1}return new Vc(t,r,o)}static resolveCached(e,t){let r=Z1.get(e);if(r)for(let o=0;o<r.elts.length;o++){let l=r.elts[o];if(l.pos==t)return l}else Z1.set(e,r=new AD);let s=r.elts[r.i]=Vc.resolve(e,t);return r.i=(r.i+1)%kD,s}}class AD{constructor(){this.elts=[],this.i=0}}const kD=12,Z1=new WeakMap;class Tf{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const MD=Object.create(null);let Js=class Qg{constructor(e,t,r,s=kt.none){this.type=e,this.attrs=t,this.marks=s,this.content=r||ne.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,s=0){this.content.nodesBetween(e,t,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,s){return this.content.textBetween(e,t,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Sf(this.attrs,t||e.defaultAttrs||MD)&&kt.sameSet(this.marks,r||kt.none)}copy(e=null){return e==this.content?this:new Qg(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Qg(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return be.empty;let s=this.resolve(e),o=this.resolve(t),l=r?0:s.sharedDepth(t),u=s.start(l),h=s.node(l).content.cut(s.pos-u,o.pos-u);return new be(h,s.depth-l,o.depth-l)}replace(e,t,r){return TD(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let s=this.content.child(t-1);return{node:s,index:t-1,offset:r-s.nodeSize}}resolve(e){return Vc.resolveCached(this,e)}resolveNoCache(e){return Vc.resolve(this,e)}rangeHasMark(e,t,r){let s=!1;return t>e&&this.nodesBetween(e,t,o=>(r.isInSet(o.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),pC(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=ne.empty,s=0,o=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,s,o),u=l&&l.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let d=s;d<o;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,t,r,s){if(s&&!this.type.allowsMarks(s))return!1;let o=this.contentMatchAt(e).matchType(r),l=o&&o.matchFragment(this.content,t);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=kt.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!kt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let s=ne.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,s,r);return o.type.checkAttrs(o.attrs),o}};Js.prototype.text=void 0;class Nf extends Js{constructor(e,t,r,s){if(super(e,t,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):pC(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Nf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Nf(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function pC(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class Wo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new OD(e,t);if(r.next==null)return Wo.empty;let s=mC(r);r.next&&r.err("Unexpected trailing text");let o=zD(BD(s));return ID(o,r),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let s=this;for(let o=t;s&&o<r;o++)s=s.matchType(e.child(o).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let s=[this];function o(l,u){let d=l.matchFragment(e,r);if(d&&(!t||d.validEnd))return ne.from(u.map(h=>h.createAndFill()));for(let h=0;h<l.next.length;h++){let{type:p,next:m}=l.next[h];if(!(p.isText||p.hasRequiredAttrs())&&s.indexOf(m)==-1){s.push(m);let b=o(m,u.concat(p));if(b)return b}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),o=s.match;if(o.matchType(e)){let l=[];for(let u=s;u.type;u=u.via)l.push(u.type);return l.reverse()}for(let l=0;l<o.next.length;l++){let{type:u,next:d}=o.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!s.type||d.validEnd)&&(r.push({match:u.contentMatch,type:u,via:s}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&t(r.next[s].next)}return t(this),e.map((r,s)=>{let o=s+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)o+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return o}).join(`
`)}}Wo.empty=new Wo(!0);class OD{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function mC(n){let e=[];do e.push(RD(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function RD(n){let e=[];do e.push(DD(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function DD(n){let e=LD(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=_D(n,e);else break;return e}function ew(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function _D(n,e){let t=ew(n),r=t;return n.eat(",")&&(n.next!="}"?r=ew(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function jD(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let s=[];for(let o in t){let l=t[o];l.isInGroup(e)&&s.push(l)}return s.length==0&&n.err("No node type or group '"+e+"' found"),s}function LD(n){if(n.eat("(")){let e=mC(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=jD(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function BD(n){let e=[[]];return s(o(n,0),t()),e;function t(){return e.push([])-1}function r(l,u,d){let h={term:d,to:u};return e[l].push(h),h}function s(l,u){l.forEach(d=>d.to=u)}function o(l,u){if(l.type=="choice")return l.exprs.reduce((d,h)=>d.concat(o(h,u)),[]);if(l.type=="seq")for(let d=0;;d++){let h=o(l.exprs[d],u);if(d==l.exprs.length-1)return h;s(h,u=t())}else if(l.type=="star"){let d=t();return r(u,d),s(o(l.expr,d),d),[r(d)]}else if(l.type=="plus"){let d=t();return s(o(l.expr,u),d),s(o(l.expr,d),d),[r(d)]}else{if(l.type=="opt")return[r(u)].concat(o(l.expr,u));if(l.type=="range"){let d=u;for(let h=0;h<l.min;h++){let p=t();s(o(l.expr,d),p),d=p}if(l.max==-1)s(o(l.expr,d),d);else for(let h=l.min;h<l.max;h++){let p=t();r(d,p),s(o(l.expr,d),p),d=p}return[r(d)]}else{if(l.type=="name")return[r(u,void 0,l.value)];throw new Error("Unknown expr type")}}}}function gC(n,e){return e-n}function tw(n,e){let t=[];return r(e),t.sort(gC);function r(s){let o=n[s];if(o.length==1&&!o[0].term)return r(o[0].to);t.push(s);for(let l=0;l<o.length;l++){let{term:u,to:d}=o[l];!u&&t.indexOf(d)==-1&&r(d)}}}function zD(n){let e=Object.create(null);return t(tw(n,0));function t(r){let s=[];r.forEach(l=>{n[l].forEach(({term:u,to:d})=>{if(!u)return;let h;for(let p=0;p<s.length;p++)s[p][0]==u&&(h=s[p][1]);tw(n,d).forEach(p=>{h||s.push([u,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let o=e[r.join(",")]=new Wo(r.indexOf(n.length-1)>-1);for(let l=0;l<s.length;l++){let u=s[l][1].sort(gC);o.next.push({type:s[l][0],next:e[u.join(",")]||t(u)})}return o}}function ID(n,e){for(let t=0,r=[n];t<r.length;t++){let s=r[t],o=!s.validEnd,l=[];for(let u=0;u<s.next.length;u++){let{type:d,next:h}=s.next[u];l.push(d.name),o&&!(d.isText||d.hasRequiredAttrs())&&(o=!1),r.indexOf(h)==-1&&r.push(h)}o&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function yC(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function bC(n,e){let t=Object.create(null);for(let r in n){let s=e&&e[r];if(s===void 0){let o=n[r];if(o.hasDefault)s=o.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=s}return t}function vC(n,e,t,r){for(let s in e)if(!(s in n))throw new RangeError(`Unsupported attribute ${s} for ${t} of type ${s}`);for(let s in n){let o=n[s];o.validate&&o.validate(e[s])}}function xC(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new UD(n,r,e[r]);return t}let nw=class wC{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=xC(e,r.attrs),this.defaultAttrs=yC(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Wo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:bC(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Js(this,this.computeAttrs(e),ne.from(t),kt.setFrom(r))}createChecked(e=null,t,r){return t=ne.from(t),this.checkContent(t),new Js(this,this.computeAttrs(e),t,kt.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=ne.from(t),t.size){let l=this.contentMatch.fillBefore(t);if(!l)return null;t=l.append(t)}let s=this.contentMatch.matchFragment(t),o=s&&s.fillBefore(ne.empty,!0);return o?new Js(this,e,t.append(o),kt.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){vC(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:kt.none:e}static compile(e,t){let r=Object.create(null);e.forEach((o,l)=>r[o]=new wC(o,t,l));let s=t.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function HD(n,e,t){let r=t.split("|");return s=>{let o=s===null?"null":typeof s;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${o}`)}}class UD{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?HD(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class bh{constructor(e,t,r,s){this.name=e,this.rank=t,this.schema=r,this.spec=s,this.attrs=xC(e,s.attrs),this.excluded=null;let o=yC(this.attrs);this.instance=o?new kt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new kt(this,bC(this.attrs,e))}static compile(e,t){let r=Object.create(null),s=0;return e.forEach((o,l)=>r[o]=new bh(o,s++,t,l)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){vC(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class SC{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=Bn.from(e.nodes),t.marks=Bn.from(e.marks||{}),this.nodes=nw.compile(this.spec.nodes,this),this.marks=bh.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let o=this.nodes[s],l=o.spec.content||"",u=o.spec.marks;if(o.contentMatch=r[l]||(r[l]=Wo.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=u=="_"?null:u?rw(this,u.split(" ")):u==""||!o.inlineContent?[]:null}for(let s in this.marks){let o=this.marks[s],l=o.spec.excludes;o.excluded=l==null?[o]:l==""?[]:rw(this,l.split(" "))}this.nodeFromJSON=s=>Js.fromJSON(this,s),this.markFromJSON=s=>kt.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof nw){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,s)}text(e,t){let r=this.nodes.text;return new Nf(r,r.defaultAttrs,e,kt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function rw(n,e){let t=[];for(let r=0;r<e.length;r++){let s=e[r],o=n.marks[s],l=o;if(o)t.push(o);else for(let u in n.marks){let d=n.marks[u];(s=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(s)>-1)&&t.push(l=d)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function $D(n){return n.tag!=null}function qD(n){return n.style!=null}class Zs{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(s=>{if($D(s))this.tags.push(s);else if(qD(s)){let o=/[^=]*/.exec(s.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let o=e.nodes[s.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let r=new sw(this,t,!1);return r.addAll(e,kt.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new sw(this,t,!0);return r.addAll(e,kt.none,t.from,t.to),be.maxOpen(r.finish())}matchTag(e,t,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let o=this.tags[s];if(FD(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){let l=o.getAttrs(e);if(l===!1)continue;o.attrs=l||void 0}return o}}}matchStyle(e,t,r,s){for(let o=s?this.styles.indexOf(s)+1:0;o<this.styles.length;o++){let l=this.styles[o],u=l.style;if(!(u.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(l.getAttrs){let d=l.getAttrs(t);if(d===!1)continue;l.attrs=d||void 0}return l}}}static schemaRules(e){let t=[];function r(s){let o=s.priority==null?50:s.priority,l=0;for(;l<t.length;l++){let u=t[l];if((u.priority==null?50:u.priority)<o)break}t.splice(l,0,s)}for(let s in e.marks){let o=e.marks[s].spec.parseDOM;o&&o.forEach(l=>{r(l=ow(l)),l.mark||l.ignore||l.clearMark||(l.mark=s)})}for(let s in e.nodes){let o=e.nodes[s].spec.parseDOM;o&&o.forEach(l=>{r(l=ow(l)),l.node||l.ignore||l.mark||(l.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Zs(e,Zs.schemaRules(e)))}}const EC={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},PD={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},CC={ol:!0,ul:!0},Fc=1,Yg=2,Tc=4;function iw(n,e,t){return e!=null?(e?Fc:0)|(e==="full"?Yg:0):n&&n.whitespace=="pre"?Fc|Yg:t&~Tc}class Ud{constructor(e,t,r,s,o,l){this.type=e,this.attrs=t,this.marks=r,this.solid=s,this.options=l,this.content=[],this.activeMarks=kt.none,this.match=o||(l&Tc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(ne.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Fc)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-s[0].length))}}let t=ne.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(ne.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!EC.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class sw{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=t.topNode,o,l=iw(null,t.preserveWhitespace,0)|(r?Tc:0);s?o=new Ud(s.type,s.attrs,kt.none,!0,t.topMatch||s.type.contentMatch,l):r?o=new Ud(null,null,kt.none,!0,null,l):o=new Ud(e.schema.topNodeType,null,kt.none,!0,null,l),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,s=this.top,o=s.options&Yg?"full":this.localPreserveWS||(s.options&Fc)>0,{schema:l}=this.parser;if(o==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(l.linebreakReplacement.create())){let u=r.split(/\r?\n|\r/);for(let d=0;d<u.length;d++)d&&this.insertNode(l.linebreakReplacement.create(),t,!0),u[d]&&this.insertNode(l.text(u[d]),t,!/\S/.test(u[d]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=s.content[s.content.length-1],d=e.previousSibling;(!u||d&&d.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(l.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let s=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),u;CC.hasOwnProperty(l)&&this.parser.normalizeLists&&VD(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(d?d.ignore:PD.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,t);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let h,p=this.needsBlock;if(EC.hasOwnProperty(l))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let m=d&&d.skip?t:this.readStyles(e,t);m&&this.addAll(e,m),h&&this.sync(o),this.needsBlock=p}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,d,h,d.consuming===!1?u:void 0)}this.localPreserveWS=s}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let o=this.parser.matchedStyles[s],l=r.getPropertyValue(o);if(l)for(let u=void 0;;){let d=this.parser.matchStyle(o,l,this,u);if(!d)break;if(d.ignore)return null;if(d.clearMark?t=t.filter(h=>!d.clearMark(h)):t=t.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)u=d;else break}}return t}addElementByRule(e,t,r,s){let o,l;if(t.node)if(l=this.parser.schema.nodes[t.node],l.isLeaf)this.insertNode(l.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let d=this.enter(l,t.attrs||null,r,t.preserveWhitespace);d&&(o=!0,r=d)}else{let d=this.parser.schema.marks[t.mark];r=r.concat(d.create(t.attrs))}let u=this.top;if(l&&l.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=e;typeof t.contentElement=="string"?d=e.querySelector(t.contentElement):typeof t.contentElement=="function"?d=t.contentElement(e):t.contentElement&&(d=t.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}o&&this.sync(u)&&this.open--}addAll(e,t,r,s){let o=r||0;for(let l=r?e.childNodes[r]:e.firstChild,u=s==null?null:e.childNodes[s];l!=u;l=l.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(l,t);this.findAtPoint(e,o)}findPlace(e,t,r){let s,o;for(let l=this.open,u=0;l>=0;l--){let d=this.nodes[l],h=d.findWrapping(e);if(h&&(!s||s.length>h.length+u)&&(s=h,o=d,!h.length))break;if(d.solid){if(r)break;u+=2}}if(!s)return null;this.sync(o);for(let l=0;l<s.length;l++)t=this.enterInner(s[l],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(t=this.enterInner(o,null,t))}let s=this.findPlace(e,t,r);if(s){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let l=kt.none;for(let u of s.concat(e.marks))(o.type?o.type.allowsMarkType(u.type):aw(u.type,e.type))&&(l=u.addToSet(l));return o.content.push(e.mark(l)),!0}return!1}enter(e,t,r,s){let o=this.findPlace(e.create(t),r,!1);return o&&(o=this.enterInner(e,t,r,!0,s)),o}enterInner(e,t,r,s=!1,o){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let u=iw(e,o,l.options);l.options&Tc&&l.content.length==0&&(u|=Tc);let d=kt.none;return r=r.filter(h=>(l.type?l.type.allowsMarkType(h.type):aw(h.type,e))?(d=h.addToSet(d),!1):!0),this.nodes.push(new Ud(e,t,d,s,null,u)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Fc)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(s?0:1),l=(u,d)=>{for(;u>=0;u--){let h=t[u];if(h==""){if(u==t.length-1||u==0)continue;for(;d>=o;d--)if(l(u-1,d))return!0;return!1}else{let p=d>0||d==0&&s?this.nodes[d].type:r&&d>=o?r.node(d-o).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;d--}}return!0};return l(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function VD(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&CC.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function FD(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function ow(n){let e={};for(let t in n)e[t]=n[t];return e}function aw(n,e){let t=e.schema.nodes;for(let r in t){let s=t[r];if(!s.allowsMarkType(n))continue;let o=[],l=u=>{o.push(u);for(let d=0;d<u.edgeCount;d++){let{type:h,next:p}=u.edge(d);if(h==e||o.indexOf(p)<0&&l(p))return!0}};if(l(s.contentMatch))return!0}}class na{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=ng(t).createDocumentFragment());let s=r,o=[];return e.forEach(l=>{if(o.length||l.marks.length){let u=0,d=0;for(;u<o.length&&d<l.marks.length;){let h=l.marks[d];if(!this.marks[h.type.name]){d++;continue}if(!h.eq(o[u][0])||h.type.spec.spanning===!1)break;u++,d++}for(;u<o.length;)s=o.pop()[1];for(;d<l.marks.length;){let h=l.marks[d++],p=this.serializeMark(h,l.isInline,t);p&&(o.push([h,s]),s.appendChild(p.dom),s=p.contentDOM||p.dom)}}s.appendChild(this.serializeNodeInner(l,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:s}=lf(ng(t),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let o=this.serializeMark(e.marks[s],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,t,r={}){let s=this.marks[e.type.name];return s&&lf(ng(r),s(e,t),null,e.attrs)}static renderSpec(e,t,r=null,s){return lf(e,t,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new na(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=lw(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return lw(e.marks)}}function lw(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function ng(n){return n.document||window.document}const cw=new WeakMap;function GD(n){let e=cw.get(n);return e===void 0&&cw.set(n,e=KD(n)),e}function KD(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)t(r[s]);else for(let s in r)t(r[s])}return t(n),e}function lf(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],o;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=GD(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=s.indexOf(" ");l>0&&(t=s.slice(0,l),s=s.slice(l+1));let u,d=t?n.createElementNS(t,s):n.createElement(s),h=e[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let m in h)if(h[m]!=null){let b=m.indexOf(" ");b>0?d.setAttributeNS(m.slice(0,b),m.slice(b+1),h[m]):m=="style"&&d.style?d.style.cssText=h[m]:d.setAttribute(m,h[m])}}for(let m=p;m<e.length;m++){let b=e[m];if(b===0){if(m<e.length-1||m>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:v,contentDOM:w}=lf(n,b,t,r);if(d.appendChild(v),w){if(u)throw new RangeError("Multiple content holes");u=w}}}return{dom:d,contentDOM:u}}const TC=65535,NC=Math.pow(2,16);function WD(n,e){return n+e*NC}function uw(n){return n&TC}function QD(n){return(n-(n&TC))/NC}const AC=1,kC=2,cf=4,MC=8;class Xg{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&MC)>0}get deletedBefore(){return(this.delInfo&(AC|cf))>0}get deletedAfter(){return(this.delInfo&(kC|cf))>0}get deletedAcross(){return(this.delInfo&cf)>0}}class kr{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&kr.empty)return kr.empty}recover(e){let t=0,r=uw(e);if(!this.inverted)for(let s=0;s<r;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+t+QD(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let s=0,o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?s:0);if(d>e)break;let h=this.ranges[u+o],p=this.ranges[u+l],m=d+h;if(e<=m){let b=h?e==d?-1:e==m?1:t:t,v=d+s+(b<0?0:p);if(r)return v;let w=e==(t<0?d:m)?null:WD(u/3,e-d),S=e==d?kC:e==m?AC:cf;return(t<0?e!=d:e!=m)&&(S|=MC),new Xg(v,S,w)}s+=p-h}return r?e+s:new Xg(e+s,0,null)}touches(e,t){let r=0,s=uw(t),o=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?r:0);if(d>e)break;let h=this.ranges[u+o],p=d+h;if(e<=p&&u==s*3)return!0;r+=this.ranges[u+l]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,o=0;s<this.ranges.length;s+=3){let l=this.ranges[s],u=l-(this.inverted?o:0),d=l+(this.inverted?0:o),h=this.ranges[s+t],p=this.ranges[s+r];e(u,u+h,d,d+p),o+=p-h}}invert(){return new kr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?kr.empty:new kr(e<0?[0,-e,0]:[0,0,e])}}kr.empty=new kr([]);class Gc{constructor(e,t,r=0,s=e?e.length:0){this.mirror=t,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Gc(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let s=e.getMirror(t);this.appendMap(e._maps[t],s!=null&&s<t?r+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e._maps[t].invert(),s!=null&&s>t?r-s-1:void 0)}}invert(){let e=new Gc;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let s=0;for(let o=this.from;o<this.to;o++){let l=this._maps[o],u=l.mapResult(e,t);if(u.recover!=null){let d=this.getMirror(o);if(d!=null&&d>o&&d<this.to){o=d,e=this._maps[d].recover(u.recover);continue}}s|=u.delInfo,e=u.pos}return r?e:new Xg(e,s,null)}}const rg=Object.create(null);class Gn{getMap(){return kr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=rg[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in rg)throw new RangeError("Duplicate use of step JSON ID "+e);return rg[e]=t,t.prototype.jsonID=e,t}}class yn{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new yn(e,null)}static fail(e){return new yn(null,e)}static fromReplace(e,t,r,s){try{return yn.ok(e.replace(t,r,s))}catch(o){if(o instanceof Ef)return yn.fail(o.message);throw o}}}function V0(n,e,t){let r=[];for(let s=0;s<n.childCount;s++){let o=n.child(s);o.content.size&&(o=o.copy(V0(o.content,e,o))),o.isInline&&(o=e(o,t,s)),r.push(o)}return ne.fromArray(r)}class Ws extends Gn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),o=new be(V0(t.content,(l,u)=>!l.isAtom||!u.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),s),t.openStart,t.openEnd);return yn.fromReplace(e,this.from,this.to,o)}invert(){return new xi(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ws(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ws&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ws(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ws(t.from,t.to,e.markFromJSON(t.mark))}}Gn.jsonID("addMark",Ws);class xi extends Gn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new be(V0(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return yn.fromReplace(e,this.from,this.to,r)}invert(){return new Ws(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new xi(t.pos,r.pos,this.mark)}merge(e){return e instanceof xi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new xi(t.from,t.to,e.markFromJSON(t.mark))}}Gn.jsonID("removeMark",xi);class Qs extends Gn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return yn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return yn.fromReplace(e,this.pos,this.pos+1,new be(ne.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(r))return new Qs(this.pos,t.marks[s]);return new Qs(this.pos,this.mark)}}return new Qo(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Qs(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Qs(t.pos,e.markFromJSON(t.mark))}}Gn.jsonID("addNodeMark",Qs);class Qo extends Gn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return yn.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return yn.fromReplace(e,this.pos,this.pos+1,new be(ne.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Qs(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Qo(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Qo(t.pos,e.markFromJSON(t.mark))}}Gn.jsonID("removeNodeMark",Qo);class wn extends Gn{constructor(e,t,r,s=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=s}apply(e){return this.structure&&Jg(e,this.from,this.to)?yn.fail("Structure replace would overwrite content"):yn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new kr([this.from,this.to-this.from,this.slice.size])}invert(e){return new wn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new wn(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof wn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?be.empty:new be(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new wn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?be.empty:new be(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new wn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new wn(t.from,t.to,be.fromJSON(e,t.slice),!!t.structure)}}Gn.jsonID("replace",wn);class Cn extends Gn{constructor(e,t,r,s,o,l,u=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=s,this.slice=o,this.insert=l,this.structure=u}apply(e){if(this.structure&&(Jg(e,this.from,this.gapFrom)||Jg(e,this.gapTo,this.to)))return yn.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return yn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?yn.fromReplace(e,this.from,this.to,r):yn.fail("Content does not fit in gap")}getMap(){return new kr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Cn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||s<t.pos||o>r.pos?null:new Cn(t.pos,r.pos,s,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Cn(t.from,t.to,t.gapFrom,t.gapTo,be.fromJSON(e,t.slice),t.insert,!!t.structure)}}Gn.jsonID("replaceAround",Cn);function Jg(n,e,t){let r=n.resolve(e),s=t-e,o=r.depth;for(;s>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,s--;if(s>0){let l=r.node(o).maybeChild(r.indexAfter(o));for(;s>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,s--}}return!1}function YD(n,e,t,r){let s=[],o=[],l,u;n.doc.nodesBetween(e,t,(d,h,p)=>{if(!d.isInline)return;let m=d.marks;if(!r.isInSet(m)&&p.type.allowsMarkType(r.type)){let b=Math.max(h,e),v=Math.min(h+d.nodeSize,t),w=r.addToSet(m);for(let S=0;S<m.length;S++)m[S].isInSet(w)||(l&&l.to==b&&l.mark.eq(m[S])?l.to=v:s.push(l=new xi(b,v,m[S])));u&&u.to==b?u.to=v:o.push(u=new Ws(b,v,r))}}),s.forEach(d=>n.step(d)),o.forEach(d=>n.step(d))}function XD(n,e,t,r){let s=[],o=0;n.doc.nodesBetween(e,t,(l,u)=>{if(!l.isInline)return;o++;let d=null;if(r instanceof bh){let h=l.marks,p;for(;p=r.isInSet(h);)(d||(d=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(l.marks)&&(d=[r]):d=l.marks;if(d&&d.length){let h=Math.min(u+l.nodeSize,t);for(let p=0;p<d.length;p++){let m=d[p],b;for(let v=0;v<s.length;v++){let w=s[v];w.step==o-1&&m.eq(s[v].style)&&(b=w)}b?(b.to=h,b.step=o):s.push({style:m,from:Math.max(u,e),to:h,step:o})}}}),s.forEach(l=>n.step(new xi(l.from,l.to,l.style)))}function F0(n,e,t,r=t.contentMatch,s=!0){let o=n.doc.nodeAt(e),l=[],u=e+1;for(let d=0;d<o.childCount;d++){let h=o.child(d),p=u+h.nodeSize,m=r.matchType(h.type);if(!m)l.push(new wn(u,p,be.empty));else{r=m;for(let b=0;b<h.marks.length;b++)t.allowsMarkType(h.marks[b].type)||n.step(new xi(u,p,h.marks[b]));if(s&&h.isText&&t.whitespace!="pre"){let b,v=/\r?\n|\r/g,w;for(;b=v.exec(h.text);)w||(w=new be(ne.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),l.push(new wn(u+b.index,u+b.index+b[0].length,w))}}u=p}if(!r.validEnd){let d=r.fillBefore(ne.empty,!0);n.replace(u,u,new be(d,0,0))}for(let d=l.length-1;d>=0;d--)n.step(l[d])}function JD(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function fl(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth,s=0,o=0;;--r){let l=n.$from.node(r),u=n.$from.index(r)+s,d=n.$to.indexAfter(r)-o;if(r<n.depth&&l.canReplace(u,d,t))return r;if(r==0||l.type.spec.isolating||!JD(l,u,d))break;u&&(s=1),d<l.childCount&&(o=1)}return null}function ZD(n,e,t){let{$from:r,$to:s,depth:o}=e,l=r.before(o+1),u=s.after(o+1),d=l,h=u,p=ne.empty,m=0;for(let w=o,S=!1;w>t;w--)S||r.index(w)>0?(S=!0,p=ne.from(r.node(w).copy(p)),m++):d--;let b=ne.empty,v=0;for(let w=o,S=!1;w>t;w--)S||s.after(w+1)<s.end(w)?(S=!0,b=ne.from(s.node(w).copy(b)),v++):h++;n.step(new Cn(d,h,l,u,new be(p.append(b),m,v),p.size-m,!0))}function G0(n,e,t=null,r=n){let s=e3(n,e),o=s&&t3(r,e);return o?s.map(dw).concat({type:e,attrs:t}).concat(o.map(dw)):null}function dw(n){return{type:n,attrs:null}}function e3(n,e){let{parent:t,startIndex:r,endIndex:s}=n,o=t.contentMatchAt(r).findWrapping(e);if(!o)return null;let l=o.length?o[0]:e;return t.canReplaceWith(r,s,l)?o:null}function t3(n,e){let{parent:t,startIndex:r,endIndex:s}=n,o=t.child(r),l=e.contentMatch.findWrapping(o.type);if(!l)return null;let d=(l.length?l[l.length-1]:e).contentMatch;for(let h=r;d&&h<s;h++)d=d.matchType(t.child(h).type);return!d||!d.validEnd?null:l}function n3(n,e,t){let r=ne.empty;for(let l=t.length-1;l>=0;l--){if(r.size){let u=t[l].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ne.from(t[l].type.create(t[l].attrs,r))}let s=e.start,o=e.end;n.step(new Cn(s,o,s,o,new be(r,0,0),t.length,!0))}function r3(n,e,t,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(e,t,(l,u)=>{let d=typeof s=="function"?s(l):s;if(l.isTextblock&&!l.hasMarkup(r,d)&&i3(n.doc,n.mapping.slice(o).map(u),r)){let h=null;if(r.schema.linebreakReplacement){let v=r.whitespace=="pre",w=!!r.contentMatch.matchType(r.schema.linebreakReplacement);v&&!w?h=!1:!v&&w&&(h=!0)}h===!1&&RC(n,l,u,o),F0(n,n.mapping.slice(o).map(u,1),r,void 0,h===null);let p=n.mapping.slice(o),m=p.map(u,1),b=p.map(u+l.nodeSize,1);return n.step(new Cn(m,b,m+1,b-1,new be(ne.from(r.create(d,null,l.marks)),0,0),1,!0)),h===!0&&OC(n,l,u,o),!1}})}function OC(n,e,t,r){e.forEach((s,o)=>{if(s.isText){let l,u=/\r?\n|\r/g;for(;l=u.exec(s.text);){let d=n.mapping.slice(r).map(t+1+o+l.index);n.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function RC(n,e,t,r){e.forEach((s,o)=>{if(s.type==s.type.schema.linebreakReplacement){let l=n.mapping.slice(r).map(t+1+o);n.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function i3(n,e,t){let r=n.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,t)}function s3(n,e,t,r,s){let o=n.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);let l=t.create(r,null,s||o.marks);if(o.isLeaf)return n.replaceWith(e,e+o.nodeSize,l);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new Cn(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new be(ne.from(l),0,0),1,!0))}function ss(n,e,t=1,r){let s=n.resolve(e),o=s.depth-t,l=r&&r[r.length-1]||s.parent;if(o<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!l.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let h=s.depth-1,p=t-2;h>o;h--,p--){let m=s.node(h),b=s.index(h);if(m.type.spec.isolating)return!1;let v=m.content.cutByIndex(b,m.childCount),w=r&&r[p+1];w&&(v=v.replaceChild(0,w.type.create(w.attrs)));let S=r&&r[p]||m;if(!m.canReplace(b+1,m.childCount)||!S.type.validContent(v))return!1}let u=s.indexAfter(o),d=r&&r[0];return s.node(o).canReplaceWith(u,u,d?d.type:s.node(o+1).type)}function o3(n,e,t=1,r){let s=n.doc.resolve(e),o=ne.empty,l=ne.empty;for(let u=s.depth,d=s.depth-t,h=t-1;u>d;u--,h--){o=ne.from(s.node(u).copy(o));let p=r&&r[h];l=ne.from(p?p.type.create(p.attrs,l):s.node(u).copy(l))}n.step(new wn(e,e,new be(o.append(l),t,t),!0))}function io(n,e){let t=n.resolve(e),r=t.index();return DC(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function a3(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let s=0;s<e.childCount;s++){let o=e.child(s),l=o.type==r?n.type.schema.nodes.text:o.type;if(t=t.matchType(l),!t||!n.type.allowsMarks(o.marks))return!1}return t.validEnd}function DC(n,e){return!!(n&&e&&!n.isLeaf&&a3(n,e))}function vh(n,e,t=-1){let r=n.resolve(e);for(let s=r.depth;;s--){let o,l,u=r.index(s);if(s==r.depth?(o=r.nodeBefore,l=r.nodeAfter):t>0?(o=r.node(s+1),u++,l=r.node(s).maybeChild(u)):(o=r.node(s).maybeChild(u-1),l=r.node(s+1)),o&&!o.isTextblock&&DC(o,l)&&r.node(s).canReplace(u,u+1))return e;if(s==0)break;e=t<0?r.before(s):r.after(s)}}function l3(n,e,t){let r=null,{linebreakReplacement:s}=n.doc.type.schema,o=n.doc.resolve(e-t),l=o.node().type;if(s&&l.inlineContent){let p=l.whitespace=="pre",m=!!l.contentMatch.matchType(s);p&&!m?r=!1:!p&&m&&(r=!0)}let u=n.steps.length;if(r===!1){let p=n.doc.resolve(e+t);RC(n,p.node(),p.before(),u)}l.inlineContent&&F0(n,e+t-1,l,o.node().contentMatchAt(o.index()),r==null);let d=n.mapping.slice(u),h=d.map(e-t);if(n.step(new wn(h,d.map(e+t,-1),be.empty,!0)),r===!0){let p=n.doc.resolve(h);OC(n,p.node(),p.before(),n.steps.length)}return n}function c3(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let o=r.index(s);if(r.node(s).canReplaceWith(o,o,t))return r.before(s+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let o=r.indexAfter(s);if(r.node(s).canReplaceWith(o,o,t))return r.after(s+1);if(o<r.node(s).childCount)return null}return null}function _C(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let s=t.content;for(let o=0;o<t.openStart;o++)s=s.firstChild.content;for(let o=1;o<=(t.openStart==0&&t.size?2:1);o++)for(let l=r.depth;l>=0;l--){let u=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,d=r.index(l)+(u>0?1:0),h=r.node(l),p=!1;if(o==1)p=h.canReplace(d,d,s);else{let m=h.contentMatchAt(d).findWrapping(s.firstChild.type);p=m&&h.canReplaceWith(d,d,m[0])}if(p)return u==0?r.pos:u<0?r.before(l+1):r.after(l+1)}return null}function xh(n,e,t=e,r=be.empty){if(e==t&&!r.size)return null;let s=n.resolve(e),o=n.resolve(t);return jC(s,o,r)?new wn(e,t,r):new u3(s,o,r).fit()}function jC(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class u3{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=ne.empty;for(let s=0;s<=e.depth;s++){let o=e.node(s);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=ne.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let o=this.placed,l=r.depth,u=s.depth;for(;l&&u&&o.childCount==1;)o=o.firstChild.content,l--,u--;let d=new be(o,l,u);return e>-1?new Cn(r.pos,e,this.$to.pos,this.$to.end(),d,t):d.size||r.pos!=this.$to.pos?new wn(r.pos,s.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let o=t.firstChild;if(t.childCount>1&&(s=0),o.type.spec.isolating&&s<=r){e=r;break}t=o.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let s,o=null;r?(o=ig(this.unplaced.content,r-1).firstChild,s=o.content):s=this.unplaced.content;let l=s.firstChild;for(let u=this.depth;u>=0;u--){let{type:d,match:h}=this.frontier[u],p,m=null;if(t==1&&(l?h.matchType(l.type)||(m=h.fillBefore(ne.from(l),!1)):o&&d.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:u,parent:o,inject:m};if(t==2&&l&&(p=h.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:u,parent:o,wrap:p};if(o&&h.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=ig(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new be(e,t+1,Math.max(r,s.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=ig(e,t);if(s.childCount<=1&&t>0){let o=e.size-t<=t+s.size;this.unplaced=new be(gc(e,t-1,1),t-1,o?t-1:r)}else this.unplaced=new be(gc(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:s,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let S=0;S<o.length;S++)this.openFrontierNode(o[S]);let l=this.unplaced,u=r?r.content:l.content,d=l.openStart-e,h=0,p=[],{match:m,type:b}=this.frontier[t];if(s){for(let S=0;S<s.childCount;S++)p.push(s.child(S));m=m.matchFragment(s)}let v=u.size+e-(l.content.size-l.openEnd);for(;h<u.childCount;){let S=u.child(h),C=m.matchType(S.type);if(!C)break;h++,(h>1||d==0||S.content.size)&&(m=C,p.push(LC(S.mark(b.allowedMarks(S.marks)),h==1?d:0,h==u.childCount?v:-1)))}let w=h==u.childCount;w||(v=-1),this.placed=yc(this.placed,t,ne.from(p)),this.frontier[t].match=m,w&&v<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,C=u;S<v;S++){let N=C.lastChild;this.frontier.push({type:N.type,match:N.contentMatchAt(N.childCount)}),C=N.content}this.unplaced=w?e==0?be.empty:new be(gc(l.content,e-1,1),e-1,v<0?l.openEnd:e-1):new be(gc(l.content,e,h),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!sg(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:s}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),l=sg(e,t,s,r,o);if(l){for(let u=t-1;u>=0;u--){let{match:d,type:h}=this.frontier[u],p=sg(e,u,h,d,!0);if(!p||p.childCount)continue e}return{depth:t,fit:l,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=yc(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let s=e.node(r),o=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,o)}return e}openFrontierNode(e,t=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=yc(this.placed,this.depth,ne.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(ne.empty,!0);t.childCount&&(this.placed=yc(this.placed,this.frontier.length,t))}}function gc(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(gc(n.firstChild.content,e-1,t)))}function yc(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(yc(n.lastChild.content,e-1,t)))}function ig(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function LC(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,LC(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(ne.empty,!0)))),n.copy(r)}function sg(n,e,t,r,s){let o=n.node(e),l=s?n.indexAfter(e):n.index(e);if(l==o.childCount&&!t.compatibleContent(o.type))return null;let u=r.fillBefore(o.content,!0,l);return u&&!d3(t,o.content,l)?u:null}function d3(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function f3(n){return n.spec.defining||n.spec.definingForContent}function h3(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let s=n.doc.resolve(e),o=n.doc.resolve(t);if(jC(s,o,r))return n.step(new wn(e,t,r));let l=zC(s,o);l[l.length-1]==0&&l.pop();let u=-(s.depth+1);l.unshift(u);for(let b=s.depth,v=s.pos-1;b>0;b--,v--){let w=s.node(b).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;l.indexOf(b)>-1?u=b:s.before(b)==v&&l.splice(1,0,-b)}let d=l.indexOf(u),h=[],p=r.openStart;for(let b=r.content,v=0;;v++){let w=b.firstChild;if(h.push(w),v==r.openStart)break;b=w.content}for(let b=p-1;b>=0;b--){let v=h[b],w=f3(v.type);if(w&&!v.sameMarkup(s.node(Math.abs(u)-1)))p=b;else if(w||!v.type.isTextblock)break}for(let b=r.openStart;b>=0;b--){let v=(b+p+1)%(r.openStart+1),w=h[v];if(w)for(let S=0;S<l.length;S++){let C=l[(S+d)%l.length],N=!0;C<0&&(N=!1,C=-C);let L=s.node(C-1),_=s.index(C-1);if(L.canReplaceWith(_,_,w.type,w.marks))return n.replace(s.before(C),N?o.after(C):t,new be(BC(r.content,0,r.openStart,v),v,r.openEnd))}}let m=n.steps.length;for(let b=l.length-1;b>=0&&(n.replace(e,t,r),!(n.steps.length>m));b--){let v=l[b];v<0||(e=s.before(v),t=o.after(v))}}function BC(n,e,t,r,s){if(e<t){let o=n.firstChild;n=n.replaceChild(0,o.copy(BC(o.content,e+1,t,r,o)))}if(e>r){let o=s.contentMatchAt(0),l=o.fillBefore(n).append(n);n=l.append(o.matchFragment(l).fillBefore(ne.empty,!0))}return n}function p3(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let s=c3(n.doc,e,r.type);s!=null&&(e=t=s)}n.replaceRange(e,t,new be(ne.from(r),0,0))}function m3(n,e,t){let r=n.doc.resolve(e),s=n.doc.resolve(t),o=zC(r,s);for(let l=0;l<o.length;l++){let u=o[l],d=l==o.length-1;if(d&&u==0||r.node(u).type.contentMatch.validEnd)return n.delete(r.start(u),s.end(u));if(u>0&&(d||r.node(u-1).canReplace(r.index(u-1),s.indexAfter(u-1))))return n.delete(r.before(u),s.after(u))}for(let l=1;l<=r.depth&&l<=s.depth;l++)if(e-r.start(l)==r.depth-l&&t>r.end(l)&&s.end(l)-t!=s.depth-l&&r.start(l-1)==s.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),s.index(l-1)))return n.delete(r.before(l),t);n.delete(e,t)}function zC(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let s=r;s>=0;s--){let o=n.start(s);if(o<n.pos-(n.depth-s)||e.end(s)>e.pos+(e.depth-s)||n.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(o==e.start(s)||s==n.depth&&s==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==o-1)&&t.push(s)}return t}class Xa extends Gn{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return yn.fail("No node at attribute step's position");let r=Object.create(null);for(let o in t.attrs)r[o]=t.attrs[o];r[this.attr]=this.value;let s=t.type.create(r,null,t.marks);return yn.fromReplace(e,this.pos,this.pos+1,new be(ne.from(s),0,t.isLeaf?0:1))}getMap(){return kr.empty}invert(e){return new Xa(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Xa(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Xa(t.pos,t.attr,t.value)}}Gn.jsonID("attr",Xa);class Kc extends Gn{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return yn.ok(r)}getMap(){return kr.empty}invert(e){return new Kc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Kc(t.attr,t.value)}}Gn.jsonID("docAttr",Kc);let el=class extends Error{};el=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};el.prototype=Object.create(Error.prototype);el.prototype.constructor=el;el.prototype.name="TransformError";class K0{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Gc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new el(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=be.empty){let s=xh(this.doc,e,t,r);return s&&this.step(s),this}replaceWith(e,t,r){return this.replace(e,t,new be(ne.from(r),0,0))}delete(e,t){return this.replace(e,t,be.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return h3(this,e,t,r),this}replaceRangeWith(e,t,r){return p3(this,e,t,r),this}deleteRange(e,t){return m3(this,e,t),this}lift(e,t){return ZD(this,e,t),this}join(e,t=1){return l3(this,e,t),this}wrap(e,t){return n3(this,e,t),this}setBlockType(e,t=e,r,s=null){return r3(this,e,t,r,s),this}setNodeMarkup(e,t,r=null,s){return s3(this,e,t,r,s),this}setNodeAttribute(e,t,r){return this.step(new Xa(e,t,r)),this}setDocAttribute(e,t){return this.step(new Kc(e,t)),this}addNodeMark(e,t){return this.step(new Qs(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof kt)t.isInSet(r.marks)&&this.step(new Qo(e,t));else{let s=r.marks,o,l=[];for(;o=t.isInSet(s);)l.push(new Qo(e,o)),s=o.removeFromSet(s);for(let u=l.length-1;u>=0;u--)this.step(l[u])}return this}split(e,t=1,r){return o3(this,e,t,r),this}addMark(e,t,r){return YD(this,e,t,r),this}removeMark(e,t,r){return XD(this,e,t,r),this}clearIncompatible(e,t,r){return F0(this,e,t,r),this}}const og=Object.create(null);class Ue{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new IC(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=be.empty){let r=t.content.lastChild,s=null;for(let u=0;u<t.openEnd;u++)s=r,r=r.lastChild;let o=e.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:d,$to:h}=l[u],p=e.mapping.slice(o);e.replaceRange(p.map(d.pos),p.map(h.pos),u?be.empty:t),u==0&&pw(e,o,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:l,$to:u}=s[o],d=e.mapping.slice(r),h=d.map(l.pos),p=d.map(u.pos);o?e.deleteRange(h,p):(e.replaceRangeWith(h,p,t),pw(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let s=e.parent.inlineContent?new Be(e):Va(e.node(0),e.parent,e.pos,e.index(),t,r);if(s)return s;for(let o=e.depth-1;o>=0;o--){let l=t<0?Va(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):Va(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(l)return l}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Or(e.node(0))}static atStart(e){return Va(e,e,0,0,1)||new Or(e)}static atEnd(e){return Va(e,e,e.content.size,e.childCount,-1)||new Or(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=og[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in og)throw new RangeError("Duplicate use of selection JSON ID "+e);return og[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Be.between(this.$anchor,this.$head).getBookmark()}}Ue.prototype.visible=!0;class IC{constructor(e,t){this.$from=e,this.$to=t}}let fw=!1;function hw(n){!fw&&!n.parent.inlineContent&&(fw=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Be extends Ue{constructor(e,t=e){hw(e),hw(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Ue.near(r);let s=e.resolve(t.map(this.anchor));return new Be(s.parent.inlineContent?s:r,r)}replace(e,t=be.empty){if(super.replace(e,t),t==be.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new wh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Be(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let s=e.resolve(t);return new this(s,r==t?s:e.resolve(r))}static between(e,t,r){let s=e.pos-t.pos;if((!r||s)&&(r=s>=0?1:-1),!t.parent.inlineContent){let o=Ue.findFrom(t,r,!0)||Ue.findFrom(t,-r,!0);if(o)t=o.$head;else return Ue.near(t,r)}return e.parent.inlineContent||(s==0?e=t:(e=(Ue.findFrom(e,-r,!0)||Ue.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new Be(e,t)}}Ue.jsonID("text",Be);class wh{constructor(e,t){this.anchor=e,this.head=t}map(e){return new wh(e.map(this.anchor),e.map(this.head))}resolve(e){return Be.between(e.resolve(this.anchor),e.resolve(this.head))}}class _e extends Ue{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:s}=t.mapResult(this.anchor),o=e.resolve(s);return r?Ue.near(o):new _e(o)}content(){return new be(ne.from(this.node),0,0)}eq(e){return e instanceof _e&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new W0(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new _e(e.resolve(t.anchor))}static create(e,t){return new _e(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}_e.prototype.visible=!1;Ue.jsonID("node",_e);class W0{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new wh(r,r):new W0(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&_e.isSelectable(r)?new _e(t):Ue.near(t)}}class Or extends Ue{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=be.empty){if(t==be.empty){e.delete(0,e.doc.content.size);let r=Ue.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Or(e)}map(e){return new Or(e)}eq(e){return e instanceof Or}getBookmark(){return g3}}Ue.jsonID("all",Or);const g3={map(){return this},resolve(n){return new Or(n)}};function Va(n,e,t,r,s,o=!1){if(e.inlineContent)return Be.create(n,t);for(let l=r-(s>0?0:1);s>0?l<e.childCount:l>=0;l+=s){let u=e.child(l);if(u.isAtom){if(!o&&_e.isSelectable(u))return _e.create(n,t-(s<0?u.nodeSize:0))}else{let d=Va(n,u,t+s,s<0?u.childCount:0,s,o);if(d)return d}t+=u.nodeSize*s}return null}function pw(n,e,t){let r=n.steps.length-1;if(r<e)return;let s=n.steps[r];if(!(s instanceof wn||s instanceof Cn))return;let o=n.mapping.maps[r],l;o.forEach((u,d,h,p)=>{l==null&&(l=p)}),n.setSelection(Ue.near(n.doc.resolve(l),t))}const mw=1,$d=2,gw=4;class y3 extends K0{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|mw)&~$d,this.storedMarks=null,this}get selectionSet(){return(this.updated&mw)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=$d,this}ensureMarks(e){return kt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&$d)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~$d,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||kt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),!e)return this.deleteRange(t,r);let o=this.storedMarks;if(!o){let l=this.doc.resolve(t);o=r==t?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,s.text(e,o)),!this.selection.empty&&this.selection.to==t+e.length&&this.setSelection(Ue.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=gw,this}get scrolledIntoView(){return(this.updated&gw)>0}}function yw(n,e){return!e||!n?n:n.bind(e)}class bc{constructor(e,t,r){this.name=e,this.init=yw(t.init,r),this.apply=yw(t.apply,r)}}const b3=[new bc("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new bc("selection",{init(n,e){return n.selection||Ue.atStart(e.doc)},apply(n){return n.selection}}),new bc("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new bc("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class ag{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=b3.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new bc(r.key,r.spec.state,r))})}}class Qa{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),s=null;for(;;){let o=!1;for(let l=0;l<this.config.plugins.length;l++){let u=this.config.plugins[l];if(u.spec.appendTransaction){let d=s?s[l].n:0,h=s?s[l].state:this,p=d<t.length&&u.spec.appendTransaction.call(u,d?t.slice(d):t,h,r);if(p&&r.filterTransaction(p,l)){if(p.setMeta("appendedTransaction",e),!s){s=[];for(let m=0;m<this.config.plugins.length;m++)s.push(m<l?{state:r,n:t.length}:{state:this,n:0})}t.push(p),r=r.applyInner(p),o=!0}s&&(s[l]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Qa(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let o=r[s];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new y3(this)}static create(e){let t=new ag(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Qa(t);for(let s=0;s<t.fields.length;s++)r[t.fields[s].name]=t.fields[s].init(e,r);return r}reconfigure(e){let t=new ag(this.schema,e.plugins),r=t.fields,s=new Qa(t);for(let o=0;o<r.length;o++){let l=r[o].name;s[l]=this.hasOwnProperty(l)?this[l]:r[o].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],o=s.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new ag(e.schema,e.plugins),o=new Qa(s);return s.fields.forEach(l=>{if(l.name=="doc")o.doc=Js.fromJSON(e.schema,t.doc);else if(l.name=="selection")o.selection=Ue.fromJSON(o.doc,t.selection);else if(l.name=="storedMarks")t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let d=r[u],h=d.spec.state;if(d.key==l.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){o[l.name]=h.fromJSON.call(d,e,t[u],o);return}}o[l.name]=l.init(e,o)}}),o}}function HC(n,e,t){for(let r in n){let s=n[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=HC(s,e,{})),t[r]=s}return t}class Pt{constructor(e){this.spec=e,this.props={},e.props&&HC(e.props,this,this.props),this.key=e.key?e.key.key:UC("plugin")}getState(e){return e[this.key]}}const lg=Object.create(null);function UC(n){return n in lg?n+"$"+ ++lg[n]:(lg[n]=0,n+"$")}class cn{constructor(e="key"){this.key=UC(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const zn=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},tl=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Zg=null;const ts=function(n,e,t){let r=Zg||(Zg=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},v3=function(){Zg=null},Yo=function(n,e,t,r){return t&&(bw(n,e,t,r,-1)||bw(n,e,t,r,1))},x3=/^(img|br|input|textarea|hr)$/i;function bw(n,e,t,r,s){for(var o;;){if(n==t&&e==r)return!0;if(e==(s<0?0:Gr(n))){let l=n.parentNode;if(!l||l.nodeType!=1||uu(n)||x3.test(n.nodeName)||n.contentEditable=="false")return!1;e=zn(n)+(s<0?0:1),n=l}else if(n.nodeType==1){let l=n.childNodes[e+(s<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((o=l.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=s;else return!1;else n=l,e=s<0?Gr(n):0}else return!1}}function Gr(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function w3(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Gr(n)}else if(n.parentNode&&!uu(n))e=zn(n),n=n.parentNode;else return null}}function S3(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!uu(n))e=zn(n)+1,n=n.parentNode;else return null}}function E3(n,e,t){for(let r=e==0,s=e==Gr(n);r||s;){if(n==t)return!0;let o=zn(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,s=s&&o==Gr(n)}}function uu(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Sh=function(n){return n.focusNode&&Yo(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Do(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function C3(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function T3(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Gr(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Gr(r.startContainer),r.startOffset)}}}const Ei=typeof navigator<"u"?navigator:null,vw=typeof document<"u"?document:null,so=Ei&&Ei.userAgent||"",e0=/Edge\/(\d+)/.exec(so),$C=/MSIE \d/.exec(so),t0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(so),hr=!!($C||t0||e0),eo=$C?document.documentMode:t0?+t0[1]:e0?+e0[1]:0,Wr=!hr&&/gecko\/(\d+)/i.test(so);Wr&&+(/Firefox\/(\d+)/.exec(so)||[0,0])[1];const n0=!hr&&/Chrome\/(\d+)/.exec(so),Vn=!!n0,qC=n0?+n0[1]:0,Jn=!hr&&!!Ei&&/Apple Computer/.test(Ei.vendor),nl=Jn&&(/Mobile\/\w+/.test(so)||!!Ei&&Ei.maxTouchPoints>2),Fr=nl||(Ei?/Mac/.test(Ei.platform):!1),N3=Ei?/Win/.test(Ei.platform):!1,ns=/Android \d/.test(so),du=!!vw&&"webkitFontSmoothing"in vw.documentElement.style,A3=du?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function k3(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Yi(n,e){return typeof n=="number"?n:n[e]}function M3(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function xw(n,e,t){let r=n.someProp("scrollThreshold")||0,s=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let l=t||n.dom;l;){if(l.nodeType!=1){l=tl(l);continue}let u=l,d=u==o.body,h=d?k3(o):M3(u),p=0,m=0;if(e.top<h.top+Yi(r,"top")?m=-(h.top-e.top+Yi(s,"top")):e.bottom>h.bottom-Yi(r,"bottom")&&(m=e.bottom-e.top>h.bottom-h.top?e.top+Yi(s,"top")-h.top:e.bottom-h.bottom+Yi(s,"bottom")),e.left<h.left+Yi(r,"left")?p=-(h.left-e.left+Yi(s,"left")):e.right>h.right-Yi(r,"right")&&(p=e.right-h.right+Yi(s,"right")),p||m)if(d)o.defaultView.scrollBy(p,m);else{let v=u.scrollLeft,w=u.scrollTop;m&&(u.scrollTop+=m),p&&(u.scrollLeft+=p);let S=u.scrollLeft-v,C=u.scrollTop-w;e={left:e.left-S,top:e.top-C,right:e.right-S,bottom:e.bottom-C}}let b=d?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(b))break;l=b=="absolute"?l.offsetParent:tl(l)}}function O3(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,s;for(let o=(e.left+e.right)/2,l=t+1;l<Math.min(innerHeight,e.bottom);l+=5){let u=n.root.elementFromPoint(o,l);if(!u||u==n.dom||!n.dom.contains(u))continue;let d=u.getBoundingClientRect();if(d.top>=t-20){r=u,s=d.top;break}}return{refDOM:r,refTop:s,stack:PC(n.dom)}}function PC(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=tl(r));return e}function R3({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;VC(t,r==0?0:r-e)}function VC(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:s,left:o}=n[t];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let $a=null;function D3(n){if(n.setActive)return n.setActive();if($a)return n.focus($a);let e=PC(n);n.focus($a==null?{get preventScroll(){return $a={preventScroll:!0},!0}}:void 0),$a||($a=!1,VC(e,0))}function FC(n,e){let t,r=2e8,s,o=0,l=e.top,u=e.top,d,h;for(let p=n.firstChild,m=0;p;p=p.nextSibling,m++){let b;if(p.nodeType==1)b=p.getClientRects();else if(p.nodeType==3)b=ts(p).getClientRects();else continue;for(let v=0;v<b.length;v++){let w=b[v];if(w.top<=l&&w.bottom>=u){l=Math.max(w.bottom,l),u=Math.min(w.top,u);let S=w.left>e.left?w.left-e.left:w.right<e.left?e.left-w.right:0;if(S<r){t=p,r=S,s=S&&t.nodeType==3?{left:w.right<e.left?w.right:w.left,top:e.top}:e,p.nodeType==1&&S&&(o=m+(e.left>=(w.left+w.right)/2?1:0));continue}}else w.top>e.top&&!d&&w.left<=e.left&&w.right>=e.left&&(d=p,h={left:Math.max(w.left,Math.min(w.right,e.left)),top:w.top});!t&&(e.left>=w.right&&e.top>=w.top||e.left>=w.left&&e.top>=w.bottom)&&(o=m+1)}}return!t&&d&&(t=d,s=h,r=0),t&&t.nodeType==3?_3(t,s):!t||r&&t.nodeType==1?{node:n,offset:o}:FC(t,s)}function _3(n,e){let t=n.nodeValue.length,r=document.createRange();for(let s=0;s<t;s++){r.setEnd(n,s+1),r.setStart(n,s);let o=Us(r,1);if(o.top!=o.bottom&&Q0(e,o))return{node:n,offset:s+(e.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function Q0(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function j3(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function L3(n,e,t){let{node:r,offset:s}=FC(e,t),o=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();o=l.left!=l.right&&t.left>(l.left+l.right)/2?1:-1}return n.docView.posFromDOM(r,s,o)}function B3(n,e,t,r){let s=-1;for(let o=e,l=!1;o!=n.dom;){let u=n.docView.nearestDesc(o,!0),d;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((d=u.dom.getBoundingClientRect()).width||d.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!l&&d.left>r.left||d.top>r.top?s=u.posBefore:(!l&&d.right<r.left||d.bottom<r.top)&&(s=u.posAfter),l=!0),!u.contentDOM&&s<0&&!u.node.isText))return(u.node.isBlock?r.top<(d.top+d.bottom)/2:r.left<(d.left+d.right)/2)?u.posBefore:u.posAfter;o=u.dom.parentNode}return s>-1?s:n.docView.posFromDOM(e,t,-1)}function GC(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),o=s;;){let l=n.childNodes[o];if(l.nodeType==1){let u=l.getClientRects();for(let d=0;d<u.length;d++){let h=u[d];if(Q0(e,h))return GC(l,e,h)}}if((o=(o+1)%r)==s)break}return n}function z3(n,e){let t=n.dom.ownerDocument,r,s=0,o=T3(t,e.left,e.top);o&&({node:r,offset:s}=o);let l=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),u;if(!l||!n.dom.contains(l.nodeType!=1?l.parentNode:l)){let h=n.dom.getBoundingClientRect();if(!Q0(e,h)||(l=GC(n.dom,e,h),!l))return null}if(Jn)for(let h=l;r&&h;h=tl(h))h.draggable&&(r=void 0);if(l=j3(l,e),r){if(Wr&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let p=r.childNodes[s],m;p.nodeName=="IMG"&&(m=p.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&s++}let h;du&&s&&r.nodeType==1&&(h=r.childNodes[s-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&s--,r==n.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=n.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(u=B3(n,r,s,e))}u==null&&(u=L3(n,l,e));let d=n.docView.nearestDesc(l,!0);return{pos:u,inside:d?d.posAtStart-d.border:-1}}function ww(n){return n.top<n.bottom||n.left<n.right}function Us(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(ww(r))return r}return Array.prototype.find.call(t,ww)||n.getBoundingClientRect()}const I3=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function KC(n,e,t){let{node:r,offset:s,atom:o}=n.docView.domFromPos(e,t<0?-1:1),l=du||Wr;if(r.nodeType==3)if(l&&(I3.test(r.nodeValue)||(t<0?!s:s==r.nodeValue.length))){let d=Us(ts(r,s,s),t);if(Wr&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let h=Us(ts(r,s-1,s-1),-1);if(h.top==d.top){let p=Us(ts(r,s,s+1),-1);if(p.top!=d.top)return fc(p,p.left<h.left)}}return d}else{let d=s,h=s,p=t<0?1:-1;return t<0&&!s?(h++,p=-1):t>=0&&s==r.nodeValue.length?(d--,p=1):t<0?d--:h++,fc(Us(ts(r,d,h),p),p<0)}if(!n.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&s&&(t<0||s==Gr(r))){let d=r.childNodes[s-1];if(d.nodeType==1)return cg(d.getBoundingClientRect(),!1)}if(o==null&&s<Gr(r)){let d=r.childNodes[s];if(d.nodeType==1)return cg(d.getBoundingClientRect(),!0)}return cg(r.getBoundingClientRect(),t>=0)}if(o==null&&s&&(t<0||s==Gr(r))){let d=r.childNodes[s-1],h=d.nodeType==3?ts(d,Gr(d)-(l?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(h)return fc(Us(h,1),!1)}if(o==null&&s<Gr(r)){let d=r.childNodes[s];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let h=d?d.nodeType==3?ts(d,0,l?0:1):d.nodeType==1?d:null:null;if(h)return fc(Us(h,-1),!0)}return fc(Us(r.nodeType==3?ts(r):r,-t),t>=0)}function fc(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function cg(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function WC(n,e,t){let r=n.state,s=n.root.activeElement;r!=e&&n.updateState(e),s!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),s!=n.dom&&s&&s.focus()}}function H3(n,e,t){let r=e.selection,s=t=="up"?r.$from:r.$to;return WC(n,e,()=>{let{node:o}=n.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let u=n.docView.nearestDesc(o,!0);if(!u)break;if(u.node.isBlock){o=u.contentDOM||u.dom;break}o=u.dom.parentNode}let l=KC(n,s.pos,1);for(let u=o.firstChild;u;u=u.nextSibling){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=ts(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.bottom>p.top+1&&(t=="up"?l.top-p.top>(p.bottom-l.top)*2:p.bottom-l.bottom>(l.bottom-p.top)*2))return!1}}return!0})}const U3=/[\u0590-\u08ac]/;function $3(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,o=!s,l=s==r.parent.content.size,u=n.domSelection();return u?!U3.test(r.parent.textContent)||!u.modify?t=="left"||t=="backward"?o:l:WC(n,e,()=>{let{focusNode:d,focusOffset:h,anchorNode:p,anchorOffset:m}=n.domSelectionRange(),b=u.caretBidiLevel;u.modify("move",t,"character");let v=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:w,focusOffset:S}=n.domSelectionRange(),C=w&&!v.contains(w.nodeType==1?w:w.parentNode)||d==w&&h==S;try{u.collapse(p,m),d&&(d!=p||h!=m)&&u.extend&&u.extend(d,h)}catch{}return b!=null&&(u.caretBidiLevel=b),C}):r.pos==r.start()||r.pos==r.end()}let Sw=null,Ew=null,Cw=!1;function q3(n,e,t){return Sw==e&&Ew==t?Cw:(Sw=e,Ew=t,Cw=t=="up"||t=="down"?H3(n,e,t):$3(n,e,t))}const Qr=0,Tw=1,Bo=2,Ci=3;class fu{constructor(e,t,r,s){this.parent=e,this.children=t,this.dom=r,this.contentDOM=s,this.dirty=Qr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let s=this.children[t];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,l;if(e==this.contentDOM)o=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(l)+l.size:this.posAtStart}else{let o,l;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((l=o.pmViewDesc)&&l.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(l):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>zn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!1;break}if(o.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!0;break}if(o.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,s=e;s;s=s.parentNode){let o=this.getDesc(s),l;if(o&&(!t||o.node))if(r&&(l=o.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return o}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let s=e;s;s=s.parentNode){let o=this.getDesc(s);if(o)return o.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let s=this.children[t],o=r+s.size;if(r==e&&o!=r){for(;!s.border&&s.children.length;)for(let l=0;l<s.children.length;l++){let u=s.children[l];if(u.size){s=u;break}}return s}if(e<o)return s.descAt(e-r-s.border);r=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let o=0;r<this.children.length;r++){let l=this.children[r],u=o+l.size;if(u>e||l instanceof YC){s=e-o;break}o=u}if(s)return this.children[r].domFromPos(s-this.children[r].border,t);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof QC&&o.side>=0;r--);if(t<=0){let o,l=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,l=!1);return o&&t&&l&&!o.border&&!o.domAtom?o.domFromPos(o.size,t):{node:this.contentDOM,offset:o?zn(o.dom)+1:0}}else{let o,l=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,l=!1);return o&&l&&!o.border&&!o.domAtom?o.domFromPos(0,t):{node:this.contentDOM,offset:o?zn(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,o=-1;for(let l=r,u=0;;u++){let d=this.children[u],h=l+d.size;if(s==-1&&e<=h){let p=l+d.border;if(e>=p&&t<=h-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,t,p);e=l;for(let m=u;m>0;m--){let b=this.children[m-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){s=zn(b.dom)+1;break}e-=b.size}s==-1&&(s=0)}if(s>-1&&(h>t||u==this.children.length-1)){t=h;for(let p=u+1;p<this.children.length;p++){let m=this.children[p];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){o=zn(m.dom);break}t+=m.size}o==-1&&(o=this.contentDOM.childNodes.length);break}l=h}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,s=!1){let o=Math.min(e,t),l=Math.max(e,t);for(let v=0,w=0;v<this.children.length;v++){let S=this.children[v],C=w+S.size;if(o>w&&l<C)return S.setSelection(e-w-S.border,t-w-S.border,r,s);w=C}let u=this.domFromPos(e,e?-1:1),d=t==e?u:this.domFromPos(t,t?-1:1),h=r.root.getSelection(),p=r.domSelectionRange(),m=!1;if((Wr||Jn)&&e==t){let{node:v,offset:w}=u;if(v.nodeType==3){if(m=!!(w&&v.nodeValue[w-1]==`
`),m&&w==v.nodeValue.length)for(let S=v,C;S;S=S.parentNode){if(C=S.nextSibling){C.nodeName=="BR"&&(u=d={node:C.parentNode,offset:zn(C)+1});break}let N=S.pmViewDesc;if(N&&N.node&&N.node.isBlock)break}}else{let S=v.childNodes[w-1];m=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(Wr&&p.focusNode&&p.focusNode!=d.node&&p.focusNode.nodeType==1){let v=p.focusNode.childNodes[p.focusOffset];v&&v.contentEditable=="false"&&(s=!0)}if(!(s||m&&Jn)&&Yo(u.node,u.offset,p.anchorNode,p.anchorOffset)&&Yo(d.node,d.offset,p.focusNode,p.focusOffset))return;let b=!1;if((h.extend||e==t)&&!(m&&Wr)){h.collapse(u.node,u.offset);try{e!=t&&h.extend(d.node,d.offset),b=!0}catch{}}if(!b){if(e>t){let w=u;u=d,d=w}let v=document.createRange();v.setEnd(d.node,d.offset),v.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,s=0;s<this.children.length;s++){let o=this.children[s],l=r+o.size;if(r==l?e<=l&&t>=r:e<l&&t>r){let u=r+o.border,d=l-o.border;if(e>=u&&t<=d){this.dirty=e==r||t==l?Bo:Tw,e==u&&t==d&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Ci:o.markDirty(e-u,t-u);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Bo:Ci}r=l}this.dirty=Bo}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Bo:Tw;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class QC extends fu{constructor(e,t,r,s){let o,l=t.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!o)return s;if(o.parent)return o.parent.posBeforeChild(o)})),!t.type.spec.raw){if(l.nodeType!=1){let u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==Qr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class P3 extends fu{constructor(e,t,r,s){super(e,[],t,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Xo extends fu{constructor(e,t,r,s,o){super(e,[],r,s),this.mark=t,this.spec=o}static create(e,t,r,s){let o=s.nodeViews[t.type.name],l=o&&o(t,s,r);return(!l||!l.dom)&&(l=na.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new Xo(e,t,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&Ci||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ci&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Qr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Qr}}slice(e,t,r){let s=Xo.create(this.parent,this.mark,!0,r),o=this.children,l=this.size;t<l&&(o=i0(o,t,l,r)),e>0&&(o=i0(o,0,e,r));for(let u=0;u<o.length;u++)o[u].parent=s;return s.children=o,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class to extends fu{constructor(e,t,r,s,o,l,u,d,h){super(e,[],o,l),this.node=t,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=u}static create(e,t,r,s,o,l){let u=o.nodeViews[t.type.name],d,h=u&&u(t,o,()=>{if(!d)return l;if(d.parent)return d.parent.posBeforeChild(d)},r,s),p=h&&h.dom,m=h&&h.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:m}=na.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!m&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let b=p;return p=ZC(p,r,t),h?d=new V3(e,t,r,s,p,m||null,b,h,o,l+1):t.isText?new Eh(e,t,r,s,p,b,o):new to(e,t,r,s,p,m||null,b,o,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ne.empty)}return e}matchesNode(e,t,r){return this.dirty==Qr&&e.eq(this.node)&&Af(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,s=t,o=e.composing?this.localCompositionInfo(e,t):null,l=o&&o.pos>-1?o:null,u=o&&o.pos<0,d=new G3(this,l&&l.node,e);Q3(this.node,this.innerDeco,(h,p,m)=>{h.spec.marks?d.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!m&&d.syncToMarks(p==this.node.childCount?kt.none:this.node.child(p).marks,r,e),d.placeWidget(h,e,s)},(h,p,m,b)=>{d.syncToMarks(h.marks,r,e);let v;d.findNodeMatch(h,p,m,b)||u&&e.state.selection.from>s&&e.state.selection.to<s+h.nodeSize&&(v=d.findIndexWithChild(o.node))>-1&&d.updateNodeAt(h,p,m,v,e)||d.updateNextNode(h,p,m,e,b,s)||d.addNode(h,p,m,e,s),s+=h.nodeSize}),d.syncToMarks([],r,e),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==Bo)&&(l&&this.protectLocalComposition(e,l),XC(this.contentDOM,this.children,e),nl&&Y3(this.dom))}localCompositionInfo(e,t){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof Be)||r<t||s>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let l=o.nodeValue,u=X3(this.node.content,l,r-t,s-t);return u<0?null:{node:o,pos:u,text:l}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:s}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let l=new P3(this,o,t,s);e.input.compositionNodes.push(l),this.children=i0(this.children,r,r+s.length,e,l)}update(e,t,r,s){return this.dirty==Ci||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,s),!0)}updateInner(e,t,r,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Qr}updateOuterDeco(e){if(Af(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=JC(this.dom,this.nodeDOM,r0(this.outerDeco,this.node,t),r0(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Nw(n,e,t,r,s){ZC(r,e,n);let o=new to(void 0,n,e,t,r,r,r,s,0);return o.contentDOM&&o.updateChildren(s,0),o}class Eh extends to{constructor(e,t,r,s,o,l,u){super(e,t,r,s,o,null,l,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,s){return this.dirty==Ci||this.dirty!=Qr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Qr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Qr,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let s=this.node.cut(e,t),o=document.createTextNode(s.text);return new Eh(this.parent,s,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Ci)}get domAtom(){return!1}isText(e){return this.node.text==e}}class YC extends fu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Qr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class V3 extends to{constructor(e,t,r,s,o,l,u,d,h,p){super(e,t,r,s,o,l,u,h,p),this.spec=d}update(e,t,r,s){if(this.dirty==Ci)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,r);return o&&this.updateInner(e,t,r,s),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,s){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function XC(n,e,t){let r=n.firstChild,s=!1;for(let o=0;o<e.length;o++){let l=e[o],u=l.dom;if(u.parentNode==n){for(;u!=r;)r=Aw(r),s=!0;r=r.nextSibling}else s=!0,n.insertBefore(u,r);if(l instanceof Xo){let d=r?r.previousSibling:n.lastChild;XC(l.contentDOM,l.children,t),r=d?d.nextSibling:n.firstChild}}for(;r;)r=Aw(r),s=!0;s&&t.trackWrites==n&&(t.trackWrites=null)}const Nc=function(n){n&&(this.nodeName=n)};Nc.prototype=Object.create(null);const zo=[new Nc];function r0(n,e,t){if(n.length==0)return zo;let r=t?zo[0]:new Nc,s=[r];for(let o=0;o<n.length;o++){let l=n[o].type.attrs;if(l){l.nodeName&&s.push(r=new Nc(l.nodeName));for(let u in l){let d=l[u];d!=null&&(t&&s.length==1&&s.push(r=new Nc(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+d:u=="style"?r.style=(r.style?r.style+";":"")+d:u!="nodeName"&&(r[u]=d))}}}return s}function JC(n,e,t,r){if(t==zo&&r==zo)return e;let s=e;for(let o=0;o<r.length;o++){let l=r[o],u=t[o];if(o){let d;u&&u.nodeName==l.nodeName&&s!=n&&(d=s.parentNode)&&d.nodeName.toLowerCase()==l.nodeName||(d=document.createElement(l.nodeName),d.pmIsDeco=!0,d.appendChild(s),u=zo[0]),s=d}F3(s,u||zo[0],l)}return s}function F3(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)s.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<s.length;o++)r.indexOf(s[o])==-1&&n.classList.add(s[o]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)n.style.removeProperty(s[1])}t.style&&(n.style.cssText+=t.style)}}function ZC(n,e,t){return JC(n,n,zo,r0(e,t,n.nodeType!=1))}function Af(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Aw(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class G3{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=K3(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let s=0,o=this.stack.length>>1,l=Math.min(o,e.length);for(;s<l&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=Qr,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let d=this.index;d<Math.min(this.index+3,this.top.children.length);d++){let h=this.top.children[d];if(h.matchesMark(e[o])&&!this.isLocked(h.dom)){u=d;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let d=Xo.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,r,s){let o=-1,l;if(s>=this.preMatch.index&&(l=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&l.matchesNode(e,t,r))o=this.top.children.indexOf(l,this.index);else for(let u=this.index,d=Math.min(this.top.children.length,u+5);u<d;u++){let h=this.top.children[u];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){o=u;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,r,s,o){let l=this.top.children[s];return l.dirty==Ci&&l.dom==l.contentDOM&&(l.dirty=Bo),l.update(e,t,r,o)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=t}}updateNextNode(e,t,r,s,o,l){for(let u=this.index;u<this.top.children.length;u++){let d=this.top.children[u];if(d instanceof to){let h=this.preMatch.matched.get(d);if(h!=null&&h!=o)return!1;let p=d.dom,m,b=this.isLocked(p)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=Ci&&Af(t,d.outerDeco));if(!b&&d.update(e,t,r,s))return this.destroyBetween(this.index,u),d.dom!=p&&(this.changed=!0),this.index++,!0;if(!b&&(m=this.recreateWrapper(d,e,t,r,s,l)))return this.destroyBetween(this.index,u),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=Bo,m.updateChildren(s,l+1),m.dirty=Qr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,s,o,l){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Af(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let u=to.create(this.top,t,r,s,o,l);if(u.contentDOM){u.children=e.children,e.children=[];for(let d of u.children)d.parent=u}return e.destroy(),u}addNode(e,t,r,s,o){let l=to.create(this.top,e,t,r,s,o);l.contentDOM&&l.updateChildren(s,o+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,t,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let o=new QC(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Xo;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Eh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Jn||Vn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new YC(this.top,[],r,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function K3(n,e){let t=e,r=t.children.length,s=n.childCount,o=new Map,l=[];e:for(;s>0;){let u;for(;;)if(r){let h=t.children[r-1];if(h instanceof Xo)t=h,r=h.children.length;else{u=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let d=u.node;if(d){if(d!=n.child(s-1))break;--s,o.set(u,s),l.push(u)}}return{index:s,matched:o,matches:l.reverse()}}function W3(n,e){return n.type.side-e.type.side}function Q3(n,e,t,r){let s=e.locals(n),o=0;if(s.length==0){for(let h=0;h<n.childCount;h++){let p=n.child(h);r(p,s,e.forChild(o,p),h),o+=p.nodeSize}return}let l=0,u=[],d=null;for(let h=0;;){let p,m;for(;l<s.length&&s[l].to==o;){let C=s[l++];C.widget&&(p?(m||(m=[p])).push(C):p=C)}if(p)if(m){m.sort(W3);for(let C=0;C<m.length;C++)t(m[C],h,!!d)}else t(p,h,!!d);let b,v;if(d)v=-1,b=d,d=null;else if(h<n.childCount)v=h,b=n.child(h++);else break;for(let C=0;C<u.length;C++)u[C].to<=o&&u.splice(C--,1);for(;l<s.length&&s[l].from<=o&&s[l].to>o;)u.push(s[l++]);let w=o+b.nodeSize;if(b.isText){let C=w;l<s.length&&s[l].from<C&&(C=s[l].from);for(let N=0;N<u.length;N++)u[N].to<C&&(C=u[N].to);C<w&&(d=b.cut(C-o),b=b.cut(0,C-o),w=C,v=-1)}else for(;l<s.length&&s[l].to<w;)l++;let S=b.isInline&&!b.isLeaf?u.filter(C=>!C.inline):u.slice();r(b,S,e.forChild(o,b),v),o=w}}function Y3(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function X3(n,e,t,r){for(let s=0,o=0;s<n.childCount&&o<=r;){let l=n.child(s++),u=o;if(o+=l.nodeSize,!l.isText)continue;let d=l.text;for(;s<n.childCount;){let h=n.child(s++);if(o+=h.nodeSize,!h.isText)break;d+=h.text}if(o>=t){if(o>=r&&d.slice(r-e.length-u,r-u)==e)return r-e.length;let h=u<r?d.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=t)return u+h;if(t==r&&d.length>=r+e.length-u&&d.slice(r-u,r-u+e.length)==e)return r}}return-1}function i0(n,e,t,r,s){let o=[];for(let l=0,u=0;l<n.length;l++){let d=n[l],h=u,p=u+=d.size;h>=t||p<=e?o.push(d):(h<e&&o.push(d.slice(0,e-h,r)),s&&(o.push(s),s=void 0),p>t&&o.push(d.slice(t-h,d.size,r)))}return o}function Y0(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let s=n.docView.nearestDesc(t.focusNode),o=s&&s.size==0,l=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(l<0)return null;let u=r.resolve(l),d,h;if(Sh(t)){for(d=l;s&&!s.node;)s=s.parent;let m=s.node;if(s&&m.isAtom&&_e.isSelectable(m)&&s.parent&&!(m.isInline&&E3(t.focusNode,t.focusOffset,s.dom))){let b=s.posBefore;h=new _e(l==b?u:r.resolve(b))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let m=l,b=l;for(let v=0;v<t.rangeCount;v++){let w=t.getRangeAt(v);m=Math.min(m,n.docView.posFromDOM(w.startContainer,w.startOffset,1)),b=Math.max(b,n.docView.posFromDOM(w.endContainer,w.endOffset,-1))}if(m<0)return null;[d,l]=b==n.state.selection.anchor?[b,m]:[m,b],u=r.resolve(l)}else d=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(d<0)return null}let p=r.resolve(d);if(!h){let m=e=="pointer"||n.state.selection.head<u.pos&&!o?1:-1;h=X0(n,p,u,m)}return h}function e2(n){return n.editable?n.hasFocus():n2(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function as(n,e=!1){let t=n.state.selection;if(t2(n,t),!!e2(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Vn){let r=n.domSelectionRange(),s=n.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Yo(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)Z3(n);else{let{anchor:r,head:s}=t,o,l;kw&&!(t instanceof Be)&&(t.$from.parent.inlineContent||(o=Mw(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(l=Mw(n,t.to))),n.docView.setSelection(r,s,n,e),kw&&(o&&Ow(o),l&&Ow(l)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&J3(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const kw=Jn||Vn&&qC<63;function Mw(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),s=r<t.childNodes.length?t.childNodes[r]:null,o=r?t.childNodes[r-1]:null;if(Jn&&s&&s.contentEditable=="false")return ug(s);if((!s||s.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(s)return ug(s);if(o)return ug(o)}}function ug(n){return n.contentEditable="true",Jn&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Ow(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function J3(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!e2(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function Z3(n){let e=n.domSelection();if(!e)return;let t=n.cursorWrapper.dom,r=t.nodeName=="IMG";r?e.collapse(t.parentNode,zn(t)+1):e.collapse(t,0),!r&&!n.state.selection.visible&&hr&&eo<=11&&(t.disabled=!0,t.disabled=!1)}function t2(n,e){if(e instanceof _e){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Rw(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Rw(n)}function Rw(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function X0(n,e,t,r){return n.someProp("createSelectionBetween",s=>s(n,e,t))||Be.between(e,t,r)}function Dw(n){return n.editable&&!n.hasFocus()?!1:n2(n)}function n2(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function e_(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return Yo(e.node,e.offset,t.anchorNode,t.anchorOffset)}function s0(n,e){let{$anchor:t,$head:r}=n.selection,s=e>0?t.max(r):t.min(r),o=s.parent.inlineContent?s.depth?n.doc.resolve(e>0?s.after():s.before()):null:s;return o&&Ue.findFrom(o,e)}function $s(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function _w(n,e,t){let r=n.state.selection;if(r instanceof Be)if(t.indexOf("s")>-1){let{$head:s}=r,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let l=n.state.doc.resolve(s.pos+o.nodeSize*(e<0?-1:1));return $s(n,new Be(r.$anchor,l))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let s=s0(n.state,e);return s&&s instanceof _e?$s(n,s):!1}else if(!(Fr&&t.indexOf("m")>-1)){let s=r.$head,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,l;if(!o||o.isText)return!1;let u=e<0?s.pos-o.nodeSize:s.pos;return o.isAtom||(l=n.docView.descAt(u))&&!l.contentDOM?_e.isSelectable(o)?$s(n,new _e(e<0?n.state.doc.resolve(s.pos-o.nodeSize):s)):du?$s(n,new Be(n.state.doc.resolve(e<0?u:u+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof _e&&r.node.isInline)return $s(n,new Be(e>0?r.$to:r.$from));{let s=s0(n.state,e);return s?$s(n,s):!1}}}function kf(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ac(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function qa(n,e){return e<0?t_(n):n_(n)}function t_(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s,o,l=!1;for(Wr&&t.nodeType==1&&r<kf(t)&&Ac(t.childNodes[r],-1)&&(l=!0);;)if(r>0){if(t.nodeType!=1)break;{let u=t.childNodes[r-1];if(Ac(u,-1))s=t,o=--r;else if(u.nodeType==3)t=u,r=t.nodeValue.length;else break}}else{if(r2(t))break;{let u=t.previousSibling;for(;u&&Ac(u,-1);)s=t.parentNode,o=zn(u),u=u.previousSibling;if(u)t=u,r=kf(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}l?o0(n,t,r):s&&o0(n,s,o)}function n_(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s=kf(t),o,l;for(;;)if(r<s){if(t.nodeType!=1)break;let u=t.childNodes[r];if(Ac(u,1))o=t,l=++r;else break}else{if(r2(t))break;{let u=t.nextSibling;for(;u&&Ac(u,1);)o=u.parentNode,l=zn(u)+1,u=u.nextSibling;if(u)t=u,r=0,s=kf(t);else{if(t=t.parentNode,t==n.dom)break;r=s=0}}}o&&o0(n,o,l)}function r2(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function r_(n,e){for(;n&&e==n.childNodes.length&&!uu(n);)e=zn(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function i_(n,e){for(;n&&!e&&!uu(n);)e=zn(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function o0(n,e,t){if(e.nodeType!=3){let o,l;(l=r_(e,t))?(e=l,t=0):(o=i_(e,t))&&(e=o,t=o.nodeValue.length)}let r=n.domSelection();if(!r)return;if(Sh(r)){let o=document.createRange();o.setEnd(e,t),o.setStart(e,t),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&as(n)},50)}function jw(n,e){let t=n.state.doc.resolve(e);if(!(Vn||N3)&&t.parent.inlineContent){let s=n.coordsAtPos(e);if(e>t.start()){let o=n.coordsAtPos(e-1),l=(o.top+o.bottom)/2;if(l>s.top&&l<s.bottom&&Math.abs(o.left-s.left)>1)return o.left<s.left?"ltr":"rtl"}if(e<t.end()){let o=n.coordsAtPos(e+1),l=(o.top+o.bottom)/2;if(l>s.top&&l<s.bottom&&Math.abs(o.left-s.left)>1)return o.left>s.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Lw(n,e,t){let r=n.state.selection;if(r instanceof Be&&!r.empty||t.indexOf("s")>-1||Fr&&t.indexOf("m")>-1)return!1;let{$from:s,$to:o}=r;if(!s.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let l=s0(n.state,e);if(l&&l instanceof _e)return $s(n,l)}if(!s.parent.inlineContent){let l=e<0?s:o,u=r instanceof Or?Ue.near(l,e):Ue.findFrom(l,e);return u?$s(n,u):!1}return!1}function Bw(n,e){if(!(n.state.selection instanceof Be))return!0;let{$head:t,$anchor:r,empty:s}=n.state.selection;if(!t.sameParent(r))return!0;if(!s)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(o&&!o.isText){let l=n.state.tr;return e<0?l.delete(t.pos-o.nodeSize,t.pos):l.delete(t.pos,t.pos+o.nodeSize),n.dispatch(l),!0}return!1}function zw(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function s_(n){if(!Jn||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;zw(n,r,"true"),setTimeout(()=>zw(n,r,"false"),20)}return!1}function o_(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function a_(n,e){let t=e.keyCode,r=o_(e);if(t==8||Fr&&t==72&&r=="c")return Bw(n,-1)||qa(n,-1);if(t==46&&!e.shiftKey||Fr&&t==68&&r=="c")return Bw(n,1)||qa(n,1);if(t==13||t==27)return!0;if(t==37||Fr&&t==66&&r=="c"){let s=t==37?jw(n,n.state.selection.from)=="ltr"?-1:1:-1;return _w(n,s,r)||qa(n,s)}else if(t==39||Fr&&t==70&&r=="c"){let s=t==39?jw(n,n.state.selection.from)=="ltr"?1:-1:1;return _w(n,s,r)||qa(n,s)}else{if(t==38||Fr&&t==80&&r=="c")return Lw(n,-1,r)||qa(n,-1);if(t==40||Fr&&t==78&&r=="c")return s_(n)||Lw(n,1,r)||qa(n,1);if(r==(Fr?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function J0(n,e){n.someProp("transformCopied",v=>{e=v(e,n)});let t=[],{content:r,openStart:s,openEnd:o}=e;for(;s>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,o--;let v=r.firstChild;t.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),r=v.content}let l=n.someProp("clipboardSerializer")||na.fromSchema(n.state.schema),u=c2(),d=u.createElement("div");d.appendChild(l.serializeFragment(r,{document:u}));let h=d.firstChild,p,m=0;for(;h&&h.nodeType==1&&(p=l2[h.nodeName.toLowerCase()]);){for(let v=p.length-1;v>=0;v--){let w=u.createElement(p[v]);for(;d.firstChild;)w.appendChild(d.firstChild);d.appendChild(w),m++}h=d.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${s} ${o}${m?` -${m}`:""} ${JSON.stringify(t)}`);let b=n.someProp("clipboardTextSerializer",v=>v(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:b,slice:e}}function i2(n,e,t,r,s){let o=s.parent.type.spec.code,l,u;if(!t&&!e)return null;let d=!!e&&(r||o||!t);if(d){if(n.someProp("transformPastedText",b=>{e=b(e,o||r,n)}),o)return u=new be(ne.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",b=>{u=b(u,n,!0)}),u;let m=n.someProp("clipboardTextParser",b=>b(e,s,r,n));if(m)u=m;else{let b=s.marks(),{schema:v}=n.state,w=na.fromSchema(v);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(S=>{let C=l.appendChild(document.createElement("p"));S&&C.appendChild(w.serializeNode(v.text(S,b)))})}}else n.someProp("transformPastedHTML",m=>{t=m(t,n)}),l=d_(t),du&&f_(l);let h=l&&l.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let m=+p[3];m>0;m--){let b=l.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;l=b}if(u||(u=(n.someProp("clipboardParser")||n.someProp("domParser")||Zs.fromSchema(n.state.schema)).parseSlice(l,{preserveWhitespace:!!(d||p),context:s,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!l_.test(b.parentNode.nodeName)?{ignore:!0}:null}})),p)u=h_(Iw(u,+p[1],+p[2]),p[4]);else if(u=be.maxOpen(c_(u.content,s),!0),u.openStart||u.openEnd){let m=0,b=0;for(let v=u.content.firstChild;m<u.openStart&&!v.type.spec.isolating;m++,v=v.firstChild);for(let v=u.content.lastChild;b<u.openEnd&&!v.type.spec.isolating;b++,v=v.lastChild);u=Iw(u,m,b)}return n.someProp("transformPasted",m=>{u=m(u,n,d)}),u}const l_=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function c_(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),o,l=[];if(n.forEach(u=>{if(!l)return;let d=s.findWrapping(u.type),h;if(!d)return l=null;if(h=l.length&&o.length&&o2(d,o,u,l[l.length-1],0))l[l.length-1]=h;else{l.length&&(l[l.length-1]=a2(l[l.length-1],o.length));let p=s2(u,d);l.push(p),s=s.matchType(p.type),o=d}}),l)return ne.from(l)}return n}function s2(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,ne.from(n));return n}function o2(n,e,t,r,s){if(s<n.length&&s<e.length&&n[s]==e[s]){let o=o2(n,e,t,r.lastChild,s+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(s==n.length-1?t.type:n[s+1]))return r.copy(r.content.append(ne.from(s2(t,n,s+1))))}}function a2(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,a2(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(ne.empty,!0);return n.copy(t.append(r))}function a0(n,e,t,r,s,o){let l=e<0?n.firstChild:n.lastChild,u=l.content;return n.childCount>1&&(o=0),s<r-1&&(u=a0(u,e,t,r,s+1,o)),s>=t&&(u=e<0?l.contentMatchAt(0).fillBefore(u,o<=s).append(u):u.append(l.contentMatchAt(l.childCount).fillBefore(ne.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,l.copy(u))}function Iw(n,e,t){return e<n.openStart&&(n=new be(a0(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new be(a0(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const l2={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Hw=null;function c2(){return Hw||(Hw=document.implementation.createHTMLDocument("title"))}let dg=null;function u_(n){let e=window.trustedTypes;return e?(dg||(dg=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),dg.createHTML(n)):n}function d_(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=c2().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),s;if((s=r&&l2[r[1].toLowerCase()])&&(n=s.map(o=>"<"+o+">").join("")+n+s.map(o=>"</"+o+">").reverse().join("")),t.innerHTML=u_(n),s)for(let o=0;o<s.length;o++)t=t.querySelector(s[o])||t;return t}function f_(n){let e=n.querySelectorAll(Vn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function h_(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:s,openStart:o,openEnd:l}=n;for(let u=r.length-2;u>=0;u-=2){let d=t.nodes[r[u]];if(!d||d.hasRequiredAttrs())break;s=ne.from(d.create(r[u+1],s)),o++,l++}return new be(s,o,l)}const Zn={},er={},p_={touchstart:!0,touchmove:!0};class m_{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function g_(n){for(let e in Zn){let t=Zn[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{b_(n,r)&&!Z0(n,r)&&(n.editable||!(r.type in er))&&t(n,r)},p_[e]?{passive:!0}:void 0)}Jn&&n.dom.addEventListener("input",()=>null),l0(n)}function Ys(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function y_(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function l0(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>Z0(n,r))})}function Z0(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function b_(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function v_(n,e){!Z0(n,e)&&Zn[e.type]&&(n.editable||!(e.type in er))&&Zn[e.type](n,e)}er.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!d2(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(ns&&Vn&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),nl&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",s=>s(n,Do(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||a_(n,t)?t.preventDefault():Ys(n,"key")};er.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};er.keypress=(n,e)=>{let t=e;if(d2(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Fr&&t.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Be)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(t.charCode),o=()=>n.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",l=>l(n,r.$from.pos,r.$to.pos,s,o))&&n.dispatch(o()),t.preventDefault()}};function Ch(n){return{left:n.clientX,top:n.clientY}}function x_(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function ey(n,e,t,r,s){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let l=o.depth+1;l>0;l--)if(n.someProp(e,u=>l>o.depth?u(n,t,o.nodeAfter,o.before(l),s,!0):u(n,t,o.node(l),o.before(l),s,!1)))return!0;return!1}function Ja(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function w_(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&_e.isSelectable(r)?(Ja(n,new _e(t)),!0):!1}function S_(n,e){if(e==-1)return!1;let t=n.state.selection,r,s;t instanceof _e&&(r=t.node);let o=n.state.doc.resolve(e);for(let l=o.depth+1;l>0;l--){let u=l>o.depth?o.nodeAfter:o.node(l);if(_e.isSelectable(u)){r&&t.$from.depth>0&&l>=t.$from.depth&&o.before(t.$from.depth+1)==t.$from.pos?s=o.before(t.$from.depth):s=o.before(l);break}}return s!=null?(Ja(n,_e.create(n.state.doc,s)),!0):!1}function E_(n,e,t,r,s){return ey(n,"handleClickOn",e,t,r)||n.someProp("handleClick",o=>o(n,e,r))||(s?S_(n,t):w_(n,t))}function C_(n,e,t,r){return ey(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",s=>s(n,e,r))}function T_(n,e,t,r){return ey(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",s=>s(n,e,r))||N_(n,t,r)}function N_(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(Ja(n,Be.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o),u=s.before(o);if(l.inlineContent)Ja(n,Be.create(r,u+1,u+1+l.content.size));else if(_e.isSelectable(l))Ja(n,_e.create(r,u));else continue;return!0}}function ty(n){return Mf(n)}const u2=Fr?"metaKey":"ctrlKey";Zn.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=ty(n),s=Date.now(),o="singleClick";s-n.input.lastClick.time<500&&x_(t,n.input.lastClick)&&!t[u2]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:o,button:t.button};let l=n.posAtCoords(Ch(t));l&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new A_(n,l,t,!!r)):(o=="doubleClick"?C_:T_)(n,l.pos,l.inside,t)?t.preventDefault():Ys(n,"pointer"))};class A_{constructor(e,t,r,s){this.view=e,this.pos=t,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[u2],this.allowDefault=r.shiftKey;let o,l;if(t.inside>-1)o=e.state.doc.nodeAt(t.inside),l=t.inside;else{let p=e.state.doc.resolve(t.pos);o=p.parent,l=p.depth?p.before():0}const u=s?null:r.target,d=u?e.docView.nearestDesc(u,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:h}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof _e&&h.from<=l&&h.to>l)&&(this.mightDrag={node:o,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Wr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ys(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>as(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Ch(e))),this.updateAllowDefault(e),this.allowDefault||!t?Ys(this.view,"pointer"):E_(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Jn&&this.mightDrag&&!this.mightDrag.node.isAtom||Vn&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Ja(this.view,Ue.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Ys(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ys(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Zn.touchstart=n=>{n.input.lastTouch=Date.now(),ty(n),Ys(n,"pointer")};Zn.touchmove=n=>{n.input.lastTouch=Date.now(),Ys(n,"pointer")};Zn.contextmenu=n=>ty(n);function d2(n,e){return n.composing?!0:Jn&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const k_=ns?5e3:-1;er.compositionstart=er.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Be&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Mf(n,!0),n.markCursor=null;else if(Mf(n,!e.selection.empty),Wr&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let s=r.focusNode,o=r.focusOffset;s&&s.nodeType==1&&o!=0;){let l=o<0?s.lastChild:s.childNodes[o-1];if(!l)break;if(l.nodeType==3){let u=n.domSelection();u&&u.collapse(l,l.nodeValue.length);break}else s=l,o=-1}}n.input.composing=!0}f2(n,k_)};er.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,f2(n,20))};function f2(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Mf(n),e))}function h2(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=O_());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function M_(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=w3(e.focusNode,e.focusOffset),r=S3(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let s=r.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(t==o||r==o)return o;if(!s||!s.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let l=t.pmViewDesc;if(!(!l||!l.isText(t.nodeValue)))return r}}return t||r}function O_(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Mf(n,e=!1){if(!(ns&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),h2(n),e||n.docView&&n.docView.dirty){let t=Y0(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function R_(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Wc=hr&&eo<15||nl&&A3<604;Zn.copy=er.cut=(n,e)=>{let t=e,r=n.state.selection,s=t.type=="cut";if(r.empty)return;let o=Wc?null:t.clipboardData,l=r.content(),{dom:u,text:d}=J0(n,l);o?(t.preventDefault(),o.clearData(),o.setData("text/html",u.innerHTML),o.setData("text/plain",d)):R_(n,u),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function D_(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function __(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Qc(n,r.value,null,s,e):Qc(n,r.textContent,r.innerHTML,s,e)},50)}function Qc(n,e,t,r,s){let o=i2(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",d=>d(n,s,o||be.empty)))return!0;if(!o)return!1;let l=D_(o),u=l?n.state.tr.replaceSelectionWith(l,r):n.state.tr.replaceSelection(o);return n.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function p2(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}er.paste=(n,e)=>{let t=e;if(n.composing&&!ns)return;let r=Wc?null:t.clipboardData,s=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Qc(n,p2(r),r.getData("text/html"),s,t)?t.preventDefault():__(n,t)};class m2{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const j_=Fr?"altKey":"ctrlKey";function g2(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[j_]}Zn.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let s=n.state.selection,o=s.empty?null:n.posAtCoords(Ch(t)),l;if(!(o&&o.pos>=s.from&&o.pos<=(s instanceof _e?s.to-1:s.to))){if(r&&r.mightDrag)l=_e.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let m=n.docView.nearestDesc(t.target,!0);m&&m.node.type.spec.draggable&&m!=n.docView&&(l=_e.create(n.state.doc,m.posBefore))}}let u=(l||n.state.selection).content(),{dom:d,text:h,slice:p}=J0(n,u);(!t.dataTransfer.files.length||!Vn||qC>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Wc?"Text":"text/html",d.innerHTML),t.dataTransfer.effectAllowed="copyMove",Wc||t.dataTransfer.setData("text/plain",h),n.dragging=new m2(p,g2(n,t),l)};Zn.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};er.dragover=er.dragenter=(n,e)=>e.preventDefault();er.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let s=n.posAtCoords(Ch(t));if(!s)return;let o=n.state.doc.resolve(s.pos),l=r&&r.slice;l?n.someProp("transformPasted",w=>{l=w(l,n,!1)}):l=i2(n,p2(t.dataTransfer),Wc?null:t.dataTransfer.getData("text/html"),!1,o);let u=!!(r&&g2(n,t));if(n.someProp("handleDrop",w=>w(n,t,l||be.empty,u))){t.preventDefault();return}if(!l)return;t.preventDefault();let d=l?_C(n.state.doc,o.pos,l):o.pos;d==null&&(d=o.pos);let h=n.state.tr;if(u){let{node:w}=r;w?w.replace(h):h.deleteSelection()}let p=h.mapping.map(d),m=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,b=h.doc;if(m?h.replaceRangeWith(p,p,l.content.firstChild):h.replaceRange(p,p,l),h.doc.eq(b))return;let v=h.doc.resolve(p);if(m&&_e.isSelectable(l.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(l.content.firstChild))h.setSelection(new _e(v));else{let w=h.mapping.map(d);h.mapping.maps[h.mapping.maps.length-1].forEach((S,C,N,L)=>w=L),h.setSelection(X0(n,v,h.doc.resolve(w)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};Zn.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&as(n)},20))};Zn.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Zn.beforeinput=(n,e)=>{if(Vn&&ns&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",o=>o(n,Do(8,"Backspace")))))return;let{$cursor:s}=n.state.selection;s&&s.pos>0&&n.dispatch(n.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let n in er)Zn[n]=er[n];function Yc(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Of{constructor(e,t){this.toDOM=e,this.spec=t||qo,this.side=this.spec.side||0}map(e,t,r,s){let{pos:o,deleted:l}=e.mapResult(t.from+s,this.side<0?-1:1);return l?null:new En(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Of&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Yc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class no{constructor(e,t){this.attrs=e,this.spec=t||qo}map(e,t,r,s){let o=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-r,l=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-r;return o>=l?null:new En(o,l,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof no&&Yc(this.attrs,e.attrs)&&Yc(this.spec,e.spec)}static is(e){return e.type instanceof no}destroy(){}}class ny{constructor(e,t){this.attrs=e,this.spec=t||qo}map(e,t,r,s){let o=e.mapResult(t.from+s,1);if(o.deleted)return null;let l=e.mapResult(t.to+s,-1);return l.deleted||l.pos<=o.pos?null:new En(o.pos-r,l.pos-r,this)}valid(e,t){let{index:r,offset:s}=e.content.findIndex(t.from),o;return s==t.from&&!(o=e.child(r)).isText&&s+o.nodeSize==t.to}eq(e){return this==e||e instanceof ny&&Yc(this.attrs,e.attrs)&&Yc(this.spec,e.spec)}destroy(){}}class En{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new En(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new En(e,e,new Of(t,r))}static inline(e,t,r,s){return new En(e,t,new no(r,s))}static node(e,t,r,s){return new En(e,t,new ny(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof no}get widget(){return this.type instanceof Of}}const Fa=[],qo={};class zt{constructor(e,t){this.local=e.length?e:Fa,this.children=t.length?t:Fa}static create(e,t){return t.length?Rf(t,e,0,qo):Pn}find(e,t,r){let s=[];return this.findInner(e??0,t??1e9,s,0,r),s}findInner(e,t,r,s,o){for(let l=0;l<this.local.length;l++){let u=this.local[l];u.from<=t&&u.to>=e&&(!o||o(u.spec))&&r.push(u.copy(u.from+s,u.to+s))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<t&&this.children[l+1]>e){let u=this.children[l]+1;this.children[l+2].findInner(e-u,t-u,r,s+u,o)}}map(e,t,r){return this==Pn||e.maps.length==0?this:this.mapInner(e,t,0,0,r||qo)}mapInner(e,t,r,s,o){let l;for(let u=0;u<this.local.length;u++){let d=this.local[u].map(e,r,s);d&&d.type.valid(t,d)?(l||(l=[])).push(d):o.onRemove&&o.onRemove(this.local[u].spec)}return this.children.length?L_(this.children,l||[],e,t,r,s,o):l?new zt(l.sort(Po),Fa):Pn}add(e,t){return t.length?this==Pn?zt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let s,o=0;e.forEach((u,d)=>{let h=d+r,p;if(p=b2(t,u,h)){for(s||(s=this.children.slice());o<s.length&&s[o]<d;)o+=3;s[o]==d?s[o+2]=s[o+2].addInner(u,p,h+1):s.splice(o,0,d,d+u.nodeSize,Rf(p,u,h+1,qo)),o+=3}});let l=y2(o?v2(t):t,-r);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||l.splice(u--,1);return new zt(l.length?this.local.concat(l).sort(Po):this.local,s||this.children)}remove(e){return e.length==0||this==Pn?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,s=this.local;for(let o=0;o<r.length;o+=3){let l,u=r[o]+t,d=r[o+1]+t;for(let p=0,m;p<e.length;p++)(m=e[p])&&m.from>u&&m.to<d&&(e[p]=null,(l||(l=[])).push(m));if(!l)continue;r==this.children&&(r=this.children.slice());let h=r[o+2].removeInner(l,u+1);h!=Pn?r[o+2]=h:(r.splice(o,3),o-=3)}if(s.length){for(let o=0,l;o<e.length;o++)if(l=e[o])for(let u=0;u<s.length;u++)s[u].eq(l,t)&&(s==this.local&&(s=this.local.slice()),s.splice(u--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new zt(s,r):Pn}forChild(e,t){if(this==Pn)return this;if(t.isLeaf)return zt.empty;let r,s;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let o=e+1,l=o+t.content.size;for(let u=0;u<this.local.length;u++){let d=this.local[u];if(d.from<l&&d.to>o&&d.type instanceof no){let h=Math.max(o,d.from)-o,p=Math.min(l,d.to)-o;h<p&&(s||(s=[])).push(d.copy(h,p))}}if(s){let u=new zt(s.sort(Po),Fa);return r?new Vs([u,r]):u}return r||Pn}eq(e){if(this==e)return!0;if(!(e instanceof zt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return ry(this.localsInner(e))}localsInner(e){if(this==Pn)return Fa;if(e.inlineContent||!this.local.some(no.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof no||t.push(this.local[r]);return t}forEachSet(e){e(this)}}zt.empty=new zt([],[]);zt.removeOverlap=ry;const Pn=zt.empty;class Vs{constructor(e){this.members=e}map(e,t){const r=this.members.map(s=>s.map(e,t,qo));return Vs.from(r)}forChild(e,t){if(t.isLeaf)return zt.empty;let r=[];for(let s=0;s<this.members.length;s++){let o=this.members[s].forChild(e,t);o!=Pn&&(o instanceof Vs?r=r.concat(o.members):r.push(o))}return Vs.from(r)}eq(e){if(!(e instanceof Vs)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let s=0;s<this.members.length;s++){let o=this.members[s].localsInner(e);if(o.length)if(!t)t=o;else{r&&(t=t.slice(),r=!1);for(let l=0;l<o.length;l++)t.push(o[l])}}return t?ry(r?t:t.sort(Po)):Fa}static from(e){switch(e.length){case 0:return Pn;case 1:return e[0];default:return new Vs(e.every(t=>t instanceof zt)?e:e.reduce((t,r)=>t.concat(r instanceof zt?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function L_(n,e,t,r,s,o,l){let u=n.slice();for(let h=0,p=o;h<t.maps.length;h++){let m=0;t.maps[h].forEach((b,v,w,S)=>{let C=S-w-(v-b);for(let N=0;N<u.length;N+=3){let L=u[N+1];if(L<0||b>L+p-m)continue;let _=u[N]+p-m;v>=_?u[N+1]=b<=_?-2:-1:b>=p&&C&&(u[N]+=C,u[N+1]+=C)}m+=C}),p=t.maps[h].map(p,-1)}let d=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){d=!0,u[h+1]=-1;continue}let p=t.map(n[h]+o),m=p-s;if(m<0||m>=r.content.size){d=!0;continue}let b=t.map(n[h+1]+o,-1),v=b-s,{index:w,offset:S}=r.content.findIndex(m),C=r.maybeChild(w);if(C&&S==m&&S+C.nodeSize==v){let N=u[h+2].mapInner(t,C,p+1,n[h]+o+1,l);N!=Pn?(u[h]=m,u[h+1]=v,u[h+2]=N):(u[h+1]=-2,d=!0)}else d=!0}if(d){let h=B_(u,n,e,t,s,o,l),p=Rf(h,r,0,l);e=p.local;for(let m=0;m<u.length;m+=3)u[m+1]<0&&(u.splice(m,3),m-=3);for(let m=0,b=0;m<p.children.length;m+=3){let v=p.children[m];for(;b<u.length&&u[b]<v;)b+=3;u.splice(b,0,p.children[m],p.children[m+1],p.children[m+2])}}return new zt(e.sort(Po),u)}function y2(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let s=n[r];t.push(new En(s.from+e,s.to+e,s.type))}return t}function B_(n,e,t,r,s,o,l){function u(d,h){for(let p=0;p<d.local.length;p++){let m=d.local[p].map(r,s,h);m?t.push(m):l.onRemove&&l.onRemove(d.local[p].spec)}for(let p=0;p<d.children.length;p+=3)u(d.children[p+2],d.children[p]+h+1)}for(let d=0;d<n.length;d+=3)n[d+1]==-1&&u(n[d+2],e[d]+o+1);return t}function b2(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,s=null;for(let o=0,l;o<n.length;o++)(l=n[o])&&l.from>t&&l.to<r&&((s||(s=[])).push(l),n[o]=null);return s}function v2(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Rf(n,e,t,r){let s=[],o=!1;e.forEach((u,d)=>{let h=b2(n,u,d+t);if(h){o=!0;let p=Rf(h,u,t+d+1,r);p!=Pn&&s.push(d,d+u.nodeSize,p)}});let l=y2(o?v2(n):n,-t).sort(Po);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||(r.onRemove&&r.onRemove(l[u].spec),l.splice(u--,1));return l.length||s.length?new zt(l,s):Pn}function Po(n,e){return n.from-e.from||n.to-e.to}function ry(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let s=t+1;s<e.length;s++){let o=e[s];if(o.from==r.from){o.to!=r.to&&(e==n&&(e=n.slice()),e[s]=o.copy(o.from,r.to),Uw(e,s+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,o.from),Uw(e,s,r.copy(o.from,r.to)));break}}}return e}function Uw(n,e,t){for(;e<n.length&&Po(t,n[e])>0;)e++;n.splice(e,0,t)}function fg(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=Pn&&e.push(r)}),n.cursorWrapper&&e.push(zt.create(n.state.doc,[n.cursorWrapper.deco])),Vs.from(e)}const z_={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},I_=hr&&eo<=11;class H_{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class U_{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new H_,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);hr&&eo<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),I_&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,z_)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Dw(this.view)){if(this.suppressingSelectionUpdates)return as(this.view);if(hr&&eo<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Yo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let o=e.focusNode;o;o=tl(o))t.add(o);for(let o=e.anchorNode;o;o=tl(o))if(t.has(o)){r=o;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Dw(e)&&!this.ignoreSelectionChange(r),o=-1,l=-1,u=!1,d=[];if(e.editable)for(let p=0;p<t.length;p++){let m=this.registerMutation(t[p],d);m&&(o=o<0?m.from:Math.min(m.from,o),l=l<0?m.to:Math.max(m.to,l),m.typeOver&&(u=!0))}if(Wr&&d.length){let p=d.filter(m=>m.nodeName=="BR");if(p.length==2){let[m,b]=p;m.parentNode&&m.parentNode.parentNode==b.parentNode?b.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let b of p){let v=b.parentNode;v&&v.nodeName=="LI"&&(!m||P_(e,m)!=v)&&b.remove()}}}let h=null;o<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Sh(r)&&(h=Y0(e))&&h.eq(Ue.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,as(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||s)&&(o>-1&&(e.docView.markDirty(o,l),$_(e)),this.handleDOMChange(o,l,u,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||as(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let m=e.addedNodes[p];t.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,o=e.nextSibling;if(hr&&eo<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:m,nextSibling:b}=e.addedNodes[p];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(s=m),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(o=b)}let l=s&&s.parentNode==e.target?zn(s)+1:0,u=r.localPosFromDOM(e.target,l,-1),d=o&&o.parentNode==e.target?zn(o):e.target.childNodes.length,h=r.localPosFromDOM(e.target,d,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let $w=new WeakMap,qw=!1;function $_(n){if(!$w.has(n)&&($w.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Wr,qw)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),qw=!0}}function Pw(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,l=n.domAtPos(n.state.selection.anchor);return Yo(l.node,l.offset,s,o)&&([t,r,s,o]=[s,o,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:o}}function q_(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return Pw(n,s)}let t;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?Pw(n,t):null}function P_(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function V_(n,e,t){let{node:r,fromOffset:s,toOffset:o,from:l,to:u}=n.docView.parseRange(e,t),d=n.domSelectionRange(),h,p=d.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:d.anchorOffset}],Sh(d)||h.push({node:d.focusNode,offset:d.focusOffset})),Vn&&n.input.lastKeyCode===8)for(let C=o;C>s;C--){let N=r.childNodes[C-1],L=N.pmViewDesc;if(N.nodeName=="BR"&&!L){o=C;break}if(!L||L.size)break}let m=n.state.doc,b=n.someProp("domParser")||Zs.fromSchema(n.state.schema),v=m.resolve(l),w=null,S=b.parse(r,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:s,to:o,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:F_,context:v});if(h&&h[0].pos!=null){let C=h[0].pos,N=h[1]&&h[1].pos;N==null&&(N=C),w={anchor:C+l,head:N+l}}return{doc:S,sel:w,from:l,to:u}}function F_(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Jn&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Jn&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const G_=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function K_(n,e,t,r,s){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let H=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,Y=Y0(n,H);if(Y&&!n.state.selection.eq(Y)){if(Vn&&ns&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",ge=>ge(n,Do(13,"Enter"))))return;let re=n.state.tr.setSelection(Y);H=="pointer"?re.setMeta("pointer",!0):H=="key"&&re.scrollIntoView(),o&&re.setMeta("composition",o),n.dispatch(re)}return}let l=n.state.doc.resolve(e),u=l.sharedDepth(t);e=l.before(u+1),t=n.state.doc.resolve(t).after(u+1);let d=n.state.selection,h=V_(n,e,t),p=n.state.doc,m=p.slice(h.from,h.to),b,v;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(b=n.state.selection.to,v="end"):(b=n.state.selection.from,v="start"),n.input.lastKeyCode=null;let w=Y_(m.content,h.doc.content,h.from,b,v);if(w&&n.input.domChangeCount++,(nl&&n.input.lastIOSEnter>Date.now()-225||ns)&&s.some(H=>H.nodeType==1&&!G_.test(H.nodeName))&&(!w||w.endA>=w.endB)&&n.someProp("handleKeyDown",H=>H(n,Do(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!w)if(r&&d instanceof Be&&!d.empty&&d.$head.sameParent(d.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))w={start:d.from,endA:d.to,endB:d.to};else{if(h.sel){let H=Vw(n,n.state.doc,h.sel);if(H&&!H.eq(n.state.selection)){let Y=n.state.tr.setSelection(H);o&&Y.setMeta("composition",o),n.dispatch(Y)}}return}n.state.selection.from<n.state.selection.to&&w.start==w.endB&&n.state.selection instanceof Be&&(w.start>n.state.selection.from&&w.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?w.start=n.state.selection.from:w.endA<n.state.selection.to&&w.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(w.endB+=n.state.selection.to-w.endA,w.endA=n.state.selection.to)),hr&&eo<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>h.from&&h.doc.textBetween(w.start-h.from-1,w.start-h.from+1)==" "&&(w.start--,w.endA--,w.endB--);let S=h.doc.resolveNoCache(w.start-h.from),C=h.doc.resolveNoCache(w.endB-h.from),N=p.resolve(w.start),L=S.sameParent(C)&&S.parent.inlineContent&&N.end()>=w.endA;if((nl&&n.input.lastIOSEnter>Date.now()-225&&(!L||s.some(H=>H.nodeName=="DIV"||H.nodeName=="P"))||!L&&S.pos<h.doc.content.size&&(!S.sameParent(C)||!S.parent.inlineContent)&&S.pos<C.pos&&!/\S/.test(h.doc.textBetween(S.pos,C.pos,"","")))&&n.someProp("handleKeyDown",H=>H(n,Do(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>w.start&&Q_(p,w.start,w.endA,S,C)&&n.someProp("handleKeyDown",H=>H(n,Do(8,"Backspace")))){ns&&Vn&&n.domObserver.suppressSelectionUpdates();return}Vn&&w.endB==w.start&&(n.input.lastChromeDelete=Date.now()),ns&&!L&&S.start()!=C.start()&&C.parentOffset==0&&S.depth==C.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==w.endA&&(w.endB-=2,C=h.doc.resolveNoCache(w.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(H){return H(n,Do(13,"Enter"))})},20));let _=w.start,k=w.endA,$=H=>{let Y=H||n.state.tr.replace(_,k,h.doc.slice(w.start-h.from,w.endB-h.from));if(h.sel){let re=Vw(n,Y.doc,h.sel);re&&!(Vn&&n.composing&&re.empty&&(w.start!=w.endB||n.input.lastChromeDelete<Date.now()-100)&&(re.head==_||re.head==Y.mapping.map(k)-1)||hr&&re.empty&&re.head==_)&&Y.setSelection(re)}return o&&Y.setMeta("composition",o),Y.scrollIntoView()},z;if(L)if(S.pos==C.pos){hr&&eo<=11&&S.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>as(n),20));let H=$(n.state.tr.delete(_,k)),Y=p.resolve(w.start).marksAcross(p.resolve(w.endA));Y&&H.ensureMarks(Y),n.dispatch(H)}else if(w.endA==w.endB&&(z=W_(S.parent.content.cut(S.parentOffset,C.parentOffset),N.parent.content.cut(N.parentOffset,w.endA-N.start())))){let H=$(n.state.tr);z.type=="add"?H.addMark(_,k,z.mark):H.removeMark(_,k,z.mark),n.dispatch(H)}else if(S.parent.child(S.index()).isText&&S.index()==C.index()-(C.textOffset?0:1)){let H=S.parent.textBetween(S.parentOffset,C.parentOffset),Y=()=>$(n.state.tr.insertText(H,_,k));n.someProp("handleTextInput",re=>re(n,_,k,H,Y))||n.dispatch(Y())}else n.dispatch($());else n.dispatch($())}function Vw(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:X0(n,e.resolve(t.anchor),e.resolve(t.head))}function W_(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,s=t,o=r,l,u,d;for(let p=0;p<r.length;p++)s=r[p].removeFromSet(s);for(let p=0;p<t.length;p++)o=t[p].removeFromSet(o);if(s.length==1&&o.length==0)u=s[0],l="add",d=p=>p.mark(u.addToSet(p.marks));else if(s.length==0&&o.length==1)u=o[0],l="remove",d=p=>p.mark(u.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<e.childCount;p++)h.push(d(e.child(p)));if(ne.from(h).eq(n))return{mark:u,type:l}}function Q_(n,e,t,r,s){if(t-e<=s.pos-r.pos||hg(r,!0,!1)<s.pos)return!1;let o=n.resolve(e);if(!r.parent.isTextblock){let u=o.nodeAfter;return u!=null&&t==e+u.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let l=n.resolve(hg(o,!0,!0));return!l.parent.isTextblock||l.pos>t||hg(l,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function hg(n,e,t){let r=n.depth,s=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,s++,e=!1;if(t){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,s++}return s}function Y_(n,e,t,r,s){let o=n.findDiffStart(e,t);if(o==null)return null;let{a:l,b:u}=n.findDiffEnd(e,t+n.size,t+e.size);if(s=="end"){let d=Math.max(0,o-Math.min(l,u));r-=l+d-o}if(l<o&&n.size<e.size){let d=r<=o&&r>=l?o-r:0;o-=d,o&&o<e.size&&Fw(e.textBetween(o-1,o+1))&&(o+=d?1:-1),u=o+(u-l),l=o}else if(u<o){let d=r<=o&&r>=u?o-r:0;o-=d,o&&o<n.size&&Fw(n.textBetween(o-1,o+1))&&(o+=d?1:-1),l=o+(l-u),u=o}return{start:o,endA:l,endB:u}}function Fw(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class x2{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new m_,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Yw),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Ww(this),Kw(this),this.nodeViews=Qw(this),this.docView=Nw(this.state.doc,Gw(this),fg(this),this.dom,this),this.domObserver=new U_(this,(r,s,o,l)=>K_(this,r,s,o,l)),this.domObserver.start(),g_(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&l0(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Yw),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let s=this.state,o=!1,l=!1;e.storedMarks&&this.composing&&(h2(this),l=!0),this.state=e;let u=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let v=Qw(this);J_(v,this.nodeViews)&&(this.nodeViews=v,o=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&l0(this),this.editable=Ww(this),Kw(this);let d=fg(this),h=Gw(this),p=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",m=o||!this.docView.matchesNode(e.doc,h,d);(m||!e.selection.eq(s.selection))&&(l=!0);let b=p=="preserve"&&l&&this.dom.style.overflowAnchor==null&&O3(this);if(l){this.domObserver.stop();let v=m&&(hr||Vn)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&X_(s.selection,e.selection);if(m){let w=Vn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=M_(this)),(o||!this.docView.update(e.doc,h,d,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=Nw(e.doc,h,d,this.dom,this)),w&&!this.trackWrites&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&e_(this))?as(this,v):(t2(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():b&&R3(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof _e){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&xw(this,t.getBoundingClientRect(),e)}else xw(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let o=r.from+(this.state.doc.content.size-t.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(s=o)}this.dragging=new m2(e.slice,e.move,s<0?void 0:_e.create(this.state.doc,s))}someProp(e,t){let r=this._props&&this._props[e],s;if(r!=null&&(s=t?t(r):r))return s;for(let l=0;l<this.directPlugins.length;l++){let u=this.directPlugins[l].props[e];if(u!=null&&(s=t?t(u):u))return s}let o=this.state.plugins;if(o)for(let l=0;l<o.length;l++){let u=o[l].props[e];if(u!=null&&(s=t?t(u):u))return s}}hasFocus(){if(hr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&D3(this.dom),as(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return z3(this,e)}coordsAtPos(e,t=1){return KC(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let s=this.docView.posFromDOM(e,t,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return q3(this,t||this.state,e)}pasteHTML(e,t){return Qc(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Qc(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return J0(this,e)}destroy(){this.docView&&(y_(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],fg(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,v3())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return v_(this,e)}domSelectionRange(){let e=this.domSelection();return e?Jn&&this.root.nodeType===11&&C3(this.dom.ownerDocument)==this.dom&&q_(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}x2.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function Gw(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[En.node(0,n.state.doc.content.size,e)]}function Kw(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:En.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function Ww(n){return!n.someProp("editable",e=>e(n.state)===!1)}function X_(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function Qw(n){let e=Object.create(null);function t(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function J_(n,e){let t=0,r=0;for(let s in n){if(n[s]!=e[s])return!0;t++}for(let s in e)r++;return t!=r}function Yw(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ro={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Df={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Z_=typeof navigator<"u"&&/Mac/.test(navigator.platform),e4=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var In=0;In<10;In++)ro[48+In]=ro[96+In]=String(In);for(var In=1;In<=24;In++)ro[In+111]="F"+In;for(var In=65;In<=90;In++)ro[In]=String.fromCharCode(In+32),Df[In]=String.fromCharCode(In);for(var pg in ro)Df.hasOwnProperty(pg)||(Df[pg]=ro[pg]);function t4(n){var e=Z_&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||e4&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Df:ro)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const n4=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),r4=typeof navigator<"u"&&/Win/.test(navigator.platform);function i4(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,s,o,l;for(let u=0;u<e.length-1;u++){let d=e[u];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))s=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))n4?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(t="Alt-"+t),s&&(t="Ctrl-"+t),l&&(t="Meta-"+t),o&&(t="Shift-"+t),t}function s4(n){let e=Object.create(null);for(let t in n)e[i4(t)]=n[t];return e}function mg(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function o4(n){return new Pt({props:{handleKeyDown:iy(n)}})}function iy(n){let e=s4(n);return function(t,r){let s=t4(r),o,l=e[mg(s,r)];if(l&&l(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let u=e[mg(s,r,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(r4&&r.ctrlKey&&r.altKey)&&(o=ro[r.keyCode])&&o!=s){let u=e[mg(o,r)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}const sy=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function w2(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const S2=(n,e,t)=>{let r=w2(n,t);if(!r)return!1;let s=oy(r);if(!s){let l=r.blockRange(),u=l&&fl(l);return u==null?!1:(e&&e(n.tr.lift(l,u).scrollIntoView()),!0)}let o=s.nodeBefore;if(R2(n,s,e,-1))return!0;if(r.parent.content.size==0&&(rl(o,"end")||_e.isSelectable(o)))for(let l=r.depth;;l--){let u=xh(n.doc,r.before(l),r.after(l),be.empty);if(u&&u.slice.size<u.to-u.from){if(e){let d=n.tr.step(u);d.setSelection(rl(o,"end")?Ue.findFrom(d.doc.resolve(d.mapping.map(s.pos,-1)),-1):_e.create(d.doc,s.pos-o.nodeSize)),e(d.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return o.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos-o.nodeSize,s.pos).scrollIntoView()),!0):!1},a4=(n,e,t)=>{let r=w2(n,t);if(!r)return!1;let s=oy(r);return s?E2(n,s,e):!1},l4=(n,e,t)=>{let r=T2(n,t);if(!r)return!1;let s=ay(r);return s?E2(n,s,e):!1};function E2(n,e,t){let r=e.nodeBefore,s=r,o=e.pos-1;for(;!s.isTextblock;o--){if(s.type.spec.isolating)return!1;let p=s.lastChild;if(!p)return!1;s=p}let l=e.nodeAfter,u=l,d=e.pos+1;for(;!u.isTextblock;d++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let h=xh(n.doc,o,d,be.empty);if(!h||h.from!=o||h instanceof wn&&h.slice.size>=d-o)return!1;if(t){let p=n.tr.step(h);p.setSelection(Be.create(p.doc,o)),t(p.scrollIntoView())}return!0}function rl(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const C2=(n,e,t)=>{let{$head:r,empty:s}=n.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=oy(r)}let l=o&&o.nodeBefore;return!l||!_e.isSelectable(l)?!1:(e&&e(n.tr.setSelection(_e.create(n.doc,o.pos-l.nodeSize)).scrollIntoView()),!0)};function oy(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function T2(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const N2=(n,e,t)=>{let r=T2(n,t);if(!r)return!1;let s=ay(r);if(!s)return!1;let o=s.nodeAfter;if(R2(n,s,e,1))return!0;if(r.parent.content.size==0&&(rl(o,"start")||_e.isSelectable(o))){let l=xh(n.doc,r.before(),r.after(),be.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=n.tr.step(l);u.setSelection(rl(o,"start")?Ue.findFrom(u.doc.resolve(u.mapping.map(s.pos)),1):_e.create(u.doc,u.mapping.map(s.pos))),e(u.scrollIntoView())}return!0}}return o.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos,s.pos+o.nodeSize).scrollIntoView()),!0):!1},A2=(n,e,t)=>{let{$head:r,empty:s}=n.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=ay(r)}let l=o&&o.nodeAfter;return!l||!_e.isSelectable(l)?!1:(e&&e(n.tr.setSelection(_e.create(n.doc,o.pos)).scrollIntoView()),!0)};function ay(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const c4=(n,e)=>{let t=n.selection,r=t instanceof _e,s;if(r){if(t.node.isTextblock||!io(n.doc,t.from))return!1;s=t.from}else if(s=vh(n.doc,t.from,-1),s==null)return!1;if(e){let o=n.tr.join(s);r&&o.setSelection(_e.create(o.doc,s-n.doc.resolve(s).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},u4=(n,e)=>{let t=n.selection,r;if(t instanceof _e){if(t.node.isTextblock||!io(n.doc,t.to))return!1;r=t.to}else if(r=vh(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},d4=(n,e)=>{let{$from:t,$to:r}=n.selection,s=t.blockRange(r),o=s&&fl(s);return o==null?!1:(e&&e(n.tr.lift(s,o).scrollIntoView()),!0)},k2=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function ly(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const f4=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let s=t.node(-1),o=t.indexAfter(-1),l=ly(s.contentMatchAt(o));if(!l||!s.canReplaceWith(o,o,l))return!1;if(e){let u=t.after(),d=n.tr.replaceWith(u,u,l.createAndFill());d.setSelection(Ue.near(d.doc.resolve(u),1)),e(d.scrollIntoView())}return!0},M2=(n,e)=>{let t=n.selection,{$from:r,$to:s}=t;if(t instanceof Or||r.parent.inlineContent||s.parent.inlineContent)return!1;let o=ly(s.parent.contentMatchAt(s.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let l=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,u=n.tr.insert(l,o.createAndFill());u.setSelection(Be.create(u.doc,l+1)),e(u.scrollIntoView())}return!0},O2=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let o=t.before();if(ss(n.doc,o))return e&&e(n.tr.split(o).scrollIntoView()),!0}let r=t.blockRange(),s=r&&fl(r);return s==null?!1:(e&&e(n.tr.lift(r,s).scrollIntoView()),!0)};function h4(n){return(e,t)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof _e&&e.selection.node.isBlock)return!r.parentOffset||!ss(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],l,u,d=!1,h=!1;for(let v=r.depth;;v--)if(r.node(v).isBlock){d=r.end(v)==r.pos+(r.depth-v),h=r.start(v)==r.pos-(r.depth-v),u=ly(r.node(v-1).contentMatchAt(r.indexAfter(v-1))),o.unshift(d&&u?{type:u}:null),l=v;break}else{if(v==1)return!1;o.unshift(null)}let p=e.tr;(e.selection instanceof Be||e.selection instanceof Or)&&p.deleteSelection();let m=p.mapping.map(r.pos),b=ss(p.doc,m,o.length,o);if(b||(o[0]=u?{type:u}:null,b=ss(p.doc,m,o.length,o)),!b)return!1;if(p.split(m,o.length,o),!d&&h&&r.node(l).type!=u){let v=p.mapping.map(r.before(l)),w=p.doc.resolve(v);u&&r.node(l-1).canReplaceWith(w.index(),w.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(l)),u)}return t&&t(p.scrollIntoView()),!0}}const p4=h4(),m4=(n,e)=>{let{$from:t,to:r}=n.selection,s,o=t.sharedDepth(r);return o==0?!1:(s=t.before(o),e&&e(n.tr.setSelection(_e.create(n.doc,s))),!0)};function g4(n,e,t){let r=e.nodeBefore,s=e.nodeAfter,o=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(s.isTextblock||io(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function R2(n,e,t,r){let s=e.nodeBefore,o=e.nodeAfter,l,u,d=s.type.spec.isolating||o.type.spec.isolating;if(!d&&g4(n,e,t))return!0;let h=!d&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(l=(u=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&u.matchType(l[0]||o.type).validEnd){if(t){let v=e.pos+o.nodeSize,w=ne.empty;for(let N=l.length-1;N>=0;N--)w=ne.from(l[N].create(null,w));w=ne.from(s.copy(w));let S=n.tr.step(new Cn(e.pos-1,v,e.pos,v,new be(w,1,0),l.length,!0)),C=S.doc.resolve(v+2*l.length);C.nodeAfter&&C.nodeAfter.type==s.type&&io(S.doc,C.pos)&&S.join(C.pos),t(S.scrollIntoView())}return!0}let p=o.type.spec.isolating||r>0&&d?null:Ue.findFrom(e,1),m=p&&p.$from.blockRange(p.$to),b=m&&fl(m);if(b!=null&&b>=e.depth)return t&&t(n.tr.lift(m,b).scrollIntoView()),!0;if(h&&rl(o,"start",!0)&&rl(s,"end")){let v=s,w=[];for(;w.push(v),!v.isTextblock;)v=v.lastChild;let S=o,C=1;for(;!S.isTextblock;S=S.firstChild)C++;if(v.canReplace(v.childCount,v.childCount,S.content)){if(t){let N=ne.empty;for(let _=w.length-1;_>=0;_--)N=ne.from(w[_].copy(N));let L=n.tr.step(new Cn(e.pos-w.length,e.pos+o.nodeSize,e.pos+C,e.pos+o.nodeSize-C,new be(N,w.length,0),0,!0));t(L.scrollIntoView())}return!0}}return!1}function D2(n){return function(e,t){let r=e.selection,s=n<0?r.$from:r.$to,o=s.depth;for(;s.node(o).isInline;){if(!o)return!1;o--}return s.node(o).isTextblock?(t&&t(e.tr.setSelection(Be.create(e.doc,n<0?s.start(o):s.end(o)))),!0):!1}}const y4=D2(-1),b4=D2(1);function v4(n,e=null){return function(t,r){let{$from:s,$to:o}=t.selection,l=s.blockRange(o),u=l&&G0(l,n,e);return u?(r&&r(t.tr.wrap(l,u).scrollIntoView()),!0):!1}}function Xw(n,e=null){return function(t,r){let s=!1;for(let o=0;o<t.selection.ranges.length&&!s;o++){let{$from:{pos:l},$to:{pos:u}}=t.selection.ranges[o];t.doc.nodesBetween(l,u,(d,h)=>{if(s)return!1;if(!(!d.isTextblock||d.hasMarkup(n,e)))if(d.type==n)s=!0;else{let p=t.doc.resolve(h),m=p.index();s=p.parent.canReplaceWith(m,m+1,n)}})}if(!s)return!1;if(r){let o=t.tr;for(let l=0;l<t.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:d}}=t.selection.ranges[l];o.setBlockType(u,d,n,e)}r(o.scrollIntoView())}return!0}}function cy(...n){return function(e,t,r){for(let s=0;s<n.length;s++)if(n[s](e,t,r))return!0;return!1}}cy(sy,S2,C2);cy(sy,N2,A2);cy(k2,M2,O2,p4);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function x4(n,e=null){return function(t,r){let{$from:s,$to:o}=t.selection,l=s.blockRange(o);if(!l)return!1;let u=r?t.tr:null;return w4(u,l,n,e)?(r&&r(u.scrollIntoView()),!0):!1}}function w4(n,e,t,r=null){let s=!1,o=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=l.resolve(e.start-2);o=new Tf(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Tf(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let u=G0(o,t,r,e);return u?(n&&S4(n,e,u,s,t),!0):!1}function S4(n,e,t,r,s){let o=ne.empty;for(let p=t.length-1;p>=0;p--)o=ne.from(t[p].type.create(t[p].attrs,o));n.step(new Cn(e.start-(r?2:0),e.end,e.start,e.end,new be(o,0,0),t.length,!0));let l=0;for(let p=0;p<t.length;p++)t[p].type==s&&(l=p+1);let u=t.length-l,d=e.start+t.length-(r?2:0),h=e.parent;for(let p=e.startIndex,m=e.endIndex,b=!0;p<m;p++,b=!1)!b&&ss(n.doc,d,u)&&(n.split(d,u),d+=2*u),d+=h.child(p).nodeSize;return n}function E4(n){return function(e,t){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,l=>l.childCount>0&&l.firstChild.type==n);return o?t?r.node(o.depth-1).type==n?C4(e,t,n,o):T4(e,t,o):!0:!1}}function C4(n,e,t,r){let s=n.tr,o=r.end,l=r.$to.end(r.depth);o<l&&(s.step(new Cn(o-1,l,o,l,new be(ne.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Tf(s.doc.resolve(r.$from.pos),s.doc.resolve(l),r.depth));const u=fl(r);if(u==null)return!1;s.lift(r,u);let d=s.doc.resolve(s.mapping.map(o,-1)-1);return io(s.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&s.join(d.pos),e(s.scrollIntoView()),!0}function T4(n,e,t){let r=n.tr,s=t.parent;for(let v=t.end,w=t.endIndex-1,S=t.startIndex;w>S;w--)v-=s.child(w).nodeSize,r.delete(v-1,v+1);let o=r.doc.resolve(t.start),l=o.nodeAfter;if(r.mapping.map(t.end)!=t.start+o.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,d=t.endIndex==s.childCount,h=o.node(-1),p=o.index(-1);if(!h.canReplace(p+(u?0:1),p+1,l.content.append(d?ne.empty:ne.from(s))))return!1;let m=o.pos,b=m+l.nodeSize;return r.step(new Cn(m-(u?1:0),b+(d?1:0),m+1,b-1,new be((u?ne.empty:ne.from(s.copy(ne.empty))).append(d?ne.empty:ne.from(s.copy(ne.empty))),u?0:1,d?0:1),u?0:1)),e(r.scrollIntoView()),!0}function N4(n){return function(e,t){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,h=>h.childCount>0&&h.firstChild.type==n);if(!o)return!1;let l=o.startIndex;if(l==0)return!1;let u=o.parent,d=u.child(l-1);if(d.type!=n)return!1;if(t){let h=d.lastChild&&d.lastChild.type==u.type,p=ne.from(h?n.create():null),m=new be(ne.from(n.create(null,ne.from(u.type.create(null,p)))),h?3:1,0),b=o.start,v=o.end;t(e.tr.step(new Cn(b-(h?3:1),v,b,v,m,1,!0)).scrollIntoView())}return!0}}function Th(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:s}=t,{storedMarks:o}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=t.selection,s=t.doc,o=t.storedMarks,t}}}class Nh{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:s}=t,{tr:o}=r,l=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([u,d])=>[u,(...p)=>{const m=d(...p)(l);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(o),m}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:s,state:o}=this,{view:l}=s,u=[],d=!!e,h=e||o.tr,p=()=>(!d&&t&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(h),u.every(b=>b===!0)),m={...Object.fromEntries(Object.entries(r).map(([b,v])=>[b,(...S)=>{const C=this.buildProps(h,t),N=v(...S)(C);return u.push(N),m}])),run:p};return m}createCan(e){const{rawCommands:t,state:r}=this,s=!1,o=e||r.tr,l=this.buildProps(o,s);return{...Object.fromEntries(Object.entries(t).map(([d,h])=>[d,(...p)=>h(...p)({...l,dispatch:void 0})])),chain:()=>this.createChain(o,s)}}buildProps(e,t=!0){const{rawCommands:r,editor:s,state:o}=this,{view:l}=s,u={tr:e,editor:s,view:l,state:Th({state:o,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...p)=>h(...p)(u)]))}};return u}}class A4{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(s=>s.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(s=>s!==t):delete this.callbacks[e]),this}once(e,t){const r=(...s)=>{this.off(e,r),t.apply(this,s)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function ke(n,e,t){return n.config[e]===void 0&&n.parent?ke(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?ke(n.parent,e,t):null}):n.config[e]}function Ah(n){const e=n.filter(s=>s.type==="extension"),t=n.filter(s=>s.type==="node"),r=n.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function _2(n){const e=[],{nodeExtensions:t,markExtensions:r}=Ah(n),s=[...t,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage,extensions:s},d=ke(l,"addGlobalAttributes",u);if(!d)return;d().forEach(p=>{p.types.forEach(m=>{Object.entries(p.attributes).forEach(([b,v])=>{e.push({type:m,name:b,attribute:{...o,...v}})})})})}),s.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage},d=ke(l,"addAttributes",u);if(!d)return;const h=d();Object.entries(h).forEach(([p,m])=>{const b={...o,...m};typeof(b==null?void 0:b.default)=="function"&&(b.default=b.default()),b!=null&&b.isRequired&&(b==null?void 0:b.default)===void 0&&delete b.default,e.push({type:l.name,name:p,attribute:b})})}),e}function Nn(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function yt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const u=o?String(o).split(" "):[],d=r[s]?r[s].split(" "):[],h=u.filter(p=>!d.includes(p));r[s]=[...d,...h].join(" ")}else if(s==="style"){const u=o?o.split(";").map(p=>p.trim()).filter(Boolean):[],d=r[s]?r[s].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;d.forEach(p=>{const[m,b]=p.split(":").map(v=>v.trim());h.set(m,b)}),u.forEach(p=>{const[m,b]=p.split(":").map(v=>v.trim());h.set(m,b)}),r[s]=Array.from(h.entries()).map(([p,m])=>`${p}: ${m}`).join("; ")}else r[s]=o}),r},{})}function _f(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>yt(t,r),{})}function j2(n){return typeof n=="function"}function Ze(n,e=void 0,...t){return j2(n)?e?n.bind(e)(...t):n(...t):n}function k4(n={}){return Object.keys(n).length===0&&n.constructor===Object}function M4(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function Jw(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const s=e.reduce((o,l)=>{const u=l.attribute.parseHTML?l.attribute.parseHTML(t):M4(t.getAttribute(l.name));return u==null?o:{...o,[l.name]:u}},{});return{...r,...s}}}}function Zw(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&k4(t)?!1:t!=null))}function O4(n,e){var t;const r=_2(n),{nodeExtensions:s,markExtensions:o}=Ah(n),l=(t=s.find(h=>ke(h,"topNode")))===null||t===void 0?void 0:t.name,u=Object.fromEntries(s.map(h=>{const p=r.filter(N=>N.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},b=n.reduce((N,L)=>{const _=ke(L,"extendNodeSchema",m);return{...N,..._?_(h):{}}},{}),v=Zw({...b,content:Ze(ke(h,"content",m)),marks:Ze(ke(h,"marks",m)),group:Ze(ke(h,"group",m)),inline:Ze(ke(h,"inline",m)),atom:Ze(ke(h,"atom",m)),selectable:Ze(ke(h,"selectable",m)),draggable:Ze(ke(h,"draggable",m)),code:Ze(ke(h,"code",m)),whitespace:Ze(ke(h,"whitespace",m)),linebreakReplacement:Ze(ke(h,"linebreakReplacement",m)),defining:Ze(ke(h,"defining",m)),isolating:Ze(ke(h,"isolating",m)),attrs:Object.fromEntries(p.map(N=>{var L;return[N.name,{default:(L=N==null?void 0:N.attribute)===null||L===void 0?void 0:L.default}]}))}),w=Ze(ke(h,"parseHTML",m));w&&(v.parseDOM=w.map(N=>Jw(N,p)));const S=ke(h,"renderHTML",m);S&&(v.toDOM=N=>S({node:N,HTMLAttributes:_f(N,p)}));const C=ke(h,"renderText",m);return C&&(v.toText=C),[h.name,v]})),d=Object.fromEntries(o.map(h=>{const p=r.filter(C=>C.type===h.name),m={name:h.name,options:h.options,storage:h.storage,editor:e},b=n.reduce((C,N)=>{const L=ke(N,"extendMarkSchema",m);return{...C,...L?L(h):{}}},{}),v=Zw({...b,inclusive:Ze(ke(h,"inclusive",m)),excludes:Ze(ke(h,"excludes",m)),group:Ze(ke(h,"group",m)),spanning:Ze(ke(h,"spanning",m)),code:Ze(ke(h,"code",m)),attrs:Object.fromEntries(p.map(C=>{var N;return[C.name,{default:(N=C==null?void 0:C.attribute)===null||N===void 0?void 0:N.default}]}))}),w=Ze(ke(h,"parseHTML",m));w&&(v.parseDOM=w.map(C=>Jw(C,p)));const S=ke(h,"renderHTML",m);return S&&(v.toDOM=C=>S({mark:C,HTMLAttributes:_f(C,p)})),[h.name,v]}));return new SC({topNode:l,nodes:u,marks:d})}function gg(n,e){return e.nodes[n]||e.marks[n]||null}function eS(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function uy(n,e){const t=na.fromSchema(e).serializeFragment(n),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(t),s.innerHTML}const R4=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(s,o,l,u)=>{var d,h;const p=((h=(d=s.type.spec).toText)===null||h===void 0?void 0:h.call(d,{node:s,pos:o,parent:l,index:u}))||s.textContent||"%leaf%";t+=s.isAtom&&!s.isText?p:p.slice(0,Math.max(0,r-o))}),t};function dy(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class kh{constructor(e){this.find=e.find,this.handler=e.handler}}const D4=(n,e)=>{if(dy(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function qd(n){var e;const{editor:t,from:r,to:s,text:o,rules:l,plugin:u}=n,{view:d}=t;if(d.composing)return!1;const h=d.state.doc.resolve(r);if(h.parent.type.spec.code||!((e=h.nodeBefore||h.nodeAfter)===null||e===void 0)&&e.marks.find(b=>b.type.spec.code))return!1;let p=!1;const m=R4(h)+o;return l.forEach(b=>{if(p)return;const v=D4(m,b.find);if(!v)return;const w=d.state.tr,S=Th({state:d.state,transaction:w}),C={from:r-(v[0].length-o.length),to:s},{commands:N,chain:L,can:_}=new Nh({editor:t,state:S});b.handler({state:S,range:C,match:v,commands:N,chain:L,can:_})===null||!w.steps.length||(w.setMeta(u,{transform:w,from:r,to:s,text:o}),d.dispatch(w),p=!0)}),p}function _4(n){const{editor:e,rules:t}=n,r=new Pt({state:{init(){return null},apply(s,o,l){const u=s.getMeta(r);if(u)return u;const d=s.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:p}=d;typeof p=="string"?p=p:p=uy(ne.from(p),l.schema);const{from:m}=d,b=m+p.length;qd({editor:e,from:m,to:b,text:p,rules:t,plugin:r})}),s.selectionSet||s.docChanged?null:o}},props:{handleTextInput(s,o,l,u){return qd({editor:e,from:o,to:l,text:u,rules:t,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:o}=s.state.selection;o&&qd({editor:e,from:o.pos,to:o.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(s,o){if(o.key!=="Enter")return!1;const{$cursor:l}=s.state.selection;return l?qd({editor:e,from:l.pos,to:l.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function j4(n){return Object.prototype.toString.call(n).slice(8,-1)}function Pd(n){return j4(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Mh(n,e){const t={...n};return Pd(n)&&Pd(e)&&Object.keys(e).forEach(r=>{Pd(e[r])&&Pd(n[r])?t[r]=Mh(n[r],e[r]):t[r]=e[r]}),t}class Ti{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ze(ke(this,"addOptions",{name:this.name}))),this.storage=Ze(ke(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ti(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Mh(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Ti(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Ze(ke(t,"addOptions",{name:t.name})),t.storage=Ze(ke(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const l=s.marks();if(!!!l.find(h=>(h==null?void 0:h.type.name)===t.name))return!1;const d=l.find(h=>(h==null?void 0:h.type.name)===t.name);return d&&r.removeStoredMark(d),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}}function L4(n){return typeof n=="number"}class B4{constructor(e){this.find=e.find,this.handler=e.handler}}const z4=(n,e,t)=>{if(dy(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(s=>{const o=[s.text];return o.index=s.index,o.input=n,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(s.replaceWith)),o}):[]};function I4(n){const{editor:e,state:t,from:r,to:s,rule:o,pasteEvent:l,dropEvent:u}=n,{commands:d,chain:h,can:p}=new Nh({editor:e,state:t}),m=[];return t.doc.nodesBetween(r,s,(v,w)=>{if(!v.isTextblock||v.type.spec.code)return;const S=Math.max(r,w),C=Math.min(s,w+v.content.size),N=v.textBetween(S-w,C-w,void 0,"");z4(N,o.find,l).forEach(_=>{if(_.index===void 0)return;const k=S+_.index+1,$=k+_[0].length,z={from:t.tr.mapping.map(k),to:t.tr.mapping.map($)},H=o.handler({state:t,range:z,match:_,commands:d,chain:h,can:p,pasteEvent:l,dropEvent:u});m.push(H)})}),m.every(v=>v!==null)}let Vd=null;const H4=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function U4(n){const{editor:e,rules:t}=n;let r=null,s=!1,o=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const d=({state:p,from:m,to:b,rule:v,pasteEvt:w})=>{const S=p.tr,C=Th({state:p,transaction:S});if(!(!I4({editor:e,state:C,from:Math.max(m-1,0),to:b.b-1,rule:v,pasteEvent:w,dropEvent:u})||!S.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return t.map(p=>new Pt({view(m){const b=w=>{var S;r=!((S=m.dom.parentElement)===null||S===void 0)&&S.contains(w.target)?m.dom.parentElement:null,r&&(Vd=e)},v=()=>{Vd&&(Vd=null)};return window.addEventListener("dragstart",b),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",b),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(m,b)=>{if(o=r===m.dom.parentElement,u=b,!o){const v=Vd;v!=null&&v.isEditable&&setTimeout(()=>{const w=v.state.selection;w&&v.commands.deleteRange({from:w.from,to:w.to})},10)}return!1},paste:(m,b)=>{var v;const w=(v=b.clipboardData)===null||v===void 0?void 0:v.getData("text/html");return l=b,s=!!(w!=null&&w.includes("data-pm-slice")),!1}}},appendTransaction:(m,b,v)=>{const w=m[0],S=w.getMeta("uiEvent")==="paste"&&!s,C=w.getMeta("uiEvent")==="drop"&&!o,N=w.getMeta("applyPasteRules"),L=!!N;if(!S&&!C&&!L)return;if(L){let{text:$}=N;typeof $=="string"?$=$:$=uy(ne.from($),v.schema);const{from:z}=N,H=z+$.length,Y=H4($);return d({rule:p,state:v,from:z,to:{b:H},pasteEvt:Y})}const _=b.doc.content.findDiffStart(v.doc.content),k=b.doc.content.findDiffEnd(v.doc.content);if(!(!L4(_)||!k||_===k.b))return d({rule:p,state:v,from:_,to:k,pasteEvt:l})}}))}function $4(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Ya{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Ya.resolve(e),this.schema=O4(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Ya.sort(Ya.flatten(e)),r=$4(t.map(s=>s.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},s=ke(t,"addExtensions",r);return s?[t,...this.flatten(s())]:t}).flat(10)}static sort(e){return e.sort((r,s)=>{const o=ke(r,"priority")||100,l=ke(s,"priority")||100;return o>l?-1:o<l?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:gg(t.name,this.schema)},s=ke(t,"addCommands",r);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,t=Ya.sort([...this.extensions].reverse()),r=[],s=[],o=t.map(l=>{const u={name:l.name,options:l.options,storage:l.storage,editor:e,type:gg(l.name,this.schema)},d=[],h=ke(l,"addKeyboardShortcuts",u);let p={};if(l.type==="mark"&&ke(l,"exitable",u)&&(p.ArrowRight=()=>Ti.handleExit({editor:e,mark:l})),h){const S=Object.fromEntries(Object.entries(h()).map(([C,N])=>[C,()=>N({editor:e})]));p={...p,...S}}const m=o4(p);d.push(m);const b=ke(l,"addInputRules",u);eS(l,e.options.enableInputRules)&&b&&r.push(...b());const v=ke(l,"addPasteRules",u);eS(l,e.options.enablePasteRules)&&v&&s.push(...v());const w=ke(l,"addProseMirrorPlugins",u);if(w){const S=w();d.push(...S)}return d}).flat();return[_4({editor:e,rules:r}),...U4({editor:e,rules:s}),...o]}get attributes(){return _2(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Ah(this.extensions);return Object.fromEntries(t.filter(r=>!!ke(r,"addNodeView")).map(r=>{const s=this.attributes.filter(d=>d.type===r.name),o={name:r.name,options:r.options,storage:r.storage,editor:e,type:Nn(r.name,this.schema)},l=ke(r,"addNodeView",o);if(!l)return[];const u=(d,h,p,m,b)=>{const v=_f(d,s);return l()({node:d,view:h,getPos:p,decorations:m,innerDecorations:b,editor:e,extension:r,HTMLAttributes:v})};return[r.name,u]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:gg(e.name,this.schema)};e.type==="mark"&&(!((t=Ze(ke(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const s=ke(e,"onBeforeCreate",r),o=ke(e,"onCreate",r),l=ke(e,"onUpdate",r),u=ke(e,"onSelectionUpdate",r),d=ke(e,"onTransaction",r),h=ke(e,"onFocus",r),p=ke(e,"onBlur",r),m=ke(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),o&&this.editor.on("create",o),l&&this.editor.on("update",l),u&&this.editor.on("selectionUpdate",u),d&&this.editor.on("transaction",d),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),m&&this.editor.on("destroy",m)})}}class An{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ze(ke(this,"addOptions",{name:this.name}))),this.storage=Ze(ke(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new An(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Mh(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new An({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Ze(ke(t,"addOptions",{name:t.name})),t.storage=Ze(ke(t,"addStorage",{name:t.name,options:t.options})),t}}function L2(n,e,t){const{from:r,to:s}=e,{blockSeparator:o=`

`,textSerializers:l={}}=t||{};let u="";return n.nodesBetween(r,s,(d,h,p,m)=>{var b;d.isBlock&&h>r&&(u+=o);const v=l==null?void 0:l[d.type.name];if(v)return p&&(u+=v({node:d,pos:h,parent:p,index:m,range:e})),!1;d.isText&&(u+=(b=d==null?void 0:d.text)===null||b===void 0?void 0:b.slice(Math.max(r,h)-h,s-h))}),u}function B2(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const q4=An.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Pt({key:new cn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:s}=e,{ranges:o}=s,l=Math.min(...o.map(p=>p.$from.pos)),u=Math.max(...o.map(p=>p.$to.pos)),d=B2(t);return L2(r,{from:l,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),P4=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),V4=(n=!1)=>({commands:e})=>e.setContent("",n),F4=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:s}=r;return t&&s.forEach(({$from:o,$to:l})=>{n.doc.nodesBetween(o.pos,l.pos,(u,d)=>{if(u.type.isText)return;const{doc:h,mapping:p}=e,m=h.resolve(p.map(d)),b=h.resolve(p.map(d+u.nodeSize)),v=m.blockRange(b);if(!v)return;const w=fl(v);if(u.type.isTextblock){const{defaultType:S}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(v.start,S)}(w||w===0)&&e.lift(v,w)})}),!0},G4=n=>e=>n(e),K4=()=>({state:n,dispatch:e})=>M2(n,e),W4=(n,e)=>({editor:t,tr:r})=>{const{state:s}=t,o=s.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const l=r.mapping.map(e);return r.insert(l,o.content),r.setSelection(new Be(r.doc.resolve(Math.max(l-1,0)))),!0},Q4=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const s=n.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(e){const u=s.before(o),d=s.after(o);n.delete(u,d).scrollIntoView()}return!0}return!1},Y4=n=>({tr:e,state:t,dispatch:r})=>{const s=Nn(n,t.schema),o=e.selection.$anchor;for(let l=o.depth;l>0;l-=1)if(o.node(l).type===s){if(r){const d=o.before(l),h=o.after(l);e.delete(d,h).scrollIntoView()}return!0}return!1},X4=n=>({tr:e,dispatch:t})=>{const{from:r,to:s}=n;return t&&e.delete(r,s),!0},J4=()=>({state:n,dispatch:e})=>sy(n,e),Z4=()=>({commands:n})=>n.keyboardShortcut("Enter"),ej=()=>({state:n,dispatch:e})=>f4(n,e);function jf(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>t.strict?e[s]===n[s]:dy(e[s])?e[s].test(n[s]):e[s]===n[s]):!0}function z2(n,e,t={}){return n.find(r=>r.type===e&&jf(Object.fromEntries(Object.keys(t).map(s=>[s,r.attrs[s]])),t))}function tS(n,e,t={}){return!!z2(n,e,t)}function fy(n,e,t){var r;if(!n||!e)return;let s=n.parent.childAfter(n.parentOffset);if((!s.node||!s.node.marks.some(p=>p.type===e))&&(s=n.parent.childBefore(n.parentOffset)),!s.node||!s.node.marks.some(p=>p.type===e)||(t=t||((r=s.node.marks[0])===null||r===void 0?void 0:r.attrs),!z2([...s.node.marks],e,t)))return;let l=s.index,u=n.start()+s.offset,d=l+1,h=u+s.node.nodeSize;for(;l>0&&tS([...n.parent.child(l-1).marks],e,t);)l-=1,u-=n.parent.child(l).nodeSize;for(;d<n.parent.childCount&&tS([...n.parent.child(d).marks],e,t);)h+=n.parent.child(d).nodeSize,d+=1;return{from:u,to:h}}function oo(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const tj=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const o=oo(n,r.schema),{doc:l,selection:u}=t,{$from:d,from:h,to:p}=u;if(s){const m=fy(d,o,e);if(m&&m.from<=h&&m.to>=p){const b=Be.create(l,m.from,m.to);t.setSelection(b)}}return!0},nj=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function hy(n){return n instanceof Be}function rs(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function I2(n,e=null){if(!e)return null;const t=Ue.atStart(n),r=Ue.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const s=t.from,o=r.to;return e==="all"?Be.create(n,rs(0,s,o),rs(n.content.size,s,o)):Be.create(n,rs(e,s,o),rs(e,s,o))}function H2(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Oh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const rj=(n=null,e={})=>({editor:t,view:r,tr:s,dispatch:o})=>{e={scrollIntoView:!0,...e};const l=()=>{(Oh()||H2())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(o&&n===null&&!hy(t.state.selection))return l(),!0;const u=I2(s.doc,n)||t.state.selection,d=t.state.selection.eq(u);return o&&(d||s.setSelection(u),d&&s.storedMarks&&s.setStoredMarks(s.storedMarks),l()),!0},ij=(n,e)=>t=>n.every((r,s)=>e(r,{...t,index:s})),sj=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),U2=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&U2(r)}return n};function Fd(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return U2(t)}function Xc(n,e,t){if(n instanceof Js||n instanceof ne)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,s=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return ne.fromArray(n.map(u=>e.nodeFromJSON(u)));const l=e.nodeFromJSON(n);return t.errorOnInvalidContent&&l.check(),l}catch(o){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),Xc("",e,t)}if(s){if(t.errorOnInvalidContent){let l=!1,u="";const d=new SC({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(l=!0,u=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?Zs.fromSchema(d).parseSlice(Fd(n),t.parseOptions):Zs.fromSchema(d).parse(Fd(n),t.parseOptions),t.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const o=Zs.fromSchema(e);return t.slice?o.parseSlice(Fd(n),t.parseOptions).content:o.parse(Fd(n),t.parseOptions)}return Xc("",e,t)}function oj(n,e,t){const r=n.steps.length-1;if(r<e)return;const s=n.steps[r];if(!(s instanceof wn||s instanceof Cn))return;const o=n.mapping.maps[r];let l=0;o.forEach((u,d,h,p)=>{l===0&&(l=p)}),n.setSelection(Ue.near(n.doc.resolve(l),t))}const aj=n=>!("type"in n),lj=(n,e,t)=>({tr:r,dispatch:s,editor:o})=>{var l;if(s){t={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;const d=C=>{o.emit("contentError",{editor:o,error:C,disableCollaboration:()=>{o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Xc(e,o.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(C){d(C)}try{u=Xc(e,o.schema,{parseOptions:h,errorOnInvalidContent:(l=t.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck})}catch(C){return d(C),!1}let{from:p,to:m}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},b=!0,v=!0;if((aj(u)?u:[u]).forEach(C=>{C.check(),b=b?C.isText&&C.marks.length===0:!1,v=v?C.isBlock:!1}),p===m&&v){const{parent:C}=r.doc.resolve(p);C.isTextblock&&!C.type.spec.code&&!C.childCount&&(p-=1,m+=1)}let S;if(b){if(Array.isArray(e))S=e.map(C=>C.text||"").join("");else if(e instanceof ne){let C="";e.forEach(N=>{N.text&&(C+=N.text)}),S=C}else typeof e=="object"&&e&&e.text?S=e.text:S=e;r.insertText(S,p,m)}else S=u,r.replaceWith(p,m,S);t.updateSelection&&oj(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:S}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:S})}return!0},cj=()=>({state:n,dispatch:e})=>c4(n,e),uj=()=>({state:n,dispatch:e})=>u4(n,e),dj=()=>({state:n,dispatch:e})=>S2(n,e),fj=()=>({state:n,dispatch:e})=>N2(n,e),hj=()=>({state:n,dispatch:e,tr:t})=>{try{const r=vh(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},pj=()=>({state:n,dispatch:e,tr:t})=>{try{const r=vh(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},mj=()=>({state:n,dispatch:e})=>a4(n,e),gj=()=>({state:n,dispatch:e})=>l4(n,e);function $2(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function yj(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,s,o,l;for(let u=0;u<e.length-1;u+=1){const d=e[u];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))s=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))Oh()||$2()?l=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),l&&(t=`Meta-${t}`),o&&(t=`Shift-${t}`),t}const bj=n=>({editor:e,view:t,tr:r,dispatch:s})=>{const o=yj(n).split(/-(?!$)/),l=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),u=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,u))});return d==null||d.steps.forEach(h=>{const p=h.map(r.mapping);p&&s&&r.maybeStep(p)}),!0};function Jc(n,e,t={}){const{from:r,to:s,empty:o}=n.selection,l=e?Nn(e,n.schema):null,u=[];n.doc.nodesBetween(r,s,(m,b)=>{if(m.isText)return;const v=Math.max(r,b),w=Math.min(s,b+m.nodeSize);u.push({node:m,from:v,to:w})});const d=s-r,h=u.filter(m=>l?l.name===m.node.type.name:!0).filter(m=>jf(m.node.attrs,t,{strict:!1}));return o?!!h.length:h.reduce((m,b)=>m+b.to-b.from,0)>=d}const vj=(n,e={})=>({state:t,dispatch:r})=>{const s=Nn(n,t.schema);return Jc(t,s,e)?d4(t,r):!1},xj=()=>({state:n,dispatch:e})=>O2(n,e),wj=n=>({state:e,dispatch:t})=>{const r=Nn(n,e.schema);return E4(r)(e,t)},Sj=()=>({state:n,dispatch:e})=>k2(n,e);function Rh(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function nS(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,s)=>(t.includes(s)||(r[s]=n[s]),r),{})}const Ej=(n,e)=>({tr:t,state:r,dispatch:s})=>{let o=null,l=null;const u=Rh(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(o=Nn(n,r.schema)),u==="mark"&&(l=oo(n,r.schema)),s&&t.selection.ranges.forEach(d=>{r.doc.nodesBetween(d.$from.pos,d.$to.pos,(h,p)=>{o&&o===h.type&&t.setNodeMarkup(p,void 0,nS(h.attrs,e)),l&&h.marks.length&&h.marks.forEach(m=>{l===m.type&&t.addMark(p,p+h.nodeSize,l.create(nS(m.attrs,e)))})})}),!0):!1},Cj=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),Tj=()=>({tr:n,dispatch:e})=>{if(e){const t=new Or(n.doc);n.setSelection(t)}return!0},Nj=()=>({state:n,dispatch:e})=>C2(n,e),Aj=()=>({state:n,dispatch:e})=>A2(n,e),kj=()=>({state:n,dispatch:e})=>m4(n,e),Mj=()=>({state:n,dispatch:e})=>b4(n,e),Oj=()=>({state:n,dispatch:e})=>y4(n,e);function c0(n,e,t={},r={}){return Xc(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const Rj=(n,e=!1,t={},r={})=>({editor:s,tr:o,dispatch:l,commands:u})=>{var d,h;const{doc:p}=o;if(t.preserveWhitespace!=="full"){const m=c0(n,s.schema,t,{errorOnInvalidContent:(d=r.errorOnInvalidContent)!==null&&d!==void 0?d:s.options.enableContentCheck});return l&&o.replaceWith(0,p.content.size,m).setMeta("preventUpdate",!e),!0}return l&&o.setMeta("preventUpdate",!e),u.insertContentAt({from:0,to:p.content.size},n,{parseOptions:t,errorOnInvalidContent:(h=r.errorOnInvalidContent)!==null&&h!==void 0?h:s.options.enableContentCheck})};function q2(n,e){const t=oo(e,n.schema),{from:r,to:s,empty:o}=n.selection,l=[];o?(n.storedMarks&&l.push(...n.storedMarks),l.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,s,d=>{l.push(...d.marks)});const u=l.find(d=>d.type.name===t.name);return u?{...u.attrs}:{}}function Dj(n,e){const t=new K0(n);return e.forEach(r=>{r.steps.forEach(s=>{t.step(s)})}),t}function py(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Vo(n,e){const t=[];return n.descendants((r,s)=>{e(r)&&t.push({node:r,pos:s})}),t}function _j(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(s,o)=>{t(s)&&r.push({node:s,pos:o})}),r}function P2(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function hl(n){return e=>P2(e.$from,n)}function jj(n,e){const t={from:0,to:n.content.size};return L2(n,t,e)}function Lj(n,e){const t=Nn(e,n.schema),{from:r,to:s}=n.selection,o=[];n.doc.nodesBetween(r,s,u=>{o.push(u)});const l=o.reverse().find(u=>u.type.name===t.name);return l?{...l.attrs}:{}}function V2(n,e){const t=Rh(typeof e=="string"?e:e.name,n.schema);return t==="node"?Lj(n,e):t==="mark"?q2(n,e):{}}function Bj(n,e=JSON.stringify){const t={};return n.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(t,s)?!1:t[s]=!0})}function zj(n){const e=Bj(n);return e.length===1?e:e.filter((t,r)=>!e.filter((o,l)=>l!==r).some(o=>t.oldRange.from>=o.oldRange.from&&t.oldRange.to<=o.oldRange.to&&t.newRange.from>=o.newRange.from&&t.newRange.to<=o.newRange.to))}function Ij(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((s,o)=>{const l=[];if(s.ranges.length)s.forEach((u,d)=>{l.push({from:u,to:d})});else{const{from:u,to:d}=t[o];if(u===void 0||d===void 0)return;l.push({from:u,to:d})}l.forEach(({from:u,to:d})=>{const h=e.slice(o).map(u,-1),p=e.slice(o).map(d),m=e.invert().map(h,-1),b=e.invert().map(p);r.push({oldRange:{from:m,to:b},newRange:{from:h,to:p}})})}),zj(r)}function my(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(s=>{const o=t.resolve(n),l=fy(o,s.type);l&&r.push({mark:s,...l})}):t.nodesBetween(n,e,(s,o)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(l=>({from:o,to:o+s.nodeSize,mark:l})))}),r}function uf(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const s=n.find(o=>o.type===e&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}function u0(n,e,t={}){const{empty:r,ranges:s}=n.selection,o=e?oo(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(m=>o?o.name===m.type.name:!0).find(m=>jf(m.attrs,t,{strict:!1}));let l=0;const u=[];if(s.forEach(({$from:m,$to:b})=>{const v=m.pos,w=b.pos;n.doc.nodesBetween(v,w,(S,C)=>{if(!S.isText&&!S.marks.length)return;const N=Math.max(v,C),L=Math.min(w,C+S.nodeSize),_=L-N;l+=_,u.push(...S.marks.map(k=>({mark:k,from:N,to:L})))})}),l===0)return!1;const d=u.filter(m=>o?o.name===m.mark.type.name:!0).filter(m=>jf(m.mark.attrs,t,{strict:!1})).reduce((m,b)=>m+b.to-b.from,0),h=u.filter(m=>o?m.mark.type!==o&&m.mark.type.excludes(o):!0).reduce((m,b)=>m+b.to-b.from,0);return(d>0?d+h:d)>=l}function F2(n,e,t={}){if(!e)return Jc(n,null,t)||u0(n,null,t);const r=Rh(e,n.schema);return r==="node"?Jc(n,e,t):r==="mark"?u0(n,e,t):!1}function rS(n,e){const{nodeExtensions:t}=Ah(e),r=t.find(l=>l.name===n);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=Ze(ke(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function Dh(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let s=!0;return n.content.forEach(o=>{s!==!1&&(Dh(o,{ignoreWhitespace:t,checkChildren:e})||(s=!1))}),s}return!1}function G2(n){return n instanceof _e}function Hj(n,e,t){const s=n.state.doc.content.size,o=rs(e,0,s),l=rs(t,0,s),u=n.coordsAtPos(o),d=n.coordsAtPos(l,-1),h=Math.min(u.top,d.top),p=Math.max(u.bottom,d.bottom),m=Math.min(u.left,d.left),b=Math.max(u.right,d.right),v=b-m,w=p-h,N={top:h,bottom:p,left:m,right:b,width:v,height:w,x:m,y:h};return{...N,toJSON:()=>N}}function Uj(n,e,t){var r;const{selection:s}=e;let o=null;if(hy(s)&&(o=s.$cursor),o){const u=(r=n.storedMarks)!==null&&r!==void 0?r:o.marks();return!!t.isInSet(u)||!u.some(d=>d.type.excludes(t))}const{ranges:l}=s;return l.some(({$from:u,$to:d})=>{let h=u.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(u.pos,d.pos,(p,m,b)=>{if(h)return!1;if(p.isInline){const v=!b||b.type.allowsMarkType(t),w=!!t.isInSet(p.marks)||!p.marks.some(S=>S.type.excludes(t));h=v&&w}return!h}),h})}const $j=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const{selection:o}=t,{empty:l,ranges:u}=o,d=oo(n,r.schema);if(s)if(l){const h=q2(r,d);t.addStoredMark(d.create({...h,...e}))}else u.forEach(h=>{const p=h.$from.pos,m=h.$to.pos;r.doc.nodesBetween(p,m,(b,v)=>{const w=Math.max(v,p),S=Math.min(v+b.nodeSize,m);b.marks.find(N=>N.type===d)?b.marks.forEach(N=>{d===N.type&&t.addMark(w,S,d.create({...N.attrs,...e}))}):t.addMark(w,S,d.create(e))})});return Uj(r,t,d)},qj=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Pj=(n,e={})=>({state:t,dispatch:r,chain:s})=>{const o=Nn(n,t.schema);let l;return t.selection.$anchor.sameParent(t.selection.$head)&&(l=t.selection.$anchor.parent.attrs),o.isTextblock?s().command(({commands:u})=>Xw(o,{...l,...e})(t)?!0:u.clearNodes()).command(({state:u})=>Xw(o,{...l,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Vj=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,s=rs(n,0,r.content.size),o=_e.create(r,s);e.setSelection(o)}return!0},Fj=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:s,to:o}=typeof n=="number"?{from:n,to:n}:n,l=Be.atStart(r).from,u=Be.atEnd(r).to,d=rs(s,l,u),h=rs(o,l,u),p=Be.create(r,d,h);e.setSelection(p)}return!0},Gj=n=>({state:e,dispatch:t})=>{const r=Nn(n,e.schema);return N4(r)(e,t)};function iS(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(s=>e==null?void 0:e.includes(s.type.name));n.tr.ensureMarks(r)}}const Kj=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:s})=>{const{selection:o,doc:l}=e,{$from:u,$to:d}=o,h=s.extensionManager.attributes,p=uf(h,u.node().type.name,u.node().attrs);if(o instanceof _e&&o.node.isBlock)return!u.parentOffset||!ss(l,u.pos)?!1:(r&&(n&&iS(t,s.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const m=d.parentOffset===d.parent.content.size,b=u.depth===0?void 0:py(u.node(-1).contentMatchAt(u.indexAfter(-1)));let v=m&&b?[{type:b,attrs:p}]:void 0,w=ss(e.doc,e.mapping.map(u.pos),1,v);if(!v&&!w&&ss(e.doc,e.mapping.map(u.pos),1,b?[{type:b}]:void 0)&&(w=!0,v=b?[{type:b,attrs:p}]:void 0),r){if(w&&(o instanceof Be&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,v),b&&!m&&!u.parentOffset&&u.parent.type!==b)){const S=e.mapping.map(u.before()),C=e.doc.resolve(S);u.node(-1).canReplaceWith(C.index(),C.index()+1,b)&&e.setNodeMarkup(e.mapping.map(u.before()),b)}n&&iS(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return w},Wj=(n,e={})=>({tr:t,state:r,dispatch:s,editor:o})=>{var l;const u=Nn(n,r.schema),{$from:d,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||d.depth<2||!d.sameParent(h))return!1;const m=d.node(-1);if(m.type!==u)return!1;const b=o.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==u||d.index(-2)!==d.node(-2).childCount-1)return!1;if(s){let N=ne.empty;const L=d.index(-1)?1:d.index(-2)?2:3;for(let Y=d.depth-L;Y>=d.depth-3;Y-=1)N=ne.from(d.node(Y).copy(N));const _=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,k={...uf(b,d.node().type.name,d.node().attrs),...e},$=((l=u.contentMatch.defaultType)===null||l===void 0?void 0:l.createAndFill(k))||void 0;N=N.append(ne.from(u.createAndFill(null,$)||void 0));const z=d.before(d.depth-(L-1));t.replace(z,d.after(-_),new be(N,4-L,0));let H=-1;t.doc.nodesBetween(z,t.doc.content.size,(Y,re)=>{if(H>-1)return!1;Y.isTextblock&&Y.content.size===0&&(H=re+1)}),H>-1&&t.setSelection(Be.near(t.doc.resolve(H))),t.scrollIntoView()}return!0}const v=h.pos===d.end()?m.contentMatchAt(0).defaultType:null,w={...uf(b,m.type.name,m.attrs),...e},S={...uf(b,d.node().type.name,d.node().attrs),...e};t.delete(d.pos,h.pos);const C=v?[{type:u,attrs:w},{type:v,attrs:S}]:[{type:u,attrs:w}];if(!ss(t.doc,d.pos,2))return!1;if(s){const{selection:N,storedMarks:L}=r,{splittableMarks:_}=o.extensionManager,k=L||N.$to.parentOffset&&N.$from.marks();if(t.split(d.pos,2,C).scrollIntoView(),!k||!s)return!0;const $=k.filter(z=>_.includes(z.type.name));t.ensureMarks($)}return!0},yg=(n,e)=>{const t=hl(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&io(n.doc,t.pos)&&n.join(t.pos),!0},bg=(n,e)=>{const t=hl(l=>l.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&io(n.doc,r)&&n.join(r),!0},Qj=(n,e,t,r={})=>({editor:s,tr:o,state:l,dispatch:u,chain:d,commands:h,can:p})=>{const{extensions:m,splittableMarks:b}=s.extensionManager,v=Nn(n,l.schema),w=Nn(e,l.schema),{selection:S,storedMarks:C}=l,{$from:N,$to:L}=S,_=N.blockRange(L),k=C||S.$to.parentOffset&&S.$from.marks();if(!_)return!1;const $=hl(z=>rS(z.type.name,m))(S);if(_.depth>=1&&$&&_.depth-$.depth<=1){if($.node.type===v)return h.liftListItem(w);if(rS($.node.type.name,m)&&v.validContent($.node.content)&&u)return d().command(()=>(o.setNodeMarkup($.pos,v),!0)).command(()=>yg(o,v)).command(()=>bg(o,v)).run()}return!t||!k||!u?d().command(()=>p().wrapInList(v,r)?!0:h.clearNodes()).wrapInList(v,r).command(()=>yg(o,v)).command(()=>bg(o,v)).run():d().command(()=>{const z=p().wrapInList(v,r),H=k.filter(Y=>b.includes(Y.type.name));return o.ensureMarks(H),z?!0:h.clearNodes()}).wrapInList(v,r).command(()=>yg(o,v)).command(()=>bg(o,v)).run()},Yj=(n,e={},t={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=t,l=oo(n,r.schema);return u0(r,l,e)?s.unsetMark(l,{extendEmptyMarkRange:o}):s.setMark(l,e)},Xj=(n,e,t={})=>({state:r,commands:s})=>{const o=Nn(n,r.schema),l=Nn(e,r.schema),u=Jc(r,o,t);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),u?s.setNode(l,d):s.setNode(o,{...d,...t})},Jj=(n,e={})=>({state:t,commands:r})=>{const s=Nn(n,t.schema);return Jc(t,s,e)?r.lift(s):r.wrapIn(s,e)},Zj=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const s=t[r];let o;if(s.spec.isInputRules&&(o=s.getState(n))){if(e){const l=n.tr,u=o.transform;for(let d=u.steps.length-1;d>=0;d-=1)l.step(u.steps[d].invert(u.docs[d]));if(o.text){const d=l.doc.resolve(o.from).marks();l.replaceWith(o.from,o.to,n.schema.text(o.text,d))}else l.delete(o.from,o.to)}return!0}}return!1},eL=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:s}=t;return r||e&&s.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},tL=(n,e={})=>({tr:t,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:l=!1}=e,{selection:u}=t,d=oo(n,r.schema),{$from:h,empty:p,ranges:m}=u;if(!s)return!0;if(p&&l){let{from:b,to:v}=u;const w=(o=h.marks().find(C=>C.type===d))===null||o===void 0?void 0:o.attrs,S=fy(h,d,w);S&&(b=S.from,v=S.to),t.removeMark(b,v,d)}else m.forEach(b=>{t.removeMark(b.$from.pos,b.$to.pos,d)});return t.removeStoredMark(d),!0},nL=(n,e={})=>({tr:t,state:r,dispatch:s})=>{let o=null,l=null;const u=Rh(typeof n=="string"?n:n.name,r.schema);return u?(u==="node"&&(o=Nn(n,r.schema)),u==="mark"&&(l=oo(n,r.schema)),s&&t.selection.ranges.forEach(d=>{const h=d.$from.pos,p=d.$to.pos;let m,b,v,w;t.selection.empty?r.doc.nodesBetween(h,p,(S,C)=>{o&&o===S.type&&(v=Math.max(C,h),w=Math.min(C+S.nodeSize,p),m=C,b=S)}):r.doc.nodesBetween(h,p,(S,C)=>{C<h&&o&&o===S.type&&(v=Math.max(C,h),w=Math.min(C+S.nodeSize,p),m=C,b=S),C>=h&&C<=p&&(o&&o===S.type&&t.setNodeMarkup(C,void 0,{...S.attrs,...e}),l&&S.marks.length&&S.marks.forEach(N=>{if(l===N.type){const L=Math.max(C,h),_=Math.min(C+S.nodeSize,p);t.addMark(L,_,l.create({...N.attrs,...e}))}}))}),b&&(m!==void 0&&t.setNodeMarkup(m,void 0,{...b.attrs,...e}),l&&b.marks.length&&b.marks.forEach(S=>{l===S.type&&t.addMark(v,w,l.create({...S.attrs,...e}))}))}),!0):!1},rL=(n,e={})=>({state:t,dispatch:r})=>{const s=Nn(n,t.schema);return v4(s,e)(t,r)},iL=(n,e={})=>({state:t,dispatch:r})=>{const s=Nn(n,t.schema);return x4(s,e)(t,r)};var sL=Object.freeze({__proto__:null,blur:P4,clearContent:V4,clearNodes:F4,command:G4,createParagraphNear:K4,cut:W4,deleteCurrentNode:Q4,deleteNode:Y4,deleteRange:X4,deleteSelection:J4,enter:Z4,exitCode:ej,extendMarkRange:tj,first:nj,focus:rj,forEach:ij,insertContent:sj,insertContentAt:lj,joinBackward:dj,joinDown:uj,joinForward:fj,joinItemBackward:hj,joinItemForward:pj,joinTextblockBackward:mj,joinTextblockForward:gj,joinUp:cj,keyboardShortcut:bj,lift:vj,liftEmptyBlock:xj,liftListItem:wj,newlineInCode:Sj,resetAttributes:Ej,scrollIntoView:Cj,selectAll:Tj,selectNodeBackward:Nj,selectNodeForward:Aj,selectParentNode:kj,selectTextblockEnd:Mj,selectTextblockStart:Oj,setContent:Rj,setMark:$j,setMeta:qj,setNode:Pj,setNodeSelection:Vj,setTextSelection:Fj,sinkListItem:Gj,splitBlock:Kj,splitListItem:Wj,toggleList:Qj,toggleMark:Yj,toggleNode:Xj,toggleWrap:Jj,undoInputRule:Zj,unsetAllMarks:eL,unsetMark:tL,updateAttributes:nL,wrapIn:rL,wrapInList:iL});const oL=An.create({name:"commands",addCommands(){return{...sL}}}),aL=An.create({name:"drop",addProseMirrorPlugins(){return[new Pt({key:new cn("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),lL=An.create({name:"editable",addProseMirrorPlugins(){return[new Pt({key:new cn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),cL=new cn("focusEvents"),uL=An.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Pt({key:cL,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),dL=An.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:u})=>{const{selection:d,doc:h}=u,{empty:p,$anchor:m}=d,{pos:b,parent:v}=m,w=m.parent.isTextblock&&b>0?u.doc.resolve(b-1):m,S=w.parent.type.spec.isolating,C=m.pos-m.parentOffset,N=S&&w.parent.childCount===1?C===m.pos:Ue.atStart(h).from===b;return!p||!v.type.isTextblock||v.textContent.length||!N||N&&m.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Oh()||$2()?o:s},addProseMirrorPlugins(){return[new Pt({key:new cn("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(S=>S.getMeta("composition")))return;const r=n.some(S=>S.docChanged)&&!e.doc.eq(t.doc),s=n.some(S=>S.getMeta("preventClearDocument"));if(!r||s)return;const{empty:o,from:l,to:u}=e.selection,d=Ue.atStart(e.doc).from,h=Ue.atEnd(e.doc).to;if(o||!(l===d&&u===h)||!Dh(t.doc))return;const b=t.tr,v=Th({state:t,transaction:b}),{commands:w}=new Nh({editor:this.editor,state:v});if(w.clearNodes(),!!b.steps.length)return b}})]}}),fL=An.create({name:"paste",addProseMirrorPlugins(){return[new Pt({key:new cn("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),hL=An.create({name:"tabindex",addProseMirrorPlugins(){return[new Pt({key:new cn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class _o{get name(){return this.node.type.name}constructor(e,t,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new _o(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new _o(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new _o(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const s=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,l=this.pos+r+(o?0:1);if(l<0||l>this.resolvedPos.doc.nodeSize-2)return;const u=this.resolvedPos.doc.resolve(l);if(!s&&u.depth<=this.depth)return;const d=new _o(u,this.editor,s,s?t:null);s&&(d.actualDepth=this.depth+1),e.push(new _o(u,this.editor,s,s?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(t).length>0){const o=s.node.attrs,l=Object.keys(t);for(let u=0;u<l.length;u+=1){const d=l[u];if(o[d]!==t[d])break}}else r=s;s=s.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const o=Object.keys(t);return this.children.forEach(l=>{r&&s.length>0||(l.node.type.name===e&&o.every(d=>t[d]===l.node.attrs[d])&&s.push(l),!(r&&s.length>0)&&(s=s.concat(l.querySelectorAll(e,t,r))))}),s}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const pL=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function mL(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(s),s}class gL extends A4{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:s})=>this.options.onDrop(t,r,s)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=mL(pL,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=j2(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(o=>{const l=typeof o=="string"?`${o}$`:o.key;r=r.filter(u=>!u.key.startsWith(l))}),t.length===r.length)return;const s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}createExtensionManager(){var e,t;const s=[...this.options.enableCoreExtensions?[lL,q4.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),oL,uL,dL,hL,aL,fL].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o==null?void 0:o.type));this.extensionManager=new Ya(s,this)}createCommandManager(){this.commandManager=new Nh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=c0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(l){if(!(l instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(l.message))throw l;this.emit("contentError",{editor:this,error:l,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(u=>u.name!=="collaboration"),this.createExtensionManager()}}),t=c0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=I2(t,this.options.autofocus);this.view=new x2(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Qa.create({doc:t,selection:r||void 0})});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.prependClass();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(l=>{var u;return(u=this.capturedTransaction)===null||u===void 0?void 0:u.step(l)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),o=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return V2(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,s=typeof e=="string"?t:e;return F2(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return uy(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return jj(this.state.doc,{blockSeparator:t,textSerializers:{...B2(this.schema),...r}})}get isEmpty(){return Dh(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new _o(t,this)}get $doc(){return this.$pos(0)}}function il(n){return new kh({find:n.find,handler:({state:e,range:t,match:r})=>{const s=Ze(n.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],u=r[0];if(l){const d=u.search(/\S/),h=t.from+u.indexOf(l),p=h+l.length;if(my(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(S=>S===n.type&&S!==v.mark.type)).filter(v=>v.to>h).length)return null;p<t.to&&o.delete(p,t.to),h>t.from&&o.delete(t.from+d,h);const b=t.from+d+l.length;o.addMark(t.from+d,b,n.type.create(s||{})),o.removeStoredMark(n.type)}}})}function K2(n){return new kh({find:n.find,handler:({state:e,range:t,match:r})=>{const s=Ze(n.getAttributes,void 0,r)||{},{tr:o}=e,l=t.from;let u=t.to;const d=n.type.create(s);if(r[1]){const h=r[0].lastIndexOf(r[1]);let p=l+h;p>u?p=u:u=p+r[1].length;const m=r[0][r[0].length-1];o.insertText(m,l+r[0].length-1),o.replaceWith(p,u,d)}else if(r[0]){const h=n.type.isInline?l:l-1;o.insert(h,n.type.create(s)).delete(o.mapping.map(l),o.mapping.map(u))}o.scrollIntoView()}})}function d0(n){return new kh({find:n.find,handler:({state:e,range:t,match:r})=>{const s=e.doc.resolve(t.from),o=Ze(n.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,o)}})}function Zc(n){return new kh({find:n.find,handler:({state:e,range:t,match:r,chain:s})=>{const o=Ze(n.getAttributes,void 0,r)||{},l=e.tr.delete(t.from,t.to),d=l.doc.resolve(t.from).blockRange(),h=d&&G0(d,n.type,o);if(!h)return null;if(l.wrap(d,h),n.keepMarks&&n.editor){const{selection:m,storedMarks:b}=e,{splittableMarks:v}=n.editor.extensionManager,w=b||m.$to.parentOffset&&m.$from.marks();if(w){const S=w.filter(C=>v.includes(C.type.name));l.ensureMarks(S)}}if(n.keepAttributes){const m=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(m,o).run()}const p=l.doc.resolve(t.from-1).nodeBefore;p&&p.type===n.type&&io(l.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,p))&&l.join(t.from-1)}})}class qt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ze(ke(this,"addOptions",{name:this.name}))),this.storage=Ze(ke(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new qt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Mh(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new qt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Ze(ke(t,"addOptions",{name:t.name})),t.storage=Ze(ke(t,"addStorage",{name:t.name,options:t.options})),t}}class yL{constructor(e,t,r){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,r,s,o,l,u,d;const{view:h}=this.editor,p=e.target,m=p.nodeType===3?(t=p.parentElement)===null||t===void 0?void 0:t.closest("[data-drag-handle]"):p.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(p)||!m)return;let b=0,v=0;if(this.dom!==m){const L=this.dom.getBoundingClientRect(),_=m.getBoundingClientRect(),k=(s=e.offsetX)!==null&&s!==void 0?s:(o=e.nativeEvent)===null||o===void 0?void 0:o.offsetX,$=(l=e.offsetY)!==null&&l!==void 0?l:(u=e.nativeEvent)===null||u===void 0?void 0:u.offsetY;b=_.x-L.x+k,v=_.y-L.y+$}const w=this.dom.cloneNode(!0);(d=e.dataTransfer)===null||d===void 0||d.setDragImage(w,b,v);const S=this.getPos();if(typeof S!="number")return;const C=_e.create(h.state.doc,S),N=h.state.tr.setSelection(C);h.dispatch(N)}stopEvent(e){var t;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((t=this.contentDOM)===null||t===void 0)&&t.contains(r))))return!1;const o=e.type.startsWith("drag"),l=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!l&&!o)return!0;const{isEditable:d}=this.editor,{isDragging:h}=this,p=!!this.node.type.spec.draggable,m=_e.isSelectable(this.node),b=e.type==="copy",v=e.type==="paste",w=e.type==="cut",S=e.type==="mousedown";if(!p&&m&&o&&e.target===this.dom&&e.preventDefault(),p&&o&&!h&&e.target===this.dom)return e.preventDefault(),!1;if(p&&d&&!h&&S){const C=r.closest("[data-drag-handle]");C&&(this.dom===C||this.dom.contains(C))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(h||l||b||v||w||S&&m)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(Oh()||H2())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const r=this.getPos();return typeof r!="number"?!1:(t.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}function Jo(n){return new B4({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:s})=>{const o=Ze(n.getAttributes,void 0,r,s);if(o===!1||o===null)return null;const{tr:l}=e,u=r[r.length-1],d=r[0];let h=t.to;if(u){const p=d.search(/\S/),m=t.from+d.indexOf(u),b=m+u.length;if(my(t.from,t.to,e.doc).filter(w=>w.mark.type.excluded.find(C=>C===n.type&&C!==w.mark.type)).filter(w=>w.to>m).length)return null;b<t.to&&l.delete(b,t.to),m>t.from&&l.delete(t.from+p,m),h=t.from+p+u.length,l.addMark(t.from+p,h,n.type.create(o||{})),l.removeStoredMark(n.type)}}})}function bL(n,e){const{selection:t}=n,{$from:r}=t;if(t instanceof _e){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let s=r.depth;for(;s>=0;){const o=r.index(s);if(r.node(s).contentMatchAt(o).matchType(e))return!0;s-=1}return!1}function vL(n){return n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}var pr="top",Xr="bottom",Jr="right",mr="left",gy="auto",hu=[pr,Xr,Jr,mr],sl="start",eu="end",xL="clippingParents",W2="viewport",hc="popper",wL="reference",sS=hu.reduce(function(n,e){return n.concat([e+"-"+sl,e+"-"+eu])},[]),Q2=[].concat(hu,[gy]).reduce(function(n,e){return n.concat([e,e+"-"+sl,e+"-"+eu])},[]),SL="beforeRead",EL="read",CL="afterRead",TL="beforeMain",NL="main",AL="afterMain",kL="beforeWrite",ML="write",OL="afterWrite",RL=[SL,EL,CL,TL,NL,AL,kL,ML,OL];function Ni(n){return n?(n.nodeName||"").toLowerCase():null}function Rr(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Zo(n){var e=Rr(n).Element;return n instanceof e||n instanceof Element}function Yr(n){var e=Rr(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function yy(n){if(typeof ShadowRoot>"u")return!1;var e=Rr(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function DL(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},s=e.attributes[t]||{},o=e.elements[t];!Yr(o)||!Ni(o)||(Object.assign(o.style,r),Object.keys(s).forEach(function(l){var u=s[l];u===!1?o.removeAttribute(l):o.setAttribute(l,u===!0?"":u)}))})}function _L(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],o=e.attributes[r]||{},l=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),u=l.reduce(function(d,h){return d[h]="",d},{});!Yr(s)||!Ni(s)||(Object.assign(s.style,u),Object.keys(o).forEach(function(d){s.removeAttribute(d)}))})}}const Y2={name:"applyStyles",enabled:!0,phase:"write",fn:DL,effect:_L,requires:["computeStyles"]};function Si(n){return n.split("-")[0]}var Fo=Math.max,Lf=Math.min,ol=Math.round;function f0(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function X2(){return!/^((?!chrome|android).)*safari/i.test(f0())}function al(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),s=1,o=1;e&&Yr(n)&&(s=n.offsetWidth>0&&ol(r.width)/n.offsetWidth||1,o=n.offsetHeight>0&&ol(r.height)/n.offsetHeight||1);var l=Zo(n)?Rr(n):window,u=l.visualViewport,d=!X2()&&t,h=(r.left+(d&&u?u.offsetLeft:0))/s,p=(r.top+(d&&u?u.offsetTop:0))/o,m=r.width/s,b=r.height/o;return{width:m,height:b,top:p,right:h+m,bottom:p+b,left:h,x:h,y:p}}function by(n){var e=al(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function J2(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&yy(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function cs(n){return Rr(n).getComputedStyle(n)}function jL(n){return["table","td","th"].indexOf(Ni(n))>=0}function ao(n){return((Zo(n)?n.ownerDocument:n.document)||window.document).documentElement}function _h(n){return Ni(n)==="html"?n:n.assignedSlot||n.parentNode||(yy(n)?n.host:null)||ao(n)}function oS(n){return!Yr(n)||cs(n).position==="fixed"?null:n.offsetParent}function LL(n){var e=/firefox/i.test(f0()),t=/Trident/i.test(f0());if(t&&Yr(n)){var r=cs(n);if(r.position==="fixed")return null}var s=_h(n);for(yy(s)&&(s=s.host);Yr(s)&&["html","body"].indexOf(Ni(s))<0;){var o=cs(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function pu(n){for(var e=Rr(n),t=oS(n);t&&jL(t)&&cs(t).position==="static";)t=oS(t);return t&&(Ni(t)==="html"||Ni(t)==="body"&&cs(t).position==="static")?e:t||LL(n)||e}function vy(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function kc(n,e,t){return Fo(n,Lf(e,t))}function BL(n,e,t){var r=kc(n,e,t);return r>t?t:r}function Z2(){return{top:0,right:0,bottom:0,left:0}}function eT(n){return Object.assign({},Z2(),n)}function tT(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var zL=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,eT(typeof e!="number"?e:tT(e,hu))};function IL(n){var e,t=n.state,r=n.name,s=n.options,o=t.elements.arrow,l=t.modifiersData.popperOffsets,u=Si(t.placement),d=vy(u),h=[mr,Jr].indexOf(u)>=0,p=h?"height":"width";if(!(!o||!l)){var m=zL(s.padding,t),b=by(o),v=d==="y"?pr:mr,w=d==="y"?Xr:Jr,S=t.rects.reference[p]+t.rects.reference[d]-l[d]-t.rects.popper[p],C=l[d]-t.rects.reference[d],N=pu(o),L=N?d==="y"?N.clientHeight||0:N.clientWidth||0:0,_=S/2-C/2,k=m[v],$=L-b[p]-m[w],z=L/2-b[p]/2+_,H=kc(k,z,$),Y=d;t.modifiersData[r]=(e={},e[Y]=H,e.centerOffset=H-z,e)}}function HL(n){var e=n.state,t=n.options,r=t.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||J2(e.elements.popper,s)&&(e.elements.arrow=s))}const UL={name:"arrow",enabled:!0,phase:"main",fn:IL,effect:HL,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ll(n){return n.split("-")[1]}var $L={top:"auto",right:"auto",bottom:"auto",left:"auto"};function qL(n,e){var t=n.x,r=n.y,s=e.devicePixelRatio||1;return{x:ol(t*s)/s||0,y:ol(r*s)/s||0}}function aS(n){var e,t=n.popper,r=n.popperRect,s=n.placement,o=n.variation,l=n.offsets,u=n.position,d=n.gpuAcceleration,h=n.adaptive,p=n.roundOffsets,m=n.isFixed,b=l.x,v=b===void 0?0:b,w=l.y,S=w===void 0?0:w,C=typeof p=="function"?p({x:v,y:S}):{x:v,y:S};v=C.x,S=C.y;var N=l.hasOwnProperty("x"),L=l.hasOwnProperty("y"),_=mr,k=pr,$=window;if(h){var z=pu(t),H="clientHeight",Y="clientWidth";if(z===Rr(t)&&(z=ao(t),cs(z).position!=="static"&&u==="absolute"&&(H="scrollHeight",Y="scrollWidth")),z=z,s===pr||(s===mr||s===Jr)&&o===eu){k=Xr;var re=m&&z===$&&$.visualViewport?$.visualViewport.height:z[H];S-=re-r.height,S*=d?1:-1}if(s===mr||(s===pr||s===Xr)&&o===eu){_=Jr;var ge=m&&z===$&&$.visualViewport?$.visualViewport.width:z[Y];v-=ge-r.width,v*=d?1:-1}}var Ce=Object.assign({position:u},h&&$L),pe=p===!0?qL({x:v,y:S},Rr(t)):{x:v,y:S};if(v=pe.x,S=pe.y,d){var ae;return Object.assign({},Ce,(ae={},ae[k]=L?"0":"",ae[_]=N?"0":"",ae.transform=($.devicePixelRatio||1)<=1?"translate("+v+"px, "+S+"px)":"translate3d("+v+"px, "+S+"px, 0)",ae))}return Object.assign({},Ce,(e={},e[k]=L?S+"px":"",e[_]=N?v+"px":"",e.transform="",e))}function PL(n){var e=n.state,t=n.options,r=t.gpuAcceleration,s=r===void 0?!0:r,o=t.adaptive,l=o===void 0?!0:o,u=t.roundOffsets,d=u===void 0?!0:u,h={placement:Si(e.placement),variation:ll(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,aS(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,aS(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const VL={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:PL,data:{}};var Gd={passive:!0};function FL(n){var e=n.state,t=n.instance,r=n.options,s=r.scroll,o=s===void 0?!0:s,l=r.resize,u=l===void 0?!0:l,d=Rr(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&h.forEach(function(p){p.addEventListener("scroll",t.update,Gd)}),u&&d.addEventListener("resize",t.update,Gd),function(){o&&h.forEach(function(p){p.removeEventListener("scroll",t.update,Gd)}),u&&d.removeEventListener("resize",t.update,Gd)}}const GL={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:FL,data:{}};var KL={left:"right",right:"left",bottom:"top",top:"bottom"};function df(n){return n.replace(/left|right|bottom|top/g,function(e){return KL[e]})}var WL={start:"end",end:"start"};function lS(n){return n.replace(/start|end/g,function(e){return WL[e]})}function xy(n){var e=Rr(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function wy(n){return al(ao(n)).left+xy(n).scrollLeft}function QL(n,e){var t=Rr(n),r=ao(n),s=t.visualViewport,o=r.clientWidth,l=r.clientHeight,u=0,d=0;if(s){o=s.width,l=s.height;var h=X2();(h||!h&&e==="fixed")&&(u=s.offsetLeft,d=s.offsetTop)}return{width:o,height:l,x:u+wy(n),y:d}}function YL(n){var e,t=ao(n),r=xy(n),s=(e=n.ownerDocument)==null?void 0:e.body,o=Fo(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),l=Fo(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),u=-r.scrollLeft+wy(n),d=-r.scrollTop;return cs(s||t).direction==="rtl"&&(u+=Fo(t.clientWidth,s?s.clientWidth:0)-o),{width:o,height:l,x:u,y:d}}function Sy(n){var e=cs(n),t=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+r)}function nT(n){return["html","body","#document"].indexOf(Ni(n))>=0?n.ownerDocument.body:Yr(n)&&Sy(n)?n:nT(_h(n))}function Mc(n,e){var t;e===void 0&&(e=[]);var r=nT(n),s=r===((t=n.ownerDocument)==null?void 0:t.body),o=Rr(r),l=s?[o].concat(o.visualViewport||[],Sy(r)?r:[]):r,u=e.concat(l);return s?u:u.concat(Mc(_h(l)))}function h0(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function XL(n,e){var t=al(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function cS(n,e,t){return e===W2?h0(QL(n,t)):Zo(e)?XL(e,t):h0(YL(ao(n)))}function JL(n){var e=Mc(_h(n)),t=["absolute","fixed"].indexOf(cs(n).position)>=0,r=t&&Yr(n)?pu(n):n;return Zo(r)?e.filter(function(s){return Zo(s)&&J2(s,r)&&Ni(s)!=="body"}):[]}function ZL(n,e,t,r){var s=e==="clippingParents"?JL(n):[].concat(e),o=[].concat(s,[t]),l=o[0],u=o.reduce(function(d,h){var p=cS(n,h,r);return d.top=Fo(p.top,d.top),d.right=Lf(p.right,d.right),d.bottom=Lf(p.bottom,d.bottom),d.left=Fo(p.left,d.left),d},cS(n,l,r));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function rT(n){var e=n.reference,t=n.element,r=n.placement,s=r?Si(r):null,o=r?ll(r):null,l=e.x+e.width/2-t.width/2,u=e.y+e.height/2-t.height/2,d;switch(s){case pr:d={x:l,y:e.y-t.height};break;case Xr:d={x:l,y:e.y+e.height};break;case Jr:d={x:e.x+e.width,y:u};break;case mr:d={x:e.x-t.width,y:u};break;default:d={x:e.x,y:e.y}}var h=s?vy(s):null;if(h!=null){var p=h==="y"?"height":"width";switch(o){case sl:d[h]=d[h]-(e[p]/2-t[p]/2);break;case eu:d[h]=d[h]+(e[p]/2-t[p]/2);break}}return d}function tu(n,e){e===void 0&&(e={});var t=e,r=t.placement,s=r===void 0?n.placement:r,o=t.strategy,l=o===void 0?n.strategy:o,u=t.boundary,d=u===void 0?xL:u,h=t.rootBoundary,p=h===void 0?W2:h,m=t.elementContext,b=m===void 0?hc:m,v=t.altBoundary,w=v===void 0?!1:v,S=t.padding,C=S===void 0?0:S,N=eT(typeof C!="number"?C:tT(C,hu)),L=b===hc?wL:hc,_=n.rects.popper,k=n.elements[w?L:b],$=ZL(Zo(k)?k:k.contextElement||ao(n.elements.popper),d,p,l),z=al(n.elements.reference),H=rT({reference:z,element:_,placement:s}),Y=h0(Object.assign({},_,H)),re=b===hc?Y:z,ge={top:$.top-re.top+N.top,bottom:re.bottom-$.bottom+N.bottom,left:$.left-re.left+N.left,right:re.right-$.right+N.right},Ce=n.modifiersData.offset;if(b===hc&&Ce){var pe=Ce[s];Object.keys(ge).forEach(function(ae){var ie=[Jr,Xr].indexOf(ae)>=0?1:-1,he=[pr,Xr].indexOf(ae)>=0?"y":"x";ge[ae]+=pe[he]*ie})}return ge}function eB(n,e){e===void 0&&(e={});var t=e,r=t.placement,s=t.boundary,o=t.rootBoundary,l=t.padding,u=t.flipVariations,d=t.allowedAutoPlacements,h=d===void 0?Q2:d,p=ll(r),m=p?u?sS:sS.filter(function(w){return ll(w)===p}):hu,b=m.filter(function(w){return h.indexOf(w)>=0});b.length===0&&(b=m);var v=b.reduce(function(w,S){return w[S]=tu(n,{placement:S,boundary:s,rootBoundary:o,padding:l})[Si(S)],w},{});return Object.keys(v).sort(function(w,S){return v[w]-v[S]})}function tB(n){if(Si(n)===gy)return[];var e=df(n);return[lS(n),e,lS(e)]}function nB(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var s=t.mainAxis,o=s===void 0?!0:s,l=t.altAxis,u=l===void 0?!0:l,d=t.fallbackPlacements,h=t.padding,p=t.boundary,m=t.rootBoundary,b=t.altBoundary,v=t.flipVariations,w=v===void 0?!0:v,S=t.allowedAutoPlacements,C=e.options.placement,N=Si(C),L=N===C,_=d||(L||!w?[df(C)]:tB(C)),k=[C].concat(_).reduce(function(oe,ue){return oe.concat(Si(ue)===gy?eB(e,{placement:ue,boundary:p,rootBoundary:m,padding:h,flipVariations:w,allowedAutoPlacements:S}):ue)},[]),$=e.rects.reference,z=e.rects.popper,H=new Map,Y=!0,re=k[0],ge=0;ge<k.length;ge++){var Ce=k[ge],pe=Si(Ce),ae=ll(Ce)===sl,ie=[pr,Xr].indexOf(pe)>=0,he=ie?"width":"height",O=tu(e,{placement:Ce,boundary:p,rootBoundary:m,altBoundary:b,padding:h}),R=ie?ae?Jr:mr:ae?Xr:pr;$[he]>z[he]&&(R=df(R));var I=df(R),ee=[];if(o&&ee.push(O[pe]<=0),u&&ee.push(O[R]<=0,O[I]<=0),ee.every(function(oe){return oe})){re=Ce,Y=!1;break}H.set(Ce,ee)}if(Y)for(var ce=w?3:1,D=function(ue){var ve=k.find(function(ze){var se=H.get(ze);if(se)return se.slice(0,ue).every(function(Ie){return Ie})});if(ve)return re=ve,"break"},V=ce;V>0;V--){var W=D(V);if(W==="break")break}e.placement!==re&&(e.modifiersData[r]._skip=!0,e.placement=re,e.reset=!0)}}const rB={name:"flip",enabled:!0,phase:"main",fn:nB,requiresIfExists:["offset"],data:{_skip:!1}};function uS(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function dS(n){return[pr,Jr,Xr,mr].some(function(e){return n[e]>=0})}function iB(n){var e=n.state,t=n.name,r=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,l=tu(e,{elementContext:"reference"}),u=tu(e,{altBoundary:!0}),d=uS(l,r),h=uS(u,s,o),p=dS(d),m=dS(h);e.modifiersData[t]={referenceClippingOffsets:d,popperEscapeOffsets:h,isReferenceHidden:p,hasPopperEscaped:m},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":m})}const sB={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:iB};function oB(n,e,t){var r=Si(n),s=[mr,pr].indexOf(r)>=0?-1:1,o=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,l=o[0],u=o[1];return l=l||0,u=(u||0)*s,[mr,Jr].indexOf(r)>=0?{x:u,y:l}:{x:l,y:u}}function aB(n){var e=n.state,t=n.options,r=n.name,s=t.offset,o=s===void 0?[0,0]:s,l=Q2.reduce(function(p,m){return p[m]=oB(m,e.rects,o),p},{}),u=l[e.placement],d=u.x,h=u.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=h),e.modifiersData[r]=l}const lB={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:aB};function cB(n){var e=n.state,t=n.name;e.modifiersData[t]=rT({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const uB={name:"popperOffsets",enabled:!0,phase:"read",fn:cB,data:{}};function dB(n){return n==="x"?"y":"x"}function fB(n){var e=n.state,t=n.options,r=n.name,s=t.mainAxis,o=s===void 0?!0:s,l=t.altAxis,u=l===void 0?!1:l,d=t.boundary,h=t.rootBoundary,p=t.altBoundary,m=t.padding,b=t.tether,v=b===void 0?!0:b,w=t.tetherOffset,S=w===void 0?0:w,C=tu(e,{boundary:d,rootBoundary:h,padding:m,altBoundary:p}),N=Si(e.placement),L=ll(e.placement),_=!L,k=vy(N),$=dB(k),z=e.modifiersData.popperOffsets,H=e.rects.reference,Y=e.rects.popper,re=typeof S=="function"?S(Object.assign({},e.rects,{placement:e.placement})):S,ge=typeof re=="number"?{mainAxis:re,altAxis:re}:Object.assign({mainAxis:0,altAxis:0},re),Ce=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,pe={x:0,y:0};if(z){if(o){var ae,ie=k==="y"?pr:mr,he=k==="y"?Xr:Jr,O=k==="y"?"height":"width",R=z[k],I=R+C[ie],ee=R-C[he],ce=v?-Y[O]/2:0,D=L===sl?H[O]:Y[O],V=L===sl?-Y[O]:-H[O],W=e.elements.arrow,oe=v&&W?by(W):{width:0,height:0},ue=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Z2(),ve=ue[ie],ze=ue[he],se=kc(0,H[O],oe[O]),Ie=_?H[O]/2-ce-se-ve-ge.mainAxis:D-se-ve-ge.mainAxis,mt=_?-H[O]/2+ce+se+ze+ge.mainAxis:V+se+ze+ge.mainAxis,Vt=e.elements.arrow&&pu(e.elements.arrow),bn=Vt?k==="y"?Vt.clientTop||0:Vt.clientLeft||0:0,tr=(ae=Ce==null?void 0:Ce[k])!=null?ae:0,Ft=R+Ie-tr-bn,Kn=R+mt-tr,Rt=kc(v?Lf(I,Ft):I,R,v?Fo(ee,Kn):ee);z[k]=Rt,pe[k]=Rt-R}if(u){var kn,Hn=k==="x"?pr:mr,Ae=k==="x"?Xr:Jr,tn=z[$],ct=$==="y"?"height":"width",Pe=tn+C[Hn],It=tn-C[Ae],tt=[pr,mr].indexOf(N)!==-1,Wn=(kn=Ce==null?void 0:Ce[$])!=null?kn:0,Gt=tt?Pe:tn-H[ct]-Y[ct]-Wn+ge.altAxis,me=tt?tn+H[ct]+Y[ct]-Wn-ge.altAxis:It,Se=v&&tt?BL(Gt,tn,me):kc(v?Gt:Pe,tn,v?me:It);z[$]=Se,pe[$]=Se-tn}e.modifiersData[r]=pe}}const hB={name:"preventOverflow",enabled:!0,phase:"main",fn:fB,requiresIfExists:["offset"]};function pB(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function mB(n){return n===Rr(n)||!Yr(n)?xy(n):pB(n)}function gB(n){var e=n.getBoundingClientRect(),t=ol(e.width)/n.offsetWidth||1,r=ol(e.height)/n.offsetHeight||1;return t!==1||r!==1}function yB(n,e,t){t===void 0&&(t=!1);var r=Yr(e),s=Yr(e)&&gB(e),o=ao(e),l=al(n,s,t),u={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!t)&&((Ni(e)!=="body"||Sy(o))&&(u=mB(e)),Yr(e)?(d=al(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):o&&(d.x=wy(o))),{x:l.left+u.scrollLeft-d.x,y:l.top+u.scrollTop-d.y,width:l.width,height:l.height}}function bB(n){var e=new Map,t=new Set,r=[];n.forEach(function(o){e.set(o.name,o)});function s(o){t.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(u){if(!t.has(u)){var d=e.get(u);d&&s(d)}}),r.push(o)}return n.forEach(function(o){t.has(o.name)||s(o)}),r}function vB(n){var e=bB(n);return RL.reduce(function(t,r){return t.concat(e.filter(function(s){return s.phase===r}))},[])}function xB(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function wB(n){var e=n.reduce(function(t,r){var s=t[r.name];return t[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var fS={placement:"bottom",modifiers:[],strategy:"absolute"};function hS(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function SB(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,s=e.defaultOptions,o=s===void 0?fS:s;return function(u,d,h){h===void 0&&(h=o);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},fS,o),modifiersData:{},elements:{reference:u,popper:d},attributes:{},styles:{}},m=[],b=!1,v={state:p,setOptions:function(N){var L=typeof N=="function"?N(p.options):N;S(),p.options=Object.assign({},o,p.options,L),p.scrollParents={reference:Zo(u)?Mc(u):u.contextElement?Mc(u.contextElement):[],popper:Mc(d)};var _=vB(wB([].concat(r,p.options.modifiers)));return p.orderedModifiers=_.filter(function(k){return k.enabled}),w(),v.update()},forceUpdate:function(){if(!b){var N=p.elements,L=N.reference,_=N.popper;if(hS(L,_)){p.rects={reference:yB(L,pu(_),p.options.strategy==="fixed"),popper:by(_)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(ge){return p.modifiersData[ge.name]=Object.assign({},ge.data)});for(var k=0;k<p.orderedModifiers.length;k++){if(p.reset===!0){p.reset=!1,k=-1;continue}var $=p.orderedModifiers[k],z=$.fn,H=$.options,Y=H===void 0?{}:H,re=$.name;typeof z=="function"&&(p=z({state:p,options:Y,name:re,instance:v})||p)}}}},update:xB(function(){return new Promise(function(C){v.forceUpdate(),C(p)})}),destroy:function(){S(),b=!0}};if(!hS(u,d))return v;v.setOptions(h).then(function(C){!b&&h.onFirstUpdate&&h.onFirstUpdate(C)});function w(){p.orderedModifiers.forEach(function(C){var N=C.name,L=C.options,_=L===void 0?{}:L,k=C.effect;if(typeof k=="function"){var $=k({state:p,name:N,instance:v,options:_}),z=function(){};m.push($||z)}})}function S(){m.forEach(function(C){return C()}),m=[]}return v}}var EB=[GL,uB,VL,Y2,lB,rB,hB,UL,sB],CB=SB({defaultModifiers:EB}),TB="tippy-box",iT="tippy-content",NB="tippy-backdrop",sT="tippy-arrow",oT="tippy-svg-arrow",Oo={passive:!0,capture:!0},aT=function(){return document.body};function vg(n,e,t){if(Array.isArray(n)){var r=n[e];return r??(Array.isArray(t)?t[e]:t)}return n}function Ey(n,e){var t={}.toString.call(n);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function lT(n,e){return typeof n=="function"?n.apply(void 0,e):n}function pS(n,e){if(e===0)return n;var t;return function(r){clearTimeout(t),t=setTimeout(function(){n(r)},e)}}function AB(n){return n.split(/\s+/).filter(Boolean)}function Ga(n){return[].concat(n)}function mS(n,e){n.indexOf(e)===-1&&n.push(e)}function kB(n){return n.filter(function(e,t){return n.indexOf(e)===t})}function MB(n){return n.split("-")[0]}function Bf(n){return[].slice.call(n)}function gS(n){return Object.keys(n).reduce(function(e,t){return n[t]!==void 0&&(e[t]=n[t]),e},{})}function Oc(){return document.createElement("div")}function jh(n){return["Element","Fragment"].some(function(e){return Ey(n,e)})}function OB(n){return Ey(n,"NodeList")}function RB(n){return Ey(n,"MouseEvent")}function DB(n){return!!(n&&n._tippy&&n._tippy.reference===n)}function _B(n){return jh(n)?[n]:OB(n)?Bf(n):Array.isArray(n)?n:Bf(document.querySelectorAll(n))}function xg(n,e){n.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function yS(n,e){n.forEach(function(t){t&&t.setAttribute("data-state",e)})}function jB(n){var e,t=Ga(n),r=t[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function LB(n,e){var t=e.clientX,r=e.clientY;return n.every(function(s){var o=s.popperRect,l=s.popperState,u=s.props,d=u.interactiveBorder,h=MB(l.placement),p=l.modifiersData.offset;if(!p)return!0;var m=h==="bottom"?p.top.y:0,b=h==="top"?p.bottom.y:0,v=h==="right"?p.left.x:0,w=h==="left"?p.right.x:0,S=o.top-r+m>d,C=r-o.bottom-b>d,N=o.left-t+v>d,L=t-o.right-w>d;return S||C||N||L})}function wg(n,e,t){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(s){n[r](s,t)})}function bS(n,e){for(var t=e;t;){var r;if(n.contains(t))return!0;t=t.getRootNode==null||(r=t.getRootNode())==null?void 0:r.host}return!1}var yi={isTouch:!1},vS=0;function BB(){yi.isTouch||(yi.isTouch=!0,window.performance&&document.addEventListener("mousemove",cT))}function cT(){var n=performance.now();n-vS<20&&(yi.isTouch=!1,document.removeEventListener("mousemove",cT)),vS=n}function zB(){var n=document.activeElement;if(DB(n)){var e=n._tippy;n.blur&&!e.state.isVisible&&n.blur()}}function IB(){document.addEventListener("touchstart",BB,Oo),window.addEventListener("blur",zB)}var HB=typeof window<"u"&&typeof document<"u",UB=HB?!!window.msCrypto:!1,$B={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},qB={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ii=Object.assign({appendTo:aT,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},$B,qB),PB=Object.keys(ii),VB=function(e){var t=Object.keys(e);t.forEach(function(r){ii[r]=e[r]})};function uT(n){var e=n.plugins||[],t=e.reduce(function(r,s){var o=s.name,l=s.defaultValue;if(o){var u;r[o]=n[o]!==void 0?n[o]:(u=ii[o])!=null?u:l}return r},{});return Object.assign({},n,t)}function FB(n,e){var t=e?Object.keys(uT(Object.assign({},ii,{plugins:e}))):PB,r=t.reduce(function(s,o){var l=(n.getAttribute("data-tippy-"+o)||"").trim();if(!l)return s;if(o==="content")s[o]=l;else try{s[o]=JSON.parse(l)}catch{s[o]=l}return s},{});return r}function xS(n,e){var t=Object.assign({},e,{content:lT(e.content,[n])},e.ignoreAttributes?{}:FB(n,e.plugins));return t.aria=Object.assign({},ii.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var GB=function(){return"innerHTML"};function p0(n,e){n[GB()]=e}function wS(n){var e=Oc();return n===!0?e.className=sT:(e.className=oT,jh(n)?e.appendChild(n):p0(e,n)),e}function SS(n,e){jh(e.content)?(p0(n,""),n.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?p0(n,e.content):n.textContent=e.content)}function m0(n){var e=n.firstElementChild,t=Bf(e.children);return{box:e,content:t.find(function(r){return r.classList.contains(iT)}),arrow:t.find(function(r){return r.classList.contains(sT)||r.classList.contains(oT)}),backdrop:t.find(function(r){return r.classList.contains(NB)})}}function dT(n){var e=Oc(),t=Oc();t.className=TB,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var r=Oc();r.className=iT,r.setAttribute("data-state","hidden"),SS(r,n.props),e.appendChild(t),t.appendChild(r),s(n.props,n.props);function s(o,l){var u=m0(e),d=u.box,h=u.content,p=u.arrow;l.theme?d.setAttribute("data-theme",l.theme):d.removeAttribute("data-theme"),typeof l.animation=="string"?d.setAttribute("data-animation",l.animation):d.removeAttribute("data-animation"),l.inertia?d.setAttribute("data-inertia",""):d.removeAttribute("data-inertia"),d.style.maxWidth=typeof l.maxWidth=="number"?l.maxWidth+"px":l.maxWidth,l.role?d.setAttribute("role",l.role):d.removeAttribute("role"),(o.content!==l.content||o.allowHTML!==l.allowHTML)&&SS(h,n.props),l.arrow?p?o.arrow!==l.arrow&&(d.removeChild(p),d.appendChild(wS(l.arrow))):d.appendChild(wS(l.arrow)):p&&d.removeChild(p)}return{popper:e,onUpdate:s}}dT.$$tippy=!0;var KB=1,Kd=[],Sg=[];function WB(n,e){var t=xS(n,Object.assign({},ii,uT(gS(e)))),r,s,o,l=!1,u=!1,d=!1,h=!1,p,m,b,v=[],w=pS(Ft,t.interactiveDebounce),S,C=KB++,N=null,L=kB(t.plugins),_={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},k={id:C,reference:n,popper:Oc(),popperInstance:N,props:t,state:_,plugins:L,clearDelayTimeouts:Gt,setProps:me,setContent:Se,show:Ve,hide:Ke,hideWithInteractivity:Dt,enable:tt,disable:Wn,unmount:Qt,destroy:gr};if(!t.render)return k;var $=t.render(k),z=$.popper,H=$.onUpdate;z.setAttribute("data-tippy-root",""),z.id="tippy-"+k.id,k.popper=z,n._tippy=k,z._tippy=k;var Y=L.map(function(K){return K.fn(k)}),re=n.hasAttribute("aria-expanded");return Vt(),ce(),R(),I("onCreate",[k]),t.showOnCreate&&Pe(),z.addEventListener("mouseenter",function(){k.props.interactive&&k.state.isVisible&&k.clearDelayTimeouts()}),z.addEventListener("mouseleave",function(){k.props.interactive&&k.props.trigger.indexOf("mouseenter")>=0&&ie().addEventListener("mousemove",w)}),k;function ge(){var K=k.props.touch;return Array.isArray(K)?K:[K,0]}function Ce(){return ge()[0]==="hold"}function pe(){var K;return!!((K=k.props.render)!=null&&K.$$tippy)}function ae(){return S||n}function ie(){var K=ae().parentNode;return K?jB(K):document}function he(){return m0(z)}function O(K){return k.state.isMounted&&!k.state.isVisible||yi.isTouch||p&&p.type==="focus"?0:vg(k.props.delay,K?0:1,ii.delay)}function R(K){K===void 0&&(K=!1),z.style.pointerEvents=k.props.interactive&&!K?"":"none",z.style.zIndex=""+k.props.zIndex}function I(K,we,Te){if(Te===void 0&&(Te=!0),Y.forEach(function(We){We[K]&&We[K].apply(We,we)}),Te){var at;(at=k.props)[K].apply(at,we)}}function ee(){var K=k.props.aria;if(K.content){var we="aria-"+K.content,Te=z.id,at=Ga(k.props.triggerTarget||n);at.forEach(function(We){var bt=We.getAttribute(we);if(k.state.isVisible)We.setAttribute(we,bt?bt+" "+Te:Te);else{var Yt=bt&&bt.replace(Te,"").trim();Yt?We.setAttribute(we,Yt):We.removeAttribute(we)}})}}function ce(){if(!(re||!k.props.aria.expanded)){var K=Ga(k.props.triggerTarget||n);K.forEach(function(we){k.props.interactive?we.setAttribute("aria-expanded",k.state.isVisible&&we===ae()?"true":"false"):we.removeAttribute("aria-expanded")})}}function D(){ie().removeEventListener("mousemove",w),Kd=Kd.filter(function(K){return K!==w})}function V(K){if(!(yi.isTouch&&(d||K.type==="mousedown"))){var we=K.composedPath&&K.composedPath()[0]||K.target;if(!(k.props.interactive&&bS(z,we))){if(Ga(k.props.triggerTarget||n).some(function(Te){return bS(Te,we)})){if(yi.isTouch||k.state.isVisible&&k.props.trigger.indexOf("click")>=0)return}else I("onClickOutside",[k,K]);k.props.hideOnClick===!0&&(k.clearDelayTimeouts(),k.hide(),u=!0,setTimeout(function(){u=!1}),k.state.isMounted||ve())}}}function W(){d=!0}function oe(){d=!1}function ue(){var K=ie();K.addEventListener("mousedown",V,!0),K.addEventListener("touchend",V,Oo),K.addEventListener("touchstart",oe,Oo),K.addEventListener("touchmove",W,Oo)}function ve(){var K=ie();K.removeEventListener("mousedown",V,!0),K.removeEventListener("touchend",V,Oo),K.removeEventListener("touchstart",oe,Oo),K.removeEventListener("touchmove",W,Oo)}function ze(K,we){Ie(K,function(){!k.state.isVisible&&z.parentNode&&z.parentNode.contains(z)&&we()})}function se(K,we){Ie(K,we)}function Ie(K,we){var Te=he().box;function at(We){We.target===Te&&(wg(Te,"remove",at),we())}if(K===0)return we();wg(Te,"remove",m),wg(Te,"add",at),m=at}function mt(K,we,Te){Te===void 0&&(Te=!1);var at=Ga(k.props.triggerTarget||n);at.forEach(function(We){We.addEventListener(K,we,Te),v.push({node:We,eventType:K,handler:we,options:Te})})}function Vt(){Ce()&&(mt("touchstart",tr,{passive:!0}),mt("touchend",Kn,{passive:!0})),AB(k.props.trigger).forEach(function(K){if(K!=="manual")switch(mt(K,tr),K){case"mouseenter":mt("mouseleave",Kn);break;case"focus":mt(UB?"focusout":"blur",Rt);break;case"focusin":mt("focusout",Rt);break}})}function bn(){v.forEach(function(K){var we=K.node,Te=K.eventType,at=K.handler,We=K.options;we.removeEventListener(Te,at,We)}),v=[]}function tr(K){var we,Te=!1;if(!(!k.state.isEnabled||kn(K)||u)){var at=((we=p)==null?void 0:we.type)==="focus";p=K,S=K.currentTarget,ce(),!k.state.isVisible&&RB(K)&&Kd.forEach(function(We){return We(K)}),K.type==="click"&&(k.props.trigger.indexOf("mouseenter")<0||l)&&k.props.hideOnClick!==!1&&k.state.isVisible?Te=!0:Pe(K),K.type==="click"&&(l=!Te),Te&&!at&&It(K)}}function Ft(K){var we=K.target,Te=ae().contains(we)||z.contains(we);if(!(K.type==="mousemove"&&Te)){var at=ct().concat(z).map(function(We){var bt,Yt=We._tippy,Qn=(bt=Yt.popperInstance)==null?void 0:bt.state;return Qn?{popperRect:We.getBoundingClientRect(),popperState:Qn,props:t}:null}).filter(Boolean);LB(at,K)&&(D(),It(K))}}function Kn(K){var we=kn(K)||k.props.trigger.indexOf("click")>=0&&l;if(!we){if(k.props.interactive){k.hideWithInteractivity(K);return}It(K)}}function Rt(K){k.props.trigger.indexOf("focusin")<0&&K.target!==ae()||k.props.interactive&&K.relatedTarget&&z.contains(K.relatedTarget)||It(K)}function kn(K){return yi.isTouch?Ce()!==K.type.indexOf("touch")>=0:!1}function Hn(){Ae();var K=k.props,we=K.popperOptions,Te=K.placement,at=K.offset,We=K.getReferenceClientRect,bt=K.moveTransition,Yt=pe()?m0(z).arrow:null,Qn=We?{getBoundingClientRect:We,contextElement:We.contextElement||ae()}:n,yr={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(G){var le=G.state;if(pe()){var Me=he(),ut=Me.box;["placement","reference-hidden","escaped"].forEach(function($e){$e==="placement"?ut.setAttribute("data-placement",le.placement):le.attributes.popper["data-popper-"+$e]?ut.setAttribute("data-"+$e,""):ut.removeAttribute("data-"+$e)}),le.attributes.popper={}}}},_t=[{name:"offset",options:{offset:at}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!bt}},yr];pe()&&Yt&&_t.push({name:"arrow",options:{element:Yt,padding:3}}),_t.push.apply(_t,(we==null?void 0:we.modifiers)||[]),k.popperInstance=CB(Qn,z,Object.assign({},we,{placement:Te,onFirstUpdate:b,modifiers:_t}))}function Ae(){k.popperInstance&&(k.popperInstance.destroy(),k.popperInstance=null)}function tn(){var K=k.props.appendTo,we,Te=ae();k.props.interactive&&K===aT||K==="parent"?we=Te.parentNode:we=lT(K,[Te]),we.contains(z)||we.appendChild(z),k.state.isMounted=!0,Hn()}function ct(){return Bf(z.querySelectorAll("[data-tippy-root]"))}function Pe(K){k.clearDelayTimeouts(),K&&I("onTrigger",[k,K]),ue();var we=O(!0),Te=ge(),at=Te[0],We=Te[1];yi.isTouch&&at==="hold"&&We&&(we=We),we?r=setTimeout(function(){k.show()},we):k.show()}function It(K){if(k.clearDelayTimeouts(),I("onUntrigger",[k,K]),!k.state.isVisible){ve();return}if(!(k.props.trigger.indexOf("mouseenter")>=0&&k.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(K.type)>=0&&l)){var we=O(!1);we?s=setTimeout(function(){k.state.isVisible&&k.hide()},we):o=requestAnimationFrame(function(){k.hide()})}}function tt(){k.state.isEnabled=!0}function Wn(){k.hide(),k.state.isEnabled=!1}function Gt(){clearTimeout(r),clearTimeout(s),cancelAnimationFrame(o)}function me(K){if(!k.state.isDestroyed){I("onBeforeUpdate",[k,K]),bn();var we=k.props,Te=xS(n,Object.assign({},we,gS(K),{ignoreAttributes:!0}));k.props=Te,Vt(),we.interactiveDebounce!==Te.interactiveDebounce&&(D(),w=pS(Ft,Te.interactiveDebounce)),we.triggerTarget&&!Te.triggerTarget?Ga(we.triggerTarget).forEach(function(at){at.removeAttribute("aria-expanded")}):Te.triggerTarget&&n.removeAttribute("aria-expanded"),ce(),R(),H&&H(we,Te),k.popperInstance&&(Hn(),ct().forEach(function(at){requestAnimationFrame(at._tippy.popperInstance.forceUpdate)})),I("onAfterUpdate",[k,K])}}function Se(K){k.setProps({content:K})}function Ve(){var K=k.state.isVisible,we=k.state.isDestroyed,Te=!k.state.isEnabled,at=yi.isTouch&&!k.props.touch,We=vg(k.props.duration,0,ii.duration);if(!(K||we||Te||at)&&!ae().hasAttribute("disabled")&&(I("onShow",[k],!1),k.props.onShow(k)!==!1)){if(k.state.isVisible=!0,pe()&&(z.style.visibility="visible"),R(),ue(),k.state.isMounted||(z.style.transition="none"),pe()){var bt=he(),Yt=bt.box,Qn=bt.content;xg([Yt,Qn],0)}b=function(){var _t;if(!(!k.state.isVisible||h)){if(h=!0,z.offsetHeight,z.style.transition=k.props.moveTransition,pe()&&k.props.animation){var M=he(),G=M.box,le=M.content;xg([G,le],We),yS([G,le],"visible")}ee(),ce(),mS(Sg,k),(_t=k.popperInstance)==null||_t.forceUpdate(),I("onMount",[k]),k.props.animation&&pe()&&se(We,function(){k.state.isShown=!0,I("onShown",[k])})}},tn()}}function Ke(){var K=!k.state.isVisible,we=k.state.isDestroyed,Te=!k.state.isEnabled,at=vg(k.props.duration,1,ii.duration);if(!(K||we||Te)&&(I("onHide",[k],!1),k.props.onHide(k)!==!1)){if(k.state.isVisible=!1,k.state.isShown=!1,h=!1,l=!1,pe()&&(z.style.visibility="hidden"),D(),ve(),R(!0),pe()){var We=he(),bt=We.box,Yt=We.content;k.props.animation&&(xg([bt,Yt],at),yS([bt,Yt],"hidden"))}ee(),ce(),k.props.animation?pe()&&ze(at,k.unmount):k.unmount()}}function Dt(K){ie().addEventListener("mousemove",w),mS(Kd,w),w(K)}function Qt(){k.state.isVisible&&k.hide(),k.state.isMounted&&(Ae(),ct().forEach(function(K){K._tippy.unmount()}),z.parentNode&&z.parentNode.removeChild(z),Sg=Sg.filter(function(K){return K!==k}),k.state.isMounted=!1,I("onHidden",[k]))}function gr(){k.state.isDestroyed||(k.clearDelayTimeouts(),k.unmount(),bn(),delete n._tippy,k.state.isDestroyed=!0,I("onDestroy",[k]))}}function pl(n,e){e===void 0&&(e={});var t=ii.plugins.concat(e.plugins||[]);IB();var r=Object.assign({},e,{plugins:t}),s=_B(n),o=s.reduce(function(l,u){var d=u&&WB(u,r);return d&&l.push(d),l},[]);return jh(n)?o[0]:o}pl.defaultProps=ii;pl.setDefaultProps=VB;pl.currentInput=yi;Object.assign({},Y2,{effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow)}});pl.setDefaultProps({render:dT});class QB{constructor({editor:e,element:t,view:r,tippyOptions:s={},updateDelay:o=250,shouldShow:l}){this.preventHide=!1,this.shouldShow=({view:u,state:d,from:h,to:p})=>{const{doc:m,selection:b}=d,{empty:v}=b,w=!m.textBetween(h,p).length&&hy(d.selection),S=this.element.contains(document.activeElement);return!(!(u.hasFocus()||S)||v||w||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:u})=>{var d;if(this.preventHide){this.preventHide=!1;return}u!=null&&u.relatedTarget&&(!((d=this.element.parentNode)===null||d===void 0)&&d.contains(u.relatedTarget))||(u==null?void 0:u.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=u=>{this.blurHandler({event:u})},this.handleDebouncedUpdate=(u,d)=>{const h=!(d!=null&&d.selection.eq(u.state.selection)),p=!(d!=null&&d.doc.eq(u.state.doc));!h&&!p||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(u,h,p,d)},this.updateDelay))},this.updateHandler=(u,d,h,p)=>{var m,b,v;const{state:w,composing:S}=u,{selection:C}=w;if(S||!d&&!h)return;this.createTooltip();const{ranges:L}=C,_=Math.min(...L.map(z=>z.$from.pos)),k=Math.max(...L.map(z=>z.$to.pos));if(!((m=this.shouldShow)===null||m===void 0?void 0:m.call(this,{editor:this.editor,element:this.element,view:u,state:w,oldState:p,from:_,to:k}))){this.hide();return}(b=this.tippy)===null||b===void 0||b.setProps({getReferenceClientRect:((v=this.tippyOptions)===null||v===void 0?void 0:v.getReferenceClientRect)||(()=>{if(G2(w.selection)){let z=u.nodeDOM(_);if(z){const H=z.dataset.nodeViewWrapper?z:z.querySelector("[data-node-view-wrapper]");if(H&&(z=H.firstChild),z)return z.getBoundingClientRect()}}return Hj(u,_,k)})}),this.show()},this.editor=e,this.element=t,this.view=r,this.updateDelay=o,l&&(this.shouldShow=l),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=s,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,t=!!e.parentElement;this.element.tabIndex=0,!(this.tippy||!t)&&(this.tippy=pl(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){const{state:r}=e,s=r.selection.from!==r.selection.to;if(this.updateDelay>0&&s){this.handleDebouncedUpdate(e,t);return}const o=!(t!=null&&t.selection.eq(e.state.selection)),l=!(t!=null&&t.doc.eq(e.state.doc));this.updateHandler(e,o,l,t)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,t;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const fT=n=>new Pt({key:typeof n.pluginKey=="string"?new cn(n.pluginKey):n.pluginKey,view:e=>new QB({view:e,...n})});An.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[fT({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});function YB(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var hT={exports:{}},Eg={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ES;function XB(){if(ES)return Eg;ES=1;var n=te;function e(m,b){return m===b&&(m!==0||1/m===1/b)||m!==m&&b!==b}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function u(m,b){var v=b(),w=r({inst:{value:v,getSnapshot:b}}),S=w[0].inst,C=w[1];return o(function(){S.value=v,S.getSnapshot=b,d(S)&&C({inst:S})},[m,v,b]),s(function(){return d(S)&&C({inst:S}),m(function(){d(S)&&C({inst:S})})},[m]),l(v),v}function d(m){var b=m.getSnapshot;m=m.value;try{var v=b();return!t(m,v)}catch{return!0}}function h(m,b){return b()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return Eg.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,Eg}hT.exports=XB();var Cy=hT.exports;const JB=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},ZB=({contentComponent:n})=>{const e=Cy.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return te.createElement(te.Fragment,null,Object.values(e))};function e6(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:ZE.createPortal(r.reactElement,r.element,t)},n.forEach(s=>s())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(s=>s())}}}class t6 extends te.Component{constructor(e){var t;super(e),this.editorContentRef=te.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=e6(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return te.createElement(te.Fragment,null,te.createElement("div",{ref:JB(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&te.createElement(ZB,{contentComponent:e.contentComponent}))}}const n6=T.forwardRef((n,e)=>{const t=te.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return te.createElement(t6,{key:t,innerRef:e,...n})}),r6=te.memo(n6);var i6=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,s,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(!n(e[s],t[s]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;for(s of e.entries())if(!n(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(e[s]!==t[s])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[s]))return!1;for(s=r;s--!==0;){var l=o[s];if(!(l==="_owner"&&e.$$typeof)&&!n(e[l],t[l]))return!1}return!0}return e!==e&&t!==t},s6=YB(i6),pT={exports:{}},Cg={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CS;function o6(){if(CS)return Cg;CS=1;var n=te,e=Cy;function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,o=n.useRef,l=n.useEffect,u=n.useMemo,d=n.useDebugValue;return Cg.useSyncExternalStoreWithSelector=function(h,p,m,b,v){var w=o(null);if(w.current===null){var S={hasValue:!1,value:null};w.current=S}else S=w.current;w=u(function(){function N(z){if(!L){if(L=!0,_=z,z=b(z),v!==void 0&&S.hasValue){var H=S.value;if(v(H,z))return k=H}return k=z}if(H=k,r(_,z))return H;var Y=b(z);return v!==void 0&&v(H,Y)?H:(_=z,k=Y)}var L=!1,_,k,$=m===void 0?null:m;return[function(){return N(p())},$===null?void 0:function(){return N($())}]},[p,m,b,v]);var C=s(h,w[0],w[1]);return l(function(){S.hasValue=!0,S.value=C},[C]),d(C),C},Cg}pT.exports=o6();var a6=pT.exports;const l6=typeof window<"u"?T.useLayoutEffect:T.useEffect;class c6{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function u6(n){var e;const[t]=T.useState(()=>new c6(n.editor)),r=a6.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:s6);return l6(()=>t.watch(n.editor),[n.editor,t]),T.useDebugValue(r),r}const d6=!1,g0=typeof window>"u",f6=g0||!!(typeof window<"u"&&window.next);class Ty{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?g0||f6?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onBeforeCreate)===null||o===void 0?void 0:o.call(s,...r)},onBlur:(...r)=>{var s,o;return(o=(s=this.options.current).onBlur)===null||o===void 0?void 0:o.call(s,...r)},onCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onCreate)===null||o===void 0?void 0:o.call(s,...r)},onDestroy:(...r)=>{var s,o;return(o=(s=this.options.current).onDestroy)===null||o===void 0?void 0:o.call(s,...r)},onFocus:(...r)=>{var s,o;return(o=(s=this.options.current).onFocus)===null||o===void 0?void 0:o.call(s,...r)},onSelectionUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onSelectionUpdate)===null||o===void 0?void 0:o.call(s,...r)},onTransaction:(...r)=>{var s,o;return(o=(s=this.options.current).onTransaction)===null||o===void 0?void 0:o.call(s,...r)},onUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onUpdate)===null||o===void 0?void 0:o.call(s,...r)},onContentError:(...r)=>{var s,o;return(o=(s=this.options.current).onContentError)===null||o===void 0?void 0:o.call(s,...r)},onDrop:(...r)=>{var s,o;return(o=(s=this.options.current).onDrop)===null||o===void 0?void 0:o.call(s,...r)},onPaste:(...r)=>{var s,o;return(o=(s=this.options.current).onPaste)===null||o===void 0?void 0:o.call(s,...r)}};return new gL(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((s,o)=>{var l;return s===((l=t.extensions)===null||l===void 0?void 0:l[o])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Ty.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function h6(n={},e=[]){const t=T.useRef(n);t.current=n;const[r]=T.useState(()=>new Ty(t)),s=Cy.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return T.useDebugValue(s),T.useEffect(r.onRender(e)),u6({editor:s,selector:({transactionNumber:o})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&o===0?0:o+1}),s}const mT=T.createContext({editor:null});mT.Consumer;const p6=()=>T.useContext(mT),gT=n=>{const[e,t]=T.useState(null),{editor:r}=p6();return T.useEffect(()=>{var s;if(!e||!((s=n.editor)===null||s===void 0)&&s.isDestroyed||r!=null&&r.isDestroyed)return;const{pluginKey:o="bubbleMenu",editor:l,tippyOptions:u={},updateDelay:d,shouldShow:h=null}=n,p=l||r;if(!p){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const m=fT({updateDelay:d,editor:p,element:e,pluginKey:o,shouldShow:h,tippyOptions:u});return p.registerPlugin(m),()=>{p.unregisterPlugin(o)}},[n.editor,r,e]),te.createElement("div",{ref:t,className:n.className,style:{visibility:"hidden"}},n.children)},yT=T.createContext({onDragStart:void 0}),bT=()=>T.useContext(yT),m6=n=>{const e=n.as||"div",{nodeViewContentRef:t}=bT();return te.createElement(e,{...n,ref:t,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...n.style}})},vT=te.forwardRef((n,e)=>{const{onDragStart:t}=bT(),r=n.as||"div";return te.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});function TS(n){return!!(typeof n=="function"&&n.prototype&&n.prototype.isReactComponent)}function NS(n){return!!(typeof n=="object"&&n.$$typeof&&(n.$$typeof.toString()==="Symbol(react.forward_ref)"||n.$$typeof.description==="react.forward_ref"))}function g6(n){return!!(typeof n=="object"&&n.$$typeof&&(n.$$typeof.toString()==="Symbol(react.memo)"||n.$$typeof.description==="react.memo"))}function y6(n){if(TS(n)||NS(n))return!0;if(g6(n)){const e=n.type;if(e)return TS(e)||NS(e)}return!1}function b6(){try{if(T.version)return parseInt(T.version.split(".")[0],10)>=19}catch{}return!1}class xT{constructor(e,{editor:t,props:r={},as:s="div",className:o=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=t,this.props=r,this.element=document.createElement(s),this.element.classList.add("react-renderer"),o&&this.element.classList.add(...o.split(" ")),this.editor.isInitialized?JE.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var e;const t=this.component,r=this.props,s=this.editor,o=b6(),l=y6(t),u={...r};u.ref&&!(o||l)&&delete u.ref,!u.ref&&(o||l)&&(u.ref=d=>{this.ref=d}),this.reactElement=te.createElement(t,{...u}),(e=s==null?void 0:s.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const t=this.editor;(e=t==null?void 0:t.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}}class v6 extends yL{constructor(e,t,r){if(super(e,t,r),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const s=this.dom.querySelector("[data-node-view-content]");if(!s)return;s.appendChild(this.contentDOMElement)}}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(h={})=>this.updateAttributes(h),deleteNode:()=>this.deleteNode(),ref:T.createRef()};if(!this.component.displayName){const h=p=>p.charAt(0).toUpperCase()+p.substring(1);this.component.displayName=h(this.extension.name)}const s={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:h=>{h&&this.contentDOMElement&&h.firstChild!==this.contentDOMElement&&(h.hasAttribute("data-node-view-wrapper")&&h.removeAttribute("data-node-view-wrapper"),h.appendChild(this.contentDOMElement))}},o=this.component,l=T.memo(h=>te.createElement(yT.Provider,{value:s},T.createElement(o,h)));l.displayName="ReactNodeView";let u=this.node.isInline?"span":"div";this.options.as&&(u=this.options.as);const{className:d=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new xT(l,{editor:this.editor,props:e,as:u,className:`node-${this.node.type.name} ${d}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:t}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&t>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,t,r){const s=o=>{this.renderer.updateProps(o),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const o=this.node,l=this.decorations,u=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=r,this.options.update({oldNode:o,oldDecorations:l,newNode:e,newDecorations:t,oldInnerDecorations:u,innerDecorations:r,updateProps:()=>s({node:e,decorations:t,innerDecorations:r})})}return e===this.node&&this.decorations===t&&this.innerDecorations===r||(this.node=e,this.decorations=t,this.innerDecorations=r,s({node:e,decorations:t,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const t=this.editor.extensionManager.attributes,r=_f(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function wT(n,e){return t=>t.editor.contentComponent?new v6(n,t,e):{}}const x6=/^\s*>\s$/,w6=qt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Zc({find:x6,type:this.type})]}}),S6=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,E6=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,C6=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,T6=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,N6=Ti.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[il({find:S6,type:this.type}),il({find:C6,type:this.type})]},addPasteRules(){return[Jo({find:E6,type:this.type}),Jo({find:T6,type:this.type})]}}),A6="listItem",AS="textStyle",kS=/^\s*([-+*])\s$/,k6=qt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(A6,this.editor.getAttributes(AS)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Zc({find:kS,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Zc({find:kS,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(AS),editor:this.editor})),[n]}}),M6=/(^|[^`])`([^`]+)`(?!`)/,O6=/(^|[^`])`([^`]+)`(?!`)/g,R6=Ti.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[il({find:M6,type:this.type})]},addPasteRules(){return[Jo({find:O6,type:this.type})]}}),D6=/^```([a-z]+)?[\s\n]$/,_6=/^~~~([a-z]+)?[\s\n]$/,ST=qt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,o=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(l=>l.startsWith(t)).map(l=>l.replace(t,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",yt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:s}=t;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!o||!l?!1:n.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:s,empty:o}=t;if(!o||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const u=s.after();return u===void 0?!1:r.nodeAt(u)?n.commands.command(({tr:h})=>(h.setSelection(Ue.near(r.resolve(u))),!0)):n.commands.exitCode()}}},addInputRules(){return[d0({find:D6,type:this.type,getAttributes:n=>({language:n[1]})}),d0({find:_6,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Pt({key:new cn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=s==null?void 0:s.mode;if(!t||!o)return!1;const{tr:l,schema:u}=n.state,d=u.text(t.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:o},d)),l.selection.$from.parent.type!==this.type&&l.setSelection(Be.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),n.dispatch(l),!0}}})]}}),j6=qt.create({name:"doc",topNode:!0,content:"block+"});function L6(n={}){return new Pt({view(e){return new B6(e,n)}})}class B6{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let o=l=>{this[s](l)};return e.dom.addEventListener(s,o),{name:s,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,s=this.editorView.dom,o=s.getBoundingClientRect(),l=o.width/s.offsetWidth,u=o.height/s.offsetHeight;if(t){let m=e.nodeBefore,b=e.nodeAfter;if(m||b){let v=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(v){let w=v.getBoundingClientRect(),S=m?w.bottom:w.top;m&&b&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let C=this.width/2*u;r={left:w.left,right:w.right,top:S-C,bottom:S+C}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*l;r={left:m.left-b,right:m.left+b,top:m.top,bottom:m.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let h,p;if(!d||d==document.body&&getComputedStyle(d).position=="static")h=-pageXOffset,p=-pageYOffset;else{let m=d.getBoundingClientRect(),b=m.width/d.offsetWidth,v=m.height/d.offsetHeight;h=m.left-d.scrollLeft*b,p=m.top-d.scrollTop*v}this.element.style.left=(r.left-h)/l+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=r&&r.type.spec.disableDropCursor,o=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!o){let l=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=_C(this.editorView.state.doc,l,this.editorView.dragging.slice);u!=null&&(l=u)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const z6=An.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[L6(this.options)]}});class Ut extends Ue{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Ut.valid(r)?new Ut(r):Ue.near(r)}content(){return be.empty}eq(e){return e instanceof Ut&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ut(e.resolve(t.pos))}getBookmark(){return new Ny(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!I6(e)||!H6(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Ut.valid(e))return e;let s=e.pos,o=null;for(let l=e.depth;;l--){let u=e.node(l);if(t>0?e.indexAfter(l)<u.childCount:e.index(l)>0){o=u.child(t>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;s+=t;let d=e.doc.resolve(s);if(Ut.valid(d))return d}for(;;){let l=t>0?o.firstChild:o.lastChild;if(!l){if(o.isAtom&&!o.isText&&!_e.isSelectable(o)){e=e.doc.resolve(s+o.nodeSize*t),r=!1;continue e}break}o=l,s+=t;let u=e.doc.resolve(s);if(Ut.valid(u))return u}return null}}}Ut.prototype.visible=!1;Ut.findFrom=Ut.findGapCursorFrom;Ue.jsonID("gapcursor",Ut);class Ny{constructor(e){this.pos=e}map(e){return new Ny(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Ut.valid(t)?new Ut(t):Ue.near(t)}}function ET(n){return n.isAtom||n.spec.isolating||n.spec.createGapCursor}function I6(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||ET(s.type))return!0;if(s.inlineContent)return!1}}return!0}function H6(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||ET(s.type))return!0;if(s.inlineContent)return!1}}return!0}function U6(){return new Pt({props:{decorations:V6,createSelectionBetween(n,e,t){return e.pos==t.pos&&Ut.valid(t)?new Ut(t):null},handleClick:q6,handleKeyDown:$6,handleDOMEvents:{beforeinput:P6}}})}const $6=iy({ArrowLeft:Wd("horiz",-1),ArrowRight:Wd("horiz",1),ArrowUp:Wd("vert",-1),ArrowDown:Wd("vert",1)});function Wd(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,o){let l=r.selection,u=e>0?l.$to:l.$from,d=l.empty;if(l instanceof Be){if(!o.endOfTextblock(t)||u.depth==0)return!1;d=!1,u=r.doc.resolve(e>0?u.after():u.before())}let h=Ut.findGapCursorFrom(u,e,d);return h?(s&&s(r.tr.setSelection(new Ut(h))),!0):!1}}function q6(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Ut.valid(r))return!1;let s=n.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&_e.isSelectable(n.state.doc.nodeAt(s.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Ut(r))),!0)}function P6(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Ut))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let s=ne.empty;for(let l=r.length-1;l>=0;l--)s=ne.from(r[l].createAndFill(null,s));let o=n.state.tr.replace(t.pos,t.pos,new be(s,0,0));return o.setSelection(Be.near(o.doc.resolve(t.pos+1))),n.dispatch(o),!1}function V6(n){if(!(n.selection instanceof Ut))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",zt.create(n.doc,[En.widget(n.selection.head,e,{key:"gapcursor"})])}const F6=An.create({name:"gapCursor",addProseMirrorPlugins(){return[U6()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=Ze(ke(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),G6=qt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",yt(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:s,storedMarks:o}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:u}=r.extensionManager,d=o||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&d&&l){const m=d.filter(b=>u.includes(b.type.name));h.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),K6=qt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,yt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>d0({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var zf=200,Tn=function(){};Tn.prototype.append=function(e){return e.length?(e=Tn.from(e),!this.length&&e||e.length<zf&&this.leafAppend(e)||this.length<zf&&e.leafPrepend(this)||this.appendInner(e)):this};Tn.prototype.prepend=function(e){return e.length?Tn.from(e).append(this):this};Tn.prototype.appendInner=function(e){return new W6(this,e)};Tn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Tn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Tn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Tn.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Tn.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(o,l){return s.push(e(o,l))},t,r),s};Tn.from=function(e){return e instanceof Tn?e:e&&e.length?new CT(e):Tn.empty};var CT=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,o){return s==0&&o==this.length?this:new e(this.values.slice(s,o))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,o,l,u){for(var d=o;d<l;d++)if(s(this.values[d],u+d)===!1)return!1},e.prototype.forEachInvertedInner=function(s,o,l,u){for(var d=o-1;d>=l;d--)if(s(this.values[d],u+d)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=zf)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=zf)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Tn);Tn.empty=new CT([]);var W6=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,o,l){var u=this.left.length;if(s<u&&this.left.forEachInner(r,s,Math.min(o,u),l)===!1||o>u&&this.right.forEachInner(r,Math.max(s-u,0),Math.min(this.length,o)-u,l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,o,l){var u=this.left.length;if(s>u&&this.right.forEachInvertedInner(r,s-u,Math.max(o,u)-u,l+u)===!1||o<u&&this.left.forEachInvertedInner(r,Math.min(s,u),o,l)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Tn);const Q6=500;class ni{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,o;t&&(s=this.remapping(r,this.items.length),o=s.maps.length);let l=e.tr,u,d,h=[],p=[];return this.items.forEach((m,b)=>{if(!m.step){s||(s=this.remapping(r,b+1),o=s.maps.length),o--,p.push(m);return}if(s){p.push(new pi(m.map));let v=m.step.map(s.slice(o)),w;v&&l.maybeStep(v).doc&&(w=l.mapping.maps[l.mapping.maps.length-1],h.push(new pi(w,void 0,void 0,h.length+p.length))),o--,w&&s.appendMap(w,o)}else l.maybeStep(m.step);if(m.selection)return u=s?m.selection.map(s.slice(o)):m.selection,d=new ni(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:l,selection:u}}addTransform(e,t,r,s){let o=[],l=this.eventCount,u=this.items,d=!s&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let m=e.steps[p].invert(e.docs[p]),b=new pi(e.mapping.maps[p],m,t),v;(v=d&&d.merge(b))&&(b=v,p?o.pop():u=u.slice(0,u.length-1)),o.push(b),t&&(l++,t=void 0),s||(d=b)}let h=l-r.depth;return h>X6&&(u=Y6(u,h),l-=h),new ni(u.append(o),l)}remapping(e,t){let r=new Gc;return this.items.forEach((s,o)=>{let l=s.mirrorOffset!=null&&o-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,l)},e,t),r}addMaps(e){return this.eventCount==0?this:new ni(this.items.append(e.map(t=>new pi(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-t),o=e.mapping,l=e.steps.length,u=this.eventCount;this.items.forEach(b=>{b.selection&&u--},s);let d=t;this.items.forEach(b=>{let v=o.getMirror(--d);if(v==null)return;l=Math.min(l,v);let w=o.maps[v];if(b.step){let S=e.steps[v].invert(e.docs[v]),C=b.selection&&b.selection.map(o.slice(d+1,v));C&&u++,r.push(new pi(w,S,C))}else r.push(new pi(w))},s);let h=[];for(let b=t;b<l;b++)h.push(new pi(o.maps[b]));let p=this.items.slice(0,s).append(h).append(r),m=new ni(p,u);return m.emptyItemCount()>Q6&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,s=[],o=0;return this.items.forEach((l,u)=>{if(u>=e)s.push(l),l.selection&&o++;else if(l.step){let d=l.step.map(t.slice(r)),h=d&&d.getMap();if(r--,h&&t.appendMap(h,r),d){let p=l.selection&&l.selection.map(t.slice(r));p&&o++;let m=new pi(h.invert(),d,p),b,v=s.length-1;(b=s.length&&s[v].merge(m))?s[v]=b:s.push(m)}}else l.map&&r--},this.items.length,0),new ni(Tn.from(s.reverse()),o)}}ni.empty=new ni(Tn.empty,0);function Y6(n,e){let t;return n.forEach((r,s)=>{if(r.selection&&e--==0)return t=s,!1}),n.slice(t)}class pi{constructor(e,t,r,s){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new pi(t.getMap().invert(),t,this.selection)}}}class qs{constructor(e,t,r,s,o){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=s,this.prevComposition=o}}const X6=20;function J6(n,e,t,r){let s=t.getMeta(Go),o;if(s)return s.historyState;t.getMeta(tz)&&(n=new qs(n.done,n.undone,null,0,-1));let l=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(l&&l.getMeta(Go))return l.getMeta(Go).redo?new qs(n.done.addTransform(t,void 0,r,ff(e)),n.undone,MS(t.mapping.maps),n.prevTime,n.prevComposition):new qs(n.done,n.undone.addTransform(t,void 0,r,ff(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),d=n.prevTime==0||!l&&n.prevComposition!=u&&(n.prevTime<(t.time||0)-r.newGroupDelay||!Z6(t,n.prevRanges)),h=l?Tg(n.prevRanges,t.mapping):MS(t.mapping.maps);return new qs(n.done.addTransform(t,d?e.selection.getBookmark():void 0,r,ff(e)),ni.empty,h,t.time,u??n.prevComposition)}else return(o=t.getMeta("rebased"))?new qs(n.done.rebased(t,o),n.undone.rebased(t,o),Tg(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new qs(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Tg(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function Z6(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,s)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&s>=e[o]&&(t=!0)}),t}function MS(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,s,o,l)=>e.push(o,l));return e}function Tg(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let s=e.map(n[r],1),o=e.map(n[r+1],-1);s<=o&&t.push(s,o)}return t}function ez(n,e,t){let r=ff(e),s=Go.get(e).spec.config,o=(t?n.undone:n.done).popEvent(e,r);if(!o)return null;let l=o.selection.resolve(o.transform.doc),u=(t?n.done:n.undone).addTransform(o.transform,e.selection.getBookmark(),s,r),d=new qs(t?u:o.remaining,t?o.remaining:u,null,0,-1);return o.transform.setSelection(l).setMeta(Go,{redo:t,historyState:d})}let Ng=!1,OS=null;function ff(n){let e=n.plugins;if(OS!=e){Ng=!1,OS=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Ng=!0;break}}return Ng}const Go=new cn("history"),tz=new cn("closeHistory");function nz(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Pt({key:Go,state:{init(){return new qs(ni.empty,ni.empty,null,0,-1)},apply(e,t,r){return J6(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,s=r=="historyUndo"?NT:r=="historyRedo"?AT:null;return!s||!e.editable?!1:(t.preventDefault(),s(e.state,e.dispatch))}}}})}function TT(n,e){return(t,r)=>{let s=Go.getState(t);if(!s||(n?s.undone:s.done).eventCount==0)return!1;if(r){let o=ez(s,t,n);o&&r(e?o.scrollIntoView():o)}return!0}}const NT=TT(!1,!0),AT=TT(!0,!0),rz=An.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>NT(n,e),redo:()=>({state:n,dispatch:e})=>AT(n,e)}},addProseMirrorPlugins(){return[nz(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),iz=qt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",yt(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!bL(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$from:r,$to:s}=t,o=n();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):G2(t)?o.insertContentAt(s.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:l,dispatch:u})=>{var d;if(u){const{$to:h}=l.selection,p=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?l.setSelection(Be.create(l.doc,h.pos+1)):h.nodeAfter.isBlock?l.setSelection(_e.create(l.doc,h.pos)):l.setSelection(Be.create(l.doc,h.pos));else{const m=(d=h.parent.type.contentMatch.defaultType)===null||d===void 0?void 0:d.create();m&&(l.insert(p,m),l.setSelection(Be.create(l.doc,p+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[K2({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),sz=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,oz=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,az=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,lz=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,cz=Ti.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[il({find:sz,type:this.type}),il({find:az,type:this.type})]},addPasteRules(){return[Jo({find:oz,type:this.type}),Jo({find:lz,type:this.type})]}}),uz=qt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",yt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),dz="listItem",RS="textStyle",DS=/^(\d+)\.\s$/,fz=qt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",yt(this.options.HTMLAttributes,t),0]:["ol",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(dz,this.editor.getAttributes(RS)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Zc({find:DS,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Zc({find:DS,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(RS)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),hz=qt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),pz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,mz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,gz=Ti.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[il({find:pz,type:this.type})]},addPasteRules(){return[Jo({find:mz,type:this.type})]}}),yz=qt.create({name:"text",group:"inline"}),bz=An.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(N6.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(w6.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(k6.configure(this.options.bulletList)),this.options.code!==!1&&n.push(R6.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(ST.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(j6.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(z6.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(F6.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(G6.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(K6.configure(this.options.heading)),this.options.history!==!1&&n.push(rz.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(iz.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(cz.configure(this.options.italic)),this.options.listItem!==!1&&n.push(uz.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(fz.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(hz.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(gz.configure(this.options.strike)),this.options.text!==!1&&n.push(yz.configure(this.options.text)),n}}),vz=An.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Pt({key:new cn("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!t)return null;const o=this.editor.isEmpty;return n.descendants((l,u)=>{const d=r>=u&&r<=u+l.nodeSize,h=!l.isLeaf&&Dh(l);if((d||!this.options.showOnlyCurrent)&&h){const p=[this.options.emptyNodeClass];o&&p.push(this.options.emptyEditorClass);const m=En.node(u,u+l.nodeSize,{class:p.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:l,pos:u,hasAnchor:d}):this.options.placeholder});s.push(m)}return this.options.includeChildren}),zt.create(n,s)}}})]}}),xz=Ti.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",yt(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),wz="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Sz="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",y0="numeric",b0="ascii",v0="alpha",Rc="asciinumeric",vc="alphanumeric",x0="domain",kT="emoji",Ez="scheme",Cz="slashscheme",Ag="whitespace";function Tz(n,e){return n in e||(e[n]=[]),e[n]}function Io(n,e,t){e[y0]&&(e[Rc]=!0,e[vc]=!0),e[b0]&&(e[Rc]=!0,e[v0]=!0),e[Rc]&&(e[vc]=!0),e[v0]&&(e[vc]=!0),e[vc]&&(e[x0]=!0),e[kT]&&(e[x0]=!0);for(const r in e){const s=Tz(r,t);s.indexOf(n)<0&&s.push(n)}}function Nz(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function fr(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}fr.groups={};fr.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],o=e.jr[r][1];if(o&&s.test(n))return o}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let s=0;s<n.length;s++)this.tt(n[s],e,t,r)},tr(n,e,t,r){r=r||fr.groups;let s;return e&&e.j?s=e:(s=new fr(e),t&&r&&Io(e,t,r)),this.jr.push([n,s]),s},ts(n,e,t,r){let s=this;const o=n.length;if(!o)return s;for(let l=0;l<o-1;l++)s=s.tt(n[l]);return s.tt(n[o-1],e,t,r)},tt(n,e,t,r){r=r||fr.groups;const s=this;if(e&&e.j)return s.j[n]=e,e;const o=e;let l,u=s.go(n);if(u?(l=new fr,Object.assign(l.j,u.j),l.jr.push.apply(l.jr,u.jr),l.jd=u.jd,l.t=u.t):l=new fr,o){if(r)if(l.t&&typeof l.t=="string"){const d=Object.assign(Nz(l.t,r),t);Io(o,d,r)}else t&&Io(o,t,r);l.t=o}return s.j[n]=l,l}};const Je=(n,e,t,r,s)=>n.ta(e,t,r,s),Zt=(n,e,t,r,s)=>n.tr(e,t,r,s),_S=(n,e,t,r,s)=>n.ts(e,t,r,s),fe=(n,e,t,r,s)=>n.tt(e,t,r,s),Zi="WORD",w0="UWORD",MT="ASCIINUMERICAL",OT="ALPHANUMERICAL",nu="LOCALHOST",S0="TLD",E0="UTLD",hf="SCHEME",Ka="SLASH_SCHEME",Ay="NUM",C0="WS",ky="NL",Dc="OPENBRACE",_c="CLOSEBRACE",If="OPENBRACKET",Hf="CLOSEBRACKET",Uf="OPENPAREN",$f="CLOSEPAREN",qf="OPENANGLEBRACKET",Pf="CLOSEANGLEBRACKET",Vf="FULLWIDTHLEFTPAREN",Ff="FULLWIDTHRIGHTPAREN",Gf="LEFTCORNERBRACKET",Kf="RIGHTCORNERBRACKET",Wf="LEFTWHITECORNERBRACKET",Qf="RIGHTWHITECORNERBRACKET",Yf="FULLWIDTHLESSTHAN",Xf="FULLWIDTHGREATERTHAN",Jf="AMPERSAND",Zf="APOSTROPHE",eh="ASTERISK",Ps="AT",th="BACKSLASH",nh="BACKTICK",rh="CARET",Fs="COLON",My="COMMA",ih="DOLLAR",mi="DOT",sh="EQUALS",Oy="EXCLAMATION",Pr="HYPHEN",jc="PERCENT",oh="PIPE",ah="PLUS",lh="POUND",Lc="QUERY",Ry="QUOTE",RT="FULLWIDTHMIDDLEDOT",Dy="SEMI",gi="SLASH",Bc="TILDE",ch="UNDERSCORE",DT="EMOJI",uh="SYM";var _T=Object.freeze({__proto__:null,ALPHANUMERICAL:OT,AMPERSAND:Jf,APOSTROPHE:Zf,ASCIINUMERICAL:MT,ASTERISK:eh,AT:Ps,BACKSLASH:th,BACKTICK:nh,CARET:rh,CLOSEANGLEBRACKET:Pf,CLOSEBRACE:_c,CLOSEBRACKET:Hf,CLOSEPAREN:$f,COLON:Fs,COMMA:My,DOLLAR:ih,DOT:mi,EMOJI:DT,EQUALS:sh,EXCLAMATION:Oy,FULLWIDTHGREATERTHAN:Xf,FULLWIDTHLEFTPAREN:Vf,FULLWIDTHLESSTHAN:Yf,FULLWIDTHMIDDLEDOT:RT,FULLWIDTHRIGHTPAREN:Ff,HYPHEN:Pr,LEFTCORNERBRACKET:Gf,LEFTWHITECORNERBRACKET:Wf,LOCALHOST:nu,NL:ky,NUM:Ay,OPENANGLEBRACKET:qf,OPENBRACE:Dc,OPENBRACKET:If,OPENPAREN:Uf,PERCENT:jc,PIPE:oh,PLUS:ah,POUND:lh,QUERY:Lc,QUOTE:Ry,RIGHTCORNERBRACKET:Kf,RIGHTWHITECORNERBRACKET:Qf,SCHEME:hf,SEMI:Dy,SLASH:gi,SLASH_SCHEME:Ka,SYM:uh,TILDE:Bc,TLD:S0,UNDERSCORE:ch,UTLD:E0,UWORD:w0,WORD:Zi,WS:C0});const Xi=/[a-z]/,pc=new RegExp("\\p{L}","u"),kg=new RegExp("\\p{Emoji}","u"),Ji=/\d/,Mg=/\s/,jS="\r",Og=`
`,Az="",kz="",Rg="";let Qd=null,Yd=null;function Mz(n=[]){const e={};fr.groups=e;const t=new fr;Qd==null&&(Qd=LS(wz)),Yd==null&&(Yd=LS(Sz)),fe(t,"'",Zf),fe(t,"{",Dc),fe(t,"}",_c),fe(t,"[",If),fe(t,"]",Hf),fe(t,"(",Uf),fe(t,")",$f),fe(t,"<",qf),fe(t,">",Pf),fe(t,"",Vf),fe(t,"",Ff),fe(t,"",Gf),fe(t,"",Kf),fe(t,"",Wf),fe(t,"",Qf),fe(t,"",Yf),fe(t,"",Xf),fe(t,"&",Jf),fe(t,"*",eh),fe(t,"@",Ps),fe(t,"`",nh),fe(t,"^",rh),fe(t,":",Fs),fe(t,",",My),fe(t,"$",ih),fe(t,".",mi),fe(t,"=",sh),fe(t,"!",Oy),fe(t,"-",Pr),fe(t,"%",jc),fe(t,"|",oh),fe(t,"+",ah),fe(t,"#",lh),fe(t,"?",Lc),fe(t,'"',Ry),fe(t,"/",gi),fe(t,";",Dy),fe(t,"~",Bc),fe(t,"_",ch),fe(t,"\\",th),fe(t,"",RT);const r=Zt(t,Ji,Ay,{[y0]:!0});Zt(r,Ji,r);const s=Zt(r,Xi,MT,{[Rc]:!0}),o=Zt(r,pc,OT,{[vc]:!0}),l=Zt(t,Xi,Zi,{[b0]:!0});Zt(l,Ji,s),Zt(l,Xi,l),Zt(s,Ji,s),Zt(s,Xi,s);const u=Zt(t,pc,w0,{[v0]:!0});Zt(u,Xi),Zt(u,Ji,o),Zt(u,pc,u),Zt(o,Ji,o),Zt(o,Xi),Zt(o,pc,o);const d=fe(t,Og,ky,{[Ag]:!0}),h=fe(t,jS,C0,{[Ag]:!0}),p=Zt(t,Mg,C0,{[Ag]:!0});fe(t,Rg,p),fe(h,Og,d),fe(h,Rg,p),Zt(h,Mg,p),fe(p,jS),fe(p,Og),Zt(p,Mg,p),fe(p,Rg,p);const m=Zt(t,kg,DT,{[kT]:!0});fe(m,"#"),Zt(m,kg,m),fe(m,Az,m);const b=fe(m,kz);fe(b,"#"),Zt(b,kg,m);const v=[[Xi,l],[Ji,s]],w=[[Xi,null],[pc,u],[Ji,o]];for(let S=0;S<Qd.length;S++)Hs(t,Qd[S],S0,Zi,v);for(let S=0;S<Yd.length;S++)Hs(t,Yd[S],E0,w0,w);Io(S0,{tld:!0,ascii:!0},e),Io(E0,{utld:!0,alpha:!0},e),Hs(t,"file",hf,Zi,v),Hs(t,"mailto",hf,Zi,v),Hs(t,"http",Ka,Zi,v),Hs(t,"https",Ka,Zi,v),Hs(t,"ftp",Ka,Zi,v),Hs(t,"ftps",Ka,Zi,v),Io(hf,{scheme:!0,ascii:!0},e),Io(Ka,{slashscheme:!0,ascii:!0},e),n=n.sort((S,C)=>S[0]>C[0]?1:-1);for(let S=0;S<n.length;S++){const C=n[S][0],L=n[S][1]?{[Ez]:!0}:{[Cz]:!0};C.indexOf("-")>=0?L[x0]=!0:Xi.test(C)?Ji.test(C)?L[Rc]=!0:L[b0]=!0:L[y0]=!0,_S(t,C,C,L)}return _S(t,"localhost",nu,{ascii:!0}),t.jd=new fr(uh),{start:t,tokens:Object.assign({groups:e},_T)}}function jT(n,e){const t=Oz(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=t.length,s=[];let o=0,l=0;for(;l<r;){let u=n,d=null,h=0,p=null,m=-1,b=-1;for(;l<r&&(d=u.go(t[l]));)u=d,u.accepts()?(m=0,b=0,p=u):m>=0&&(m+=t[l].length,b++),h+=t[l].length,o+=t[l].length,l++;o-=m,l-=b,h-=m,s.push({t:p.t,v:e.slice(o-h,o),s:o-h,e:o})}return s}function Oz(n){const e=[],t=n.length;let r=0;for(;r<t;){let s=n.charCodeAt(r),o,l=s<55296||s>56319||r+1===t||(o=n.charCodeAt(r+1))<56320||o>57343?n[r]:n.slice(r,r+2);e.push(l),r+=l.length}return e}function Hs(n,e,t,r,s){let o;const l=e.length;for(let u=0;u<l-1;u++){const d=e[u];n.j[d]?o=n.j[d]:(o=new fr(r),o.jr=s.slice(),n.j[d]=o),n=o}return o=new fr(t),o.jr=s.slice(),n.j[e[l-1]]=o,o}function LS(n){const e=[],t=[];let r=0,s="0123456789";for(;r<n.length;){let o=0;for(;s.indexOf(n[r+o])>=0;)o++;if(o>0){e.push(t.join(""));for(let l=parseInt(n.substring(r,r+o),10);l>0;l--)t.pop();r+=o}else t.push(n[r]),r++}return e}const ru={defaultProtocol:"http",events:null,format:BS,formatHref:BS,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function _y(n,e=null){let t=Object.assign({},ru);n&&(t=Object.assign(t,n instanceof _y?n.o:n));const r=t.ignoreTags,s=[];for(let o=0;o<r.length;o++)s.push(r[o].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=s}_y.prototype={o:ru,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let s=this.o[n];return s&&(typeof s=="object"?(s=t.t in s?s[t.t]:ru[n],typeof s=="function"&&r&&(s=s(e,t))):typeof s=="function"&&r&&(s=s(e,t.t,t)),s)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function BS(n){return n}function LT(n,e){this.t="token",this.v=n,this.tk=e}LT.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=ru.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),s=n.get("tagName",t,e),o=this.toFormattedString(n),l={},u=n.get("className",t,e),d=n.get("target",t,e),h=n.get("rel",t,e),p=n.getObj("attributes",t,e),m=n.getObj("events",t,e);return l.href=r,u&&(l.class=u),d&&(l.target=d),h&&(l.rel=h),p&&Object.assign(l,p),{tagName:s,attributes:l,content:o,eventListeners:m}}};function Lh(n,e){class t extends LT{constructor(s,o){super(s,o),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const zS=Lh("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),IS=Lh("text"),Rz=Lh("nl"),Xd=Lh("url",{isLink:!0,toHref(n=ru.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==nu&&n[1].t===Fs}}),qr=n=>new fr(n);function Dz({groups:n}){const e=n.domain.concat([Jf,eh,Ps,th,nh,rh,ih,sh,Pr,Ay,jc,oh,ah,lh,gi,uh,Bc,ch]),t=[Zf,Fs,My,mi,Oy,jc,Lc,Ry,Dy,qf,Pf,Dc,_c,Hf,If,Uf,$f,Vf,Ff,Gf,Kf,Wf,Qf,Yf,Xf],r=[Jf,Zf,eh,th,nh,rh,ih,sh,Pr,Dc,_c,jc,oh,ah,lh,Lc,gi,uh,Bc,ch],s=qr(),o=fe(s,Bc);Je(o,r,o),Je(o,n.domain,o);const l=qr(),u=qr(),d=qr();Je(s,n.domain,l),Je(s,n.scheme,u),Je(s,n.slashscheme,d),Je(l,r,o),Je(l,n.domain,l);const h=fe(l,Ps);fe(o,Ps,h),fe(u,Ps,h),fe(d,Ps,h);const p=fe(o,mi);Je(p,r,o),Je(p,n.domain,o);const m=qr();Je(h,n.domain,m),Je(m,n.domain,m);const b=fe(m,mi);Je(b,n.domain,m);const v=qr(zS);Je(b,n.tld,v),Je(b,n.utld,v),fe(h,nu,v);const w=fe(m,Pr);fe(w,Pr,w),Je(w,n.domain,m),Je(v,n.domain,m),fe(v,mi,b),fe(v,Pr,w);const S=fe(v,Fs);Je(S,n.numeric,zS);const C=fe(l,Pr),N=fe(l,mi);fe(C,Pr,C),Je(C,n.domain,l),Je(N,r,o),Je(N,n.domain,l);const L=qr(Xd);Je(N,n.tld,L),Je(N,n.utld,L),Je(L,n.domain,l),Je(L,r,o),fe(L,mi,N),fe(L,Pr,C),fe(L,Ps,h);const _=fe(L,Fs),k=qr(Xd);Je(_,n.numeric,k);const $=qr(Xd),z=qr();Je($,e,$),Je($,t,z),Je(z,e,$),Je(z,t,z),fe(L,gi,$),fe(k,gi,$);const H=fe(u,Fs),Y=fe(d,Fs),re=fe(Y,gi),ge=fe(re,gi);Je(u,n.domain,l),fe(u,mi,N),fe(u,Pr,C),Je(d,n.domain,l),fe(d,mi,N),fe(d,Pr,C),Je(H,n.domain,$),fe(H,gi,$),fe(H,Lc,$),Je(ge,n.domain,$),Je(ge,e,$),fe(ge,gi,$);const Ce=[[Dc,_c],[If,Hf],[Uf,$f],[qf,Pf],[Vf,Ff],[Gf,Kf],[Wf,Qf],[Yf,Xf]];for(let pe=0;pe<Ce.length;pe++){const[ae,ie]=Ce[pe],he=fe($,ae);fe(z,ae,he),fe(he,ie,$);const O=qr(Xd);Je(he,e,O);const R=qr();Je(he,t),Je(O,e,O),Je(O,t,R),Je(R,e,O),Je(R,t,R),fe(O,ie,$),fe(R,ie,$)}return fe(s,nu,L),fe(s,ky,Rz),{start:s,tokens:_T}}function _z(n,e,t){let r=t.length,s=0,o=[],l=[];for(;s<r;){let u=n,d=null,h=null,p=0,m=null,b=-1;for(;s<r&&!(d=u.go(t[s].t));)l.push(t[s++]);for(;s<r&&(h=d||u.go(t[s].t));)d=null,u=h,u.accepts()?(b=0,m=u):b>=0&&b++,s++,p++;if(b<0)s-=p,s<r&&(l.push(t[s]),s++);else{l.length>0&&(o.push(Dg(IS,e,l)),l=[]),s-=b,p-=b;const v=m.t,w=t.slice(s-p,s);o.push(Dg(v,e,w))}}return l.length>0&&o.push(Dg(IS,e,l)),o}function Dg(n,e,t){const r=t[0].s,s=t[t.length-1].e,o=e.slice(r,s);return new n(o,t)}const jz=typeof console<"u"&&console&&console.warn||(()=>{}),Lz="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Bt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Bz(){return fr.groups={},Bt.scanner=null,Bt.parser=null,Bt.tokenQueue=[],Bt.pluginQueue=[],Bt.customSchemes=[],Bt.initialized=!1,Bt}function HS(n,e=!1){if(Bt.initialized&&jz(`linkifyjs: already initialized - will not register custom scheme "${n}" ${Lz}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Bt.customSchemes.push([n,e])}function zz(){Bt.scanner=Mz(Bt.customSchemes);for(let n=0;n<Bt.tokenQueue.length;n++)Bt.tokenQueue[n][1]({scanner:Bt.scanner});Bt.parser=Dz(Bt.scanner.tokens);for(let n=0;n<Bt.pluginQueue.length;n++)Bt.pluginQueue[n][1]({scanner:Bt.scanner,parser:Bt.parser});return Bt.initialized=!0,Bt}function jy(n){return Bt.initialized||zz(),_z(Bt.parser.start,n,jT(Bt.scanner.start,n))}jy.scan=jT;function BT(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new _y(t),s=jy(n),o=[];for(let l=0;l<s.length;l++){const u=s[l];u.isLink&&(!e||u.t===e)&&r.check(u)&&o.push(u.toFormattedObject(r))}return o}const Ly="[\0- -\u2029]",Iz=new RegExp(Ly),Hz=new RegExp(`${Ly}$`),Uz=new RegExp(Ly,"g");function $z(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function qz(n){return new Pt({key:new cn("autolink"),appendTransaction:(e,t,r)=>{const s=e.some(h=>h.docChanged)&&!t.doc.eq(r.doc),o=e.some(h=>h.getMeta("preventAutolink"));if(!s||o)return;const{tr:l}=r,u=Dj(t.doc,[...e]);if(Ij(u).forEach(({newRange:h})=>{const p=_j(r.doc,h,v=>v.isTextblock);let m,b;if(p.length>1)m=p[0],b=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(p.length){const v=r.doc.textBetween(h.from,h.to," "," ");if(!Hz.test(v))return;m=p[0],b=r.doc.textBetween(m.pos,h.to,void 0," ")}if(m&&b){const v=b.split(Iz).filter(Boolean);if(v.length<=0)return!1;const w=v[v.length-1],S=m.pos+b.lastIndexOf(w);if(!w)return!1;const C=jy(w).map(N=>N.toObject(n.defaultProtocol));if(!$z(C))return!1;C.filter(N=>N.isLink).map(N=>({...N,from:S+N.start+1,to:S+N.end+1})).filter(N=>r.schema.marks.code?!r.doc.rangeHasMark(N.from,N.to,r.schema.marks.code):!0).filter(N=>n.validate(N.value)).filter(N=>n.shouldAutoLink(N.value)).forEach(N=>{my(N.from,N.to,r.doc).some(L=>L.mark.type===n.type)||l.addMark(N.from,N.to,n.type.create({href:N.href}))})}}),!!l.steps.length)return l}})}function Pz(n){return new Pt({key:new cn("handleClickLink"),props:{handleClick:(e,t,r)=>{var s,o;if(r.button!==0||!e.editable)return!1;let l=r.target;const u=[];for(;l.nodeName!=="DIV";)u.push(l),l=l.parentNode;if(!u.find(b=>b.nodeName==="A"))return!1;const d=V2(e.state,n.type.name),h=r.target,p=(s=h==null?void 0:h.href)!==null&&s!==void 0?s:d.href,m=(o=h==null?void 0:h.target)!==null&&o!==void 0?o:d.target;return h&&p?(window.open(p,m),!0):!1}}})}function Vz(n){return new Pt({key:new cn("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:s}=e,{selection:o}=s,{empty:l}=o;if(l)return!1;let u="";r.content.forEach(h=>{u+=h.textContent});const d=BT(u,{defaultProtocol:n.defaultProtocol}).find(h=>h.isLink&&h.value===u);return!u||!d?!1:n.editor.commands.setMark(n.type,{href:d.href})}}})}function Mo(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&t.push(s)}),!n||n.replace(Uz,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Fz=Ti.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){HS(n);return}HS(n.scheme,n.optionalSlashes)})},onDestroy(){Bz()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Mo(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Mo(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Mo(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",yt(this.options.HTMLAttributes,n),0]:["a",yt(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Mo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Mo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Jo({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,s=BT(n).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:l=>!!Mo(l,t),protocols:t,defaultProtocol:r}));s.length&&s.forEach(o=>e.push({text:o.value,data:{href:o.href},index:o.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(qz({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!Mo(s,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(Pz({type:this.type})),this.options.linkOnPaste&&n.push(Vz({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),Gz=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Kz=qt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",yt(this.options.HTMLAttributes,n)]},addCommands(){return{setImage:n=>({commands:e})=>e.insertContent({type:this.name,attrs:n})}},addInputRules(){return[K2({find:Gz,type:this.type,getAttributes:n=>{const[,,e,t,r]=n;return{src:t,alt:e,title:r}}})]}});var T0,N0;if(typeof WeakMap<"u"){let n=new WeakMap;T0=e=>n.get(e),N0=(e,t)=>(n.set(e,t),t)}else{const n=[];let t=0;T0=r=>{for(let s=0;s<n.length;s+=2)if(n[s]==r)return n[s+1]},N0=(r,s)=>(t==10&&(t=0),n[t++]=r,n[t++]=s)}var en=class{constructor(n,e,t,r){this.width=n,this.height=e,this.map=t,this.problems=r}findCell(n){for(let e=0;e<this.map.length;e++){const t=this.map[e];if(t!=n)continue;const r=e%this.width,s=e/this.width|0;let o=r+1,l=s+1;for(let u=1;o<this.width&&this.map[e+u]==t;u++)o++;for(let u=1;l<this.height&&this.map[e+this.width*u]==t;u++)l++;return{left:r,top:s,right:o,bottom:l}}throw new RangeError(`No cell with offset ${n} found`)}colCount(n){for(let e=0;e<this.map.length;e++)if(this.map[e]==n)return e%this.width;throw new RangeError(`No cell with offset ${n} found`)}nextCell(n,e,t){const{left:r,right:s,top:o,bottom:l}=this.findCell(n);return e=="horiz"?(t<0?r==0:s==this.width)?null:this.map[o*this.width+(t<0?r-1:s)]:(t<0?o==0:l==this.height)?null:this.map[r+this.width*(t<0?o-1:l)]}rectBetween(n,e){const{left:t,right:r,top:s,bottom:o}=this.findCell(n),{left:l,right:u,top:d,bottom:h}=this.findCell(e);return{left:Math.min(t,l),top:Math.min(s,d),right:Math.max(r,u),bottom:Math.max(o,h)}}cellsInRect(n){const e=[],t={};for(let r=n.top;r<n.bottom;r++)for(let s=n.left;s<n.right;s++){const o=r*this.width+s,l=this.map[o];t[l]||(t[l]=!0,!(s==n.left&&s&&this.map[o-1]==l||r==n.top&&r&&this.map[o-this.width]==l)&&e.push(l))}return e}positionAt(n,e,t){for(let r=0,s=0;;r++){const o=s+t.child(r).nodeSize;if(r==n){let l=e+n*this.width;const u=(n+1)*this.width;for(;l<u&&this.map[l]<s;)l++;return l==u?o-1:this.map[l]}s=o}}static get(n){return T0(n)||N0(n,Wz(n))}};function Wz(n){if(n.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+n.type.name);const e=Qz(n),t=n.childCount,r=[];let s=0,o=null;const l=[];for(let h=0,p=e*t;h<p;h++)r[h]=0;for(let h=0,p=0;h<t;h++){const m=n.child(h);p++;for(let w=0;;w++){for(;s<r.length&&r[s]!=0;)s++;if(w==m.childCount)break;const S=m.child(w),{colspan:C,rowspan:N,colwidth:L}=S.attrs;for(let _=0;_<N;_++){if(_+h>=t){(o||(o=[])).push({type:"overlong_rowspan",pos:p,n:N-_});break}const k=s+_*e;for(let $=0;$<C;$++){r[k+$]==0?r[k+$]=p:(o||(o=[])).push({type:"collision",row:h,pos:p,n:C-$});const z=L&&L[$];if(z){const H=(k+$)%e*2,Y=l[H];Y==null||Y!=z&&l[H+1]==1?(l[H]=z,l[H+1]=1):Y==z&&l[H+1]++}}}s+=C,p+=S.nodeSize}const b=(h+1)*e;let v=0;for(;s<b;)r[s++]==0&&v++;v&&(o||(o=[])).push({type:"missing",row:h,n:v}),p++}(e===0||t===0)&&(o||(o=[])).push({type:"zero_sized"});const u=new en(e,t,r,o);let d=!1;for(let h=0;!d&&h<l.length;h+=2)l[h]!=null&&l[h+1]<t&&(d=!0);return d&&Yz(u,l,n),u}function Qz(n){let e=-1,t=!1;for(let r=0;r<n.childCount;r++){const s=n.child(r);let o=0;if(t)for(let l=0;l<r;l++){const u=n.child(l);for(let d=0;d<u.childCount;d++){const h=u.child(d);l+h.attrs.rowspan>r&&(o+=h.attrs.colspan)}}for(let l=0;l<s.childCount;l++){const u=s.child(l);o+=u.attrs.colspan,u.attrs.rowspan>1&&(t=!0)}e==-1?e=o:e!=o&&(e=Math.max(e,o))}return e}function Yz(n,e,t){n.problems||(n.problems=[]);const r={};for(let s=0;s<n.map.length;s++){const o=n.map[s];if(r[o])continue;r[o]=!0;const l=t.nodeAt(o);if(!l)throw new RangeError(`No cell with offset ${o} found`);let u=null;const d=l.attrs;for(let h=0;h<d.colspan;h++){const p=(s+h)%n.width,m=e[p*2];m!=null&&(!d.colwidth||d.colwidth[h]!=m)&&((u||(u=Xz(d)))[h]=m)}u&&n.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:u})}}function Xz(n){if(n.colwidth)return n.colwidth.slice();const e=[];for(let t=0;t<n.colspan;t++)e.push(0);return e}function Fn(n){let e=n.cached.tableNodeTypes;if(!e){e=n.cached.tableNodeTypes={};for(const t in n.nodes){const r=n.nodes[t],s=r.spec.tableRole;s&&(e[s]=r)}}return e}var Gs=new cn("selectingCells");function ml(n){for(let e=n.depth-1;e>0;e--)if(n.node(e).type.spec.tableRole=="row")return n.node(0).resolve(n.before(e+1));return null}function Jz(n){for(let e=n.depth;e>0;e--){const t=n.node(e).type.spec.tableRole;if(t==="cell"||t==="header_cell")return n.node(e)}return null}function oi(n){const e=n.selection.$head;for(let t=e.depth;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return!0;return!1}function Bh(n){const e=n.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const t=ml(e.$head)||Zz(e.$head);if(t)return t;throw new RangeError(`No cell found around position ${e.head}`)}function Zz(n){for(let e=n.nodeAfter,t=n.pos;e;e=e.firstChild,t++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t)}for(let e=n.nodeBefore,t=n.pos;e;e=e.lastChild,t--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return n.doc.resolve(t-e.nodeSize)}}function A0(n){return n.parent.type.spec.tableRole=="row"&&!!n.nodeAfter}function e7(n){return n.node(0).resolve(n.pos+n.nodeAfter.nodeSize)}function By(n,e){return n.depth==e.depth&&n.pos>=e.start(-1)&&n.pos<=e.end(-1)}function zT(n,e,t){const r=n.node(-1),s=en.get(r),o=n.start(-1),l=s.nextCell(n.pos-o,e,t);return l==null?null:n.node(0).resolve(o+l)}function ea(n,e,t=1){const r={...n,colspan:n.colspan-t};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,t),r.colwidth.some(s=>s>0)||(r.colwidth=null)),r}function IT(n,e,t=1){const r={...n,colspan:n.colspan+t};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let s=0;s<t;s++)r.colwidth.splice(e,0,0)}return r}function t7(n,e,t){const r=Fn(e.type.schema).header_cell;for(let s=0;s<n.height;s++)if(e.nodeAt(n.map[t+s*n.width]).type!=r)return!1;return!0}var Ot=class es extends Ue{constructor(e,t=e){const r=e.node(-1),s=en.get(r),o=e.start(-1),l=s.rectBetween(e.pos-o,t.pos-o),u=e.node(0),d=s.cellsInRect(l).filter(p=>p!=t.pos-o);d.unshift(t.pos-o);const h=d.map(p=>{const m=r.nodeAt(p);if(!m)throw RangeError(`No cell with offset ${p} found`);const b=o+p+1;return new IC(u.resolve(b),u.resolve(b+m.content.size))});super(h[0].$from,h[0].$to,h),this.$anchorCell=e,this.$headCell=t}map(e,t){const r=e.resolve(t.map(this.$anchorCell.pos)),s=e.resolve(t.map(this.$headCell.pos));if(A0(r)&&A0(s)&&By(r,s)){const o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?es.rowSelection(r,s):o&&this.isColSelection()?es.colSelection(r,s):new es(r,s)}return Be.between(r,s)}content(){const e=this.$anchorCell.node(-1),t=en.get(e),r=this.$anchorCell.start(-1),s=t.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),o={},l=[];for(let d=s.top;d<s.bottom;d++){const h=[];for(let p=d*t.width+s.left,m=s.left;m<s.right;m++,p++){const b=t.map[p];if(o[b])continue;o[b]=!0;const v=t.findCell(b);let w=e.nodeAt(b);if(!w)throw RangeError(`No cell with offset ${b} found`);const S=s.left-v.left,C=v.right-s.right;if(S>0||C>0){let N=w.attrs;if(S>0&&(N=ea(N,0,S)),C>0&&(N=ea(N,N.colspan-C,C)),v.left<s.left){if(w=w.type.createAndFill(N),!w)throw RangeError(`Could not create cell with attrs ${JSON.stringify(N)}`)}else w=w.type.create(N,w.content)}if(v.top<s.top||v.bottom>s.bottom){const N={...w.attrs,rowspan:Math.min(v.bottom,s.bottom)-Math.max(v.top,s.top)};v.top<s.top?w=w.type.createAndFill(N):w=w.type.create(N,w.content)}h.push(w)}l.push(e.child(d).copy(ne.from(h)))}const u=this.isColSelection()&&this.isRowSelection()?e:l;return new be(ne.from(u),1,1)}replace(e,t=be.empty){const r=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){const{$from:u,$to:d}=s[l],h=e.mapping.slice(r);e.replace(h.map(u.pos),h.map(d.pos),l?be.empty:t)}const o=Ue.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,t){this.replace(e,new be(ne.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),r=en.get(t),s=this.$anchorCell.start(-1),o=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s));for(let l=0;l<o.length;l++)e(t.nodeAt(o[l]),s+o[l])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,s=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,s)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const r=e.node(-1),s=en.get(r),o=e.start(-1),l=s.findCell(e.pos-o),u=s.findCell(t.pos-o),d=e.node(0);return l.top<=u.top?(l.top>0&&(e=d.resolve(o+s.map[l.left])),u.bottom<s.height&&(t=d.resolve(o+s.map[s.width*(s.height-1)+u.right-1]))):(u.top>0&&(t=d.resolve(o+s.map[u.left])),l.bottom<s.height&&(e=d.resolve(o+s.map[s.width*(s.height-1)+l.right-1]))),new es(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=en.get(e),r=this.$anchorCell.start(-1),s=t.colCount(this.$anchorCell.pos-r),o=t.colCount(this.$headCell.pos-r);if(Math.min(s,o)>0)return!1;const l=s+this.$anchorCell.nodeAfter.attrs.colspan,u=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(l,u)==t.width}eq(e){return e instanceof es&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const r=e.node(-1),s=en.get(r),o=e.start(-1),l=s.findCell(e.pos-o),u=s.findCell(t.pos-o),d=e.node(0);return l.left<=u.left?(l.left>0&&(e=d.resolve(o+s.map[l.top*s.width])),u.right<s.width&&(t=d.resolve(o+s.map[s.width*(u.top+1)-1]))):(u.left>0&&(t=d.resolve(o+s.map[u.top*s.width])),l.right<s.width&&(e=d.resolve(o+s.map[s.width*(l.top+1)-1]))),new es(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new es(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){return new es(e.resolve(t),e.resolve(r))}getBookmark(){return new n7(this.$anchorCell.pos,this.$headCell.pos)}};Ot.prototype.visible=!1;Ue.jsonID("cell",Ot);var n7=class HT{constructor(e,t){this.anchor=e,this.head=t}map(e){return new HT(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),r=e.resolve(this.head);return t.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&t.index()<t.parent.childCount&&r.index()<r.parent.childCount&&By(t,r)?new Ot(t,r):Ue.near(r,1)}};function r7(n){if(!(n.selection instanceof Ot))return null;const e=[];return n.selection.forEachCell((t,r)=>{e.push(En.node(r,r+t.nodeSize,{class:"selectedCell"}))}),zt.create(n.doc,e)}function i7({$from:n,$to:e}){if(n.pos==e.pos||n.pos<e.pos-6)return!1;let t=n.pos,r=e.pos,s=n.depth;for(;s>=0&&!(n.after(s+1)<n.end(s));s--,t++);for(let o=e.depth;o>=0&&!(e.before(o+1)>e.start(o));o--,r--);return t==r&&/row|table/.test(n.node(s).type.spec.tableRole)}function s7({$from:n,$to:e}){let t,r;for(let s=n.depth;s>0;s--){const o=n.node(s);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){t=o;break}}for(let s=e.depth;s>0;s--){const o=e.node(s);if(o.type.spec.tableRole==="cell"||o.type.spec.tableRole==="header_cell"){r=o;break}}return t!==r&&e.parentOffset===0}function o7(n,e,t){const r=(e||n).selection,s=(e||n).doc;let o,l;if(r instanceof _e&&(l=r.node.type.spec.tableRole)){if(l=="cell"||l=="header_cell")o=Ot.create(s,r.from);else if(l=="row"){const u=s.resolve(r.from+1);o=Ot.rowSelection(u,u)}else if(!t){const u=en.get(r.node),d=r.from+1,h=d+u.map[u.width*u.height-1];o=Ot.create(s,d+1,h)}}else r instanceof Be&&i7(r)?o=Be.create(s,r.from):r instanceof Be&&s7(r)&&(o=Be.create(s,r.$from.start(),r.$from.end()));return o&&(e||(e=n.tr)).setSelection(o),e}var a7=new cn("fix-tables");function UT(n,e,t,r){const s=n.childCount,o=e.childCount;e:for(let l=0,u=0;l<o;l++){const d=e.child(l);for(let h=u,p=Math.min(s,l+3);h<p;h++)if(n.child(h)==d){u=h+1,t+=d.nodeSize;continue e}r(d,t),u<s&&n.child(u).sameMarkup(d)?UT(n.child(u),d,t+1,r):d.nodesBetween(0,d.content.size,r,t+1),t+=d.nodeSize}}function $T(n,e){let t;const r=(s,o)=>{s.type.spec.tableRole=="table"&&(t=l7(n,s,o,t))};return e?e.doc!=n.doc&&UT(e.doc,n.doc,0,r):n.doc.descendants(r),t}function l7(n,e,t,r){const s=en.get(e);if(!s.problems)return r;r||(r=n.tr);const o=[];for(let d=0;d<s.height;d++)o.push(0);for(let d=0;d<s.problems.length;d++){const h=s.problems[d];if(h.type=="collision"){const p=e.nodeAt(h.pos);if(!p)continue;const m=p.attrs;for(let b=0;b<m.rowspan;b++)o[h.row+b]+=h.n;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,ea(m,m.colspan-h.n,h.n))}else if(h.type=="missing")o[h.row]+=h.n;else if(h.type=="overlong_rowspan"){const p=e.nodeAt(h.pos);if(!p)continue;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,{...p.attrs,rowspan:p.attrs.rowspan-h.n})}else if(h.type=="colwidth mismatch"){const p=e.nodeAt(h.pos);if(!p)continue;r.setNodeMarkup(r.mapping.map(t+1+h.pos),null,{...p.attrs,colwidth:h.colwidth})}else if(h.type=="zero_sized"){const p=r.mapping.map(t);r.delete(p,p+e.nodeSize)}}let l,u;for(let d=0;d<o.length;d++)o[d]&&(l==null&&(l=d),u=d);for(let d=0,h=t+1;d<s.height;d++){const p=e.child(d),m=h+p.nodeSize,b=o[d];if(b>0){let v="cell";p.firstChild&&(v=p.firstChild.type.spec.tableRole);const w=[];for(let C=0;C<b;C++){const N=Fn(n.schema)[v].createAndFill();N&&w.push(N)}const S=(d==0||l==d-1)&&u==d?h+1:m-1;r.insert(r.mapping.map(S),w)}h=m}return r.setMeta(a7,{fixTables:!0})}function Mi(n){const e=n.selection,t=Bh(n),r=t.node(-1),s=t.start(-1),o=en.get(r);return{...e instanceof Ot?o.rectBetween(e.$anchorCell.pos-s,e.$headCell.pos-s):o.findCell(t.pos-s),tableStart:s,map:o,table:r}}function qT(n,{map:e,tableStart:t,table:r},s){let o=s>0?-1:0;t7(e,r,s+o)&&(o=s==0||s==e.width?null:0);for(let l=0;l<e.height;l++){const u=l*e.width+s;if(s>0&&s<e.width&&e.map[u-1]==e.map[u]){const d=e.map[u],h=r.nodeAt(d);n.setNodeMarkup(n.mapping.map(t+d),null,IT(h.attrs,s-e.colCount(d))),l+=h.attrs.rowspan-1}else{const d=o==null?Fn(r.type.schema).cell:r.nodeAt(e.map[u+o]).type,h=e.positionAt(l,s,r);n.insert(n.mapping.map(t+h),d.createAndFill())}}return n}function c7(n,e){if(!oi(n))return!1;if(e){const t=Mi(n);e(qT(n.tr,t,t.left))}return!0}function u7(n,e){if(!oi(n))return!1;if(e){const t=Mi(n);e(qT(n.tr,t,t.right))}return!0}function d7(n,{map:e,table:t,tableStart:r},s){const o=n.mapping.maps.length;for(let l=0;l<e.height;){const u=l*e.width+s,d=e.map[u],h=t.nodeAt(d),p=h.attrs;if(s>0&&e.map[u-1]==d||s<e.width-1&&e.map[u+1]==d)n.setNodeMarkup(n.mapping.slice(o).map(r+d),null,ea(p,s-e.colCount(d)));else{const m=n.mapping.slice(o).map(r+d);n.delete(m,m+h.nodeSize)}l+=p.rowspan}}function f7(n,e){if(!oi(n))return!1;if(e){const t=Mi(n),r=n.tr;if(t.left==0&&t.right==t.map.width)return!1;for(let s=t.right-1;d7(r,t,s),s!=t.left;s--){const o=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!o)throw RangeError("No table found");t.table=o,t.map=en.get(o)}e(r)}return!0}function h7(n,e,t){var r;const s=Fn(e.type.schema).header_cell;for(let o=0;o<n.width;o++)if(((r=e.nodeAt(n.map[o+t*n.width]))==null?void 0:r.type)!=s)return!1;return!0}function PT(n,{map:e,tableStart:t,table:r},s){var o;let l=t;for(let h=0;h<s;h++)l+=r.child(h).nodeSize;const u=[];let d=s>0?-1:0;h7(e,r,s+d)&&(d=s==0||s==e.height?null:0);for(let h=0,p=e.width*s;h<e.width;h++,p++)if(s>0&&s<e.height&&e.map[p]==e.map[p-e.width]){const m=e.map[p],b=r.nodeAt(m).attrs;n.setNodeMarkup(t+m,null,{...b,rowspan:b.rowspan+1}),h+=b.colspan-1}else{const m=d==null?Fn(r.type.schema).cell:(o=r.nodeAt(e.map[p+d*e.width]))==null?void 0:o.type,b=m==null?void 0:m.createAndFill();b&&u.push(b)}return n.insert(l,Fn(r.type.schema).row.create(null,u)),n}function p7(n,e){if(!oi(n))return!1;if(e){const t=Mi(n);e(PT(n.tr,t,t.top))}return!0}function m7(n,e){if(!oi(n))return!1;if(e){const t=Mi(n);e(PT(n.tr,t,t.bottom))}return!0}function g7(n,{map:e,table:t,tableStart:r},s){let o=0;for(let h=0;h<s;h++)o+=t.child(h).nodeSize;const l=o+t.child(s).nodeSize,u=n.mapping.maps.length;n.delete(o+r,l+r);const d=new Set;for(let h=0,p=s*e.width;h<e.width;h++,p++){const m=e.map[p];if(!d.has(m)){if(d.add(m),s>0&&m==e.map[p-e.width]){const b=t.nodeAt(m).attrs;n.setNodeMarkup(n.mapping.slice(u).map(m+r),null,{...b,rowspan:b.rowspan-1}),h+=b.colspan-1}else if(s<e.height&&m==e.map[p+e.width]){const b=t.nodeAt(m),v=b.attrs,w=b.type.create({...v,rowspan:b.attrs.rowspan-1},b.content),S=e.positionAt(s+1,h,t);n.insert(n.mapping.slice(u).map(r+S),w),h+=v.colspan-1}}}}function y7(n,e){if(!oi(n))return!1;if(e){const t=Mi(n),r=n.tr;if(t.top==0&&t.bottom==t.map.height)return!1;for(let s=t.bottom-1;g7(r,t,s),s!=t.top;s--){const o=t.tableStart?r.doc.nodeAt(t.tableStart-1):r.doc;if(!o)throw RangeError("No table found");t.table=o,t.map=en.get(t.table)}e(r)}return!0}function US(n){const e=n.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function b7({width:n,height:e,map:t},r){let s=r.top*n+r.left,o=s,l=(r.bottom-1)*n+r.left,u=s+(r.right-r.left-1);for(let d=r.top;d<r.bottom;d++){if(r.left>0&&t[o]==t[o-1]||r.right<n&&t[u]==t[u+1])return!0;o+=n,u+=n}for(let d=r.left;d<r.right;d++){if(r.top>0&&t[s]==t[s-n]||r.bottom<e&&t[l]==t[l+n])return!0;s++,l++}return!1}function $S(n,e){const t=n.selection;if(!(t instanceof Ot)||t.$anchorCell.pos==t.$headCell.pos)return!1;const r=Mi(n),{map:s}=r;if(b7(s,r))return!1;if(e){const o=n.tr,l={};let u=ne.empty,d,h;for(let p=r.top;p<r.bottom;p++)for(let m=r.left;m<r.right;m++){const b=s.map[p*s.width+m],v=r.table.nodeAt(b);if(!(l[b]||!v))if(l[b]=!0,d==null)d=b,h=v;else{US(v)||(u=u.append(v.content));const w=o.mapping.map(b+r.tableStart);o.delete(w,w+v.nodeSize)}}if(d==null||h==null)return!0;if(o.setNodeMarkup(d+r.tableStart,null,{...IT(h.attrs,h.attrs.colspan,r.right-r.left-h.attrs.colspan),rowspan:r.bottom-r.top}),u.size){const p=d+1+h.content.size,m=US(h)?d+1:p;o.replaceWith(m+r.tableStart,p+r.tableStart,u)}o.setSelection(new Ot(o.doc.resolve(d+r.tableStart))),e(o)}return!0}function qS(n,e){const t=Fn(n.schema);return v7(({node:r})=>t[r.type.spec.tableRole])(n,e)}function v7(n){return(e,t)=>{var r;const s=e.selection;let o,l;if(s instanceof Ot){if(s.$anchorCell.pos!=s.$headCell.pos)return!1;o=s.$anchorCell.nodeAfter,l=s.$anchorCell.pos}else{if(o=Jz(s.$from),!o)return!1;l=(r=ml(s.$from))==null?void 0:r.pos}if(o==null||l==null||o.attrs.colspan==1&&o.attrs.rowspan==1)return!1;if(t){let u=o.attrs;const d=[],h=u.colwidth;u.rowspan>1&&(u={...u,rowspan:1}),u.colspan>1&&(u={...u,colspan:1});const p=Mi(e),m=e.tr;for(let v=0;v<p.right-p.left;v++)d.push(h?{...u,colwidth:h&&h[v]?[h[v]]:null}:u);let b;for(let v=p.top;v<p.bottom;v++){let w=p.map.positionAt(v,p.left,p.table);v==p.top&&(w+=o.nodeSize);for(let S=p.left,C=0;S<p.right;S++,C++)S==p.left&&v==p.top||m.insert(b=m.mapping.map(w+p.tableStart,1),n({node:o,row:v,col:S}).createAndFill(d[C]))}m.setNodeMarkup(l,n({node:o,row:p.top,col:p.left}),d[0]),s instanceof Ot&&m.setSelection(new Ot(m.doc.resolve(s.$anchorCell.pos),b?m.doc.resolve(b):void 0)),t(m)}return!0}}function x7(n,e){return function(t,r){if(!oi(t))return!1;const s=Bh(t);if(s.nodeAfter.attrs[n]===e)return!1;if(r){const o=t.tr;t.selection instanceof Ot?t.selection.forEachCell((l,u)=>{l.attrs[n]!==e&&o.setNodeMarkup(u,null,{...l.attrs,[n]:e})}):o.setNodeMarkup(s.pos,null,{...s.nodeAfter.attrs,[n]:e}),r(o)}return!0}}function w7(n){return function(e,t){if(!oi(e))return!1;if(t){const r=Fn(e.schema),s=Mi(e),o=e.tr,l=s.map.cellsInRect(n=="column"?{left:s.left,top:0,right:s.right,bottom:s.map.height}:n=="row"?{left:0,top:s.top,right:s.map.width,bottom:s.bottom}:s),u=l.map(d=>s.table.nodeAt(d));for(let d=0;d<l.length;d++)u[d].type==r.header_cell&&o.setNodeMarkup(s.tableStart+l[d],r.cell,u[d].attrs);if(o.steps.length==0)for(let d=0;d<l.length;d++)o.setNodeMarkup(s.tableStart+l[d],r.header_cell,u[d].attrs);t(o)}return!0}}function PS(n,e,t){const r=e.map.cellsInRect({left:0,top:0,right:n=="row"?e.map.width:1,bottom:n=="column"?e.map.height:1});for(let s=0;s<r.length;s++){const o=e.table.nodeAt(r[s]);if(o&&o.type!==t.header_cell)return!1}return!0}function iu(n,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?w7(n):function(t,r){if(!oi(t))return!1;if(r){const s=Fn(t.schema),o=Mi(t),l=t.tr,u=PS("row",o,s),d=PS("column",o,s),p=(n==="column"?u:n==="row"?d:!1)?1:0,m=n=="column"?{left:0,top:p,right:1,bottom:o.map.height}:n=="row"?{left:p,top:0,right:o.map.width,bottom:1}:o,b=n=="column"?d?s.cell:s.header_cell:n=="row"?u?s.cell:s.header_cell:s.cell;o.map.cellsInRect(m).forEach(v=>{const w=v+o.tableStart,S=l.doc.nodeAt(w);S&&l.setNodeMarkup(w,b,S.attrs)}),r(l)}return!0}}iu("row",{useDeprecatedLogic:!0});iu("column",{useDeprecatedLogic:!0});var S7=iu("cell",{useDeprecatedLogic:!0});function E7(n,e){if(e<0){const t=n.nodeBefore;if(t)return n.pos-t.nodeSize;for(let r=n.index(-1)-1,s=n.before();r>=0;r--){const o=n.node(-1).child(r),l=o.lastChild;if(l)return s-1-l.nodeSize;s-=o.nodeSize}}else{if(n.index()<n.parent.childCount-1)return n.pos+n.nodeAfter.nodeSize;const t=n.node(-1);for(let r=n.indexAfter(-1),s=n.after();r<t.childCount;r++){const o=t.child(r);if(o.childCount)return s+1;s+=o.nodeSize}}return null}function VS(n){return function(e,t){if(!oi(e))return!1;const r=E7(Bh(e),n);if(r==null)return!1;if(t){const s=e.doc.resolve(r);t(e.tr.setSelection(Be.between(s,e7(s))).scrollIntoView())}return!0}}function C7(n,e){const t=n.selection.$anchor;for(let r=t.depth;r>0;r--)if(t.node(r).type.spec.tableRole=="table")return e&&e(n.tr.delete(t.before(r),t.after(r)).scrollIntoView()),!0;return!1}function Jd(n,e){const t=n.selection;if(!(t instanceof Ot))return!1;if(e){const r=n.tr,s=Fn(n.schema).cell.createAndFill().content;t.forEachCell((o,l)=>{o.content.eq(s)||r.replace(r.mapping.map(l+1),r.mapping.map(l+o.nodeSize-1),new be(s,0,0))}),r.docChanged&&e(r)}return!0}function T7(n){if(!n.size)return null;let{content:e,openStart:t,openEnd:r}=n;for(;e.childCount==1&&(t>0&&r>0||e.child(0).type.spec.tableRole=="table");)t--,r--,e=e.child(0).content;const s=e.child(0),o=s.type.spec.tableRole,l=s.type.schema,u=[];if(o=="row")for(let d=0;d<e.childCount;d++){let h=e.child(d).content;const p=d?0:Math.max(0,t-1),m=d<e.childCount-1?0:Math.max(0,r-1);(p||m)&&(h=k0(Fn(l).row,new be(h,p,m)).content),u.push(h)}else if(o=="cell"||o=="header_cell")u.push(t||r?k0(Fn(l).row,new be(e,t,r)).content:e);else return null;return N7(l,u)}function N7(n,e){const t=[];for(let s=0;s<e.length;s++){const o=e[s];for(let l=o.childCount-1;l>=0;l--){const{rowspan:u,colspan:d}=o.child(l).attrs;for(let h=s;h<s+u;h++)t[h]=(t[h]||0)+d}}let r=0;for(let s=0;s<t.length;s++)r=Math.max(r,t[s]);for(let s=0;s<t.length;s++)if(s>=e.length&&e.push(ne.empty),t[s]<r){const o=Fn(n).cell.createAndFill(),l=[];for(let u=t[s];u<r;u++)l.push(o);e[s]=e[s].append(ne.from(l))}return{height:e.length,width:r,rows:e}}function k0(n,e){const t=n.createAndFill();return new K0(t).replace(0,t.content.size,e).doc}function A7({width:n,height:e,rows:t},r,s){if(n!=r){const o=[],l=[];for(let u=0;u<t.length;u++){const d=t[u],h=[];for(let p=o[u]||0,m=0;p<r;m++){let b=d.child(m%d.childCount);p+b.attrs.colspan>r&&(b=b.type.createChecked(ea(b.attrs,b.attrs.colspan,p+b.attrs.colspan-r),b.content)),h.push(b),p+=b.attrs.colspan;for(let v=1;v<b.attrs.rowspan;v++)o[u+v]=(o[u+v]||0)+b.attrs.colspan}l.push(ne.from(h))}t=l,n=r}if(e!=s){const o=[];for(let l=0,u=0;l<s;l++,u++){const d=[],h=t[u%e];for(let p=0;p<h.childCount;p++){let m=h.child(p);l+m.attrs.rowspan>s&&(m=m.type.create({...m.attrs,rowspan:Math.max(1,s-m.attrs.rowspan)},m.content)),d.push(m)}o.push(ne.from(d))}t=o,e=s}return{width:n,height:e,rows:t}}function k7(n,e,t,r,s,o,l){const u=n.doc.type.schema,d=Fn(u);let h,p;if(s>e.width)for(let m=0,b=0;m<e.height;m++){const v=t.child(m);b+=v.nodeSize;const w=[];let S;v.lastChild==null||v.lastChild.type==d.cell?S=h||(h=d.cell.createAndFill()):S=p||(p=d.header_cell.createAndFill());for(let C=e.width;C<s;C++)w.push(S);n.insert(n.mapping.slice(l).map(b-1+r),w)}if(o>e.height){const m=[];for(let w=0,S=(e.height-1)*e.width;w<Math.max(e.width,s);w++){const C=w>=e.width?!1:t.nodeAt(e.map[S+w]).type==d.header_cell;m.push(C?p||(p=d.header_cell.createAndFill()):h||(h=d.cell.createAndFill()))}const b=d.row.create(null,ne.from(m)),v=[];for(let w=e.height;w<o;w++)v.push(b);n.insert(n.mapping.slice(l).map(r+t.nodeSize-2),v)}return!!(h||p)}function FS(n,e,t,r,s,o,l,u){if(l==0||l==e.height)return!1;let d=!1;for(let h=s;h<o;h++){const p=l*e.width+h,m=e.map[p];if(e.map[p-e.width]==m){d=!0;const b=t.nodeAt(m),{top:v,left:w}=e.findCell(m);n.setNodeMarkup(n.mapping.slice(u).map(m+r),null,{...b.attrs,rowspan:l-v}),n.insert(n.mapping.slice(u).map(e.positionAt(l,w,t)),b.type.createAndFill({...b.attrs,rowspan:v+b.attrs.rowspan-l})),h+=b.attrs.colspan-1}}return d}function GS(n,e,t,r,s,o,l,u){if(l==0||l==e.width)return!1;let d=!1;for(let h=s;h<o;h++){const p=h*e.width+l,m=e.map[p];if(e.map[p-1]==m){d=!0;const b=t.nodeAt(m),v=e.colCount(m),w=n.mapping.slice(u).map(m+r);n.setNodeMarkup(w,null,ea(b.attrs,l-v,b.attrs.colspan-(l-v))),n.insert(w+b.nodeSize,b.type.createAndFill(ea(b.attrs,0,l-v))),h+=b.attrs.rowspan-1}}return d}function KS(n,e,t,r,s){let o=t?n.doc.nodeAt(t-1):n.doc;if(!o)throw new Error("No table found");let l=en.get(o);const{top:u,left:d}=r,h=d+s.width,p=u+s.height,m=n.tr;let b=0;function v(){if(o=t?m.doc.nodeAt(t-1):m.doc,!o)throw new Error("No table found");l=en.get(o),b=m.mapping.maps.length}k7(m,l,o,t,h,p,b)&&v(),FS(m,l,o,t,d,h,u,b)&&v(),FS(m,l,o,t,d,h,p,b)&&v(),GS(m,l,o,t,u,p,d,b)&&v(),GS(m,l,o,t,u,p,h,b)&&v();for(let w=u;w<p;w++){const S=l.positionAt(w,d,o),C=l.positionAt(w,h,o);m.replace(m.mapping.slice(b).map(S+t),m.mapping.slice(b).map(C+t),new be(s.rows[w-u],0,0))}v(),m.setSelection(new Ot(m.doc.resolve(t+l.positionAt(u,d,o)),m.doc.resolve(t+l.positionAt(p-1,h-1,o)))),e(m)}var M7=iy({ArrowLeft:Zd("horiz",-1),ArrowRight:Zd("horiz",1),ArrowUp:Zd("vert",-1),ArrowDown:Zd("vert",1),"Shift-ArrowLeft":ef("horiz",-1),"Shift-ArrowRight":ef("horiz",1),"Shift-ArrowUp":ef("vert",-1),"Shift-ArrowDown":ef("vert",1),Backspace:Jd,"Mod-Backspace":Jd,Delete:Jd,"Mod-Delete":Jd});function pf(n,e,t){return t.eq(n.selection)?!1:(e&&e(n.tr.setSelection(t).scrollIntoView()),!0)}function Zd(n,e){return(t,r,s)=>{if(!s)return!1;const o=t.selection;if(o instanceof Ot)return pf(t,r,Ue.near(o.$headCell,e));if(n!="horiz"&&!o.empty)return!1;const l=VT(s,n,e);if(l==null)return!1;if(n=="horiz")return pf(t,r,Ue.near(t.doc.resolve(o.head+e),e));{const u=t.doc.resolve(l),d=zT(u,n,e);let h;return d?h=Ue.near(d,1):e<0?h=Ue.near(t.doc.resolve(u.before(-1)),-1):h=Ue.near(t.doc.resolve(u.after(-1)),1),pf(t,r,h)}}}function ef(n,e){return(t,r,s)=>{if(!s)return!1;const o=t.selection;let l;if(o instanceof Ot)l=o;else{const d=VT(s,n,e);if(d==null)return!1;l=new Ot(t.doc.resolve(d))}const u=zT(l.$headCell,n,e);return u?pf(t,r,new Ot(l.$anchorCell,u)):!1}}function O7(n,e){const t=n.state.doc,r=ml(t.resolve(e));return r?(n.dispatch(n.state.tr.setSelection(new Ot(r))),!0):!1}function R7(n,e,t){if(!oi(n.state))return!1;let r=T7(t);const s=n.state.selection;if(s instanceof Ot){r||(r={width:1,height:1,rows:[ne.from(k0(Fn(n.state.schema).cell,t))]});const o=s.$anchorCell.node(-1),l=s.$anchorCell.start(-1),u=en.get(o).rectBetween(s.$anchorCell.pos-l,s.$headCell.pos-l);return r=A7(r,u.right-u.left,u.bottom-u.top),KS(n.state,n.dispatch,l,u,r),!0}else if(r){const o=Bh(n.state),l=o.start(-1);return KS(n.state,n.dispatch,l,en.get(o.node(-1)).findCell(o.pos-l),r),!0}else return!1}function D7(n,e){var t;if(e.ctrlKey||e.metaKey)return;const r=WS(n,e.target);let s;if(e.shiftKey&&n.state.selection instanceof Ot)o(n.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(s=ml(n.state.selection.$anchor))!=null&&((t=_g(n,e))==null?void 0:t.pos)!=s.pos)o(s,e),e.preventDefault();else if(!r)return;function o(d,h){let p=_g(n,h);const m=Gs.getState(n.state)==null;if(!p||!By(d,p))if(m)p=d;else return;const b=new Ot(d,p);if(m||!n.state.selection.eq(b)){const v=n.state.tr.setSelection(b);m&&v.setMeta(Gs,d.pos),n.dispatch(v)}}function l(){n.root.removeEventListener("mouseup",l),n.root.removeEventListener("dragstart",l),n.root.removeEventListener("mousemove",u),Gs.getState(n.state)!=null&&n.dispatch(n.state.tr.setMeta(Gs,-1))}function u(d){const h=d,p=Gs.getState(n.state);let m;if(p!=null)m=n.state.doc.resolve(p);else if(WS(n,h.target)!=r&&(m=_g(n,e),!m))return l();m&&o(m,h)}n.root.addEventListener("mouseup",l),n.root.addEventListener("dragstart",l),n.root.addEventListener("mousemove",u)}function VT(n,e,t){if(!(n.state.selection instanceof Be))return null;const{$head:r}=n.state.selection;for(let s=r.depth-1;s>=0;s--){const o=r.node(s);if((t<0?r.index(s):r.indexAfter(s))!=(t<0?0:o.childCount))return null;if(o.type.spec.tableRole=="cell"||o.type.spec.tableRole=="header_cell"){const u=r.before(s),d=e=="vert"?t>0?"down":"up":t>0?"right":"left";return n.endOfTextblock(d)?u:null}}return null}function WS(n,e){for(;e&&e!=n.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function _g(n,e){const t=n.posAtCoords({left:e.clientX,top:e.clientY});return t&&t?ml(n.state.doc.resolve(t.pos)):null}var _7=class{constructor(e,t){this.node=e,this.defaultCellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${t}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),M0(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!=this.node.type?!1:(this.node=e,M0(e,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(e){return e.type=="attributes"&&(e.target==this.table||this.colgroup.contains(e.target))}};function M0(n,e,t,r,s,o){var l;let u=0,d=!0,h=e.firstChild;const p=n.firstChild;if(p){for(let m=0,b=0;m<p.childCount;m++){const{colspan:v,colwidth:w}=p.child(m).attrs;for(let S=0;S<v;S++,b++){const C=s==b?o:w&&w[S],N=C?C+"px":"";if(u+=C||r,C||(d=!1),h)h.style.width!=N&&(h.style.width=N),h=h.nextSibling;else{const L=document.createElement("col");L.style.width=N,e.appendChild(L)}}}for(;h;){const m=h.nextSibling;(l=h.parentNode)==null||l.removeChild(h),h=m}d?(t.style.width=u+"px",t.style.minWidth=""):(t.style.width="",t.style.minWidth=u+"px")}}var Mr=new cn("tableColumnResizing");function j7({handleWidth:n=5,cellMinWidth:e=25,defaultCellMinWidth:t=100,View:r=_7,lastColumnResizable:s=!0}={}){const o=new Pt({key:Mr,state:{init(l,u){var d,h;const p=(h=(d=o.spec)==null?void 0:d.props)==null?void 0:h.nodeViews,m=Fn(u.schema).table.name;return r&&p&&(p[m]=(b,v)=>new r(b,t,v)),new L7(-1,!1)},apply(l,u){return u.apply(l)}},props:{attributes:l=>{const u=Mr.getState(l);return u&&u.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(l,u)=>{B7(l,u,n,s)},mouseleave:l=>{z7(l)},mousedown:(l,u)=>{I7(l,u,e,t)}},decorations:l=>{const u=Mr.getState(l);if(u&&u.activeHandle>-1)return P7(l,u.activeHandle)},nodeViews:{}}});return o}var L7=class mf{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,r=e.getMeta(Mr);if(r&&r.setHandle!=null)return new mf(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new mf(t.activeHandle,r.setDragging);if(t.activeHandle>-1&&e.docChanged){let s=e.mapping.map(t.activeHandle,-1);return A0(e.doc.resolve(s))||(s=-1),new mf(s,t.dragging)}return t}};function B7(n,e,t,r){if(!n.editable)return;const s=Mr.getState(n.state);if(s&&!s.dragging){const o=U7(e.target);let l=-1;if(o){const{left:u,right:d}=o.getBoundingClientRect();e.clientX-u<=t?l=QS(n,e,"left",t):d-e.clientX<=t&&(l=QS(n,e,"right",t))}if(l!=s.activeHandle){if(!r&&l!==-1){const u=n.state.doc.resolve(l),d=u.node(-1),h=en.get(d),p=u.start(-1);if(h.colCount(u.pos-p)+u.nodeAfter.attrs.colspan-1==h.width-1)return}FT(n,l)}}}function z7(n){if(!n.editable)return;const e=Mr.getState(n.state);e&&e.activeHandle>-1&&!e.dragging&&FT(n,-1)}function I7(n,e,t,r){var s;if(!n.editable)return!1;const o=(s=n.dom.ownerDocument.defaultView)!=null?s:window,l=Mr.getState(n.state);if(!l||l.activeHandle==-1||l.dragging)return!1;const u=n.state.doc.nodeAt(l.activeHandle),d=H7(n,l.activeHandle,u.attrs);n.dispatch(n.state.tr.setMeta(Mr,{setDragging:{startX:e.clientX,startWidth:d}}));function h(m){o.removeEventListener("mouseup",h),o.removeEventListener("mousemove",p);const b=Mr.getState(n.state);b!=null&&b.dragging&&($7(n,b.activeHandle,YS(b.dragging,m,t)),n.dispatch(n.state.tr.setMeta(Mr,{setDragging:null})))}function p(m){if(!m.which)return h(m);const b=Mr.getState(n.state);if(b&&b.dragging){const v=YS(b.dragging,m,t);XS(n,b.activeHandle,v,r)}}return XS(n,l.activeHandle,d,r),o.addEventListener("mouseup",h),o.addEventListener("mousemove",p),e.preventDefault(),!0}function H7(n,e,{colspan:t,colwidth:r}){const s=r&&r[r.length-1];if(s)return s;const o=n.domAtPos(e);let u=o.node.childNodes[o.offset].offsetWidth,d=t;if(r)for(let h=0;h<t;h++)r[h]&&(u-=r[h],d--);return u/d}function U7(n){for(;n&&n.nodeName!="TD"&&n.nodeName!="TH";)n=n.classList&&n.classList.contains("ProseMirror")?null:n.parentNode;return n}function QS(n,e,t,r){const s=t=="right"?-r:r,o=n.posAtCoords({left:e.clientX+s,top:e.clientY});if(!o)return-1;const{pos:l}=o,u=ml(n.state.doc.resolve(l));if(!u)return-1;if(t=="right")return u.pos;const d=en.get(u.node(-1)),h=u.start(-1),p=d.map.indexOf(u.pos-h);return p%d.width==0?-1:h+d.map[p-1]}function YS(n,e,t){const r=e.clientX-n.startX;return Math.max(t,n.startWidth+r)}function FT(n,e){n.dispatch(n.state.tr.setMeta(Mr,{setHandle:e}))}function $7(n,e,t){const r=n.state.doc.resolve(e),s=r.node(-1),o=en.get(s),l=r.start(-1),u=o.colCount(r.pos-l)+r.nodeAfter.attrs.colspan-1,d=n.state.tr;for(let h=0;h<o.height;h++){const p=h*o.width+u;if(h&&o.map[p]==o.map[p-o.width])continue;const m=o.map[p],b=s.nodeAt(m).attrs,v=b.colspan==1?0:u-o.colCount(m);if(b.colwidth&&b.colwidth[v]==t)continue;const w=b.colwidth?b.colwidth.slice():q7(b.colspan);w[v]=t,d.setNodeMarkup(l+m,null,{...b,colwidth:w})}d.docChanged&&n.dispatch(d)}function XS(n,e,t,r){const s=n.state.doc.resolve(e),o=s.node(-1),l=s.start(-1),u=en.get(o).colCount(s.pos-l)+s.nodeAfter.attrs.colspan-1;let d=n.domAtPos(s.start(-1)).node;for(;d&&d.nodeName!="TABLE";)d=d.parentNode;d&&M0(o,d.firstChild,d,r,u,t)}function q7(n){return Array(n).fill(0)}function P7(n,e){var t;const r=[],s=n.doc.resolve(e),o=s.node(-1);if(!o)return zt.empty;const l=en.get(o),u=s.start(-1),d=l.colCount(s.pos-u)+s.nodeAfter.attrs.colspan-1;for(let h=0;h<l.height;h++){const p=d+h*l.width;if((d==l.width-1||l.map[p]!=l.map[p+1])&&(h==0||l.map[p]!=l.map[p-l.width])){const m=l.map[p],b=u+m+o.nodeAt(m).nodeSize-1,v=document.createElement("div");v.className="column-resize-handle",(t=Mr.getState(n))!=null&&t.dragging&&r.push(En.node(u+m,u+m+o.nodeAt(m).nodeSize,{class:"column-resize-dragging"})),r.push(En.widget(b,v))}}return zt.create(n.doc,r)}function V7({allowTableNodeSelection:n=!1}={}){return new Pt({key:Gs,state:{init(){return null},apply(e,t){const r=e.getMeta(Gs);if(r!=null)return r==-1?null:r;if(t==null||!e.docChanged)return t;const{deleted:s,pos:o}=e.mapping.mapResult(t);return s?null:o}},props:{decorations:r7,handleDOMEvents:{mousedown:D7},createSelectionBetween(e){return Gs.getState(e.state)!=null?e.state.selection:null},handleTripleClick:O7,handleKeyDown:M7,handlePaste:R7},appendTransaction(e,t,r){return o7(r,$T(r,t),n)}})}function O0(n,e){return e?["width",`${Math.max(e,n)}px`]:["min-width",`${n}px`]}function JS(n,e,t,r,s,o){var l;let u=0,d=!0,h=e.firstChild;const p=n.firstChild;if(p!==null)for(let m=0,b=0;m<p.childCount;m+=1){const{colspan:v,colwidth:w}=p.child(m).attrs;for(let S=0;S<v;S+=1,b+=1){const C=s===b?o:w&&w[S],N=C?`${C}px`:"";if(u+=C||r,C||(d=!1),h){if(h.style.width!==N){const[L,_]=O0(r,C);h.style.setProperty(L,_)}h=h.nextSibling}else{const L=document.createElement("col"),[_,k]=O0(r,C);L.style.setProperty(_,k),e.appendChild(L)}}}for(;h;){const m=h.nextSibling;(l=h.parentNode)===null||l===void 0||l.removeChild(h),h=m}d?(t.style.width=`${u}px`,t.style.minWidth=""):(t.style.width="",t.style.minWidth=`${u}px`)}class F7{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),JS(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,JS(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}}function G7(n,e,t,r){let s=0,o=!0;const l=[],u=n.firstChild;if(!u)return{};for(let m=0,b=0;m<u.childCount;m+=1){const{colspan:v,colwidth:w}=u.child(m).attrs;for(let S=0;S<v;S+=1,b+=1){const C=t===b?r:w&&w[S];s+=C||e,C||(o=!1);const[N,L]=O0(e,C);l.push(["col",{style:`${N}: ${L}`}])}}const d=o?`${s}px`:"",h=o?"":`${s}px`;return{colgroup:["colgroup",{},...l],tableWidth:d,tableMinWidth:h}}function ZS(n,e){return n.createAndFill()}function K7(n){if(n.cached.tableNodeTypes)return n.cached.tableNodeTypes;const e={};return Object.keys(n.nodes).forEach(t=>{const r=n.nodes[t];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),n.cached.tableNodeTypes=e,e}function W7(n,e,t,r,s){const o=K7(n),l=[],u=[];for(let h=0;h<t;h+=1){const p=ZS(o.cell);if(p&&u.push(p),r){const m=ZS(o.header_cell);m&&l.push(m)}}const d=[];for(let h=0;h<e;h+=1)d.push(o.row.createChecked(null,r&&h===0?l:u));return o.table.createChecked(null,d)}function Q7(n){return n instanceof Ot}const tf=({editor:n})=>{const{selection:e}=n.state;if(!Q7(e))return!1;let t=0;const r=P2(e.ranges[0].$from,o=>o.type.name==="table");return r==null||r.node.descendants(o=>{if(o.type.name==="table")return!1;["tableCell","tableHeader"].includes(o.type.name)&&(t+=1)}),t===e.ranges.length?(n.commands.deleteTable(),!0):!1},Y7=qt.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,renderWrapper:!1,handleWidth:5,cellMinWidth:25,View:F7,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:n,HTMLAttributes:e}){const{colgroup:t,tableWidth:r,tableMinWidth:s}=G7(n,this.options.cellMinWidth),o=["table",yt(this.options.HTMLAttributes,e,{style:r?`width: ${r}`:`min-width: ${s}`}),t,["tbody",0]];return this.options.renderWrapper?["div",{class:"tableWrapper"},o]:o},addCommands(){return{insertTable:({rows:n=3,cols:e=3,withHeaderRow:t=!0}={})=>({tr:r,dispatch:s,editor:o})=>{const l=W7(o.schema,n,e,t);if(s){const u=r.selection.from+1;r.replaceSelectionWith(l).scrollIntoView().setSelection(Be.near(r.doc.resolve(u)))}return!0},addColumnBefore:()=>({state:n,dispatch:e})=>c7(n,e),addColumnAfter:()=>({state:n,dispatch:e})=>u7(n,e),deleteColumn:()=>({state:n,dispatch:e})=>f7(n,e),addRowBefore:()=>({state:n,dispatch:e})=>p7(n,e),addRowAfter:()=>({state:n,dispatch:e})=>m7(n,e),deleteRow:()=>({state:n,dispatch:e})=>y7(n,e),deleteTable:()=>({state:n,dispatch:e})=>C7(n,e),mergeCells:()=>({state:n,dispatch:e})=>$S(n,e),splitCell:()=>({state:n,dispatch:e})=>qS(n,e),toggleHeaderColumn:()=>({state:n,dispatch:e})=>iu("column")(n,e),toggleHeaderRow:()=>({state:n,dispatch:e})=>iu("row")(n,e),toggleHeaderCell:()=>({state:n,dispatch:e})=>S7(n,e),mergeOrSplit:()=>({state:n,dispatch:e})=>$S(n,e)?!0:qS(n,e),setCellAttribute:(n,e)=>({state:t,dispatch:r})=>x7(n,e)(t,r),goToNextCell:()=>({state:n,dispatch:e})=>VS(1)(n,e),goToPreviousCell:()=>({state:n,dispatch:e})=>VS(-1)(n,e),fixTables:()=>({state:n,dispatch:e})=>(e&&$T(n),!0),setCellSelection:n=>({tr:e,dispatch:t})=>{if(t){const r=Ot.create(e.doc,n.anchorCell,n.headCell);e.setSelection(r)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:tf,"Mod-Backspace":tf,Delete:tf,"Mod-Delete":tf}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[j7({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],V7({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(n){const e={name:n.name,options:n.options,storage:n.storage};return{tableRole:Ze(ke(n,"tableRole",e))}}}),X7=qt.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:n}){return["tr",yt(this.options.HTMLAttributes,n),0]}}),J7=qt.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{const e=n.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:n}){return["th",yt(this.options.HTMLAttributes,n),0]}}),Z7=qt.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:n=>{const e=n.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:n}){return["td",yt(this.options.HTMLAttributes,n),0]}}),dh=(n,e)=>e.view.domAtPos(n).node.offsetParent!==null,eI=(n,e,t)=>{for(let r=n.depth;r>0;r-=1){const s=n.node(r),o=e(s),l=dh(n.start(r),t);if(o&&l)return{pos:r>0?n.before(r):0,start:n.start(r),depth:r,node:s}}},eE=(n,e)=>{const{state:t,view:r,extensionManager:s}=n,{schema:o,selection:l}=t,{empty:u,$anchor:d}=l,h=!!s.extensions.find(N=>N.name==="gapCursor");if(!u||d.parent.type!==o.nodes.detailsSummary||!h||e==="right"&&d.parentOffset!==d.parent.nodeSize-2)return!1;const p=hl(N=>N.type===o.nodes.details)(l);if(!p)return!1;const m=Vo(p.node,N=>N.type===o.nodes.detailsContent);if(!m.length||dh(p.start+m[0].pos+1,n))return!1;const v=t.doc.resolve(p.pos+p.node.nodeSize),w=Ut.findFrom(v,1,!1);if(!w)return!1;const{tr:S}=t,C=new Ut(w);return S.setSelection(C),S.scrollIntoView(),r.dispatch(S),!0},tI=qt.create({name:"details",content:"detailsSummary detailsContent",group:"block",defining:!0,isolating:!0,allowGapCursor:!1,addOptions(){return{persist:!1,openClassName:"is-open",HTMLAttributes:{}}},addAttributes(){return this.options.persist?{open:{default:!1,parseHTML:n=>n.hasAttribute("open"),renderHTML:({open:n})=>n?{open:""}:{}}}:[]},parseHTML(){return[{tag:"details"}]},renderHTML({HTMLAttributes:n}){return["details",yt(this.options.HTMLAttributes,n),0]},addNodeView(){return({editor:n,getPos:e,node:t,HTMLAttributes:r})=>{const s=document.createElement("div"),o=yt(this.options.HTMLAttributes,r,{"data-type":this.name});Object.entries(o).forEach(([h,p])=>s.setAttribute(h,p));const l=document.createElement("button");l.type="button",s.append(l);const u=document.createElement("div");s.append(u);const d=h=>{if(h!==void 0)if(h){if(s.classList.contains(this.options.openClassName))return;s.classList.add(this.options.openClassName)}else{if(!s.classList.contains(this.options.openClassName))return;s.classList.remove(this.options.openClassName)}else s.classList.toggle(this.options.openClassName);const p=new Event("toggleDetailsContent"),m=u.querySelector(':scope > div[data-type="detailsContent"]');m==null||m.dispatchEvent(p)};return t.attrs.open&&setTimeout(()=>d()),l.addEventListener("click",()=>{if(d(),!this.options.persist){n.commands.focus(void 0,{scrollIntoView:!1});return}if(n.isEditable&&typeof e=="function"){const{from:h,to:p}=n.state.selection;n.chain().command(({tr:m})=>{const b=e(),v=m.doc.nodeAt(b);return(v==null?void 0:v.type)!==this.type?!1:(m.setNodeMarkup(b,void 0,{open:!v.attrs.open}),!0)}).setTextSelection({from:h,to:p}).focus(void 0,{scrollIntoView:!1}).run()}}),{dom:s,contentDOM:u,ignoreMutation(h){return h.type==="selection"?!1:!s.contains(h.target)||s===h.target},update:h=>h.type!==this.type?!1:(h.attrs.open!==void 0&&d(h.attrs.open),!0)}}},addCommands(){return{setDetails:()=>({state:n,chain:e})=>{var t;const{schema:r,selection:s}=n,{$from:o,$to:l}=s,u=o.blockRange(l);if(!u)return!1;const d=n.doc.slice(u.start,u.end);if(!r.nodes.detailsContent.contentMatch.matchFragment(d.content))return!1;const p=((t=d.toJSON())===null||t===void 0?void 0:t.content)||[];return e().insertContentAt({from:u.start,to:u.end},{type:this.name,content:[{type:"detailsSummary"},{type:"detailsContent",content:p}]}).setTextSelection(u.start+2).run()},unsetDetails:()=>({state:n,chain:e})=>{const{selection:t,schema:r}=n,s=hl(N=>N.type===this.type)(t);if(!s)return!1;const o=Vo(s.node,N=>N.type===r.nodes.detailsSummary),l=Vo(s.node,N=>N.type===r.nodes.detailsContent);if(!o.length||!l.length)return!1;const u=o[0],d=l[0],h=s.pos,p=n.doc.resolve(h),m=h+s.node.nodeSize,b={from:h,to:m},v=d.node.content.toJSON()||[],w=p.parent.type.contentMatch.defaultType,C=[w==null?void 0:w.create(null,u.node.content).toJSON(),...v];return e().insertContentAt(b,C).setTextSelection(h+1).run()}}},addKeyboardShortcuts(){return{Backspace:()=>{const{schema:n,selection:e}=this.editor.state,{empty:t,$anchor:r}=e;return!t||r.parent.type!==n.nodes.detailsSummary?!1:r.parentOffset!==0?this.editor.commands.command(({tr:s})=>{const o=r.pos-1,l=r.pos;return s.delete(o,l),!0}):this.editor.commands.unsetDetails()},Enter:({editor:n})=>{const{state:e,view:t}=n,{schema:r,selection:s}=e,{$head:o}=s;if(o.parent.type!==r.nodes.detailsSummary)return!1;const l=dh(o.after()+1,n),u=l?e.doc.nodeAt(o.after()):o.node(-2);if(!u)return!1;const d=l?0:o.indexAfter(-1),h=py(u.contentMatchAt(d));if(!h||!u.canReplaceWith(d,d,h))return!1;const p=h.createAndFill();if(!p)return!1;const m=l?o.after()+1:o.after(-1),b=e.tr.replaceWith(m,m,p),v=b.doc.resolve(m),w=Ue.near(v,1);return b.setSelection(w),b.scrollIntoView(),t.dispatch(b),!0},ArrowRight:({editor:n})=>eE(n,"right"),ArrowDown:({editor:n})=>eE(n,"down")}},addProseMirrorPlugins(){return[new Pt({key:new cn("detailsSelection"),appendTransaction:(n,e,t)=>{const{editor:r,type:s}=this;if(!n.some(C=>C.selectionSet)||!e.selection.empty||!t.selection.empty||!F2(t,s.name))return;const{$from:u}=t.selection;if(dh(u.pos,r))return;const h=eI(u,C=>C.type===s,r);if(!h)return;const p=Vo(h.node,C=>C.type===t.schema.nodes.detailsSummary);if(!p.length)return;const m=p[0],v=(e.selection.from<t.selection.from?"forward":"backward")==="forward"?h.start+m.pos:h.pos+m.pos+m.node.nodeSize,w=Be.create(t.doc,v);return t.tr.setSelection(w)}})]}}),nI=qt.create({name:"detailsSummary",content:"text*",defining:!0,selectable:!1,isolating:!0,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"summary"}]},renderHTML({HTMLAttributes:n}){return["summary",yt(this.options.HTMLAttributes,n),0]}}),rI=qt.create({name:"detailsContent",content:"block+",defining:!0,selectable:!1,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:`div[data-type="${this.name}"]`}]},renderHTML({HTMLAttributes:n}){return["div",yt(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},addNodeView(){return({HTMLAttributes:n})=>{const e=document.createElement("div"),t=yt(this.options.HTMLAttributes,n,{"data-type":this.name,hidden:"hidden"});return Object.entries(t).forEach(([r,s])=>e.setAttribute(r,s)),e.addEventListener("toggleDetailsContent",()=>{e.toggleAttribute("hidden")}),{dom:e,contentDOM:e,ignoreMutation(r){return r.type==="selection"?!1:!e.contains(r.target)||e===r.target},update:r=>r.type===this.type}}},addKeyboardShortcuts(){return{Enter:({editor:n})=>{const{state:e,view:t}=n,{selection:r}=e,{$from:s,empty:o}=r,l=hl(Ce=>Ce.type===this.type)(r);if(!o||!l||!l.node.childCount)return!1;const u=s.index(l.depth),{childCount:d}=l.node;if(!(d===u+1))return!1;const p=l.node.type.contentMatch.defaultType,m=p==null?void 0:p.createAndFill();if(!m)return!1;const b=e.doc.resolve(l.pos+1),v=d-1,w=l.node.child(v),S=b.posAtIndex(v,l.depth);if(!w.eq(m))return!1;const N=s.node(-3);if(!N)return!1;const L=s.indexAfter(-3),_=py(N.contentMatchAt(L));if(!_||!N.canReplaceWith(L,L,_))return!1;const k=_.createAndFill();if(!k)return!1;const{tr:$}=e,z=s.after(-2);$.replaceWith(z,z,k);const H=$.doc.resolve(z),Y=Ue.near(H,1);$.setSelection(Y);const re=S,ge=S+w.nodeSize;return $.delete(re,ge),$.scrollIntoView(),t.dispatch($),!0}}}});function iI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function GT(n){return n instanceof Map?n.clear=n.delete=n.set=function(){throw new Error("map is read-only")}:n instanceof Set&&(n.add=n.clear=n.delete=function(){throw new Error("set is read-only")}),Object.freeze(n),Object.getOwnPropertyNames(n).forEach(e=>{const t=n[e],r=typeof t;(r==="object"||r==="function")&&!Object.isFrozen(t)&&GT(t)}),n}class tE{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function KT(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Xs(n,...e){const t=Object.create(null);for(const r in n)t[r]=n[r];return e.forEach(function(r){for(const s in r)t[s]=r[s]}),t}const sI="</span>",nE=n=>!!n.scope,oI=(n,{prefix:e})=>{if(n.startsWith("language:"))return n.replace("language:","language-");if(n.includes(".")){const t=n.split(".");return[`${e}${t.shift()}`,...t.map((r,s)=>`${r}${"_".repeat(s+1)}`)].join(" ")}return`${e}${n}`};class aI{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=KT(e)}openNode(e){if(!nE(e))return;const t=oI(e.scope,{prefix:this.classPrefix});this.span(t)}closeNode(e){nE(e)&&(this.buffer+=sI)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const rE=(n={})=>{const e={children:[]};return Object.assign(e,n),e};class zy{constructor(){this.rootNode=rE(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t=rE({scope:e});this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return typeof t=="string"?e.addText(t):t.children&&(e.openNode(t),t.children.forEach(r=>this._walk(e,r)),e.closeNode(t)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(t=>typeof t=="string")?e.children=[e.children.join("")]:e.children.forEach(t=>{zy._collapse(t)}))}}class lI extends zy{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,t){const r=e.root;t&&(r.scope=`language:${t}`),this.add(r)}toHTML(){return new aI(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function su(n){return n?typeof n=="string"?n:n.source:null}function WT(n){return ra("(?=",n,")")}function cI(n){return ra("(?:",n,")*")}function uI(n){return ra("(?:",n,")?")}function ra(...n){return n.map(t=>su(t)).join("")}function dI(n){const e=n[n.length-1];return typeof e=="object"&&e.constructor===Object?(n.splice(n.length-1,1),e):{}}function Iy(...n){return"("+(dI(n).capture?"":"?:")+n.map(r=>su(r)).join("|")+")"}function QT(n){return new RegExp(n.toString()+"|").exec("").length-1}function fI(n,e){const t=n&&n.exec(e);return t&&t.index===0}const hI=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Hy(n,{joinWith:e}){let t=0;return n.map(r=>{t+=1;const s=t;let o=su(r),l="";for(;o.length>0;){const u=hI.exec(o);if(!u){l+=o;break}l+=o.substring(0,u.index),o=o.substring(u.index+u[0].length),u[0][0]==="\\"&&u[1]?l+="\\"+String(Number(u[1])+s):(l+=u[0],u[0]==="("&&t++)}return l}).map(r=>`(${r})`).join(e)}const pI=/\b\B/,YT="[a-zA-Z]\\w*",Uy="[a-zA-Z_]\\w*",XT="\\b\\d+(\\.\\d+)?",JT="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",ZT="\\b(0b[01]+)",mI="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",gI=(n={})=>{const e=/^#![ ]*\//;return n.binary&&(n.begin=ra(e,/.*\b/,n.binary,/\b.*/)),Xs({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(t,r)=>{t.index!==0&&r.ignoreMatch()}},n)},ou={begin:"\\\\[\\s\\S]",relevance:0},yI={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[ou]},bI={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[ou]},vI={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},zh=function(n,e,t={}){const r=Xs({scope:"comment",begin:n,end:e,contains:[]},t);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const s=Iy("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:ra(/[ ]+/,"(",s,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},xI=zh("//","$"),wI=zh("/\\*","\\*/"),SI=zh("#","$"),EI={scope:"number",begin:XT,relevance:0},CI={scope:"number",begin:JT,relevance:0},TI={scope:"number",begin:ZT,relevance:0},NI={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[ou,{begin:/\[/,end:/\]/,relevance:0,contains:[ou]}]},AI={scope:"title",begin:YT,relevance:0},kI={scope:"title",begin:Uy,relevance:0},MI={begin:"\\.\\s*"+Uy,relevance:0},OI=function(n){return Object.assign(n,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})};var nf=Object.freeze({__proto__:null,APOS_STRING_MODE:yI,BACKSLASH_ESCAPE:ou,BINARY_NUMBER_MODE:TI,BINARY_NUMBER_RE:ZT,COMMENT:zh,C_BLOCK_COMMENT_MODE:wI,C_LINE_COMMENT_MODE:xI,C_NUMBER_MODE:CI,C_NUMBER_RE:JT,END_SAME_AS_BEGIN:OI,HASH_COMMENT_MODE:SI,IDENT_RE:YT,MATCH_NOTHING_RE:pI,METHOD_GUARD:MI,NUMBER_MODE:EI,NUMBER_RE:XT,PHRASAL_WORDS_MODE:vI,QUOTE_STRING_MODE:bI,REGEXP_MODE:NI,RE_STARTERS_RE:mI,SHEBANG:gI,TITLE_MODE:AI,UNDERSCORE_IDENT_RE:Uy,UNDERSCORE_TITLE_MODE:kI});function RI(n,e){n.input[n.index-1]==="."&&e.ignoreMatch()}function DI(n,e){n.className!==void 0&&(n.scope=n.className,delete n.className)}function _I(n,e){e&&n.beginKeywords&&(n.begin="\\b("+n.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",n.__beforeBegin=RI,n.keywords=n.keywords||n.beginKeywords,delete n.beginKeywords,n.relevance===void 0&&(n.relevance=0))}function jI(n,e){Array.isArray(n.illegal)&&(n.illegal=Iy(...n.illegal))}function LI(n,e){if(n.match){if(n.begin||n.end)throw new Error("begin & end are not supported with match");n.begin=n.match,delete n.match}}function BI(n,e){n.relevance===void 0&&(n.relevance=1)}const zI=(n,e)=>{if(!n.beforeMatch)return;if(n.starts)throw new Error("beforeMatch cannot be used with starts");const t=Object.assign({},n);Object.keys(n).forEach(r=>{delete n[r]}),n.keywords=t.keywords,n.begin=ra(t.beforeMatch,WT(t.begin)),n.starts={relevance:0,contains:[Object.assign(t,{endsParent:!0})]},n.relevance=0,delete t.beforeMatch},II=["of","and","for","in","not","or","if","then","parent","list","value"],HI="keyword";function eN(n,e,t=HI){const r=Object.create(null);return typeof n=="string"?s(t,n.split(" ")):Array.isArray(n)?s(t,n):Object.keys(n).forEach(function(o){Object.assign(r,eN(n[o],e,o))}),r;function s(o,l){e&&(l=l.map(u=>u.toLowerCase())),l.forEach(function(u){const d=u.split("|");r[d[0]]=[o,UI(d[0],d[1])]})}}function UI(n,e){return e?Number(e):$I(n)?0:1}function $I(n){return II.includes(n.toLowerCase())}const iE={},Ko=n=>{console.error(n)},sE=(n,...e)=>{console.log(`WARN: ${n}`,...e)},Pa=(n,e)=>{iE[`${n}/${e}`]||(console.log(`Deprecated as of ${n}. ${e}`),iE[`${n}/${e}`]=!0)},fh=new Error;function tN(n,e,{key:t}){let r=0;const s=n[t],o={},l={};for(let u=1;u<=e.length;u++)l[u+r]=s[u],o[u+r]=!0,r+=QT(e[u-1]);n[t]=l,n[t]._emit=o,n[t]._multi=!0}function qI(n){if(Array.isArray(n.begin)){if(n.skip||n.excludeBegin||n.returnBegin)throw Ko("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),fh;if(typeof n.beginScope!="object"||n.beginScope===null)throw Ko("beginScope must be object"),fh;tN(n,n.begin,{key:"beginScope"}),n.begin=Hy(n.begin,{joinWith:""})}}function PI(n){if(Array.isArray(n.end)){if(n.skip||n.excludeEnd||n.returnEnd)throw Ko("skip, excludeEnd, returnEnd not compatible with endScope: {}"),fh;if(typeof n.endScope!="object"||n.endScope===null)throw Ko("endScope must be object"),fh;tN(n,n.end,{key:"endScope"}),n.end=Hy(n.end,{joinWith:""})}}function VI(n){n.scope&&typeof n.scope=="object"&&n.scope!==null&&(n.beginScope=n.scope,delete n.scope)}function FI(n){VI(n),typeof n.beginScope=="string"&&(n.beginScope={_wrap:n.beginScope}),typeof n.endScope=="string"&&(n.endScope={_wrap:n.endScope}),qI(n),PI(n)}function GI(n){function e(l,u){return new RegExp(su(l),"m"+(n.case_insensitive?"i":"")+(n.unicodeRegex?"u":"")+(u?"g":""))}class t{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(u,d){d.position=this.position++,this.matchIndexes[this.matchAt]=d,this.regexes.push([d,u]),this.matchAt+=QT(u)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const u=this.regexes.map(d=>d[1]);this.matcherRe=e(Hy(u,{joinWith:"|"}),!0),this.lastIndex=0}exec(u){this.matcherRe.lastIndex=this.lastIndex;const d=this.matcherRe.exec(u);if(!d)return null;const h=d.findIndex((m,b)=>b>0&&m!==void 0),p=this.matchIndexes[h];return d.splice(0,h),Object.assign(d,p)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(u){if(this.multiRegexes[u])return this.multiRegexes[u];const d=new t;return this.rules.slice(u).forEach(([h,p])=>d.addRule(h,p)),d.compile(),this.multiRegexes[u]=d,d}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(u,d){this.rules.push([u,d]),d.type==="begin"&&this.count++}exec(u){const d=this.getMatcher(this.regexIndex);d.lastIndex=this.lastIndex;let h=d.exec(u);if(this.resumingScanAtSamePosition()&&!(h&&h.index===this.lastIndex)){const p=this.getMatcher(0);p.lastIndex=this.lastIndex+1,h=p.exec(u)}return h&&(this.regexIndex+=h.position+1,this.regexIndex===this.count&&this.considerAll()),h}}function s(l){const u=new r;return l.contains.forEach(d=>u.addRule(d.begin,{rule:d,type:"begin"})),l.terminatorEnd&&u.addRule(l.terminatorEnd,{type:"end"}),l.illegal&&u.addRule(l.illegal,{type:"illegal"}),u}function o(l,u){const d=l;if(l.isCompiled)return d;[DI,LI,FI,zI].forEach(p=>p(l,u)),n.compilerExtensions.forEach(p=>p(l,u)),l.__beforeBegin=null,[_I,jI,BI].forEach(p=>p(l,u)),l.isCompiled=!0;let h=null;return typeof l.keywords=="object"&&l.keywords.$pattern&&(l.keywords=Object.assign({},l.keywords),h=l.keywords.$pattern,delete l.keywords.$pattern),h=h||/\w+/,l.keywords&&(l.keywords=eN(l.keywords,n.case_insensitive)),d.keywordPatternRe=e(h,!0),u&&(l.begin||(l.begin=/\B|\b/),d.beginRe=e(d.begin),!l.end&&!l.endsWithParent&&(l.end=/\B|\b/),l.end&&(d.endRe=e(d.end)),d.terminatorEnd=su(d.end)||"",l.endsWithParent&&u.terminatorEnd&&(d.terminatorEnd+=(l.end?"|":"")+u.terminatorEnd)),l.illegal&&(d.illegalRe=e(l.illegal)),l.contains||(l.contains=[]),l.contains=[].concat(...l.contains.map(function(p){return KI(p==="self"?l:p)})),l.contains.forEach(function(p){o(p,d)}),l.starts&&o(l.starts,u),d.matcher=s(d),d}if(n.compilerExtensions||(n.compilerExtensions=[]),n.contains&&n.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return n.classNameAliases=Xs(n.classNameAliases||{}),o(n)}function nN(n){return n?n.endsWithParent||nN(n.starts):!1}function KI(n){return n.variants&&!n.cachedVariants&&(n.cachedVariants=n.variants.map(function(e){return Xs(n,{variants:null},e)})),n.cachedVariants?n.cachedVariants:nN(n)?Xs(n,{starts:n.starts?Xs(n.starts):null}):Object.isFrozen(n)?Xs(n):n}var WI="11.10.0";class QI extends Error{constructor(e,t){super(e),this.name="HTMLInjectionError",this.html=t}}const jg=KT,oE=Xs,aE=Symbol("nomatch"),YI=7,rN=function(n){const e=Object.create(null),t=Object.create(null),r=[];let s=!0;const o="Could not find the language '{}', did you forget to load/include a language module?",l={disableAutodetect:!0,name:"Plain text",contains:[]};let u={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:lI};function d(R){return u.noHighlightRe.test(R)}function h(R){let I=R.className+" ";I+=R.parentNode?R.parentNode.className:"";const ee=u.languageDetectRe.exec(I);if(ee){const ce=re(ee[1]);return ce||(sE(o.replace("{}",ee[1])),sE("Falling back to no-highlight mode for this block.",R)),ce?ee[1]:"no-highlight"}return I.split(/\s+/).find(ce=>d(ce)||re(ce))}function p(R,I,ee){let ce="",D="";typeof I=="object"?(ce=R,ee=I.ignoreIllegals,D=I.language):(Pa("10.7.0","highlight(lang, code, ...args) has been deprecated."),Pa("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),D=R,ce=I),ee===void 0&&(ee=!0);const V={code:ce,language:D};he("before:highlight",V);const W=V.result?V.result:m(V.language,V.code,ee);return W.code=V.code,he("after:highlight",W),W}function m(R,I,ee,ce){const D=Object.create(null);function V(me,Se){return me.keywords[Se]}function W(){if(!Ae.keywords){ct.addText(Pe);return}let me=0;Ae.keywordPatternRe.lastIndex=0;let Se=Ae.keywordPatternRe.exec(Pe),Ve="";for(;Se;){Ve+=Pe.substring(me,Se.index);const Ke=Rt.case_insensitive?Se[0].toLowerCase():Se[0],Dt=V(Ae,Ke);if(Dt){const[Qt,gr]=Dt;if(ct.addText(Ve),Ve="",D[Ke]=(D[Ke]||0)+1,D[Ke]<=YI&&(It+=gr),Qt.startsWith("_"))Ve+=Se[0];else{const K=Rt.classNameAliases[Qt]||Qt;ve(Se[0],K)}}else Ve+=Se[0];me=Ae.keywordPatternRe.lastIndex,Se=Ae.keywordPatternRe.exec(Pe)}Ve+=Pe.substring(me),ct.addText(Ve)}function oe(){if(Pe==="")return;let me=null;if(typeof Ae.subLanguage=="string"){if(!e[Ae.subLanguage]){ct.addText(Pe);return}me=m(Ae.subLanguage,Pe,!0,tn[Ae.subLanguage]),tn[Ae.subLanguage]=me._top}else me=v(Pe,Ae.subLanguage.length?Ae.subLanguage:null);Ae.relevance>0&&(It+=me.relevance),ct.__addSublanguage(me._emitter,me.language)}function ue(){Ae.subLanguage!=null?oe():W(),Pe=""}function ve(me,Se){me!==""&&(ct.startScope(Se),ct.addText(me),ct.endScope())}function ze(me,Se){let Ve=1;const Ke=Se.length-1;for(;Ve<=Ke;){if(!me._emit[Ve]){Ve++;continue}const Dt=Rt.classNameAliases[me[Ve]]||me[Ve],Qt=Se[Ve];Dt?ve(Qt,Dt):(Pe=Qt,W(),Pe=""),Ve++}}function se(me,Se){return me.scope&&typeof me.scope=="string"&&ct.openNode(Rt.classNameAliases[me.scope]||me.scope),me.beginScope&&(me.beginScope._wrap?(ve(Pe,Rt.classNameAliases[me.beginScope._wrap]||me.beginScope._wrap),Pe=""):me.beginScope._multi&&(ze(me.beginScope,Se),Pe="")),Ae=Object.create(me,{parent:{value:Ae}}),Ae}function Ie(me,Se,Ve){let Ke=fI(me.endRe,Ve);if(Ke){if(me["on:end"]){const Dt=new tE(me);me["on:end"](Se,Dt),Dt.isMatchIgnored&&(Ke=!1)}if(Ke){for(;me.endsParent&&me.parent;)me=me.parent;return me}}if(me.endsWithParent)return Ie(me.parent,Se,Ve)}function mt(me){return Ae.matcher.regexIndex===0?(Pe+=me[0],1):(Gt=!0,0)}function Vt(me){const Se=me[0],Ve=me.rule,Ke=new tE(Ve),Dt=[Ve.__beforeBegin,Ve["on:begin"]];for(const Qt of Dt)if(Qt&&(Qt(me,Ke),Ke.isMatchIgnored))return mt(Se);return Ve.skip?Pe+=Se:(Ve.excludeBegin&&(Pe+=Se),ue(),!Ve.returnBegin&&!Ve.excludeBegin&&(Pe=Se)),se(Ve,me),Ve.returnBegin?0:Se.length}function bn(me){const Se=me[0],Ve=I.substring(me.index),Ke=Ie(Ae,me,Ve);if(!Ke)return aE;const Dt=Ae;Ae.endScope&&Ae.endScope._wrap?(ue(),ve(Se,Ae.endScope._wrap)):Ae.endScope&&Ae.endScope._multi?(ue(),ze(Ae.endScope,me)):Dt.skip?Pe+=Se:(Dt.returnEnd||Dt.excludeEnd||(Pe+=Se),ue(),Dt.excludeEnd&&(Pe=Se));do Ae.scope&&ct.closeNode(),!Ae.skip&&!Ae.subLanguage&&(It+=Ae.relevance),Ae=Ae.parent;while(Ae!==Ke.parent);return Ke.starts&&se(Ke.starts,me),Dt.returnEnd?0:Se.length}function tr(){const me=[];for(let Se=Ae;Se!==Rt;Se=Se.parent)Se.scope&&me.unshift(Se.scope);me.forEach(Se=>ct.openNode(Se))}let Ft={};function Kn(me,Se){const Ve=Se&&Se[0];if(Pe+=me,Ve==null)return ue(),0;if(Ft.type==="begin"&&Se.type==="end"&&Ft.index===Se.index&&Ve===""){if(Pe+=I.slice(Se.index,Se.index+1),!s){const Ke=new Error(`0 width match regex (${R})`);throw Ke.languageName=R,Ke.badRule=Ft.rule,Ke}return 1}if(Ft=Se,Se.type==="begin")return Vt(Se);if(Se.type==="illegal"&&!ee){const Ke=new Error('Illegal lexeme "'+Ve+'" for mode "'+(Ae.scope||"<unnamed>")+'"');throw Ke.mode=Ae,Ke}else if(Se.type==="end"){const Ke=bn(Se);if(Ke!==aE)return Ke}if(Se.type==="illegal"&&Ve==="")return 1;if(Wn>1e5&&Wn>Se.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Pe+=Ve,Ve.length}const Rt=re(R);if(!Rt)throw Ko(o.replace("{}",R)),new Error('Unknown language: "'+R+'"');const kn=GI(Rt);let Hn="",Ae=ce||kn;const tn={},ct=new u.__emitter(u);tr();let Pe="",It=0,tt=0,Wn=0,Gt=!1;try{if(Rt.__emitTokens)Rt.__emitTokens(I,ct);else{for(Ae.matcher.considerAll();;){Wn++,Gt?Gt=!1:Ae.matcher.considerAll(),Ae.matcher.lastIndex=tt;const me=Ae.matcher.exec(I);if(!me)break;const Se=I.substring(tt,me.index),Ve=Kn(Se,me);tt=me.index+Ve}Kn(I.substring(tt))}return ct.finalize(),Hn=ct.toHTML(),{language:R,value:Hn,relevance:It,illegal:!1,_emitter:ct,_top:Ae}}catch(me){if(me.message&&me.message.includes("Illegal"))return{language:R,value:jg(I),illegal:!0,relevance:0,_illegalBy:{message:me.message,index:tt,context:I.slice(tt-100,tt+100),mode:me.mode,resultSoFar:Hn},_emitter:ct};if(s)return{language:R,value:jg(I),illegal:!1,relevance:0,errorRaised:me,_emitter:ct,_top:Ae};throw me}}function b(R){const I={value:jg(R),illegal:!1,relevance:0,_top:l,_emitter:new u.__emitter(u)};return I._emitter.addText(R),I}function v(R,I){I=I||u.languages||Object.keys(e);const ee=b(R),ce=I.filter(re).filter(Ce).map(ue=>m(ue,R,!1));ce.unshift(ee);const D=ce.sort((ue,ve)=>{if(ue.relevance!==ve.relevance)return ve.relevance-ue.relevance;if(ue.language&&ve.language){if(re(ue.language).supersetOf===ve.language)return 1;if(re(ve.language).supersetOf===ue.language)return-1}return 0}),[V,W]=D,oe=V;return oe.secondBest=W,oe}function w(R,I,ee){const ce=I&&t[I]||ee;R.classList.add("hljs"),R.classList.add(`language-${ce}`)}function S(R){let I=null;const ee=h(R);if(d(ee))return;if(he("before:highlightElement",{el:R,language:ee}),R.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",R);return}if(R.children.length>0&&(u.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(R)),u.throwUnescapedHTML))throw new QI("One of your code blocks includes unescaped HTML.",R.innerHTML);I=R;const ce=I.textContent,D=ee?p(ce,{language:ee,ignoreIllegals:!0}):v(ce);R.innerHTML=D.value,R.dataset.highlighted="yes",w(R,ee,D.language),R.result={language:D.language,re:D.relevance,relevance:D.relevance},D.secondBest&&(R.secondBest={language:D.secondBest.language,relevance:D.secondBest.relevance}),he("after:highlightElement",{el:R,result:D,text:ce})}function C(R){u=oE(u,R)}const N=()=>{k(),Pa("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function L(){k(),Pa("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let _=!1;function k(){if(document.readyState==="loading"){_=!0;return}document.querySelectorAll(u.cssSelector).forEach(S)}function $(){_&&k()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",$,!1);function z(R,I){let ee=null;try{ee=I(n)}catch(ce){if(Ko("Language definition for '{}' could not be registered.".replace("{}",R)),s)Ko(ce);else throw ce;ee=l}ee.name||(ee.name=R),e[R]=ee,ee.rawDefinition=I.bind(null,n),ee.aliases&&ge(ee.aliases,{languageName:R})}function H(R){delete e[R];for(const I of Object.keys(t))t[I]===R&&delete t[I]}function Y(){return Object.keys(e)}function re(R){return R=(R||"").toLowerCase(),e[R]||e[t[R]]}function ge(R,{languageName:I}){typeof R=="string"&&(R=[R]),R.forEach(ee=>{t[ee.toLowerCase()]=I})}function Ce(R){const I=re(R);return I&&!I.disableAutodetect}function pe(R){R["before:highlightBlock"]&&!R["before:highlightElement"]&&(R["before:highlightElement"]=I=>{R["before:highlightBlock"](Object.assign({block:I.el},I))}),R["after:highlightBlock"]&&!R["after:highlightElement"]&&(R["after:highlightElement"]=I=>{R["after:highlightBlock"](Object.assign({block:I.el},I))})}function ae(R){pe(R),r.push(R)}function ie(R){const I=r.indexOf(R);I!==-1&&r.splice(I,1)}function he(R,I){const ee=R;r.forEach(function(ce){ce[ee]&&ce[ee](I)})}function O(R){return Pa("10.7.0","highlightBlock will be removed entirely in v12.0"),Pa("10.7.0","Please use highlightElement now."),S(R)}Object.assign(n,{highlight:p,highlightAuto:v,highlightAll:k,highlightElement:S,highlightBlock:O,configure:C,initHighlighting:N,initHighlightingOnLoad:L,registerLanguage:z,unregisterLanguage:H,listLanguages:Y,getLanguage:re,registerAliases:ge,autoDetection:Ce,inherit:oE,addPlugin:ae,removePlugin:ie}),n.debugMode=function(){s=!1},n.safeMode=function(){s=!0},n.versionString=WI,n.regex={concat:ra,lookahead:WT,either:Iy,optional:uI,anyNumberOfTimes:cI};for(const R in nf)typeof nf[R]=="object"&&GT(nf[R]);return Object.assign(n,nf),n},cl=rN({});cl.newInstance=()=>rN({});var XI=cl;cl.HighlightJS=cl;cl.default=cl;var JI=iI(XI);function iN(n,e=[]){return n.map(t=>{const r=[...e,...t.properties?t.properties.className:[]];return t.children?iN(t.children,r):{text:t.value,classes:r}}).flat()}function lE(n){return n.value||n.children||[]}function ZI(n){return!!JI.getLanguage(n)}function cE({doc:n,name:e,lowlight:t,defaultLanguage:r}){const s=[];return Vo(n,o=>o.type.name===e).forEach(o=>{var l;let u=o.pos+1;const d=o.node.attrs.language||r,h=t.listLanguages(),p=d&&(h.includes(d)||ZI(d)||!((l=t.registered)===null||l===void 0)&&l.call(t,d))?lE(t.highlight(d,o.node.textContent)):lE(t.highlightAuto(o.node.textContent));iN(p).forEach(m=>{const b=u+m.text.length;if(m.classes.length){const v=En.inline(u,b,{class:m.classes.join(" ")});s.push(v)}u=b})}),zt.create(n,s)}function e8(n){return typeof n=="function"}function t8({name:n,lowlight:e,defaultLanguage:t}){if(!["highlight","highlightAuto","listLanguages"].every(s=>e8(e[s])))throw Error("You should provide an instance of lowlight to use the code-block-lowlight extension");const r=new Pt({key:new cn("lowlight"),state:{init:(s,{doc:o})=>cE({doc:o,name:n,lowlight:e,defaultLanguage:t}),apply:(s,o,l,u)=>{const d=l.selection.$head.parent.type.name,h=u.selection.$head.parent.type.name,p=Vo(l.doc,b=>b.type.name===n),m=Vo(u.doc,b=>b.type.name===n);return s.docChanged&&([d,h].includes(n)||m.length!==p.length||s.steps.some(b=>b.from!==void 0&&b.to!==void 0&&p.some(v=>v.pos>=b.from&&v.pos+v.node.nodeSize<=b.to)))?cE({doc:s.doc,name:n,lowlight:e,defaultLanguage:t}):o.map(s.mapping,s.doc)}},props:{decorations(s){return r.getState(s)}}});return r}const n8=ST.extend({addOptions(){var n;return{...(n=this.parent)===null||n===void 0?void 0:n.call(this),lowlight:{},languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},addProseMirrorPlugins(){var n;return[...((n=this.parent)===null||n===void 0?void 0:n.call(this))||[],t8({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),r8=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),i8=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],s8=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],o8=[...i8,...s8],a8=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),l8=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),c8=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),u8=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function d8(n){const e=n.regex,t=r8(n),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},s="and or not only",o=/@-?\w[\w]*(-\w+)*/,l="[a-zA-Z-][a-zA-Z0-9_-]*",u=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[t.BLOCK_COMMENT,r,t.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+l,relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+l8.join("|")+")"},{begin:":(:)?("+c8.join("|")+")"}]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+u8.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[t.BLOCK_COMMENT,t.HEXCOLOR,t.IMPORTANT,t.CSS_NUMBER_MODE,...u,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...u,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},t.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:o},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:a8.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...u,t.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+o8.join("|")+")\\b"}]}}const uE="[A-Za-z$_][0-9A-Za-z$_]*",f8=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],h8=["true","false","null","undefined","NaN","Infinity"],sN=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],oN=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],aN=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],p8=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],m8=[].concat(aN,sN,oN);function g8(n){const e=n.regex,t=(I,{after:ee})=>{const ce="</"+I[0].slice(1);return I.input.indexOf(ce,ee)!==-1},r=uE,s={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,l={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(I,ee)=>{const ce=I[0].length+I.index,D=I.input[ce];if(D==="<"||D===","){ee.ignoreMatch();return}D===">"&&(t(I,{after:ce})||ee.ignoreMatch());let V;const W=I.input.substring(ce);if(V=W.match(/^\s*=/)){ee.ignoreMatch();return}if((V=W.match(/^\s+extends\s+/))&&V.index===0){ee.ignoreMatch();return}}},u={$pattern:uE,keyword:f8,literal:h8,built_in:m8,"variable.language":p8},d="[0-9](_?[0-9])*",h=`\\.(${d})`,p="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",m={className:"number",variants:[{begin:`(\\b(${p})((${h})|\\.)?|(${h}))[eE][+-]?(${d})\\b`},{begin:`\\b(${p})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},b={className:"subst",begin:"\\$\\{",end:"\\}",keywords:u,contains:[]},v={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,b],subLanguage:"xml"}},w={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,b],subLanguage:"css"}},S={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,b],subLanguage:"graphql"}},C={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,b]},L={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},_=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,v,w,S,C,{match:/\$\d+/},m];b.contains=_.concat({begin:/\{/,end:/\}/,keywords:u,contains:["self"].concat(_)});const k=[].concat(L,b.contains),$=k.concat([{begin:/(\s*)\(/,end:/\)/,keywords:u,contains:["self"].concat(k)}]),z={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:$},H={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},Y={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...sN,...oN]}},re={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},ge={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[z],illegal:/%/},Ce={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function pe(I){return e.concat("(?!",I.join("|"),")")}const ae={match:e.concat(/\b/,pe([...aN,"super","import"].map(I=>`${I}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},ie={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},he={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},z]},O="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",R={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(O)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[z]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:u,exports:{PARAMS_CONTAINS:$,CLASS_REFERENCE:Y},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),re,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,v,w,S,C,L,{match:/\$\d+/},m,Y,{scope:"attr",match:r+e.lookahead(":"),relevance:0},R,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[L,n.REGEXP_MODE,{className:"function",begin:O,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:$}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:o},{begin:l.begin,"on:begin":l.isTrulyOpeningTag,end:l.end}],subLanguage:"xml",contains:[{begin:l.begin,end:l.end,skip:!0,contains:["self"]}]}]},ge,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[z,n.inherit(n.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},ie,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[z]},ae,Ce,H,he,{match:/\$[(.]/}]}}function y8(n){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},t={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],s={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[e,t,n.QUOTE_STRING_MODE,s,n.C_NUMBER_MODE,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}function b8(n){const e=n.regex,t=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],u={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},d={className:"meta",begin:/^(>>>|\.\.\.) /},h={className:"subst",begin:/\{/,end:/\}/,keywords:u,illegal:/#/},p={begin:/\{\{/,relevance:0},m={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,d],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,d,p,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,d,p,h]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,p,h]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,p,h]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},b="[0-9](_?[0-9])*",v=`(\\b(${b}))?\\.(${b})|\\b(${b})\\.`,w=`\\b|${r.join("|")}`,S={className:"number",relevance:0,variants:[{begin:`(\\b(${b})|(${v}))[eE][+-]?(${b})[jJ]?(?=${w})`},{begin:`(${v})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${w})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${w})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${w})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${w})`},{begin:`\\b(${b})[jJ](?=${w})`}]},C={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:u,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},N={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:["self",d,S,m,n.HASH_COMMENT_MODE]}]};return h.contains=[m,S,d],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:u,illegal:/(<\/|\?)|=>/,contains:[d,S,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},m,C,n.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,t],scope:{1:"keyword",3:"title.function"},contains:[N]},{variants:[{match:[/\bclass/,/\s+/,t,/\s*/,/\(\s*/,t,/\s*\)/]},{match:[/\bclass/,/\s+/,t]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[S,N,m]}]}}const hh="[A-Za-z$_][0-9A-Za-z$_]*",lN=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],cN=["true","false","null","undefined","NaN","Infinity"],uN=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],dN=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],fN=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],hN=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],pN=[].concat(fN,uN,dN);function v8(n){const e=n.regex,t=(I,{after:ee})=>{const ce="</"+I[0].slice(1);return I.input.indexOf(ce,ee)!==-1},r=hh,s={begin:"<>",end:"</>"},o=/<[A-Za-z0-9\\._:-]+\s*\/>/,l={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(I,ee)=>{const ce=I[0].length+I.index,D=I.input[ce];if(D==="<"||D===","){ee.ignoreMatch();return}D===">"&&(t(I,{after:ce})||ee.ignoreMatch());let V;const W=I.input.substring(ce);if(V=W.match(/^\s*=/)){ee.ignoreMatch();return}if((V=W.match(/^\s+extends\s+/))&&V.index===0){ee.ignoreMatch();return}}},u={$pattern:hh,keyword:lN,literal:cN,built_in:pN,"variable.language":hN},d="[0-9](_?[0-9])*",h=`\\.(${d})`,p="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",m={className:"number",variants:[{begin:`(\\b(${p})((${h})|\\.)?|(${h}))[eE][+-]?(${d})\\b`},{begin:`\\b(${p})\\b((${h})\\b|\\.)?|(${h})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},b={className:"subst",begin:"\\$\\{",end:"\\}",keywords:u,contains:[]},v={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,b],subLanguage:"xml"}},w={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,b],subLanguage:"css"}},S={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,b],subLanguage:"graphql"}},C={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,b]},L={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},_=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,v,w,S,C,{match:/\$\d+/},m];b.contains=_.concat({begin:/\{/,end:/\}/,keywords:u,contains:["self"].concat(_)});const k=[].concat(L,b.contains),$=k.concat([{begin:/(\s*)\(/,end:/\)/,keywords:u,contains:["self"].concat(k)}]),z={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:$},H={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},Y={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...uN,...dN]}},re={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},ge={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[z],illegal:/%/},Ce={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function pe(I){return e.concat("(?!",I.join("|"),")")}const ae={match:e.concat(/\b/,pe([...fN,"super","import"].map(I=>`${I}\\s*\\(`)),r,e.lookahead(/\s*\(/)),className:"title.function",relevance:0},ie={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},he={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},z]},O="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",R={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(O)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[z]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:u,exports:{PARAMS_CONTAINS:$,CLASS_REFERENCE:Y},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),re,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,v,w,S,C,L,{match:/\$\d+/},m,Y,{scope:"attr",match:r+e.lookahead(":"),relevance:0},R,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[L,n.REGEXP_MODE,{className:"function",begin:O,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:u,contains:$}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:o},{begin:l.begin,"on:begin":l.isTrulyOpeningTag,end:l.end}],subLanguage:"xml",contains:[{begin:l.begin,end:l.end,skip:!0,contains:["self"]}]}]},ge,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[z,n.inherit(n.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},ie,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[z]},ae,Ce,H,he,{match:/\$[(.]/}]}}function x8(n){const e=n.regex,t=v8(n),r=hh,s=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],o={begin:[/namespace/,/\s+/,n.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},l={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:s},contains:[t.exports.CLASS_REFERENCE]},u={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},d=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],h={$pattern:hh,keyword:lN.concat(d),literal:cN,built_in:pN.concat(s),"variable.language":hN},p={className:"meta",begin:"@"+r},m=(S,C,N)=>{const L=S.contains.findIndex(_=>_.label===C);if(L===-1)throw new Error("can not find mode to replace");S.contains.splice(L,1,N)};Object.assign(t.keywords,h),t.exports.PARAMS_CONTAINS.push(p);const b=t.contains.find(S=>S.scope==="attr"),v=Object.assign({},b,{match:e.concat(r,e.lookahead(/\s*\?:/))});t.exports.PARAMS_CONTAINS.push([t.exports.CLASS_REFERENCE,b,v]),t.contains=t.contains.concat([p,o,l,v]),m(t,"shebang",n.SHEBANG()),m(t,"use_strict",u);const w=t.contains.find(S=>S.label==="func.def");return w.relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),t}function w8(n){const e=n.regex,t=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,s={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},o={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},l=n.inherit(o,{begin:/\(/,end:/\)/}),u=n.inherit(n.APOS_STRING_MODE,{className:"string"}),d=n.inherit(n.QUOTE_STRING_MODE,{className:"string"}),h={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[s]},{begin:/'/,end:/'/,contains:[s]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[o,d,u,l,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[o,l,d,u]}]}]},n.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},s,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[d]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[h],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[h],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(t,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:t,relevance:0,starts:h}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(t,/>/))),contains:[{className:"name",begin:t,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}var Lg,dE;function S8(){if(dE)return Lg;dE=1;function n(M){return M instanceof Map?M.clear=M.delete=M.set=function(){throw new Error("map is read-only")}:M instanceof Set&&(M.add=M.clear=M.delete=function(){throw new Error("set is read-only")}),Object.freeze(M),Object.getOwnPropertyNames(M).forEach(G=>{const le=M[G],Me=typeof le;(Me==="object"||Me==="function")&&!Object.isFrozen(le)&&n(le)}),M}class e{constructor(G){G.data===void 0&&(G.data={}),this.data=G.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function t(M){return M.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(M,...G){const le=Object.create(null);for(const Me in M)le[Me]=M[Me];return G.forEach(function(Me){for(const ut in Me)le[ut]=Me[ut]}),le}const s="</span>",o=M=>!!M.scope,l=(M,{prefix:G})=>{if(M.startsWith("language:"))return M.replace("language:","language-");if(M.includes(".")){const le=M.split(".");return[`${G}${le.shift()}`,...le.map((Me,ut)=>`${Me}${"_".repeat(ut+1)}`)].join(" ")}return`${G}${M}`};class u{constructor(G,le){this.buffer="",this.classPrefix=le.classPrefix,G.walk(this)}addText(G){this.buffer+=t(G)}openNode(G){if(!o(G))return;const le=l(G.scope,{prefix:this.classPrefix});this.span(le)}closeNode(G){o(G)&&(this.buffer+=s)}value(){return this.buffer}span(G){this.buffer+=`<span class="${G}">`}}const d=(M={})=>{const G={children:[]};return Object.assign(G,M),G};class h{constructor(){this.rootNode=d(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(G){this.top.children.push(G)}openNode(G){const le=d({scope:G});this.add(le),this.stack.push(le)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(G){return this.constructor._walk(G,this.rootNode)}static _walk(G,le){return typeof le=="string"?G.addText(le):le.children&&(G.openNode(le),le.children.forEach(Me=>this._walk(G,Me)),G.closeNode(le)),G}static _collapse(G){typeof G!="string"&&G.children&&(G.children.every(le=>typeof le=="string")?G.children=[G.children.join("")]:G.children.forEach(le=>{h._collapse(le)}))}}class p extends h{constructor(G){super(),this.options=G}addText(G){G!==""&&this.add(G)}startScope(G){this.openNode(G)}endScope(){this.closeNode()}__addSublanguage(G,le){const Me=G.root;le&&(Me.scope=`language:${le}`),this.add(Me)}toHTML(){return new u(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function m(M){return M?typeof M=="string"?M:M.source:null}function b(M){return S("(?=",M,")")}function v(M){return S("(?:",M,")*")}function w(M){return S("(?:",M,")?")}function S(...M){return M.map(le=>m(le)).join("")}function C(M){const G=M[M.length-1];return typeof G=="object"&&G.constructor===Object?(M.splice(M.length-1,1),G):{}}function N(...M){return"("+(C(M).capture?"":"?:")+M.map(Me=>m(Me)).join("|")+")"}function L(M){return new RegExp(M.toString()+"|").exec("").length-1}function _(M,G){const le=M&&M.exec(G);return le&&le.index===0}const k=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function $(M,{joinWith:G}){let le=0;return M.map(Me=>{le+=1;const ut=le;let $e=m(Me),xe="";for(;$e.length>0;){const Ee=k.exec($e);if(!Ee){xe+=$e;break}xe+=$e.substring(0,Ee.index),$e=$e.substring(Ee.index+Ee[0].length),Ee[0][0]==="\\"&&Ee[1]?xe+="\\"+String(Number(Ee[1])+ut):(xe+=Ee[0],Ee[0]==="("&&le++)}return xe}).map(Me=>`(${Me})`).join(G)}const z=/\b\B/,H="[a-zA-Z]\\w*",Y="[a-zA-Z_]\\w*",re="\\b\\d+(\\.\\d+)?",ge="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Ce="\\b(0b[01]+)",pe="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",ae=(M={})=>{const G=/^#![ ]*\//;return M.binary&&(M.begin=S(G,/.*\b/,M.binary,/\b.*/)),r({scope:"meta",begin:G,end:/$/,relevance:0,"on:begin":(le,Me)=>{le.index!==0&&Me.ignoreMatch()}},M)},ie={begin:"\\\\[\\s\\S]",relevance:0},he={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[ie]},O={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[ie]},R={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},I=function(M,G,le={}){const Me=r({scope:"comment",begin:M,end:G,contains:[]},le);Me.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const ut=N("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return Me.contains.push({begin:S(/[ ]+/,"(",ut,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),Me},ee=I("//","$"),ce=I("/\\*","\\*/"),D=I("#","$"),V={scope:"number",begin:re,relevance:0},W={scope:"number",begin:ge,relevance:0},oe={scope:"number",begin:Ce,relevance:0},ue={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[ie,{begin:/\[/,end:/\]/,relevance:0,contains:[ie]}]},ve={scope:"title",begin:H,relevance:0},ze={scope:"title",begin:Y,relevance:0},se={begin:"\\.\\s*"+Y,relevance:0};var mt=Object.freeze({__proto__:null,APOS_STRING_MODE:he,BACKSLASH_ESCAPE:ie,BINARY_NUMBER_MODE:oe,BINARY_NUMBER_RE:Ce,COMMENT:I,C_BLOCK_COMMENT_MODE:ce,C_LINE_COMMENT_MODE:ee,C_NUMBER_MODE:W,C_NUMBER_RE:ge,END_SAME_AS_BEGIN:function(M){return Object.assign(M,{"on:begin":(G,le)=>{le.data._beginMatch=G[1]},"on:end":(G,le)=>{le.data._beginMatch!==G[1]&&le.ignoreMatch()}})},HASH_COMMENT_MODE:D,IDENT_RE:H,MATCH_NOTHING_RE:z,METHOD_GUARD:se,NUMBER_MODE:V,NUMBER_RE:re,PHRASAL_WORDS_MODE:R,QUOTE_STRING_MODE:O,REGEXP_MODE:ue,RE_STARTERS_RE:pe,SHEBANG:ae,TITLE_MODE:ve,UNDERSCORE_IDENT_RE:Y,UNDERSCORE_TITLE_MODE:ze});function Vt(M,G){M.input[M.index-1]==="."&&G.ignoreMatch()}function bn(M,G){M.className!==void 0&&(M.scope=M.className,delete M.className)}function tr(M,G){G&&M.beginKeywords&&(M.begin="\\b("+M.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",M.__beforeBegin=Vt,M.keywords=M.keywords||M.beginKeywords,delete M.beginKeywords,M.relevance===void 0&&(M.relevance=0))}function Ft(M,G){Array.isArray(M.illegal)&&(M.illegal=N(...M.illegal))}function Kn(M,G){if(M.match){if(M.begin||M.end)throw new Error("begin & end are not supported with match");M.begin=M.match,delete M.match}}function Rt(M,G){M.relevance===void 0&&(M.relevance=1)}const kn=(M,G)=>{if(!M.beforeMatch)return;if(M.starts)throw new Error("beforeMatch cannot be used with starts");const le=Object.assign({},M);Object.keys(M).forEach(Me=>{delete M[Me]}),M.keywords=le.keywords,M.begin=S(le.beforeMatch,b(le.begin)),M.starts={relevance:0,contains:[Object.assign(le,{endsParent:!0})]},M.relevance=0,delete le.beforeMatch},Hn=["of","and","for","in","not","or","if","then","parent","list","value"],Ae="keyword";function tn(M,G,le=Ae){const Me=Object.create(null);return typeof M=="string"?ut(le,M.split(" ")):Array.isArray(M)?ut(le,M):Object.keys(M).forEach(function($e){Object.assign(Me,tn(M[$e],G,$e))}),Me;function ut($e,xe){G&&(xe=xe.map(Ee=>Ee.toLowerCase())),xe.forEach(function(Ee){const Oe=Ee.split("|");Me[Oe[0]]=[$e,ct(Oe[0],Oe[1])]})}}function ct(M,G){return G?Number(G):Pe(M)?0:1}function Pe(M){return Hn.includes(M.toLowerCase())}const It={},tt=M=>{console.error(M)},Wn=(M,...G)=>{console.log(`WARN: ${M}`,...G)},Gt=(M,G)=>{It[`${M}/${G}`]||(console.log(`Deprecated as of ${M}. ${G}`),It[`${M}/${G}`]=!0)},me=new Error;function Se(M,G,{key:le}){let Me=0;const ut=M[le],$e={},xe={};for(let Ee=1;Ee<=G.length;Ee++)xe[Ee+Me]=ut[Ee],$e[Ee+Me]=!0,Me+=L(G[Ee-1]);M[le]=xe,M[le]._emit=$e,M[le]._multi=!0}function Ve(M){if(Array.isArray(M.begin)){if(M.skip||M.excludeBegin||M.returnBegin)throw tt("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),me;if(typeof M.beginScope!="object"||M.beginScope===null)throw tt("beginScope must be object"),me;Se(M,M.begin,{key:"beginScope"}),M.begin=$(M.begin,{joinWith:""})}}function Ke(M){if(Array.isArray(M.end)){if(M.skip||M.excludeEnd||M.returnEnd)throw tt("skip, excludeEnd, returnEnd not compatible with endScope: {}"),me;if(typeof M.endScope!="object"||M.endScope===null)throw tt("endScope must be object"),me;Se(M,M.end,{key:"endScope"}),M.end=$(M.end,{joinWith:""})}}function Dt(M){M.scope&&typeof M.scope=="object"&&M.scope!==null&&(M.beginScope=M.scope,delete M.scope)}function Qt(M){Dt(M),typeof M.beginScope=="string"&&(M.beginScope={_wrap:M.beginScope}),typeof M.endScope=="string"&&(M.endScope={_wrap:M.endScope}),Ve(M),Ke(M)}function gr(M){function G(xe,Ee){return new RegExp(m(xe),"m"+(M.case_insensitive?"i":"")+(M.unicodeRegex?"u":"")+(Ee?"g":""))}class le{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(Ee,Oe){Oe.position=this.position++,this.matchIndexes[this.matchAt]=Oe,this.regexes.push([Oe,Ee]),this.matchAt+=L(Ee)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const Ee=this.regexes.map(Oe=>Oe[1]);this.matcherRe=G($(Ee,{joinWith:"|"}),!0),this.lastIndex=0}exec(Ee){this.matcherRe.lastIndex=this.lastIndex;const Oe=this.matcherRe.exec(Ee);if(!Oe)return null;const dt=Oe.findIndex((Mn,lo)=>lo>0&&Mn!==void 0),Nt=this.matchIndexes[dt];return Oe.splice(0,dt),Object.assign(Oe,Nt)}}class Me{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(Ee){if(this.multiRegexes[Ee])return this.multiRegexes[Ee];const Oe=new le;return this.rules.slice(Ee).forEach(([dt,Nt])=>Oe.addRule(dt,Nt)),Oe.compile(),this.multiRegexes[Ee]=Oe,Oe}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(Ee,Oe){this.rules.push([Ee,Oe]),Oe.type==="begin"&&this.count++}exec(Ee){const Oe=this.getMatcher(this.regexIndex);Oe.lastIndex=this.lastIndex;let dt=Oe.exec(Ee);if(this.resumingScanAtSamePosition()&&!(dt&&dt.index===this.lastIndex)){const Nt=this.getMatcher(0);Nt.lastIndex=this.lastIndex+1,dt=Nt.exec(Ee)}return dt&&(this.regexIndex+=dt.position+1,this.regexIndex===this.count&&this.considerAll()),dt}}function ut(xe){const Ee=new Me;return xe.contains.forEach(Oe=>Ee.addRule(Oe.begin,{rule:Oe,type:"begin"})),xe.terminatorEnd&&Ee.addRule(xe.terminatorEnd,{type:"end"}),xe.illegal&&Ee.addRule(xe.illegal,{type:"illegal"}),Ee}function $e(xe,Ee){const Oe=xe;if(xe.isCompiled)return Oe;[bn,Kn,Qt,kn].forEach(Nt=>Nt(xe,Ee)),M.compilerExtensions.forEach(Nt=>Nt(xe,Ee)),xe.__beforeBegin=null,[tr,Ft,Rt].forEach(Nt=>Nt(xe,Ee)),xe.isCompiled=!0;let dt=null;return typeof xe.keywords=="object"&&xe.keywords.$pattern&&(xe.keywords=Object.assign({},xe.keywords),dt=xe.keywords.$pattern,delete xe.keywords.$pattern),dt=dt||/\w+/,xe.keywords&&(xe.keywords=tn(xe.keywords,M.case_insensitive)),Oe.keywordPatternRe=G(dt,!0),Ee&&(xe.begin||(xe.begin=/\B|\b/),Oe.beginRe=G(Oe.begin),!xe.end&&!xe.endsWithParent&&(xe.end=/\B|\b/),xe.end&&(Oe.endRe=G(Oe.end)),Oe.terminatorEnd=m(Oe.end)||"",xe.endsWithParent&&Ee.terminatorEnd&&(Oe.terminatorEnd+=(xe.end?"|":"")+Ee.terminatorEnd)),xe.illegal&&(Oe.illegalRe=G(xe.illegal)),xe.contains||(xe.contains=[]),xe.contains=[].concat(...xe.contains.map(function(Nt){return we(Nt==="self"?xe:Nt)})),xe.contains.forEach(function(Nt){$e(Nt,Oe)}),xe.starts&&$e(xe.starts,Ee),Oe.matcher=ut(Oe),Oe}if(M.compilerExtensions||(M.compilerExtensions=[]),M.contains&&M.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return M.classNameAliases=r(M.classNameAliases||{}),$e(M)}function K(M){return M?M.endsWithParent||K(M.starts):!1}function we(M){return M.variants&&!M.cachedVariants&&(M.cachedVariants=M.variants.map(function(G){return r(M,{variants:null},G)})),M.cachedVariants?M.cachedVariants:K(M)?r(M,{starts:M.starts?r(M.starts):null}):Object.isFrozen(M)?r(M):M}var Te="11.11.1";class at extends Error{constructor(G,le){super(G),this.name="HTMLInjectionError",this.html=le}}const We=t,bt=r,Yt=Symbol("nomatch"),Qn=7,yr=function(M){const G=Object.create(null),le=Object.create(null),Me=[];let ut=!0;const $e="Could not find the language '{}', did you forget to load/include a language module?",xe={disableAutodetect:!0,name:"Plain text",contains:[]};let Ee={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:p};function Oe(de){return Ee.noHighlightRe.test(de)}function dt(de){let je=de.className+" ";je+=de.parentNode?de.parentNode.className:"";const et=Ee.languageDetectRe.exec(je);if(et){const vt=Yn(et[1]);return vt||(Wn($e.replace("{}",et[1])),Wn("Falling back to no-highlight mode for this block.",de)),vt?et[1]:"no-highlight"}return je.split(/\s+/).find(vt=>Oe(vt)||Yn(vt))}function Nt(de,je,et){let vt="",rn="";typeof je=="object"?(vt=de,et=je.ignoreIllegals,rn=je.language):(Gt("10.7.0","highlight(lang, code, ...args) has been deprecated."),Gt("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),rn=de,vt=je),et===void 0&&(et=!0);const $n={code:vt,language:rn};uo("before:highlight",$n);const br=$n.result?$n.result:Mn($n.language,$n.code,et);return br.code=$n.code,uo("after:highlight",br),br}function Mn(de,je,et,vt){const rn=Object.create(null);function $n(ye,Re){return ye.keywords[Re]}function br(){if(!qe.keywords){dn.addText(xt);return}let ye=0;qe.keywordPatternRe.lastIndex=0;let Re=qe.keywordPatternRe.exec(xt),Qe="";for(;Re;){Qe+=xt.substring(ye,Re.index);const it=On.case_insensitive?Re[0].toLowerCase():Re[0],Kt=$n(qe,it);if(Kt){const[Dr,wl]=Kt;if(dn.addText(Qe),Qe="",rn[it]=(rn[it]||0)+1,rn[it]<=Qn&&(hs+=wl),Dr.startsWith("_"))Qe+=Re[0];else{const wu=On.classNameAliases[Dr]||Dr;vr(Re[0],wu)}}else Qe+=Re[0];ye=qe.keywordPatternRe.lastIndex,Re=qe.keywordPatternRe.exec(xt)}Qe+=xt.substring(ye),dn.addText(Qe)}function nr(){if(xt==="")return;let ye=null;if(typeof qe.subLanguage=="string"){if(!G[qe.subLanguage]){dn.addText(xt);return}ye=Mn(qe.subLanguage,xt,!0,xu[qe.subLanguage]),xu[qe.subLanguage]=ye._top}else ye=sa(xt,qe.subLanguage.length?qe.subLanguage:null);qe.relevance>0&&(hs+=ye.relevance),dn.__addSublanguage(ye._emitter,ye.language)}function Mt(){qe.subLanguage!=null?nr():br(),xt=""}function vr(ye,Re){ye!==""&&(dn.startScope(Re),dn.addText(ye),dn.endScope())}function bu(ye,Re){let Qe=1;const it=Re.length-1;for(;Qe<=it;){if(!ye._emit[Qe]){Qe++;continue}const Kt=On.classNameAliases[ye[Qe]]||ye[Qe],Dr=Re[Qe];Kt?vr(Dr,Kt):(xt=Dr,br(),xt=""),Qe++}}function aa(ye,Re){return ye.scope&&typeof ye.scope=="string"&&dn.openNode(On.classNameAliases[ye.scope]||ye.scope),ye.beginScope&&(ye.beginScope._wrap?(vr(xt,On.classNameAliases[ye.beginScope._wrap]||ye.beginScope._wrap),xt=""):ye.beginScope._multi&&(bu(ye.beginScope,Re),xt="")),qe=Object.create(ye,{parent:{value:qe}}),qe}function bl(ye,Re,Qe){let it=_(ye.endRe,Qe);if(it){if(ye["on:end"]){const Kt=new e(ye);ye["on:end"](Re,Kt),Kt.isMatchIgnored&&(it=!1)}if(it){for(;ye.endsParent&&ye.parent;)ye=ye.parent;return ye}}if(ye.endsWithParent)return bl(ye.parent,Re,Qe)}function la(ye){return qe.matcher.regexIndex===0?(xt+=ye[0],1):(ps=!0,0)}function Ih(ye){const Re=ye[0],Qe=ye.rule,it=new e(Qe),Kt=[Qe.__beforeBegin,Qe["on:begin"]];for(const Dr of Kt)if(Dr&&(Dr(ye,it),it.isMatchIgnored))return la(Re);return Qe.skip?xt+=Re:(Qe.excludeBegin&&(xt+=Re),Mt(),!Qe.returnBegin&&!Qe.excludeBegin&&(xt=Re)),aa(Qe,ye),Qe.returnBegin?0:Re.length}function rr(ye){const Re=ye[0],Qe=je.substring(ye.index),it=bl(qe,ye,Qe);if(!it)return Yt;const Kt=qe;qe.endScope&&qe.endScope._wrap?(Mt(),vr(Re,qe.endScope._wrap)):qe.endScope&&qe.endScope._multi?(Mt(),bu(qe.endScope,ye)):Kt.skip?xt+=Re:(Kt.returnEnd||Kt.excludeEnd||(xt+=Re),Mt(),Kt.excludeEnd&&(xt=Re));do qe.scope&&dn.closeNode(),!qe.skip&&!qe.subLanguage&&(hs+=qe.relevance),qe=qe.parent;while(qe!==it.parent);return it.starts&&aa(it.starts,ye),Kt.returnEnd?0:Re.length}function vl(){const ye=[];for(let Re=qe;Re!==On;Re=Re.parent)Re.scope&&ye.unshift(Re.scope);ye.forEach(Re=>dn.openNode(Re))}let fo={};function ca(ye,Re){const Qe=Re&&Re[0];if(xt+=ye,Qe==null)return Mt(),0;if(fo.type==="begin"&&Re.type==="end"&&fo.index===Re.index&&Qe===""){if(xt+=je.slice(Re.index,Re.index+1),!ut){const it=new Error(`0 width match regex (${de})`);throw it.languageName=de,it.badRule=fo.rule,it}return 1}if(fo=Re,Re.type==="begin")return Ih(Re);if(Re.type==="illegal"&&!et){const it=new Error('Illegal lexeme "'+Qe+'" for mode "'+(qe.scope||"<unnamed>")+'"');throw it.mode=qe,it}else if(Re.type==="end"){const it=rr(Re);if(it!==Yt)return it}if(Re.type==="illegal"&&Qe==="")return xt+=`
`,1;if(xl>1e5&&xl>Re.index*3)throw new Error("potential infinite loop, way more iterations than matches");return xt+=Qe,Qe.length}const On=Yn(de);if(!On)throw tt($e.replace("{}",de)),new Error('Unknown language: "'+de+'"');const vu=gr(On);let ua="",qe=vt||vu;const xu={},dn=new Ee.__emitter(Ee);vl();let xt="",hs=0,Di=0,xl=0,ps=!1;try{if(On.__emitTokens)On.__emitTokens(je,dn);else{for(qe.matcher.considerAll();;){xl++,ps?ps=!1:qe.matcher.considerAll(),qe.matcher.lastIndex=Di;const ye=qe.matcher.exec(je);if(!ye)break;const Re=je.substring(Di,ye.index),Qe=ca(Re,ye);Di=ye.index+Qe}ca(je.substring(Di))}return dn.finalize(),ua=dn.toHTML(),{language:de,value:ua,relevance:hs,illegal:!1,_emitter:dn,_top:qe}}catch(ye){if(ye.message&&ye.message.includes("Illegal"))return{language:de,value:We(je),illegal:!0,relevance:0,_illegalBy:{message:ye.message,index:Di,context:je.slice(Di-100,Di+100),mode:ye.mode,resultSoFar:ua},_emitter:dn};if(ut)return{language:de,value:We(je),illegal:!1,relevance:0,errorRaised:ye,_emitter:dn,_top:qe};throw ye}}function lo(de){const je={value:We(de),illegal:!1,relevance:0,_top:xe,_emitter:new Ee.__emitter(Ee)};return je._emitter.addText(de),je}function sa(de,je){je=je||Ee.languages||Object.keys(G);const et=lo(de),vt=je.filter(Yn).filter(ds).map(Mt=>Mn(Mt,de,!1));vt.unshift(et);const rn=vt.sort((Mt,vr)=>{if(Mt.relevance!==vr.relevance)return vr.relevance-Mt.relevance;if(Mt.language&&vr.language){if(Yn(Mt.language).supersetOf===vr.language)return 1;if(Yn(vr.language).supersetOf===Mt.language)return-1}return 0}),[$n,br]=rn,nr=$n;return nr.secondBest=br,nr}function ai(de,je,et){const vt=je&&le[je]||et;de.classList.add("hljs"),de.classList.add(`language-${vt}`)}function nn(de){let je=null;const et=dt(de);if(Oe(et))return;if(uo("before:highlightElement",{el:de,language:et}),de.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",de);return}if(de.children.length>0&&(Ee.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(de)),Ee.throwUnescapedHTML))throw new at("One of your code blocks includes unescaped HTML.",de.innerHTML);je=de;const vt=je.textContent,rn=et?Nt(vt,{language:et,ignoreIllegals:!0}):sa(vt);de.innerHTML=rn.value,de.dataset.highlighted="yes",ai(de,et,rn.language),de.result={language:rn.language,re:rn.relevance,relevance:rn.relevance},rn.secondBest&&(de.secondBest={language:rn.secondBest.language,relevance:rn.secondBest.relevance}),uo("after:highlightElement",{el:de,result:rn,text:vt})}function Un(de){Ee=bt(Ee,de)}const us=()=>{oa(),Gt("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function gl(){oa(),Gt("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let mu=!1;function oa(){function de(){oa()}if(document.readyState==="loading"){mu||window.addEventListener("DOMContentLoaded",de,!1),mu=!0;return}document.querySelectorAll(Ee.cssSelector).forEach(nn)}function gu(de,je){let et=null;try{et=je(M)}catch(vt){if(tt("Language definition for '{}' could not be registered.".replace("{}",de)),ut)tt(vt);else throw vt;et=xe}et.name||(et.name=de),G[de]=et,et.rawDefinition=je.bind(null,M),et.aliases&&Oi(et.aliases,{languageName:de})}function co(de){delete G[de];for(const je of Object.keys(le))le[je]===de&&delete le[je]}function yl(){return Object.keys(G)}function Yn(de){return de=(de||"").toLowerCase(),G[de]||G[le[de]]}function Oi(de,{languageName:je}){typeof de=="string"&&(de=[de]),de.forEach(et=>{le[et.toLowerCase()]=je})}function ds(de){const je=Yn(de);return je&&!je.disableAutodetect}function fs(de){de["before:highlightBlock"]&&!de["before:highlightElement"]&&(de["before:highlightElement"]=je=>{de["before:highlightBlock"](Object.assign({block:je.el},je))}),de["after:highlightBlock"]&&!de["after:highlightElement"]&&(de["after:highlightElement"]=je=>{de["after:highlightBlock"](Object.assign({block:je.el},je))})}function un(de){fs(de),Me.push(de)}function yu(de){const je=Me.indexOf(de);je!==-1&&Me.splice(je,1)}function uo(de,je){const et=de;Me.forEach(function(vt){vt[et]&&vt[et](je)})}function Ri(de){return Gt("10.7.0","highlightBlock will be removed entirely in v12.0"),Gt("10.7.0","Please use highlightElement now."),nn(de)}Object.assign(M,{highlight:Nt,highlightAuto:sa,highlightAll:oa,highlightElement:nn,highlightBlock:Ri,configure:Un,initHighlighting:us,initHighlightingOnLoad:gl,registerLanguage:gu,unregisterLanguage:co,listLanguages:yl,getLanguage:Yn,registerAliases:Oi,autoDetection:ds,inherit:bt,addPlugin:un,removePlugin:yu}),M.debugMode=function(){ut=!1},M.safeMode=function(){ut=!0},M.versionString=Te,M.regex={concat:S,lookahead:b,either:N,optional:w,anyNumberOfTimes:v};for(const de in mt)typeof mt[de]=="object"&&n(mt[de]);return Object.assign(M,mt),M},_t=yr({});return _t.newInstance=()=>yr({}),Lg=_t,_t.HighlightJS=_t,_t.default=_t,Lg}var E8=S8();const C8=R0(E8),fE={},T8="hljs-";function N8(n){const e=C8.newInstance();return{highlight:t,highlightAuto:r,listLanguages:s,register:o,registerAlias:l,registered:u};function t(d,h,p){const m=p||fE,b=typeof m.prefix=="string"?m.prefix:T8;if(!e.getLanguage(d))throw new Error("Unknown language: `"+d+"` is not registered");e.configure({__emitter:A8,classPrefix:b});const v=e.highlight(h,{ignoreIllegals:!0,language:d});if(v.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:v.errorRaised});const w=v._emitter.root,S=w.data;return S.language=v.language,S.relevance=v.relevance,w}function r(d,h){const m=(h||fE).subset||s();let b=-1,v=0,w;for(;++b<m.length;){const S=m[b];if(!e.getLanguage(S))continue;const C=t(S,d,h);C.data&&C.data.relevance!==void 0&&C.data.relevance>v&&(v=C.data.relevance,w=C)}return w||{type:"root",children:[],data:{language:void 0,relevance:v}}}function s(){return e.listLanguages()}function o(d,h){if(typeof d=="string")e.registerLanguage(d,h);else{let p;for(p in d)Object.hasOwn(d,p)&&e.registerLanguage(p,d[p])}}function l(d,h){if(typeof d=="string")e.registerAliases(typeof h=="string"?h:[...h],{languageName:d});else{let p;for(p in d)if(Object.hasOwn(d,p)){const m=d[p];e.registerAliases(typeof m=="string"?m:[...m],{languageName:p})}}}function u(d){return!!e.getLanguage(d)}}class A8{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(e==="")return;const t=this.stack[this.stack.length-1],r=t.children[t.children.length-1];r&&r.type==="text"?r.value+=e:t.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,t){const r=this.stack[this.stack.length-1],s=e.root.children;t?r.children.push({type:"element",tagName:"span",properties:{className:[t]},children:s}):r.children.push(...s)}openNode(e){const t=this,r=e.split(".").map(function(l,u){return u?l+"_".repeat(u):t.options.classPrefix+l}),s=this.stack[this.stack.length-1],o={type:"element",tagName:"span",properties:{className:r},children:[]};s.children.push(o),this.stack.push(o)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}function mN(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=mN(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Bg(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=mN(n))&&(r&&(r+=" "),r+=e);return r}function k8(n){var e;const{char:t,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:o,startOfLine:l,$position:u}=n,d=r&&!s,h=vL(t),p=new RegExp(`\\s${h}$`),m=l?"^":"",b=s?"":h,v=d?new RegExp(`${m}${h}.*?(?=\\s${b}|$)`,"gm"):new RegExp(`${m}(?:^)?${h}[^\\s${b}]*`,"gm"),w=((e=u.nodeBefore)===null||e===void 0?void 0:e.isText)&&u.nodeBefore.text;if(!w)return null;const S=u.pos-w.length,C=Array.from(w.matchAll(v)).pop();if(!C||C.input===void 0||C.index===void 0)return null;const N=C.input.slice(Math.max(0,C.index-1),C.index),L=new RegExp(`^[${o==null?void 0:o.join("")}\0]?$`).test(N);if(o!==null&&!L)return null;const _=S+C.index;let k=_+C[0].length;return d&&p.test(w.slice(k-1,k+1))&&(C[0]+=" ",k+=1),_<u.pos&&k>=u.pos?{range:{from:_,to:k},query:C[0].slice(t.length),text:C[0]}:null}const M8=new cn("suggestion");function O8({pluginKey:n=M8,editor:e,char:t="@",allowSpaces:r=!1,allowToIncludeChar:s=!1,allowedPrefixes:o=[" "],startOfLine:l=!1,decorationTag:u="span",decorationClass:d="suggestion",decorationContent:h="",decorationEmptyClass:p="is-empty",command:m=()=>null,items:b=()=>[],render:v=()=>({}),allow:w=()=>!0,findSuggestionMatch:S=k8}){let C;const N=v==null?void 0:v(),L=new Pt({key:n,view(){return{update:async(_,k)=>{var $,z,H,Y,re,ge,Ce;const pe=($=this.key)===null||$===void 0?void 0:$.getState(k),ae=(z=this.key)===null||z===void 0?void 0:z.getState(_.state),ie=pe.active&&ae.active&&pe.range.from!==ae.range.from,he=!pe.active&&ae.active,O=pe.active&&!ae.active,R=!he&&!O&&pe.query!==ae.query,I=he||ie&&R,ee=R||ie,ce=O||ie&&R;if(!I&&!ee&&!ce)return;const D=ce&&!I?pe:ae,V=_.dom.querySelector(`[data-decoration-id="${D.decorationId}"]`);C={editor:e,range:D.range,query:D.query,text:D.text,items:[],command:W=>m({editor:e,range:D.range,props:W}),decorationNode:V,clientRect:V?()=>{var W;const{decorationId:oe}=(W=this.key)===null||W===void 0?void 0:W.getState(e.state),ue=_.dom.querySelector(`[data-decoration-id="${oe}"]`);return(ue==null?void 0:ue.getBoundingClientRect())||null}:null},I&&((H=N==null?void 0:N.onBeforeStart)===null||H===void 0||H.call(N,C)),ee&&((Y=N==null?void 0:N.onBeforeUpdate)===null||Y===void 0||Y.call(N,C)),(ee||I)&&(C.items=await b({editor:e,query:D.query})),ce&&((re=N==null?void 0:N.onExit)===null||re===void 0||re.call(N,C)),ee&&((ge=N==null?void 0:N.onUpdate)===null||ge===void 0||ge.call(N,C)),I&&((Ce=N==null?void 0:N.onStart)===null||Ce===void 0||Ce.call(N,C))},destroy:()=>{var _;C&&((_=N==null?void 0:N.onExit)===null||_===void 0||_.call(N,C))}}},state:{init(){return{active:!1,range:{from:0,to:0},query:null,text:null,composing:!1}},apply(_,k,$,z){const{isEditable:H}=e,{composing:Y}=e.view,{selection:re}=_,{empty:ge,from:Ce}=re,pe={...k};if(pe.composing=Y,H&&(ge||e.view.composing)){(Ce<k.range.from||Ce>k.range.to)&&!Y&&!k.composing&&(pe.active=!1);const ae=S({char:t,allowSpaces:r,allowToIncludeChar:s,allowedPrefixes:o,startOfLine:l,$position:re.$from}),ie=`id_${Math.floor(Math.random()*4294967295)}`;ae&&w({editor:e,state:z,range:ae.range,isActive:k.active})?(pe.active=!0,pe.decorationId=k.decorationId?k.decorationId:ie,pe.range=ae.range,pe.query=ae.query,pe.text=ae.text):pe.active=!1}else pe.active=!1;return pe.active||(pe.decorationId=null,pe.range={from:0,to:0},pe.query=null,pe.text=null),pe}},props:{handleKeyDown(_,k){var $;const{active:z,range:H}=L.getState(_.state);return z&&(($=N==null?void 0:N.onKeyDown)===null||$===void 0?void 0:$.call(N,{view:_,event:k,range:H}))||!1},decorations(_){const{active:k,range:$,decorationId:z,query:H}=L.getState(_);if(!k)return null;const Y=!(H!=null&&H.length),re=[d];return Y&&re.push(p),zt.create(_.doc,[En.inline($.from,$.to,{nodeName:u,class:re.join(" "),"data-decoration-id":z,"data-decoration-content":h})])}}});return L}const gN=T.forwardRef(({items:n,command:e},t)=>{const r=T.useRef(null),[s,o]=T.useState(0),l=T.useMemo(()=>h=>{const p=n[h];p&&e(p)},[n,e]),u=T.useMemo(()=>()=>{o(h=>{const p=h-1;return p<0?Math.max(n.length-1,0):p})},[n.length]),d=T.useMemo(()=>()=>{o(h=>{const p=h+1;return p>=n.length?0:p})},[n.length]);return T.useEffect(()=>{o(0)},[n]),T.useEffect(()=>{const h=r.current;if(!h)return;const p=h.querySelector(`[data-index="${s}"]`);p==null||p.scrollIntoView({block:"nearest"})},[s]),T.useImperativeHandle(t,()=>({onKeyDown:({event:h})=>h.key==="ArrowUp"?(u(),!0):h.key==="ArrowDown"?(d(),!0):h.key==="Enter"?(l(s),!0):!1}),[d,l,s,u]),n.length?x.jsx("div",{ref:r,className:"max-h-80 w-72 overflow-y-auto rounded-xl border border-neutral-200 bg-white p-1 shadow-xl",children:n.map((h,p)=>{const m=h.icon,b=p===s;return x.jsxs("button",{type:"button","data-index":p,onClick:()=>l(p),className:`flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left transition ${b?"bg-neutral-100 text-neutral-900":"text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900"}`,children:[m?x.jsx(m,{className:"h-4 w-4 text-neutral-500"}):x.jsx("span",{className:"h-4 w-4","aria-hidden":!0}),x.jsxs("div",{className:"flex flex-col text-sm",children:[x.jsx("span",{className:"font-medium",children:h.title}),h.description?x.jsx("span",{className:"text-xs text-neutral-400",children:h.description}):null]})]},h.title)})}):x.jsx("div",{ref:r,className:"w-72 rounded-xl border border-neutral-200 bg-white p-4 text-sm text-neutral-500 shadow-xl",children:x.jsx("p",{children:"No matches. Keep typing to search commands."})})});gN.displayName="SlashCommandList";const R8=An.create({name:"slash-command",addOptions(){return{items:[]}},addProseMirrorPlugins(){return[O8({editor:this.editor,char:"/",command:n=>{const e=n==null?void 0:n.editor,t=n==null?void 0:n.range,r=n==null?void 0:n.props;if(!e||!t||!r)return!1;r.command({editor:e,range:t})},items:({query:n})=>{const e=n.toLowerCase();return this.options.items.filter(t=>t.disabled?!1:[t.title,t.description??"",...t.keywords??[]].join(" ").toLowerCase().includes(e)).slice(0,50)},render:()=>{let n=null,e=null;return{onStart(t){t!=null&&t.editor&&(n=new xT(gN,{props:{items:t.items,command:r=>t.command(r)},editor:t.editor}),e=pl("body",{getReferenceClientRect:t.clientRect,appendTo:()=>document.body,content:n.element,interactive:!0,trigger:"manual",placement:"left-start",arrow:!1,offset:[0,12]}),e[0].show())},onUpdate(t){t!=null&&t.editor&&(n==null||n.updateProps({items:t.items,command:r=>t.command(r)}),e==null||e[0].setProps({getReferenceClientRect:t.clientRect}))},onKeyDown(t){var s;return t!=null&&t.editor?t.event.key==="Escape"?(e==null||e[0].hide(),!0):!!((s=n==null?void 0:n.ref)==null?void 0:s.onKeyDown({event:t.event})):!1},onExit(){var t,r,s;(r=(t=e==null?void 0:e[0])==null?void 0:t.destroy)==null||r.call(t),e=null,(s=n==null?void 0:n.destroy)==null||s.call(n),n=null}}}})]}}),zg={default:"border-neutral-200 bg-neutral-50",info:"border-blue-200 bg-blue-50",success:"border-emerald-200 bg-emerald-50",warning:"border-amber-200 bg-amber-50",danger:"border-rose-200 bg-rose-50"};function D8({node:n,updateAttributes:e}){const{emoji:t="",color:r="default"}=n.attrs,s=zg[r]??zg.default,o=()=>{const u=window.prompt("Callout icon (emoji)",t??"");u&&e({emoji:u})},l=()=>{const u=window.prompt("Callout color (default, info, success, warning, danger)",r);if(!u)return;const d=u.toLowerCase();zg[d]&&e({color:d})};return x.jsxs(vT,{as:"aside",className:`notion-callout group relative my-3 flex w-full items-start gap-3 rounded-xl border px-4 py-3 text-[15px] leading-7 text-neutral-800 ${s}`,"data-color":r,children:[x.jsx("button",{type:"button",onClick:o,className:"mt-1 inline-flex h-8 w-8 items-center justify-center rounded-lg text-xl transition hover:bg-white/70","aria-label":"Change callout icon",children:t}),x.jsx("div",{className:"flex-1",children:x.jsx(m6,{className:"notion-callout-content"})}),x.jsx("button",{type:"button",onClick:l,className:"absolute right-3 top-3 hidden rounded-md bg-white/80 px-2 py-1 text-xs font-medium text-neutral-500 shadow-sm transition hover:bg-white group-hover:flex",children:"Color"})]})}const _8=["youtube.com","youtu.be","player.vimeo.com"];function j8(n){try{const e=new URL(n);return _8.some(t=>e.hostname.includes(t))}catch{return!1}}function L8({node:n}){const{url:e,title:t}=n.attrs,r=j8(e),s=(()=>{try{return new URL(e).hostname.replace(/^www\./,"")}catch{return e}})();return x.jsxs(vT,{className:"notion-embed my-4 w-full overflow-hidden rounded-xl border border-neutral-200 bg-white shadow-sm",children:[r?x.jsx("div",{className:"aspect-video w-full bg-neutral-950/5",children:x.jsx("iframe",{src:e,title:t??e,className:"h-full w-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})}):null,x.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 text-sm",children:[x.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg border border-neutral-200 bg-neutral-100 font-semibold text-neutral-500",children:s.slice(0,2).toUpperCase()}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"font-medium text-neutral-800",children:t??e}),x.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-neutral-500 underline-offset-2 hover:underline",children:s})]})]})]})}function B8({editor:n}){return x.jsx(gT,{editor:n,pluginKey:"table-bubble-menu",shouldShow:()=>n.isActive("table"),tippyOptions:{duration:150,offset:[0,16]},className:"rounded-xl border border-neutral-200 bg-white/95 px-3 py-2 text-sm shadow-2xl",children:x.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[x.jsx("button",{type:"button",onClick:()=>n.chain().focus().addColumnBefore().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"+ Col"}),x.jsx("button",{type:"button",onClick:()=>n.chain().focus().addColumnAfter().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"Col "}),x.jsx("button",{type:"button",onClick:()=>n.chain().focus().addRowBefore().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"+ Row"}),x.jsx("button",{type:"button",onClick:()=>n.chain().focus().addRowAfter().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-900",children:"Row "}),x.jsx("button",{type:"button",onClick:()=>n.chain().focus().deleteColumn().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-900",children:" Col"}),x.jsx("button",{type:"button",onClick:()=>n.chain().focus().deleteRow().run(),className:"rounded-md border border-neutral-200 px-2 py-1 text-xs font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-900",children:" Row"}),x.jsx("button",{type:"button",onClick:()=>n.chain().focus().deleteTable().run(),className:"rounded-md border border-rose-200 px-2 py-1 text-xs font-medium text-rose-500 transition hover:bg-rose-50",children:"Delete"})]})})}const ia=N8();ia.register("javascript",g8);ia.register("typescript",x8);ia.register("css",d8);ia.register("html",w8);ia.register("json",y8);ia.register("python",b8);function an(n){return!n||n.isDestroyed?null:n.chain().focus()}function hE(n){try{return new URL(n),!0}catch{return!1}}const z8=tI.extend({name:"toggle"}).configure({HTMLAttributes:{class:"notion-toggle","data-type":"toggle"}}),I8=qt.create({name:"callout",group:"block",content:"block+",defining:!0,isolating:!0,selectable:!0,addAttributes(){return{emoji:{default:""},color:{default:"default"}}},parseHTML(){return[{tag:"aside[data-type='callout']"}]},renderHTML({HTMLAttributes:n}){return["aside",yt(n,{"data-type":"callout"}),0]},addNodeView(){return wT(D8)},addCommands(){return{setCallout:n=>({editor:e,range:t})=>{var l;const r=t??e.state.selection.head,s=e.state.doc.content.size,o=Math.max(0,Math.min(r,s));return e.commands.insertContentAt(o,{type:"callout",attrs:n??{},content:[{type:"paragraph"}]}),(l=an(e))==null||l.run(),!0}}}}),H8=qt.create({name:"embed",group:"block",atom:!0,selectable:!0,addAttributes(){return{url:{default:""},title:{default:null}}},parseHTML(){return[{tag:"div[data-type='embed']"}]},renderHTML({HTMLAttributes:n}){return["div",yt(n,{"data-type":"embed"})]},addNodeView(){return wT(L8)},addCommands(){return{setEmbed:n=>({editor:e,range:t})=>{var l;if(!(n!=null&&n.url))return!1;const r=t??e.state.selection.head,s=e.state.doc.content.size,o=Math.max(0,Math.min(r,s));return e.commands.insertContentAt(o,{type:"embed",attrs:n}),(l=an(e))==null||l.run(),!0}}}});function U8({value:n,onChange:e,placeholder:t="Type '/' for commands",editable:r=!0,className:s,editorClassName:o}){const l=T.useRef(n??""),u=T.useRef(null),d=T.useRef(null),h=T.useMemo(()=>[{title:"Text",description:"Plain text",icon:Pc,command:({editor:v,range:w})=>{var S;(S=an(v))==null||S.deleteRange(w).setParagraph().run()}},{title:"Heading 1",description:"Large heading",icon:W5,command:({editor:v,range:w})=>{var S;(S=an(v))==null||S.deleteRange(w).setNode("heading",{level:1}).run()}},{title:"List",description:"Bulleted list",icon:x5,command:({editor:v,range:w})=>{var S;(S=an(v))==null||S.deleteRange(w).toggleBulletList().run()}},{title:"Ordered list",description:"Numbered",icon:dD,command:({editor:v,range:w})=>{var S;(S=an(v))==null||S.deleteRange(w).toggleOrderedList().run()}},{title:"Quote",description:"Blockquote",icon:wi,command:({editor:v,range:w})=>{var S;(S=an(v))==null||S.deleteRange(w).toggleBlockquote().run()}},{title:"Code block",description:"Syntax highlighted",icon:z5,command:({editor:v,range:w})=>{var S;(S=an(v))==null||S.deleteRange(w).setCodeBlock().run()}},{title:"Divider",description:"Horizontal line",icon:rD,command:({editor:v,range:w})=>{var S;(S=an(v))==null||S.deleteRange(w).setHorizontalRule().run()}},{title:"Callout",description:"Highlighted block",icon:S5,command:({editor:v,range:w})=>{var S;(S=an(v))==null||S.deleteRange(w).setCallout().run()}},{title:"Table",description:"33 table",icon:hD,command:({editor:v,range:w})=>{var S;(S=an(v))==null||S.deleteRange(w).insertTable({rows:3,cols:3,withHeaderRow:!0}).run()}},{title:"Embed",description:"External link",icon:Q1,command:({editor:v,range:w})=>{var C;const S=window.prompt("Embed URL");S&&((C=an(v))==null||C.deleteRange(w).setEmbed({url:S}).run())}},{title:"Image",description:"Upload",icon:lD,command:({editor:v,range:w})=>{var S;(S=an(v))==null||S.deleteRange(w).run(),setTimeout(()=>{var C;return(C=u.current)==null?void 0:C.click()},0)}}],[]),p=T.useCallback(async v=>{const w=d.current;if(!w||w.isDestroyed||!(v!=null&&v.length))return;const S=Array.from(v).filter(C=>C.type.startsWith("image/"));if(S.length)for(const C of S)await new Promise(N=>{const L=new FileReader;L.onload=_=>{var k,$;if(!d.current||d.current.isDestroyed)return N();typeof((k=_.target)==null?void 0:k.result)=="string"&&(($=an(d.current))==null||$.setImage({src:_.target.result,alt:C.name}).run()),N()},L.readAsDataURL(C)})},[]),m=h6({content:n,editable:r,extensions:[bz.configure({codeBlock:!1,heading:{levels:[1,2,3]}}),vz.configure({placeholder:t,showOnlyWhenEditable:!0}),xz,Fz.configure({openOnClick:!1,autolink:!0,validate:v=>hE(v),HTMLAttributes:{class:"underline text-neutral-700 hover:text-neutral-900"}}),Kz.configure({allowBase64:!0}),Y7.configure({resizable:!0,HTMLAttributes:{class:"notion-table w-full text-sm border border-neutral-200"}}),X7,J7.configure({HTMLAttributes:{class:"bg-neutral-100 font-semibold"}}),Z7.configure({HTMLAttributes:{class:"border p-3 align-top"}}),n8.configure({lowlight:ia,HTMLAttributes:{class:"rounded-xl bg-neutral-950/90 p-4 font-mono text-[13px] text-neutral-100 overflow-x-auto"}}),z8,nI.configure({HTMLAttributes:{class:"cursor-pointer text-neutral-700 font-medium flex gap-2"}}),rI.configure({HTMLAttributes:{class:"pl-4 text-neutral-700"}}),I8,H8,R8.configure({items:h})],editorProps:{attributes:{class:Bg("notion-editor prose prose-neutral mx-auto min-h-[50vh] max-w-3xl text-[16px] leading-7 outline-none",o)},handlePaste:(v,w)=>{var N,L,_;const S=(N=w.clipboardData)==null?void 0:N.files;if(S!=null&&S.length)return p(S),!0;const C=(L=w.clipboardData)==null?void 0:L.getData("text/plain");return C&&hE(C)?((_=an(d.current))==null||_.setEmbed({url:C}).run(),!0):!1},handleDrop:(v,w)=>{var C;const S=(C=w.dataTransfer)==null?void 0:C.files;return S!=null&&S.length?(w.preventDefault(),p(S),!0):!1}},onUpdate({editor:v}){if(!v||v.isDestroyed)return;const w=v.isEmpty?"":v.getHTML();l.current!==w&&(l.current=w,e(w))}},[r,t]);T.useEffect(()=>{d.current=m??null},[m]),T.useEffect(()=>{!m||m.isDestroyed||m.isEditable!==r&&m.setEditable(r)},[m,r]),T.useEffect(()=>{var k;if(!m||m.isDestroyed)return;const v=n??"";if(l.current===v)return;if(m.getHTML()===v||m.isEmpty&&v===""){l.current=v;return}const S=m.state.selection,C=(S==null?void 0:S.from)??0,N=(S==null?void 0:S.to)??0;m.commands.setContent(v,!1);const L=m.state.doc.content.size,_=$=>Math.max(0,Math.min($,L));(k=an(m))==null||k.setTextSelection({from:_(C),to:_(N)}).run(),l.current=v},[n,m]);const b=v=>Bg("flex h-8 w-8 items-center justify-center rounded-full text-[13px] transition",v?"bg-neutral-900 text-white":"text-neutral-100 hover:bg-white/10 hover:text-white");return x.jsxs("div",{className:Bg("relative rounded-2xl border border-neutral-200 bg-white px-6 py-5 shadow-sm",s),children:[x.jsx("input",{ref:u,type:"file",accept:"image/*",multiple:!0,hidden:!0,onChange:v=>{p(v.target.files),v.target.value=""}}),m?x.jsxs(x.Fragment,{children:[x.jsx(gT,{editor:m,tippyOptions:{duration:100,offset:[0,8]},className:"rounded-full bg-neutral-900/95 px-2 py-1 shadow-xl",children:x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{type:"button",onClick:()=>{var v;return(v=an(m))==null?void 0:v.toggleBold().run()},className:b(m.isActive("bold")),children:x.jsx("strong",{children:"B"})}),x.jsx("button",{type:"button",onClick:()=>{var v;return(v=an(m))==null?void 0:v.toggleItalic().run()},className:b(m.isActive("italic")),children:x.jsx("em",{children:"I"})}),x.jsx("button",{type:"button",onClick:()=>{var v;return(v=an(m))==null?void 0:v.toggleUnderline().run()},className:b(m.isActive("underline")),children:x.jsx("span",{className:"underline",children:"U"})}),x.jsx("button",{type:"button",onClick:()=>{var v;return(v=an(m))==null?void 0:v.toggleStrike().run()},className:b(m.isActive("strike")),children:x.jsx("span",{className:"line-through",children:"S"})}),x.jsx("button",{type:"button",onClick:()=>{var w;const v=window.prompt("Enter URL:");v&&((w=an(m))==null||w.extendMarkRange("link").setLink({href:v}).run())},className:b(m.isActive("link")),children:x.jsx(Q1,{className:"h-4 w-4"})})]})}),x.jsx(r6,{editor:m}),x.jsx(B8,{editor:m})]}):x.jsx("div",{className:"h-40 animate-pulse rounded-xl bg-neutral-200/80"})]})}const $8=/<\/?[a-z][^>]*>/i,q8=n=>n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),yN=n=>n?$8.test(n)?n:n.split(/\n{2,}/).map(t=>t.trim()?`<p>${t.split(/\n/).map(s=>q8(s.trimEnd())).join("<br />")}</p>`:"<p><br /></p>").join(""):"";function P8({documentId:n,onDocumentChange:e,currentUserName:t}){const[r,s]=T.useState(""),[o,l]=T.useState(""),[u,d]=T.useState(!1),[h,p]=T.useState(!1),[m,b]=T.useState(!1),[v,w]=T.useState(!1),[S,C]=T.useState(""),[N,L]=T.useState(!1),[_,k]=T.useState(null),[$,z]=T.useState(!1),H=T.useRef(null),Y=T.useRef(""),re=T.useRef(""),ge=$t(Fe.documents.getDocument,n?{documentId:n}:"skip"),Ce=$t(Fe.documents.getDocumentVersions,n?{documentId:n}:"skip")||[],pe=$t(Fe.comments.getDocumentComments,n?{documentId:n}:"skip")||[],ae=ln(Fe.documents.updateDocument),ie=ln(Fe.documents.generateShareableLink),he=ln(Fe.documents.rollbackToVersion),O=ln(Fe.comments.addComment),R=ln(Fe.documents.deleteDocument);T.useEffect(()=>{if(ge){const se=yN(ge.content);s(se),l(ge.title),Y.current=se,re.current=ge.title,d(!1),L(!1),k(new Date(ge.lastModifiedAt))}},[ge]);const I=T.useCallback(async()=>{if(!n||!N)return;const se=r!==Y.current,Ie=o!==re.current;if(!se&&!Ie){L(!1);return}z(!0);try{await ae({documentId:n,title:Ie?o:void 0,content:se?r:void 0,changeDescription:"Auto-saved changes"}),Y.current=r,re.current=o,L(!1),k(new Date)}catch(mt){console.error("Auto-save failed:",mt),pt.error("Auto-save failed")}finally{z(!1)}},[n,r,o,N,ae]);T.useEffect(()=>(N&&(H.current&&clearTimeout(H.current),H.current=setTimeout(()=>{I()},3e4)),()=>{H.current&&clearTimeout(H.current)}),[N,I]);const ee=T.useCallback(se=>{s(se),se!==Y.current&&L(!0)},[Y]),ce=T.useMemo(()=>{if(!r)return"";if(typeof window>"u")return r.replace(/<[^>]+>/g," ").trim();const se=document.createElement("div");return se.innerHTML=r,se.textContent||se.innerText||""},[r]),D=se=>{l(se),d(!0),L(!0)},V=async()=>{if(n)try{await ae({documentId:n,title:o,content:r,changeDescription:"Manual save"}),Y.current=r,re.current=o,d(!1),L(!1),k(new Date),pt.success("Document saved successfully")}catch(se){pt.error("Failed to save document"),console.error("Save error:",se)}},W=async()=>{if(n)try{const se=await ie({documentId:n}),Ie=`${window.location.origin}/shared/${se}`;await navigator.clipboard.writeText(Ie),pt.success("Shareable link copied to clipboard")}catch(se){pt.error("Failed to generate shareable link"),console.error("Share error:",se)}},oe=async se=>{if(n)try{await he({documentId:n,version:se}),pt.success(`Rolled back to version ${se}`),p(!1),L(!1)}catch(Ie){pt.error("Failed to rollback document"),console.error("Rollback error:",Ie)}},ue=async se=>{if(se.preventDefault(),!(!n||!S.trim()))try{await O({documentId:n,content:S}),C(""),pt.success("Comment added")}catch(Ie){pt.error("Failed to add comment"),console.error("Comment error:",Ie)}},ve=async()=>{if(n&&confirm("Are you sure you want to delete this document? This action cannot be undone."))try{await R({documentId:n}),e(null),pt.success("Document deleted")}catch(se){pt.error("Failed to delete document"),console.error("Delete error:",se)}},ze=()=>{if(!ge)return;const se=window.open("","_blank");se&&(se.document.write(`
        <html>
          <head>
            <title>${ge.title}</title>
            <style>
              body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; }
              h1 { color: #333; border-bottom: 2px solid #333; padding-bottom: 10px; }
              .content { font-size: 16px; line-height: 1.75; color: #27272a; }
              .content h1, .content h2, .content h3, .content h4 { margin-top: 32px; }
              .content ul, .content ol { padding-left: 20px; }
              .content blockquote { border-left: 4px solid #d4d4d8; padding-left: 16px; color: #52525b; }
              .content pre { background: #111827; color: #f8fafc; padding: 16px; border-radius: 12px; }
              .content code { background: #f4f4f5; padding: 4px 6px; border-radius: 6px; }
            </style>
          </head>
          <body>
            <h1>${ge.title}</h1>
            <div class="content">${r}</div>
          </body>
        </html>
      `),se.document.close(),se.print())};return n?ge?x.jsxs("div",{className:"flex h-full flex-col overflow-hidden bg-[#fdfcf8]",children:[x.jsx("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/80 px-10 py-5 backdrop-blur",children:x.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[x.jsxs("div",{className:"min-w-0 flex-1",children:[x.jsxs("div",{className:"flex items-center gap-2 text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:[x.jsx("span",{children:"Document"}),x.jsx("span",{className:"text-neutral-300",children:""}),x.jsxs("span",{children:["Version ",ge.version]})]}),u?x.jsx("input",{type:"text",value:o,onChange:se=>D(se.target.value),className:"mt-3 w-full border-none bg-transparent text-3xl font-semibold text-neutral-900 outline-none focus:ring-1 focus:ring-neutral-400",onBlur:V,onKeyDown:se=>se.key==="Enter"&&V(),autoFocus:!0}):x.jsx("h1",{className:"mt-3 cursor-text text-3xl font-semibold text-neutral-900 transition hover:text-neutral-700",onClick:()=>d(!0),children:ge.title}),x.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3 text-xs text-neutral-500",children:[x.jsxs("span",{className:"inline-flex items-center gap-1",children:[x.jsx(xf,{className:"h-4 w-4 text-neutral-400"}),_?`Last edited ${_.toLocaleString()}`:"Never saved"]}),x.jsx("span",{className:"text-neutral-300",children:""}),x.jsxs("span",{className:"inline-flex items-center gap-1",children:[x.jsx(Gg,{className:"h-4 w-4 text-neutral-400"}),t?`${t}`:"Shared workspace"]}),x.jsx("span",{className:"text-neutral-300",children:""}),x.jsxs("span",{className:"inline-flex items-center gap-1",children:[x.jsx(iC,{className:"h-4 w-4 text-neutral-400"}),ge.isPublic?"Public page":"Private page"]}),$&&x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"text-neutral-300",children:""}),x.jsx("span",{className:"text-neutral-500",children:"Auto-saving"})]})]})]}),x.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[x.jsxs("button",{onClick:()=>p(!h),className:`inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1.5 font-medium text-neutral-600 transition hover:bg-white hover:text-neutral-700 ${h?"bg-white shadow-sm":"bg-transparent"}`,children:[x.jsx(xf,{className:"h-4 w-4"}),"Versions"]}),x.jsxs("button",{onClick:()=>b(!m),className:`inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1.5 font-medium text-neutral-600 transition hover:bg-white hover:text-neutral-700 ${m?"bg-white shadow-sm":"bg-transparent"}`,children:[x.jsx(vf,{className:"h-4 w-4"}),"Comments (",pe.length,")"]}),x.jsxs("button",{onClick:()=>w(!v),className:`inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1.5 font-medium transition hover:bg-white ${v?"border-purple-300 bg-purple-50 text-purple-700 shadow-sm":"text-neutral-600 hover:text-neutral-700"}`,children:[x.jsx(wi,{className:"h-4 w-4"}),"AI Assistant"]}),x.jsxs("button",{onClick:ze,className:"inline-flex items-center gap-2 rounded-md border border-neutral-200 px-3 py-1.5 font-medium text-neutral-600 transition hover:bg-white hover:text-neutral-700",children:[x.jsx(wf,{className:"h-4 w-4"}),"Export"]}),x.jsxs("button",{onClick:W,className:"inline-flex items-center gap-2 rounded-md bg-neutral-900 px-4 py-1.5 font-medium text-neutral-100 transition hover:bg-neutral-700",children:[x.jsx(oC,{className:"h-4 w-4"}),"Share"]}),x.jsxs("button",{onClick:ve,className:"inline-flex items-center gap-2 rounded-md border border-red-200 bg-red-50 px-3 py-1.5 font-medium text-red-600 transition hover:bg-red-100",children:[x.jsx(P0,{className:"h-4 w-4"}),"Delete"]})]})]})}),x.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[x.jsx("div",{className:"flex-1 overflow-y-auto",children:x.jsxs("div",{className:"mx-auto w-full max-w-4xl px-10 pb-24 pt-12",children:[x.jsxs("div",{className:"mb-10 flex items-center gap-3 text-sm text-neutral-500",children:[x.jsx(Gg,{className:"h-5 w-5 text-neutral-400"}),x.jsx("span",{children:"Collaborate with your team and keep every update in one place. Use / to use styling"})]}),x.jsx(U8,{value:r,onChange:ee,placeholder:"Type '/' for commands or start writing..."},n??"new-document")]})}),h&&x.jsxs("div",{className:"flex w-80 flex-col border-l border-neutral-200 bg-[#f7f6f3]",children:[x.jsx("div",{className:"border-b border-neutral-200 px-4 py-3",children:x.jsx("h3",{className:"text-sm font-semibold text-neutral-700",children:"Document versions"})}),x.jsx("div",{className:"flex-1 overflow-y-auto",children:Ce.map(se=>x.jsxs("div",{className:"border-b border-neutral-200 px-4 py-4 text-sm",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("span",{className:"font-medium text-neutral-700",children:["Version ",se.version]}),se.version!==ge.version&&x.jsx("button",{onClick:()=>oe(se.version),className:"text-xs font-medium text-neutral-500 transition hover:text-neutral-800",children:"Restore"})]}),x.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:new Date(se.createdAt).toLocaleString()}),se.changeDescription&&x.jsx("p",{className:"mt-2 text-xs text-neutral-600",children:se.changeDescription})]},se._id))})]}),m&&x.jsxs("div",{className:"flex w-80 flex-col border-l border-neutral-200 bg-[#f7f6f3]",children:[x.jsx("div",{className:"border-b border-neutral-200 px-4 py-3",children:x.jsx("h3",{className:"text-sm font-semibold text-neutral-700",children:"Comments"})}),x.jsx("div",{className:"flex-1 overflow-y-auto",children:pe.map(se=>{var Ie,mt,Vt;return x.jsxs("div",{className:"border-b border-neutral-200 px-4 py-4 text-sm",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-neutral-900 text-xs font-semibold text-neutral-100",children:((mt=(Ie=se.author)==null?void 0:Ie.name)==null?void 0:mt[0])||"U"}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-neutral-700",children:((Vt=se.author)==null?void 0:Vt.name)||"Unknown user"}),x.jsx("p",{className:"text-xs text-neutral-500",children:new Date(se.createdAt).toLocaleString()})]})]}),x.jsx("p",{className:"mt-3 text-sm leading-relaxed text-neutral-700",children:se.content})]},se._id)})}),x.jsxs("form",{onSubmit:ue,className:"border-t border-neutral-200 px-4 py-3",children:[x.jsx("textarea",{value:S,onChange:se=>C(se.target.value),placeholder:"Leave a note...",className:"w-full resize-none rounded-md border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-700 outline-none transition focus:border-neutral-400 focus:ring-0",rows:3}),x.jsx("button",{type:"submit",disabled:!S.trim(),className:"mt-3 w-full rounded-md bg-neutral-900 px-3 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700 disabled:cursor-not-allowed disabled:bg-neutral-300",children:"Add comment"})]})]}),x.jsx(CD,{isOpen:v,onClose:()=>w(!1),documentId:n,documentContent:ce})]}),N&&x.jsxs("div",{className:"flex items-center justify-between border-t border-neutral-200 bg-[#f7f6f3]/90 px-10 py-3 text-sm text-neutral-600",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{children:"Unsaved changes"}),$&&x.jsx("span",{className:"text-neutral-500",children:"Auto-saving in progress"})]}),x.jsxs("button",{onClick:V,className:"inline-flex items-center gap-2 rounded-md bg-neutral-900 px-4 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[x.jsx(qc,{className:"h-4 w-4"}),"Save now"]})]})]}):x.jsx("div",{className:"flex h-full flex-1 items-center justify-center bg-[#fdfcf8]",children:x.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-neutral-300 border-t-neutral-700"})}):x.jsx("div",{className:"flex h-full flex-1 items-center justify-center bg-[#fdfcf8]",children:x.jsxs("div",{className:"text-center",children:[x.jsx(wf,{className:"mx-auto mb-4 h-16 w-16 text-neutral-300"}),x.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"No document selected"}),x.jsx("p",{className:"mt-2 text-sm text-neutral-500",children:"Choose a page from the sidebar to begin editing."})]})})}function V8({documentId:n}){const[e,t]=T.useState(""),[r,s]=T.useState(null),o=T.useRef(null),l=T.useRef(null),u=$t(Fe.chat.getChatMessages,n?{documentId:n}:{})||[],d=ln(Fe.chat.sendMessage),h=ln(Fe.chat.addReaction),p=ln(Fe.files.generateUploadUrl),m=ln(Fe.files.saveFile);T.useEffect(()=>{var C;(C=o.current)==null||C.scrollIntoView({behavior:"smooth"})},[u]);const b=async C=>{if(C.preventDefault(),!(!e.trim()&&!r))try{let N=null;if(r){const _=await p(),k=await fetch(_,{method:"POST",headers:{"Content-Type":r.type},body:r});if(!k.ok)throw new Error("File upload failed");const{storageId:$}=await k.json();N=await m({name:r.name,type:r.type,size:r.size,storageId:$,documentId:n})}const L=r?`${e.trim()||"Shared a file"} [File: ${r.name}]`:e;await d({content:L,documentId:n}),t(""),s(null),l.current&&(l.current.value="")}catch(N){pt.error("Failed to send message"),console.error("Send message error:",N)}},v=async(C,N)=>{try{await h({messageId:C,emoji:N})}catch(L){pt.error("Failed to add reaction"),console.error("Reaction error:",L)}},w=C=>{var L;const N=(L=C.target.files)==null?void 0:L[0];if(N){if(N.size>10*1024*1024){pt.error("File size must be less than 10MB");return}s(N)}},S=["","","","","","",""];return x.jsx("div",{className:"flex h-full flex-col overflow-hidden bg-[#fdfcf8]",children:x.jsx("div",{className:"flex-1 overflow-hidden",children:x.jsxs("div",{className:"mx-auto flex h-full w-full max-w-5xl flex-col gap-6 px-6 py-8",children:[x.jsx("div",{className:"rounded-3xl border border-neutral-200/70 bg-white/90 px-6 py-5 shadow-sm backdrop-blur",children:x.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-[11px] uppercase tracking-[0.4em] text-neutral-400",children:"Conversations"}),x.jsx("h2",{className:"mt-2 text-2xl font-semibold text-neutral-900",children:n?"Document Chat":"Workspace Chat"}),x.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:n?"Collaborate with your team about this document.":"Discuss research, share insights, and work with the AI assistant."})]}),x.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-neutral-200/80 bg-white px-4 py-2 text-xs font-medium uppercase tracking-[0.3em] text-neutral-500 shadow-sm",children:[x.jsx(wi,{className:"h-4 w-4 text-indigo-500"}),"AI Active"]})]})}),x.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:[x.jsxs("div",{className:"flex-1 overflow-y-auto bg-white px-6 py-6",children:[u.length===0?x.jsxs("div",{className:"flex h-full flex-col items-center justify-center rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/60 px-6 py-12 text-center",children:[x.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white shadow-sm",children:x.jsx(wi,{className:"h-8 w-8 text-indigo-500"})}),x.jsx("h3",{className:"mt-6 text-lg font-semibold text-neutral-900",children:"Start a conversation"}),x.jsx("p",{className:"mt-2 max-w-md text-sm text-neutral-500",children:"Ask legal questions, discuss documents, or collaborate with your team. Our AI assistant is ready to help with research and analysis."})]}):x.jsx("div",{className:"space-y-4",children:u.map(C=>{var N,L,_;return x.jsxs("div",{className:"group flex max-w-3xl items-start gap-3",children:[x.jsx("div",{className:`flex h-8 w-8 items-center justify-center rounded-full text-sm font-semibold text-white ${C.isAI?"bg-neutral-900":"bg-neutral-700"}`,children:C.isAI?"":((L=(N=C.author)==null?void 0:N.name)==null?void 0:L[0])||"U"}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[x.jsx("span",{className:"text-sm font-medium text-neutral-900",children:C.isAI?"Legal AI Assistant":((_=C.author)==null?void 0:_.name)||"Unknown User"}),x.jsx("span",{className:"text-xs text-neutral-400",children:new Date(C.timestamp).toLocaleTimeString()})]}),x.jsx("div",{className:`rounded-2xl border px-4 py-3 text-sm text-neutral-700 ${C.isAI?"border-indigo-100 bg-gradient-to-r from-indigo-50 via-blue-50 to-white":"border-neutral-200 bg-neutral-50"}`,children:x.jsx("p",{className:"whitespace-pre-wrap",children:C.content})}),x.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[C.reactions&&C.reactions.length>0&&x.jsx("div",{className:"flex gap-1",children:Object.entries(C.reactions.reduce((k,$)=>(k[$.emoji]=(k[$.emoji]||0)+1,k),{})).map(([k,$])=>x.jsxs("button",{onClick:()=>v(C._id,k),className:"rounded-full border border-neutral-200 bg-white px-2 py-1 text-xs text-neutral-600 transition hover:border-neutral-300 hover:bg-neutral-50",children:[k," ",$]},k))}),x.jsx("div",{className:"flex gap-1 opacity-0 transition-opacity group-hover:opacity-100",children:S.map(k=>x.jsx("button",{onClick:()=>v(C._id,k),className:"flex h-6 w-6 items-center justify-center rounded-full text-sm text-neutral-500 transition hover:bg-neutral-100 hover:text-neutral-700",title:`React with ${k}`,children:k},k))})]})]})]},C._id)})}),x.jsx("div",{ref:o})]}),x.jsxs("div",{className:"border-t border-neutral-200/80 bg-[#f7f6f3]/60 px-6 py-4",children:[r&&x.jsxs("div",{className:"mb-3 flex items-center justify-between rounded-full border border-neutral-200 bg-white px-4 py-2 text-sm text-neutral-600",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Y1,{className:"h-4 w-4 text-neutral-500"}),x.jsx("span",{className:"max-w-[220px] truncate",children:r.name}),x.jsxs("span",{className:"text-xs text-neutral-400",children:["(",(r.size/1024/1024).toFixed(2)," MB)"]})]}),x.jsx("button",{onClick:()=>{s(null),l.current&&(l.current.value="")},className:"text-xs font-medium text-neutral-500 transition hover:text-neutral-800",children:"Remove"})]}),x.jsxs("form",{onSubmit:b,className:"flex flex-col gap-3 md:flex-row md:items-end md:gap-4",children:[x.jsx("div",{className:"flex-1",children:x.jsx("textarea",{value:e,onChange:C=>t(C.target.value),placeholder:"Ask a legal question or start a discussion...",className:"w-full resize-none rounded-2xl border border-neutral-200 bg-white px-5 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",rows:3,onKeyDown:C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),b(C))}})}),x.jsxs("div",{className:"flex items-center gap-2 md:flex-col md:items-stretch md:gap-3",children:[x.jsx("input",{ref:l,type:"file",onChange:w,className:"hidden",accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png"}),x.jsx("button",{type:"button",onClick:()=>{var C;return(C=l.current)==null?void 0:C.click()},className:"inline-flex h-11 w-11 items-center justify-center rounded-full border border-neutral-200 bg-white text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-800",title:"Attach file",children:x.jsx(Y1,{className:"h-5 w-5"})}),x.jsx("button",{type:"submit",disabled:!e.trim()&&!r,className:"inline-flex h-11 w-11 items-center justify-center rounded-full bg-neutral-900 text-white transition hover:bg-neutral-700 disabled:cursor-not-allowed disabled:opacity-40",children:x.jsx(yh,{className:"h-5 w-5"})})]})]}),x.jsx("p",{className:"mt-3 text-xs text-neutral-500",children:"Press Enter to send, Shift+Enter for a new line. AI responses are for informational purposes only."})]})]})]})})})}function F8({documentId:n}){const[e,t]=T.useState(!1),[r,s]=T.useState({title:"",description:"",priority:"medium",dueDate:""}),o=$t(Fe.tasks.getUserTasks,{includeCompleted:!1})||[],l=$t(Fe.tasks.getDocumentTasks,n?{documentId:n}:"skip")||[],u=ln(Fe.tasks.createTask),d=ln(Fe.tasks.updateTaskStatus),h=async w=>{if(w.preventDefault(),!!r.title.trim())try{await u({title:r.title,description:r.description||void 0,priority:r.priority,dueDate:r.dueDate?new Date(r.dueDate).getTime():void 0,documentId:n}),s({title:"",description:"",priority:"medium",dueDate:""}),t(!1),pt.success("Task created successfully")}catch(S){pt.error("Failed to create task"),console.error("Create task error:",S)}},p=async(w,S)=>{try{await d({taskId:w,status:S}),pt.success("Task status updated")}catch(C){pt.error("Failed to update task status"),console.error("Update task error:",C)}},m=w=>{switch(w){case"high":return"text-rose-600 bg-rose-50 border border-rose-200";case"medium":return"text-amber-600 bg-amber-50 border border-amber-200";case"low":return"text-emerald-600 bg-emerald-50 border border-emerald-200";default:return"text-neutral-600 bg-neutral-50 border border-neutral-200"}},b=w=>{switch(w){case"completed":return"text-emerald-600 bg-emerald-50";case"in_progress":return"text-blue-600 bg-blue-50";case"todo":return"text-neutral-500 bg-neutral-100";default:return"text-neutral-500 bg-neutral-100"}},v=n?l:o;return x.jsx("div",{className:"flex h-full flex-col overflow-hidden bg-[#fdfcf8]",children:x.jsx("div",{className:"flex-1 overflow-hidden",children:x.jsxs("div",{className:"mx-auto flex h-full w-full max-w-5xl flex-col gap-6 px-6 py-8",children:[x.jsx("div",{className:"rounded-3xl border border-neutral-200/70 bg-white/90 px-6 py-5 shadow-sm backdrop-blur",children:x.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-[11px] uppercase tracking-[0.4em] text-neutral-400",children:"Taskboard"}),x.jsx("h2",{className:"mt-2 text-2xl font-semibold text-neutral-900",children:n?"Document Tasks":"My Tasks"}),x.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:n?"Track progress and collaborate on tasks connected to this document.":"Manage your personal and shared assignments across the workspace."})]}),x.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[x.jsx(vi,{className:"h-4 w-4"}),"New Task"]})]})}),x.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:[e&&x.jsx("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/60 px-6 py-6",children:x.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[x.jsxs("div",{className:"md:col-span-2",children:[x.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Task Title"}),x.jsx("input",{type:"text",value:r.title,onChange:w=>s({...r,title:w.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",placeholder:"Outline the task...",required:!0})]}),x.jsxs("div",{className:"md:col-span-2",children:[x.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Description"}),x.jsx("textarea",{value:r.description,onChange:w=>s({...r,description:w.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",rows:3,placeholder:"Provide helpful context for collaborators..."})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Priority"}),x.jsxs("select",{value:r.priority,onChange:w=>s({...r,priority:w.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",children:[x.jsx("option",{value:"low",children:"Low"}),x.jsx("option",{value:"medium",children:"Medium"}),x.jsx("option",{value:"high",children:"High"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Due Date"}),x.jsx("input",{type:"date",value:r.dueDate,onChange:w=>s({...r,dueDate:w.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200"})]}),x.jsxs("div",{className:"md:col-span-2 flex flex-wrap gap-3",children:[x.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[x.jsx(yh,{className:"h-4 w-4"}),"Create Task"]}),x.jsx("button",{type:"button",onClick:()=>t(!1),className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-5 py-2 text-sm font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",children:"Cancel"})]})]})}),x.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:v.length===0?x.jsxs("div",{className:"flex h-full flex-col items-center justify-center rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/60 py-16 text-center",children:[x.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white shadow-sm",children:x.jsx(nC,{className:"h-8 w-8 text-neutral-400"})}),x.jsx("h3",{className:"mt-6 text-lg font-semibold text-neutral-900",children:"No tasks yet"}),x.jsx("p",{className:"mt-2 max-w-md text-sm text-neutral-500",children:n?"Create tasks linked to this document to align your team and track progress.":"Capture your next actions and assign work to teammates to keep momentum."}),x.jsxs("button",{onClick:()=>t(!0),className:"mt-6 inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-5 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-800",children:[x.jsx(vi,{className:"h-4 w-4"}),"Add your first task"]})]}):x.jsx("div",{className:"space-y-4",children:v.map(w=>x.jsx("div",{className:"rounded-2xl border border-neutral-200/80 bg-white px-5 py-5 shadow-sm transition hover:-translate-y-0.5 hover:border-neutral-300 hover:shadow-md",children:x.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[x.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:w.title}),x.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium ${m(w.priority)}`,children:["Priority  ",w.priority.charAt(0).toUpperCase()+w.priority.slice(1)]})]}),w.description&&x.jsx("p",{className:"mt-3 text-sm text-neutral-600",children:w.description}),x.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4 text-xs font-medium uppercase tracking-[0.2em] text-neutral-400",children:[w.creator&&x.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-500 normal-case tracking-normal",children:[x.jsx(J1,{className:"h-4 w-4 text-neutral-400"}),"Created by ",w.creator.name]}),w.assignee&&x.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-500 normal-case tracking-normal",children:[x.jsx(J1,{className:"h-4 w-4 text-neutral-400"}),"Assigned to ",w.assignee.name]}),x.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-500 normal-case tracking-normal",children:[x.jsx(xf,{className:"h-4 w-4 text-neutral-400"}),w.dueDate?new Date(w.dueDate).toLocaleDateString():"No due date"]})]})]}),x.jsxs("div",{className:"flex flex-col items-stretch gap-3 md:w-56",children:[x.jsx("span",{className:`inline-flex items-center justify-center rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-[0.3em] ${b(w.status)}`,children:w.status.replace("_"," ").replace(/\b\w/g,S=>S.toUpperCase())}),x.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[x.jsx("button",{onClick:()=>p(w._id,"todo"),className:`rounded-xl border px-3 py-2 text-xs font-medium transition ${w.status==="todo"?"border-neutral-900 bg-neutral-900 text-white":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:"To Do"}),x.jsx("button",{onClick:()=>p(w._id,"in_progress"),className:`rounded-xl border px-3 py-2 text-xs font-medium transition ${w.status==="in_progress"?"border-neutral-900 bg-neutral-900 text-white":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:"In Progress"}),x.jsx("button",{onClick:()=>p(w._id,"completed"),className:`rounded-xl border px-3 py-2 text-xs font-medium transition ${w.status==="completed"?"border-neutral-900 bg-neutral-900 text-white":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:"Done"})]})]})]})},w._id))})})]})]})})})}function G8(){const[n,e]=T.useState(!1),[t,r]=T.useState({title:"",description:"",startTime:"",endTime:"",location:""}),s=$t(Fe.calendar.getUserEvents,{})||[],o=ln(Fe.calendar.createEvent),l=async u=>{if(u.preventDefault(),!(!t.title.trim()||!t.startTime||!t.endTime))try{await o({title:t.title,description:t.description||void 0,startTime:new Date(t.startTime).getTime(),endTime:new Date(t.endTime).getTime(),location:t.location||void 0}),r({title:"",description:"",startTime:"",endTime:"",location:""}),e(!1),pt.success("Event created successfully")}catch(d){pt.error("Failed to create event"),console.error("Create event error:",d)}};return x.jsx("div",{className:"flex h-full flex-col overflow-hidden bg-[#fdfcf8]",children:x.jsx("div",{className:"flex-1 overflow-hidden",children:x.jsxs("div",{className:"mx-auto flex h-full w-full max-w-5xl flex-col gap-6 px-6 py-8",children:[x.jsx("div",{className:"rounded-3xl border border-neutral-200/70 bg-white/90 px-6 py-5 shadow-sm backdrop-blur",children:x.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-[11px] uppercase tracking-[0.4em] text-neutral-400",children:"Calendar"}),x.jsx("h2",{className:"mt-2 text-2xl font-semibold text-neutral-900",children:"Workspace Schedule"}),x.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Keep your legal research, meetings, and deadlines aligned across the team."})]}),x.jsxs("button",{onClick:()=>e(!0),className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[x.jsx(vi,{className:"h-4 w-4"}),"New Event"]})]})}),x.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:[n&&x.jsx("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/60 px-6 py-6",children:x.jsxs("form",{onSubmit:l,className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[x.jsxs("div",{className:"md:col-span-2",children:[x.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Event Title"}),x.jsx("input",{type:"text",value:t.title,onChange:u=>r({...t,title:u.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",placeholder:"What are we scheduling?",required:!0})]}),x.jsxs("div",{className:"md:col-span-2",children:[x.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Description"}),x.jsx("textarea",{value:t.description,onChange:u=>r({...t,description:u.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",rows:3,placeholder:"Add agenda or notes for collaborators..."})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Start Time"}),x.jsx("input",{type:"datetime-local",value:t.startTime,onChange:u=>r({...t,startTime:u.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"End Time"}),x.jsx("input",{type:"datetime-local",value:t.endTime,onChange:u=>r({...t,endTime:u.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",required:!0})]}),x.jsxs("div",{className:"md:col-span-2",children:[x.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Location"}),x.jsx("input",{type:"text",value:t.location,onChange:u=>r({...t,location:u.target.value}),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",placeholder:"Virtual link or meeting room (optional)"})]}),x.jsxs("div",{className:"md:col-span-2 flex flex-wrap gap-3",children:[x.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[x.jsx(yh,{className:"h-4 w-4"}),"Create Event"]}),x.jsx("button",{type:"button",onClick:()=>e(!1),className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-5 py-2 text-sm font-medium text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",children:"Cancel"})]})]})}),x.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:s.length===0?x.jsxs("div",{className:"flex h-full flex-col items-center justify-center rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/60 py-16 text-center",children:[x.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white shadow-sm",children:x.jsx(tC,{className:"h-8 w-8 text-neutral-400"})}),x.jsx("h3",{className:"mt-6 text-lg font-semibold text-neutral-900",children:"No events scheduled"}),x.jsx("p",{className:"mt-2 max-w-md text-sm text-neutral-500",children:"Create your first event to align your workspace timeline."}),x.jsxs("button",{onClick:()=>e(!0),className:"mt-6 inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-5 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-800",children:[x.jsx(vi,{className:"h-4 w-4"}),"Plan something new"]})]}):x.jsx("div",{className:"space-y-4",children:s.map(u=>x.jsx("div",{className:"rounded-2xl border border-neutral-200/80 bg-white px-5 py-5 shadow-sm transition hover:-translate-y-0.5 hover:border-neutral-300 hover:shadow-md",children:x.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[x.jsxs("div",{className:"flex-1",children:[x.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:u.title}),u.description&&x.jsx("p",{className:"mt-3 text-sm text-neutral-600",children:u.description}),x.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4 text-sm text-neutral-500",children:[x.jsxs("span",{className:"inline-flex items-center gap-1",children:[x.jsx(xf,{className:"h-4 w-4 text-neutral-400"}),new Date(u.startTime).toLocaleString(),"  ",new Date(u.endTime).toLocaleString()]}),u.location&&x.jsxs("span",{className:"inline-flex items-center gap-1",children:[x.jsx(tD,{className:"h-4 w-4 text-neutral-400"}),u.location]}),u.creator&&x.jsxs("span",{className:"inline-flex items-center gap-1",children:[x.jsx(Gg,{className:"h-4 w-4 text-neutral-400"}),"Created by ",u.creator.name]})]})]}),x.jsx("div",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:new Date(u.startTime).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})})]})},u._id))})})]})]})})})}function K8({documentId:n}){const e=$t(Fe.audit.getDocumentAuditLog,n?{documentId:n}:"skip")||[],t=$t(Fe.audit.getUserAuditLog,{})||[],r=l=>{switch(l){case"view":return x.jsx(iC,{className:"w-4 h-4"});case"edit":return x.jsx(sC,{className:"w-4 h-4"});case"create":return x.jsx(vi,{className:"w-4 h-4"});case"delete":return x.jsx(P0,{className:"w-4 h-4"});case"share":return x.jsx(oC,{className:"w-4 h-4"});case"comment":return x.jsx(vf,{className:"w-4 h-4"});default:return x.jsx(Fg,{className:"w-4 h-4"})}},s=l=>{switch(l){case"view":return"text-blue-600 bg-blue-50";case"edit":return"text-green-600 bg-green-50";case"create":return"text-purple-600 bg-purple-50";case"delete":return"text-red-600 bg-red-50";case"share":return"text-orange-600 bg-orange-50";case"comment":return"text-indigo-600 bg-indigo-50";default:return"text-gray-600 bg-gray-50"}},o=n?e:t;return x.jsx("div",{className:"flex h-full flex-col overflow-hidden bg-[#fdfcf8]",children:x.jsx("div",{className:"flex-1 overflow-hidden",children:x.jsxs("div",{className:"mx-auto flex h-full w-full max-w-5xl flex-col gap-6 px-6 py-8",children:[x.jsx("div",{className:"rounded-3xl border border-neutral-200/70 bg-white/90 px-6 py-5 shadow-sm backdrop-blur",children:x.jsxs("div",{children:[x.jsx("p",{className:"text-[11px] uppercase tracking-[0.4em] text-neutral-400",children:"Audit Trail"}),x.jsx("h2",{className:"mt-2 text-2xl font-semibold text-neutral-900",children:n?"Document Audit Log":"My Activity Log"}),x.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:n?"Track every action taken on this document with full visibility.":"Review your recent activity across cases, documents, and collaboration."})]})}),x.jsx("div",{className:"flex-1 overflow-hidden rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:x.jsx("div",{className:"h-full overflow-y-auto px-6 py-6",children:o.length===0?x.jsxs("div",{className:"flex h-full flex-col items-center justify-center rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/60 py-16 text-center",children:[x.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white shadow-sm",children:x.jsx(Fg,{className:"h-7 w-7 text-neutral-400"})}),x.jsx("h3",{className:"mt-6 text-lg font-semibold text-neutral-900",children:"No activity yet"}),x.jsx("p",{className:"mt-2 max-w-md text-sm text-neutral-500",children:n?"As collaborators review or edit this document, their actions will be recorded here.":"Your activity across documents and cases will surface here once actions are recorded."})]}):x.jsx("div",{className:"space-y-4",children:o.map(l=>{var u,d;return x.jsx("div",{className:"rounded-2xl border border-neutral-200/80 bg-white px-5 py-4 shadow-sm transition hover:-translate-y-0.5 hover:border-neutral-300 hover:shadow-md",children:x.jsxs("div",{className:"flex items-start gap-3",children:[x.jsx("div",{className:`flex h-9 w-9 items-center justify-center rounded-full text-neutral-600 ${s(l.action)}`,children:r(l.action)}),x.jsxs("div",{className:"flex-1",children:[x.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-start sm:justify-between",children:[x.jsxs("div",{children:[x.jsxs("p",{className:"text-sm font-semibold text-neutral-900",children:[((u=l.user)==null?void 0:u.name)||"Unknown User"," ",l.action,"ed ",n?"this document":((d=l.document)==null?void 0:d.title)||"a document"]}),l.details&&x.jsx("p",{className:"text-sm text-neutral-500",children:l.details})]}),x.jsx("span",{className:"text-xs text-neutral-400",children:new Date(l.timestamp).toLocaleString()})]}),!n&&l.document&&x.jsxs("p",{className:"mt-2 text-xs uppercase tracking-[0.2em] text-neutral-400",children:["Document  ",l.document.title]})]})]})},l._id)})})})})]})})})}function W8({selectedCaseId:n,onCaseSelect:e}){const[t,r]=T.useState(!1),[s,o]=T.useState(""),[l,u]=T.useState(""),[d,h]=T.useState(null),[p,m]=T.useState(""),[b,v]=T.useState(""),[w,S]=T.useState(!1),C=$t(Fe.cases.getUserCases)||[],N=$t(Fe.cases.getCase,n?{caseId:n}:"skip"),L=$t(Fe.cases.getCaseDocuments,n?{caseId:n}:"skip")||[],_=$t(Fe.documents.listUserDocuments)||[],k=ln(Fe.cases.createCase),$=ln(Fe.cases.updateCase),z=ln(Fe.cases.deleteCase),H=ln(Fe.cases.addDocumentToCase),Y=ln(Fe.cases.removeDocumentFromCase),re=async O=>{if(O.preventDefault(),!!s.trim())try{const R=await k({name:s,description:l||void 0});e(R),o(""),u(""),r(!1),pt.success("Case created successfully")}catch(R){pt.error("Failed to create case"),console.error("Create case error:",R)}},ge=async O=>{try{await $({caseId:O,name:p,description:b||void 0}),h(null),pt.success("Case updated successfully")}catch(R){pt.error("Failed to update case"),console.error("Update case error:",R)}},Ce=async(O,R)=>{if(confirm(`Are you sure you want to delete the case "${R}"? This will remove all documents from the case but won't delete the documents themselves.`))try{await z({caseId:O}),n===O&&e(null),pt.success("Case deleted successfully")}catch(I){pt.error("Failed to delete case"),console.error("Delete case error:",I)}},pe=async O=>{if(n)try{await H({caseId:n,documentId:O}),pt.success("Document added to case")}catch(R){pt.error(R.message||"Failed to add document to case"),console.error("Add document error:",R)}},ae=async O=>{if(n)try{await Y({caseId:n,documentId:O}),pt.success("Document removed from case")}catch(R){pt.error("Failed to remove document from case"),console.error("Remove document error:",R)}},ie=_.filter(O=>O&&!O.caseId&&!L.some(R=>R._id===O._id)),he=O=>{if(O===0)return"0 B";const R=1024,I=["B","KB","MB","GB"],ee=Math.floor(Math.log(O)/Math.log(R));return parseFloat((O/Math.pow(R,ee)).toFixed(2))+" "+I[ee]};return x.jsx("div",{className:"flex h-full flex-col overflow-hidden bg-[#fdfcf8]",children:x.jsx("div",{className:"flex-1 overflow-hidden",children:x.jsxs("div",{className:"mx-auto flex h-full w-full max-w-6xl flex-col gap-6 px-6 py-8",children:[x.jsx("div",{className:"rounded-3xl border border-neutral-200/70 bg-white/90 px-6 py-5 shadow-sm backdrop-blur",children:x.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-[11px] uppercase tracking-[0.4em] text-neutral-400",children:"Case Management"}),x.jsx("h2",{className:"mt-2 text-2xl font-semibold text-neutral-900",children:"Organize Your Matters"}),x.jsx("p",{className:"mt-1 text-sm text-neutral-500",children:"Group related documents, collaborate with your team, and unlock AI insights per case."})]}),x.jsxs("button",{onClick:()=>r(!0),className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-5 py-2 text-sm font-medium text-neutral-100 transition hover:bg-neutral-700",children:[x.jsx(vi,{className:"h-4 w-4"}),"New Case"]})]})}),x.jsxs("div",{className:"flex flex-1 flex-col gap-6 lg:flex-row",children:[x.jsxs("div",{className:"flex w-full flex-col rounded-3xl border border-neutral-200/70 bg-white shadow-sm lg:max-w-xs",children:[x.jsx("div",{className:"border-b border-neutral-200/70 px-5 py-5",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:"Your Cases"}),x.jsxs("p",{className:"mt-1 text-sm text-neutral-500",children:[C.length," active"]})]}),x.jsx("button",{onClick:()=>r(!0),className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-neutral-200 text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-800",title:"Create case",children:x.jsx(vi,{className:"h-4 w-4"})})]})}),t&&x.jsx("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/60 px-5 py-5",children:x.jsxs("form",{onSubmit:re,className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Case Name"}),x.jsx("input",{type:"text",value:s,onChange:O=>o(O.target.value),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-2.5 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",placeholder:"e.g. Johnson vs. State",autoFocus:!0,required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-semibold uppercase tracking-[0.25em] text-neutral-400",children:"Description"}),x.jsx("textarea",{value:l,onChange:O=>u(O.target.value),className:"mt-2 w-full rounded-2xl border border-neutral-200 bg-white px-4 py-2.5 text-sm text-neutral-700 placeholder:text-neutral-400 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",rows:2,placeholder:"Optional context or notes"})]}),x.jsxs("div",{className:"flex flex-wrap gap-2",children:[x.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-neutral-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.25em] text-neutral-100 transition hover:bg-neutral-700",children:[x.jsx(qc,{className:"h-3 w-3"}),"Save"]}),x.jsxs("button",{type:"button",onClick:()=>r(!1),className:"inline-flex items-center gap-2 rounded-full border border-neutral-200 px-4 py-2 text-xs font-semibold uppercase tracking-[0.25em] text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",children:[x.jsx(Lo,{className:"h-3 w-3"}),"Cancel"]})]})]})}),x.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-5",children:C.length===0?x.jsxs("div",{className:"flex h-full flex-col items-center justify-center rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/60 px-4 py-12 text-center",children:[x.jsx(Ec,{className:"h-10 w-10 text-neutral-400"}),x.jsx("h3",{className:"mt-4 text-sm font-semibold text-neutral-900",children:"No cases yet"}),x.jsx("p",{className:"mt-2 text-xs text-neutral-500",children:"Create your first case to start organizing documents and discussions."})]}):x.jsx("div",{className:"space-y-3",children:C.map(O=>x.jsx("div",{className:`group rounded-2xl border px-4 py-4 transition ${n===O._id?"border-neutral-900 bg-neutral-900/90 text-neutral-100 shadow-sm":"border-neutral-200 bg-white hover:border-neutral-300 hover:shadow-md"}`,onClick:()=>e(O._id),children:x.jsx("div",{className:"flex items-start justify-between gap-3",children:x.jsx("div",{className:"flex-1 min-w-0",children:d===O._id?x.jsxs("div",{className:"space-y-2",onClick:R=>R.stopPropagation(),children:[x.jsx("input",{type:"text",value:p,onChange:R=>m(R.target.value),className:"w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200"}),x.jsx("textarea",{value:b,onChange:R=>v(R.target.value),className:"w-full rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm text-neutral-700 focus:border-neutral-400 focus:outline-none focus:ring-2 focus:ring-neutral-200",rows:2}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{onClick:()=>ge(O._id),className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-neutral-900 text-neutral-100 transition hover:bg-neutral-700",children:x.jsx(qc,{className:"h-4 w-4"})}),x.jsx("button",{onClick:()=>h(null),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",children:x.jsx(Lo,{className:"h-4 w-4"})})]})]}):x.jsxs("div",{className:"space-y-2",children:[x.jsx("h4",{className:`truncate text-sm font-semibold ${n===O._id?"text-neutral-100":"text-neutral-900"}`,children:O.name}),O.description&&x.jsx("p",{className:`line-clamp-2 text-xs ${n===O._id?"text-neutral-200/90":"text-neutral-500"}`,children:O.description}),x.jsxs("div",{className:`flex items-center justify-between text-[11px] uppercase tracking-[0.25em] ${n===O._id?"text-neutral-200":"text-neutral-400"}`,children:[x.jsxs("span",{children:[O.documentCount,"/30 docs  ",he(O.totalSize),"/50MB"]}),x.jsxs("div",{className:"flex items-center gap-1",children:[x.jsx("button",{onClick:R=>{R.stopPropagation(),h(O._id),m(O.name),v(O.description||"")},className:`inline-flex h-7 w-7 items-center justify-center rounded-full border text-xs transition ${n===O._id?"border-neutral-700 text-neutral-200 hover:border-neutral-500":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,title:"Edit case",children:x.jsx(sC,{className:"h-3.5 w-3.5"})}),x.jsx("button",{onClick:R=>{R.stopPropagation(),Ce(O._id,O.name)},className:`inline-flex h-7 w-7 items-center justify-center rounded-full border text-xs transition ${n===O._id?"border-neutral-700 text-rose-200 hover:border-rose-400":"border-neutral-200 text-rose-500 hover:border-rose-300 hover:text-rose-600"}`,title:"Delete case",children:x.jsx(P0,{className:"h-3.5 w-3.5"})})]})]})]})})})},O._id))})})]}),x.jsx("div",{className:"flex-1 overflow-hidden rounded-3xl border border-neutral-200/70 bg-white shadow-sm",children:N?x.jsxs("div",{className:`flex h-full flex-col ${w?"lg:grid lg:grid-cols-[1fr,320px]":""}`,children:[x.jsxs("div",{className:"flex h-full flex-col",children:[x.jsx("div",{className:"border-b border-neutral-200/70 bg-[#f7f6f3]/60 px-6 py-5",children:x.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-semibold text-neutral-900",children:N.name}),N.description&&x.jsx("p",{className:"mt-2 text-sm text-neutral-500",children:N.description}),x.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3 text-xs font-semibold uppercase tracking-[0.3em] text-neutral-400",children:[x.jsxs("span",{children:[N.documentCount,"/30 Documents"]}),x.jsx("span",{children:""}),x.jsxs("span",{children:[he(N.totalSize),"/50MB Used"]}),N.documentCount>=30&&x.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-amber-100 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.3em] text-amber-600",children:[x.jsx(rC,{className:"h-4 w-4"}),"Limit Reached"]})]})]}),x.jsxs("button",{onClick:()=>S(!w),className:`inline-flex items-center gap-2 rounded-full border px-4 py-2 text-sm font-medium transition ${w?"border-indigo-400 bg-indigo-50 text-indigo-600":"border-neutral-200 text-neutral-500 hover:border-neutral-300 hover:text-neutral-700"}`,children:[x.jsx(wi,{className:"h-4 w-4"}),"Case AI Chat"]})]})}),x.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-8",children:[x.jsxs("section",{children:[x.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[x.jsx("h4",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-neutral-400",children:"Documents in Case"}),x.jsxs("span",{className:"text-xs text-neutral-400",children:[L.length," total"]})]}),L.length===0?x.jsxs("div",{className:"rounded-2xl border border-dashed border-neutral-200 bg-[#f7f6f3]/60 px-6 py-12 text-center",children:[x.jsx(Ec,{className:"mx-auto h-10 w-10 text-neutral-400"}),x.jsx("p",{className:"mt-4 text-sm font-semibold text-neutral-900",children:"No documents in this case yet"}),x.jsx("p",{className:"mt-2 text-xs text-neutral-500",children:"Add documents from your library below to start collaborating."})]}):x.jsx("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-3",children:L.map(O=>x.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white px-4 py-4 shadow-sm transition hover:-translate-y-0.5 hover:border-neutral-300 hover:shadow-md",children:x.jsxs("div",{className:"flex items-start justify-between gap-3",children:[x.jsxs("div",{className:"flex min-w-0 flex-1 items-start gap-2",children:[x.jsx(Pc,{className:"h-5 w-5 text-neutral-500"}),x.jsxs("div",{className:"min-w-0",children:[x.jsx("h5",{className:"truncate text-sm font-semibold text-neutral-900",children:O.title}),x.jsxs("p",{className:"mt-1 text-xs text-neutral-400",children:["Modified ",new Date(O.lastModifiedAt).toLocaleDateString()]})]})]}),x.jsx("button",{onClick:()=>ae(O._id),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",title:"Remove from case",children:x.jsx(Lo,{className:"h-4 w-4"})})]})},O._id))})]}),ie.length>0&&x.jsxs("section",{children:[x.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[x.jsx("h4",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-neutral-400",children:"Add Documents to Case"}),x.jsxs("span",{className:"text-xs text-neutral-400",children:[ie.length," available"]})]}),x.jsx("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-3",children:ie.map(O=>O?x.jsx("div",{className:"rounded-2xl border border-neutral-200 bg-white px-4 py-4 shadow-sm transition hover:-translate-y-0.5 hover:border-neutral-300 hover:shadow-md",children:x.jsxs("div",{className:"flex items-start justify-between gap-3",children:[x.jsxs("div",{className:"flex min-w-0 flex-1 items-start gap-2",children:[x.jsx(Pc,{className:"h-5 w-5 text-neutral-500"}),x.jsxs("div",{className:"min-w-0",children:[x.jsx("h5",{className:"truncate text-sm font-semibold text-neutral-900",children:O.title}),x.jsxs("p",{className:"mt-1 text-xs text-neutral-400",children:["Modified ",new Date(O.lastModifiedAt).toLocaleDateString()]})]})]}),x.jsx("button",{onClick:()=>pe(O._id),disabled:N.documentCount>=30,className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700 disabled:cursor-not-allowed disabled:border-neutral-200 disabled:text-neutral-300",title:"Add to case",children:x.jsx(vi,{className:"h-4 w-4"})})]})},O._id):null)})]})]})]}),w&&x.jsx("div",{className:"hidden border-t border-neutral-200/70 bg-[#f7f6f3]/60 px-6 py-6 lg:block lg:h-full lg:border-l lg:border-t-0",children:x.jsxs("div",{className:"flex h-full flex-col gap-4",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(wi,{className:"h-5 w-5 text-indigo-500"}),x.jsx("h3",{className:"text-sm font-semibold text-neutral-900",children:"Case AI Assistant"})]}),x.jsx("button",{onClick:()=>S(!1),className:"inline-flex h-8 w-8 items-center justify-center rounded-full border border-neutral-200 text-neutral-500 transition hover:border-neutral-300 hover:text-neutral-700",children:x.jsx(Lo,{className:"h-4 w-4"})})]}),x.jsxs("p",{className:"text-xs text-neutral-500",children:["Ask questions about all ",L.length," documents inside this case. Summaries, comparisons, or cross-document analysis are just a prompt away."]}),x.jsxs("div",{className:"flex-1 rounded-2xl border border-dashed border-neutral-200 bg-white/60 px-4 py-8 text-center",children:[x.jsx(wi,{className:"mx-auto h-10 w-10 text-indigo-400"}),x.jsx("h4",{className:"mt-4 text-sm font-semibold text-neutral-900",children:"Case-wide AI Analysis"}),x.jsx("p",{className:"mt-2 text-xs text-neutral-500",children:"Launch the AI chat to explore arguments, highlight conflicts, or request summaries tailored to this case."})]})]})})]}):x.jsxs("div",{className:"flex h-full flex-col items-center justify-center px-6 py-12 text-center",children:[x.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-white shadow-sm",children:x.jsx(Ec,{className:"h-10 w-10 text-neutral-400"})}),x.jsx("h3",{className:"mt-6 text-lg font-semibold text-neutral-900",children:"No Case Selected"}),x.jsx("p",{className:"mt-2 max-w-sm text-sm text-neutral-500",children:"Select a case from the sidebar or create a new one to start organizing your legal materials."}),x.jsxs("button",{onClick:()=>r(!0),className:"mt-6 inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-5 py-2 text-sm font-medium text-neutral-600 transition hover:border-neutral-300 hover:text-neutral-800",children:[x.jsx(vi,{className:"h-4 w-4"}),"Create a case"]})]})})]})]})})})}function Q8(){const{shareableLink:n}=QO(),[e,t]=T.useState(!1),r=$t(Fe.documents.getDocumentByShareableLink,n?{shareableLink:n}:"skip"),s=T.useMemo(()=>yN(r==null?void 0:r.content),[r==null?void 0:r.content]);T.useEffect(()=>{n&&r===null&&t(!0)},[r,n]);const o=()=>{if(!r)return;const l=window.open("","_blank");l&&(l.document.write(`
        <html>
          <head>
            <title>${r.title}</title>
            <style>
              body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; }
              h1 { color: #333; border-bottom: 2px solid #333; padding-bottom: 10px; }
              .content p { margin: 0 0 1em; }
            </style>
          </head>
          <body>
            <h1>${r.title}</h1>
            <div class="content">${s||"<p>This document is empty.</p>"}</div>
          </body>
        </html>
      `),l.document.close(),l.print())};return e?x.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx(wf,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),x.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Document Not Found"}),x.jsx("p",{className:"text-gray-600",children:"The shared document you're looking for doesn't exist or is no longer available."})]})}):r?x.jsxs("div",{className:"min-h-screen bg-gray-50",children:[x.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Kodex"}),x.jsx("span",{className:"ml-2 text-sm text-gray-500 font-medium",children:"v1.0"})]}),x.jsxs("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[x.jsx(wf,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]})}),x.jsx("div",{className:"max-w-4xl mx-auto py-8 px-6",children:x.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[x.jsxs("div",{className:"mb-6",children:[x.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:r.title}),x.jsxs("div",{className:"text-sm text-gray-500",children:["Last modified: ",new Date(r.lastModifiedAt).toLocaleString(),x.jsx("span",{className:"mx-2",children:""}),"Version ",r.version]})]}),x.jsx("div",{className:"prose max-w-none",children:x.jsx("div",{className:"text-gray-900 leading-relaxed",style:{fontFamily:"Georgia, serif"},dangerouslySetInnerHTML:{__html:s||"<p>This document is empty.</p>"}})})]})})]}):x.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}function Y8(){const[n,e]=T.useState(!1),[t,r]=T.useState("editor"),[s,o]=T.useState(null),[l,u]=T.useState(null),d=$t(Fe.auth.loggedInUser),h={editor:"Documents",cases:"Cases",chat:"Discussions",tasks:"Tasks",calendar:"Calendar",audit:"Audit Log"},p=()=>{switch(t){case"editor":return x.jsx(P8,{documentId:s,onDocumentChange:o,currentUserName:(d==null?void 0:d.name)||(d==null?void 0:d.email)||void 0});case"cases":return x.jsx(W8,{selectedCaseId:l,onCaseSelect:u});case"chat":return x.jsx(V8,{documentId:s});case"tasks":return x.jsx(F8,{documentId:s});case"calendar":return x.jsx(G8,{});case"audit":return x.jsx(K8,{documentId:s});default:return null}};return x.jsxs("div",{className:"h-screen flex flex-col bg-[#f7f6f3] text-neutral-900",children:[x.jsx(cO,{children:x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#f7f6f3] p-6",children:x.jsxs("div",{className:"max-w-md w-full",children:[x.jsxs("div",{className:"text-center mb-10",children:[x.jsx("div",{className:"inline-flex items-center rounded-full border border-neutral-200 bg-white px-4 py-1 text-xs font-medium uppercase tracking-[0.2em] text-neutral-500",children:"Kodex Workspace"}),x.jsx("h1",{className:"mt-6 text-4xl font-semibold text-neutral-900",children:"Welcome back"}),x.jsx("p",{className:"mt-3 text-sm text-neutral-500",children:"Sign in to access your collaborative legal workspace with AI assistance."})]}),x.jsx(y5,{})]})})}),x.jsx(lO,{children:x.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[x.jsx(ED,{collapsed:n,onToggleCollapse:()=>e(!n),activeView:t,onViewChange:r,selectedDocumentId:s,onDocumentSelect:o,selectedCaseId:l,onCaseSelect:u}),x.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[x.jsxs("header",{className:"flex h-14 items-center justify-between border-b border-neutral-200/70 bg-[#f7f6f3]/90 px-6 backdrop-blur",children:[x.jsxs("div",{className:"flex flex-col",children:[x.jsx("span",{className:"text-[11px] uppercase tracking-[0.3em] text-neutral-400",children:"Kodex Workspace"}),x.jsxs("div",{className:"mt-1 flex items-center gap-2 text-sm text-neutral-500",children:[x.jsx("span",{className:"font-medium text-neutral-700",children:"Home"}),x.jsx("span",{className:"text-neutral-300",children:"/"}),x.jsx("span",{children:h[t]}),t==="editor"&&s&&x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"text-neutral-300",children:"/"}),x.jsx("span",{className:"truncate max-w-[240px] text-neutral-500",title:"Active document",children:"Document"})]})]})]}),x.jsxs("div",{className:"flex items-center gap-3 text-sm text-neutral-500",children:[d&&x.jsx("span",{className:"hidden sm:inline-flex max-w-[180px] truncate",children:d.name||d.email}),x.jsx(b5,{})]})]}),x.jsx("div",{className:"flex-1 overflow-hidden",children:p()})]})]})})]})}function X8(){return x.jsxs(_R,{children:[x.jsx(g5,{position:"top-right"}),x.jsxs(uR,{children:[x.jsx(qg,{path:"/shared/:shareableLink",element:x.jsx(Q8,{})}),x.jsx(qg,{path:"/*",element:x.jsx(Y8,{})})]})]})}const bN=document.getElementById("root");if(!bN)throw new Error("Root element with id 'root' not found in the document.");const pE=Mk.createRoot(bN),mE="https://fleet-goat-249.convex.cloud";if(mE.length===0)console.error("VITE_CONVEX_URL is not defined. Make sure `convex dev` is running or provide the deployment URL in your environment."),pE.render(x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#f7f6f3] text-neutral-900",children:x.jsxs("div",{className:"max-w-lg space-y-4 rounded-lg border border-neutral-200 bg-white p-8 shadow-sm",children:[x.jsx("h1",{className:"text-xl font-semibold",children:"Configuration required"}),x.jsxs("p",{className:"text-sm text-neutral-600",children:["The application cannot connect to Convex because the ",x.jsx("code",{className:"rounded bg-neutral-100 px-1 py-0.5",children:"VITE_CONVEX_URL"}),"environment variable is missing. Start the backend with ",x.jsx("code",{className:"rounded bg-neutral-100 px-1 py-0.5",children:"convex dev"})," or set the URL in a",x.jsx("code",{className:"rounded bg-neutral-100 px-1 py-0.5",children:".env.local"})," file."]}),x.jsx("p",{className:"text-sm text-neutral-600",children:"Once configured, restart the development server to continue."})]})}));else{const n=new QM(mE);pE.render(x.jsx(T.StrictMode,{children:x.jsx(yO,{client:n,children:x.jsx(X8,{})})}))}
